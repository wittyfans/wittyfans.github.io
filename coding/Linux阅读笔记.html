<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Linux,coding,shell," />





  <link rel="alternate" href="/atom.xml" title="wittyfans" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="鸟哥的Linux私房菜阅读笔记，截取了重要的概念与常用的命令。">
<meta name="keywords" content="Linux,coding,shell">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux阅读笔记">
<meta property="og:url" content="http://wittyfans.com/coding/Linux阅读笔记.html">
<meta property="og:site_name" content="wittyfans">
<meta property="og:description" content="鸟哥的Linux私房菜阅读笔记，截取了重要的概念与常用的命令。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://wittyfans.com/images/14590056997684.jpg">
<meta property="og:image" content="http://wittyfans.com/images/14807437718754.jpg">
<meta property="og:updated_time" content="2018-03-18T13:19:29.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux阅读笔记">
<meta name="twitter:description" content="鸟哥的Linux私房菜阅读笔记，截取了重要的概念与常用的命令。">
<meta name="twitter:image" content="http://wittyfans.com/images/14590056997684.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wittyfans.com/coding/Linux阅读笔记.html"/>





  <title> Linux阅读笔记 | wittyfans </title>
  <script type="text/javascript" src="/js/src/love.js"></script>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">wittyfans</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">学则不固,知则不惑</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://wittyfans.com/coding/Linux阅读笔记.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="wittyfans">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="wittyfans">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="wittyfans" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Linux阅读笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-18T21:17:51+08:00">
                2018-03-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/coding/" itemprop="url" rel="index">
                    <span itemprop="name">coding</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          
             <span id="/coding/Linux阅读笔记.html" class="leancloud_visitors" data-flag-title="Linux阅读笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
               <span>℃</span>
              </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>鸟哥的Linux私房菜阅读笔记，截取了重要的概念与常用的命令。</p>
</blockquote>
<a id="more"></a>
<h1 id="按下开机键后发生了什么？"><a href="#按下开机键后发生了什么？" class="headerlink" title="按下开机键后发生了什么？"></a>按下开机键后发生了什么？</h1><ol>
<li>按下开机键<br>BIOS 步骤：<br>计算机从主板的 BIOS(Basic Input/Output System) 中读取存储的程序</li>
<li>MBR 步骤：<br>该程序从存储设备中读取起始的 512 字节数据（称为主引导记录 Master Boot Record, MBR）</li>
<li>Boot Loader 步骤：MBR 告诉计算机从哪个分区(Partition)来载入引导加载程序(Boot Loader)，Boot Loader 保存了操作系统的相关信息</li>
<li>Kernel 步骤：Boot Loader 根据所存储的信息加载内核(Kernel)，内核主要的任务是管理计算机的硬件资源</li>
<li>Init 步骤：内核会为自己预留内存空间，然后进行硬件检测，之后启动 init 进程（1 号进程），之后的操作会由 init 进程来接管<br>初始化脚本步骤：如果没有进入单用户模式，就会为操作系统启动做各种初始化工作，包括计算机基本信息、文件系统、硬盘、清理临时文件、设置网络等等</li>
<li>登录步骤：操作系统准备好之后，我们就可以用用户名和密码登录到计算机中，我们成为了一个用户，属于某个用户组</li>
</ol>
<h1 id="终端与仿真器"><a href="#终端与仿真器" class="headerlink" title="终端与仿真器"></a>终端与仿真器</h1><p>在大型机时代，终端是一个硬件设备，用来进行输入输出，而随着计算机硬件的发展，终端已经慢慢从实体变成了一个概念。现在的终端已经变成了一种软件层面的模拟，所以可以这样理解，现代计算中的终端是一个用软件仿真的终端，我们在这上面输入输出的命令会传给具体执行这些命令的 shell 程序，再由 shell 程序执行对应的系统调用。重要的事情说三遍：终端不是 shell，终端不是 shell，终端不是 shell。</p>
<h1 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h1><ul>
<li>文件系统是一个树结构，树的根就是我们常常能看到的根目录 /。</li>
<li>对于目录来说，里面至少会包含两个条目：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">. 当前目录</span><br><span class="line">.. 指向上级目录</span><br></pre></td></tr></table></figure>
<ul>
<li>当一个文件被放入到目录中，实际上就是建立了一个到该文件的硬链接(hard link)，当对这个文件的硬链接数目为零的时候，文件实际上就被删除了。不过现在基本都使用软链接(soft link)，类似于 windows 中的快捷方式，不会影响链接数目。</li>
</ul>
<h2 id="文件系统的实现"><a href="#文件系统的实现" class="headerlink" title="文件系统的实现"></a>文件系统的实现</h2><p>存储设备的前 512 字节是 MBR，用于开机启动，剩余的空间可能会被分为多个分区(partition)，每个分区有对应的分区表(partition table)来记录分区的相关信息（比如起始位置和分区大小）。需要注意的是，分区表并不保存在该分区中，不然万一分区挂了，连最关键的分区表都找不到了。<br>看一张图：</p>
<p><img src="http://wittyfans.com/images/14590056997684.jpg" alt="文件系统的实现"></p>
<p>Boot block 是为计算机启动而准备的，在 MBR 指定启动分区之后，就会把 Boot block 部分的程序读入内存执行。为了方便管理，即使该分区没有操作系统，仍然会预留 Boot block<br>Super block 存储文件系统的信息，比如类型、inode 数目和数据块的数目<br>inodes 是文件存储的关键，每个文件对应一个 inode，inode 中包含指向具体数据的指针，读取的时候根据这些指针进行数据读取即可<br>Data blocks 就是具体的数据了，我们通过 inode 中的指针来进行访问</p>
<h2 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h2><ul>
<li>读取 Read: 获取数据</li>
<li>写入 Write: 创建新文件或在旧文件中写入数据</li>
<li>运行 Execute: 文件是可执行的二进制代码，那么会被载入内存进行执行</li>
<li>每一个文件都有三种权限，对应三种用户的读、写、可执行权限，例：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--  1 wittyfans  staff  0 Feb  3 20:24 HelloWord.txt</span><br></pre></td></tr></table></figure>
<ul>
<li>解释如下：<ul>
<li>第一个字符，如果是 - 表示常规文件，如果是 d 表示目录</li>
<li>当为[ d ]则是目录，例如上表文件名为“.config”的那一行；</li>
<li>当为[ - ]则是文件，例如上表文件名为“initial-setup-ks.cfg”那一行；</li>
<li>若是[ l ]则表示为链接文件（link file）；</li>
<li>若是[ b ]则表示为设备文件里面的可供储存的周边设备（可随机存取设备）；</li>
<li>若是[ c ]则表示为设备文件里面的序列埠设备，例如键盘、鼠标（一次性读取设</li>
<li>备）。</li>
<li>后面的九个字符表示 所有者, 群组 和 其他人 的权限</li>
<li>rwx 分别代表读取、写入和执行，如果是 - 则表示没有对应的权限</li>
<li>第二列的数字是 hard link 的数目</li>
<li>第三、四列是所属的用户和用户所在的用户组</li>
<li>第五列是文件大小，单位是字节 byte</li>
<li>最后的是上一次写入的时间</li>
</ul>
</li>
</ul>
<h2 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a>修改权限</h2><p>用于群组、拥有者、各种身份的权限之修改的指令：</p>
<ul>
<li>chgrp ：改变文件所属群组</li>
<li>chown ：改变文件拥有者</li>
<li>chmod ：改变文件的权限, SUID, SGID, SBIT等等的特性</li>
<li>改变所属群组, chgrp</li>
</ul>
<p>改变群组的命令，这个群组必须要存在才可以，否则会失败，改变用户的命令同理<br>对于chmod命令，如果要连目录下的所有次目录或文件同时更改文件拥有者的话，直接加上 -R 的选项<br>如果用root用户复制一个文件给其他的用户，默认会复制所有的权限属性，所以复制完了之后需要更改权限</p>
<h3 id="用数字类型改变文件权限"><a href="#用数字类型改变文件权限" class="headerlink" title="用数字类型改变文件权限"></a>用数字类型改变文件权限</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">owner = rwx = 4+2+1 = 7 &gt; group = rwx = 4+2+1 = 7 &gt; others= --- = 0+0+0 = 0</span><br><span class="line">chmod 770 filename</span><br></pre></td></tr></table></figure>
<h3 id="符号类型改变文件权限"><a href="#符号类型改变文件权限" class="headerlink" title="符号类型改变文件权限"></a>符号类型改变文件权限</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod u=rwx,go=rx .bashrc</span><br><span class="line">chmod u=rwx,g=rx,o=r filename</span><br><span class="line"></span><br><span class="line">u = user</span><br><span class="line">g/o = group与others</span><br></pre></td></tr></table></figure>
<p>也可以直接再原来的权限上增加或者删除权限，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+w filename</span><br></pre></td></tr></table></figure>
<p>给a(所有人)增加写权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a-x filename</span><br></pre></td></tr></table></figure>
<h2 id="文件和目录权限的不同"><a href="#文件和目录权限的不同" class="headerlink" title="文件和目录权限的不同"></a>文件和目录权限的不同</h2><p>对于文件：<br>r （read）：可读取此一文件的实际内容，如读取文本文件的文字内容等；<br>w （write）：可以编辑、新增或者是修改该文件的内容（但不含删除该文件）；可执行在windows中由扩展名决定，而linux中由x这个权限来控制。<br>x （eXecute）：该文件具有可以被系统执行的权限。</p>
<p>对于目录：<br>目录主要的内容在记录文件名清单，所以：</p>
<p><strong>r （read contents in directory）：</strong></p>
<p>表示具有读取目录结构清单的权限，所以当你具有读取（r）一个目录的权限时，表示你<br>可以查询该目录下的文件名数据。 所以你就可以利用 ls 这个指令将该目录的内容列表显示出来！</p>
<p><strong>w （modify contents of directory）：</strong></p>
<p>这个可写入的权限对目录来说，是很了不起的！ 因为他表示你具有异动该目录结构清单<br>的权限，也就是下面这些权限：<br>创建新的文件与目录；<br>删除已经存在的文件与目录（不论该文件的权限为何！）<br>将已存在的文件或目录进行更名；<br>搬移该目录内的文件、目录位置。 总之，目录的w权限就与该目录下面的文件名异<br>动有关就对了啦！</p>
<p><strong>x （access directory）：</strong></p>
<p>咦！目录的执行权限有啥用途啊？目录只是记录文件名而已，总不能拿来执行吧？没<br>错！目录不可以被执行，目录的x代表的是使用者能否进入该目录成为工作目录的用途！<br>所谓的工作目录（work directory）就是你目前所在的目录啦！举例来说，当你登陆Linux<br>时， 你所在的主文件夹就是你当下的工作目录。而变换目录的指令是“cd”（change<br>directory）啰！</p>
<p>若A对X的目录是rwx，x下面有一个y目录，A对y的权限是—，因为y是x的子目录，A可以删除这个目录，但不可以读写或者执行。</p>
<h2 id="文件系统常用操作"><a href="#文件系统常用操作" class="headerlink" title="文件系统常用操作"></a>文件系统常用操作</h2><p>###　复制 cp<br>选项与参数：</p>
<ul>
<li>-a ：相当于 -dr –preserve=all 的意思，至于 dr 请参考下列说明；（常用）</li>
<li>-d ：若来源文件为链接文件的属性（link file），则复制链接文件属性而非文件本身；</li>
<li>-f ：为强制（force）的意思，若目标文件已经存在且无法打开，则移除后再尝试一次；</li>
<li>-i ：若目标文件（destination）已经存在时，在覆盖时会先询问动作的进行（常用）</li>
<li>-l ：进行硬式链接（hard link）的链接文件创建，而非复制文件本身；</li>
<li>-p ：连同文件的属性（权限、用户、时间）一起复制过去，而非使用默认属性（备份常用）；</li>
<li>-r ：递回持续复制，用于目录的复制行为；（常用）</li>
<li>-s ：复制成为符号链接文件 （symbolic link），亦即“捷径”文件；</li>
<li>-u ：destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制。</li>
<li>–preserve=all ：除了 -p 的权限相关参数外，还加入 SELinux 的属性, links, xattr 等也复制了。</li>
<li>最后需要注意的，如果来源文件有两个以上，则最后一个目的文件一定要是“目录”才行！</li>
</ul>
<h3 id="移动-mv"><a href="#移动-mv" class="headerlink" title="移动 mv"></a>移动 mv</h3><ul>
<li>-f ：force 强制的意思，如果目标文件已经存在，不会询问而直接覆盖；</li>
<li>-i ：若目标文件 （destination） 已经存在时，就会询问是否覆盖！</li>
<li>-u ：若目标文件已经存在，且 source 比较新，才会更新 （update）</li>
</ul>
<h3 id="删除-rm"><a href="#删除-rm" class="headerlink" title="删除 rm"></a>删除 rm</h3><ul>
<li>-f ：就是 force 的意思，忽略不存在的文件，不会出现警告讯息；</li>
<li>-i ：互动模式，在删除前会询问使用者是否动作</li>
<li>-r ：递回删除啊！最常用在目录的删除了！这是非常危险的选项！！！</li>
</ul>
<h3 id="文件内容查阅"><a href="#文件内容查阅" class="headerlink" title="文件内容查阅"></a>文件内容查阅</h3><ul>
<li>cat 由第一行开始显示文件内容（Concatenate）<ul>
<li>-A ：相当于 -vET 的整合选项，可列出一些特殊字符而不是空白而已；</li>
<li>-b ：列出行号，仅针对非空白行做行号显示，空白行不标行号！</li>
<li>-E ：将结尾的断行字符 $ 显示出来；</li>
<li>-n ：打印出行号，连同空白行也会有行号，与 -b 的选项不同；</li>
<li>-T ：将 [tab] 按键以 ^I 显示出来；</li>
<li>-v ：列出一些看不出来的特殊字符</li>
</ul>
</li>
<li>tac 从最后一行开始显示，可以看出 tac 是 cat 的倒着写！</li>
<li>nl 显示的时候，顺道输出行号！<ul>
<li>-b ：指定行号指定的方式，主要有两种：</li>
<li>-b a ：表示不论是否为空行，也同样列出行号（类似 cat -n）；</li>
<li>-b t ：如果有空行，空的那一行不要列出行号（默认值）；</li>
<li>-n ：列出行号表示的方法，主要有三种：</li>
<li>-n ln ：行号在屏幕的最左方显示；</li>
<li>-n rn ：行号在自己字段的最右方显示，且不加 0 ；</li>
<li>-n rz ：行号在自己字段的最右方显示，且加 0 ；</li>
<li>-w ：行号字段的占用的字符数。</li>
</ul>
</li>
<li>more 一页一页的显示文件内容（快捷键如下）<ul>
<li>空白键 （space）：代表向下翻一页；</li>
<li>Enter ：代表向下翻“一行”；</li>
<li>/字串 ：代表在这个显示的内容当中，向下搜寻“字串”这个关键字，搜了之后按n往下面匹配；</li>
<li>:f ：立刻显示出文件名以及目前显示的行数；</li>
<li>q ：代表立刻离开 more ，不再显示该文件内容。</li>
<li>b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用。</li>
</ul>
</li>
<li>less 与 more 类似，但是比 more 更好的是，他可以往前翻页！（使用pageup和pagedn）<ul>
<li>空白键 ：向下翻动一页；</li>
<li>[pagedown]：向下翻动一页；</li>
<li>[pageup] ：向上翻动一页；</li>
<li>/字串 ：向下搜寻“字串”的功能；</li>
<li>?字串 ：向上搜寻“字串”的功能；</li>
<li>n ：重复前一个搜寻 （与 / 或 ? 有关！）</li>
<li>N ：反向的重复前一个搜寻 （与 / 或 ? 有关！）</li>
<li>g ：前进到这个数据的第一行去；</li>
<li>G ：前进到这个数据的最后一行去 （注意大小写）；</li>
</ul>
</li>
</ul>
<h3 id="取文件的数据"><a href="#取文件的数据" class="headerlink" title="取文件的数据"></a>取文件的数据</h3><ul>
<li>head 只看头几行<ul>
<li>若没有加上 -n 这个选项时，默认只显示十行，若只要一行呢？那就加入“head -n 1 filename ”即可！</li>
<li>-n -100时，代表列前的所有行数， 但不包括后面100行。</li>
</ul>
</li>
<li>tail 只看尾巴几行<ul>
<li>“tail -n +100/etc/man_db.conf” 代表该文件从100行以后都会被列出</li>
</ul>
</li>
<li>od 以二进制的方式读取文件内容！<ul>
<li>-t ：后面可以接各种“类型 （TYPE）”的输出，例如：<ul>
<li>a ：利用默认的字符来输出；</li>
<li>c ：使用 ASCII 字符来输出</li>
<li>d[size] ：利用十进制（decimal）来输出数据，每个整数占用 size Bytes ；</li>
<li>f[size] ：利用浮点数值（floating）来输出数据，每个数占用 size Bytes ；</li>
<li>o[size] ：利用八进位（octal）来输出数据，每个整数占用 size Bytes ；</li>
<li>x[size] ：利用十六进制（hexadecimal）来输出数据，每个整数占用 size Bytes ；</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>例如：我不想找 google，想要立刻找到 password 这几个字的 ASCII 对照，该如何通过 od<br>来判断？答：其实可以通过刚刚上一个小节谈到的管线命令来处理！如下所示： echo<br>password | od -t oCc echo 可以在屏幕上面显示任何信息，而这个信息不由屏幕输出，而是传<br>给 od 去继续处理！就可以得到 ASCII code 对照啰！</p>
<h3 id="修改文件时间、创建新文件"><a href="#修改文件时间、创建新文件" class="headerlink" title="修改文件时间、创建新文件"></a>修改文件时间、创建新文件</h3><p>查看时间按的时候主要有三个时间，mtime、ctime、atime，即修改时间，状态改变的时间，内容上次取用时间。<br>touch命令：<br>-a ：仅修订 access time；<br>-c ：仅修改文件的时间，若该文件不存在则不创建新文件；<br>-d ：后面可以接欲修订的日期而不用目前的日期，也可以使用 –date=”日期或时间”<br>-m ：仅修改 mtime ；<br>-t ：后面可以接欲修订的时间而不用目前的时间，格式为[YYYYMMDDhhmm]</p>
<h3 id="文件与目录的默认权限与隐藏权限"><a href="#文件与目录的默认权限与隐藏权限" class="headerlink" title="文件与目录的默认权限与隐藏权限"></a>文件与目录的默认权限与隐藏权限</h3><p>使用umask 指定 “目前使用者在创建文件或目录时候的权限默认值“<br>查阅的方式有两种，</p>
<ul>
<li>一种可以直接输入 umask ，就可以看到数字体态的权限设置分数， </li>
<li>一种则是加入 -S （Symbolic） 这个选项，就会以符号类型的方式来显示出权限了！</li>
</ul>
<h3 id="file命令"><a href="#file命令" class="headerlink" title="file命令"></a>file命令</h3><p>File 命令可以用来查看某个文件的类型</p>
<ul>
<li>每个 filesystem 都有独立的 inode / block / superblock 等信息，这个文件系统要能够链接到目 录树才能被我们使用。 将文件系统与目录树结合的动作我们称为“挂载”。</li>
<li>文件名只与目录有关，但是文件内容则与 inode</li>
<li>多个文件名对应到同一个 inode,即Hard-link</li>
</ul>
<h2 id="关于PATH"><a href="#关于PATH" class="headerlink" title="关于PATH"></a>关于PATH</h2><p>将一些常用的路径添加到PATH后，就可以直接再任何目录下执行该命令，而不必使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/xxx</span><br></pre></td></tr></table></figure>
<p>的格式了。将命令添加到PATH的命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=&quot;$&#123;PATH&#125;:/root&quot;</span><br></pre></td></tr></table></figure>
<p>某些情况下，即使你已经将 ls 搬回 /bin 了，不过系统还是会告知你无法处理 /root/ls。很<br>可能是因为指令参数被高速缓存的关系。 不要紧张，只要登出 （exit） 再登陆 （su -） 就可<br>以继续快乐的使用 ls 了！</p>
<h1 id="管道与流"><a href="#管道与流" class="headerlink" title="管道与流"></a>管道与流</h1><p>Linux 在执行程序的时候，会自动打开三个流：</p>
<ul>
<li>标准输入(Standard Input)</li>
<li>标准输出(Standard Output)</li>
<li>标准错误(Standard Error)</li>
</ul>
<p>比如我们想要把一个命令的输出变成另外一个程序的输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat hello.txt | wc -w</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<h1 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h1><ul>
<li>最基础的操作是指令，一堆指令在一起就是程序，而进程就是程序的具体实现，也就是把程序载入到内存中并执行的过程。</li>
<li>操作系统的重要功能之一便是对进程进行从摇篮（分配内存空间）到坟墓（回收）的管理。</li>
</ul>
<p><img src="http://wittyfans.com/images/14807437718754.jpg" alt="ps -eo pid,comm,cmd（列出全部进程并展示 pid, command 和 cmd 信息）"></p>
<ul>
<li>第一列是 pid，相当于身份证号；</li>
<li>第二列是进程的简称；</li>
<li>第三列是进程启动时候的命令。</li>
<li>如果我们往上滚动，就会找到这样的一行 1 init /sbin/init，这个就是内核建立的唯一一个进程了，剩下的进程都是 init 通过 fork 方式创建的，也就是说，所有的其他进程都是 init 的子进程。</li>
<li>父子进程：子进程终结的时候会通知父进程进行内存空间的回收，而如果父进程比子进程还早终结，那么这个子进程就会被过继给 init 进程，并由 init 进程通过调用 wait 函数进行回收。如果无法正确回收，那么这个子进程就成为了僵尸进程，所占据的内存空间就无法被访问了。</li>
<li>进程组(process group)：每个进程组中有多个进程，进程组的 pid 由进程组 leader 的 pid 决定。而多个进程组还可以组成一个会话(session)，会话使得前台和后台程序得以展示出来。当我们创建了多个终端窗口，实际上就创建了多个会话，每个会话都有其前台和后台进程。<h2 id="进程间的通信"><a href="#进程间的通信" class="headerlink" title="进程间的通信"></a>进程间的通信</h2></li>
<li>进程间用信号交流，所谓信号就是一个整数，一个由进程 A 发送给进程 B 的整数。因为一个整数所能携带的信息量有限，所以一般用于系统管理。</li>
<li>信号的传递机制也很简单，由内核，或者由其他进程经由内核往目标进程发送信号，实际上是在该进程对应的表中写入信号。当进程执行完系统调用退出内核的时候，就会查看这个信号，然后根据信号的不同执行不同的操作。</li>
</ul>
<p>具体什么整数表示什么意思可以通过 man 7 signal 来查看，常见的有：</p>
<ul>
<li>SIGINT: 当键盘按下 CTRL+C 从 shell 中发出信号，信号被传递给 shell 中前台运行的进程，对应该信号的默认操作是中断(INTERRUPT)该进程</li>
<li>SIGQUIT: 当键盘按下 CTRL+\ 从 shell 中发出信号，信号被传递给 shell 中前台运行的进程，对应该信号的默认操作是退出(QUIT)该进程</li>
<li>SIGTSTP: 当键盘按下 CTRL+Z 从 shell 中发出信号，信号被传递给 shell 中前台运行的进程，对应该信号的默认操作是暂停(STOP)该进程</li>
<li>SIGCONT: 用于通知暂停的进程继续</li>
<li>SIGALRM: 起到定时器的作用，通常是程序在一定的时间之后才生成该信号</li>
</ul>
<p>上面的介绍说『默认』操作，那么也就意味着我们是可以采取其他操作的，比方说直接无视掉，或者执行我们自定义的操作。</p>
<p>除了信号，消息队列(message queue)和共享内存(shared memory)也可以在进程间进行信息共享。不过因为这种机制比较复杂，尤其是涉及到同步的问题，所以在使用的时候需要多加注意。</p>
<h1 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h1><h2 id="HelloWord"><a href="#HelloWord" class="headerlink" title="HelloWord"></a>HelloWord</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;Hello World! This is wittyfans.&quot;</span><br><span class="line"># 显示时间</span><br><span class="line">echo &quot;Today is: &quot; $(date)</span><br></pre></td></tr></table></figure>
<ul>
<li>第一行叫 shebang，用来告知系统如何执行该脚本，这句话的意思就是说要用 /bin/bash 这个程序来跑这段代码。有意思的是，这一句也可以带参数，如果我们想开启调试功能，可以把第一句改为 #!/bin/bash -xv 即可</li>
<li>用 # 表示这个符号之后同一行是注释</li>
<li>每一句指令用换行或分号隔开</li>
<li>可以用 echo 命令来输出字符串，默认添加一个换行符</li>
<li>可以用 date 命令来获取当前的时间</li>
<li>如果想在一条指令里插入另一条指令，可以把另一条指令用 $() 包住（就像 date 那样）</li>
</ul>
<h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><ul>
<li>Tab 能够自动补全，从命令名称到文件夹到路径，多按两下还能出个列表方便我们输入，是居家旅行必备操作，如果只能记住一个快捷键，那么记住 Tab 即可</li>
<li>Ctrl+R 用来搜索，按下之后就可以输入搜索的关键词，再按一次 Ctrl+R 可以切换到下一个匹配的结果，如果找到合适的，按下 Enter 就可以执行，按下 → 会把查询结果放到当前行，我们可以进行编辑</li>
<li>Ctrl+W 删除该行最后一个单词，至于怎么定义一个单词呢？常见的分隔符有 空格, _, ,, :, - 等等（基本上不是字母和数字就可以认为是分隔符）</li>
<li>Ctrl+U 删除整行</li>
<li>Ctrl+A 将光标移到行首</li>
<li>Ctrl+E 将光标移到行尾</li>
<li>Ctrl+K 删除从光标处到行尾的所有内容</li>
<li>Ctrl+L 清屏</li>
<li>输入 history 可以查看命令行的历史</li>
<li>输入 !$ 查看最后输入的参数</li>
<li>输入 !! 查看上一条命令</li>
<li>输入 cd - 可以回到上一个工作路径</li>
<li>如果想要设定 bash 的提示文本，需要修改 ~/.bashrc 中的 PS1 环境变量</li>
<li>好！了解了这些我们就可以继续旅程了，我们就从前面出现的 echo 命令说起吧！</li>
</ul>
<h2 id="打印文本"><a href="#打印文本" class="headerlink" title="打印文本"></a>打印文本</h2><h3 id="Echo"><a href="#Echo" class="headerlink" title="Echo"></a>Echo</h3><p>前面我们输出字符串时，用的命令是 echo “Hello World! This is wittyfans.”，其中字符串是用双引号包住的，但其实不带双引号，或者用单引号也可以完成这样的效果，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ echo Hello World</span><br><span class="line">Hello World</span><br><span class="line">$ echo &apos;Hello World&apos;</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>
<p>那么问题来了，这三种用什么区别呢？</p>
<ul>
<li>不带引号的 echo 没办法显示 ;，因为分号是用来分隔命令的<br>使用单引号 echo 不会对命令中的变量求值，只按照原样显示（变量会在下一节说明，这里简单有个概念即可）</li>
<li>使用双引号 echo 有些值需要进行转义（使用 \），比方说感叹号<br>printf</li>
</ul>
<p>除了 echo 命令，我们其实还可以用 printf 命令来进行格式化输出，不过需要注意的是这里我们需要自己添加换行符，我们在前面的脚本文件中添加如下三行:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">printf &quot;%-5s %-10s %4s\n&quot; No. Name Score</span><br><span class="line">printf &quot;%-5s %-10s %4.2f\n&quot; 1 wittyfans 99.9999</span><br><span class="line">printf &quot;%-5s %-10s %4.2f\n&quot; 43 dawang 66.6566</span><br></pre></td></tr></table></figure>
<p>然后我们再执行一下，结果是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ./hw.sh</span><br><span class="line">Hello World! This is wittyfans.</span><br><span class="line">Today is:  Tue Aug 2 16:58:16 CST 2016</span><br><span class="line">No.   Name       Score</span><br><span class="line">1     wittyfans     100.00</span><br><span class="line">43    dawang     66.66</span><br></pre></td></tr></table></figure>
<p>这里能学到的套路是什么呢？</p>
<ul>
<li>%s, %c, %d, %f 是格式替代符，就是和 C 语言一样的方式</li>
<li>%-5s 指明了一个左对齐且宽度为 5 的字符串，如果内容不足 5 个字符，则会以空格填充</li>
<li>%4.2f 表示保留两位小数可以看到是默认四舍五入的</li>
<li>最后要加上 \n 才能正确换行</li>
</ul>
<h3 id="cat-head-tail-uniq-cut"><a href="#cat-head-tail-uniq-cut" class="headerlink" title="cat, head, tail, uniq, cut"></a>cat, head, tail, uniq, cut</h3><p>打印文本常用的命令还有 cat, head, tail, uniq, cut，这里主要针对文件的输出，我们先创建一个文本文件 sample.txt，其内容为</p>
<ul>
<li>1 hohoho .yo</li>
<li>1 hohoho .max</li>
<li>2 ohohoh .I</li>
<li>2 ohohoh .I</li>
<li>3 hahaha .want</li>
<li>4 ahahah .to</li>
<li>5 wowwow .see</li>
<li>6 mummum .you</li>
</ul>
<p>接下来给出几个简单的实例，具体命令的用法，可以使用 man command 来进行查询，或者用 TLDR 命令来查询（我更推荐后者）</p>
<ul>
<li>打印文件内容 cat sample.txt</li>
<li>打印后 4 行 tail -n 4 sample.txt</li>
<li>打印头 4 行 head -n 4 sample.txt</li>
<li>忽略重复的行 uniq sample.txt</li>
<li>显示重复的行 uniq -d sample.txt</li>
<li>打印每行 . 之前的内容 cut -d ‘.’ -f 1 sample.txt</li>
</ul>
<h2 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>首先要了解的是环境变量，我们可以通过 env 命令查看系统当前的环境变量，也就是那些不需要在脚本中显式声明就可以直接使用的变量。和之前一样，我们先来看一个例子，在之前的脚本中加入下面几行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#export 设置环境变量，在该 shell 脚本执行阶段有效</span><br><span class="line">export MY_WEB=http://www.wittyfans.com</span><br><span class="line">echo &quot;My home is $HOME&quot;</span><br><span class="line">web=&quot;wittyfans.com&quot;</span><br><span class="line">echo &quot;My website is $&#123;web&#125;&quot;</span><br><span class="line">echo &apos;This is not $MY_WEB&apos;</span><br><span class="line">echo $&#123;web/com/cn&#125;</span><br><span class="line">echo &quot;上一个程序的返回值: $?&quot;</span><br><span class="line">echo &quot;脚本的 PID: $$&quot;</span><br><span class="line">echo &quot;参数个数: $#&quot;</span><br><span class="line">echo &quot;脚本参数: $@&quot;</span><br><span class="line">echo &quot;分隔好的脚本参数 第一个:$1 第二个:$2&quot;</span><br></pre></td></tr></table></figure>
<p>我们执行的时候带两个参数试试看 ./hw.sh hello world，结果为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ ./hw.sh hello world</span><br><span class="line">#前面部分省略</span><br><span class="line">#..........</span><br><span class="line">My home is /Users/dawang</span><br><span class="line">My website is wittyfans.com</span><br><span class="line">This is not $MY_WEB</span><br><span class="line">Wittfyans.com</span><br><span class="line">上一个程序的返回值: 0</span><br><span class="line">脚本的 PID: 9782</span><br><span class="line">参数个数: 2</span><br><span class="line">脚本参数: hello world</span><br><span class="line">分隔好的脚本参数 第一个:hello 第二个:world</span><br></pre></td></tr></table></figure>
<ul>
<li>变量声明 web=”wittyfans.com” 即可</li>
<li>使用变量的时候需要加上 $ 或者 ${}，我更推荐后者，看起来更清晰</li>
<li>单引号不会展开变量，参考 echo ‘This is not $MY_WEB’</li>
<li>在变量内部进行字符串替换 echo ${web/com/cn} 就可以把原来的 wittyfans.com 中的 com 换成 cn</li>
<li>内置的参数很好用，具体可以参考脚本中的内容（已经很详细）</li>
<li>环境变量中比较常用的有 HOME, PWD, USER, UID, SHELL</li>
</ul>
<p>下面再给出一些常见的用法</p>
<ul>
<li>获得字符串长度可以在变量前加 #</li>
<li>识别当前 shell 可以用 echo $SHELL 或 echo $0</li>
<li>检测是否是超级用户可以通过 $UID 的值判断，如果是超级用户，UID 应为 0</li>
<li>数组</li>
</ul>
<p>Bash 支持普通数组（下标是整数）和关联数组（下标是字符串，类似 Map），我们直接上脚本代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 定义数组</span><br><span class="line">iarray=(1 2 3 4 5 6 7)</span><br><span class="line">iiarray=(&quot;one&quot; &quot;two&quot; &quot;three&quot;)</span><br><span class="line">echo $&#123;iarray[0]&#125;</span><br><span class="line">echo $&#123;iiarray[2]&#125;</span><br><span class="line"># 打印所有值</span><br><span class="line">echo $&#123;iiarray[*]&#125;</span><br><span class="line"># 还是打印所有值</span><br><span class="line">echo $&#123;iiarray[@]&#125;</span><br></pre></td></tr></table></figure>
<p>打印数组长度只需要在数组变量前加 # 符号。关联数组因为需要 Bash 4.0 以上，这里暂时略过。</p>
<h3 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h3><p>通常我们使用 let, (( )) 和 [ ] 来执行基本的算术操作，使用 expr 和 br 来进行高级操作。老规矩，先看脚本代码，在 hw.sh 中添加下面几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">class1=33</span><br><span class="line">class2=44</span><br><span class="line">let total=class1+class2</span><br><span class="line">echo $total</span><br><span class="line">let class1++</span><br><span class="line">let class2--</span><br><span class="line">total=$[ $class1 + class2 ]</span><br><span class="line">echo $total</span><br><span class="line">echo &quot;4 * 3.45&quot; | bc</span><br></pre></td></tr></table></figure>
<p>执行结果为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ./hw.sh hello world</span><br><span class="line"># 前面部分省略</span><br><span class="line"># ..........</span><br><span class="line">77</span><br><span class="line">77</span><br><span class="line">13.80</span><br></pre></td></tr></table></figure>
<p>这里我们可以简单了解</p>
<ul>
<li>let 之后变量名不需要加 $</li>
<li>[] 中的变量可以加 $，也可以不加</li>
<li>let 及 expr 仅支持整数</li>
<li>bc 支持浮点数，可以通过 stdin 来传给 bc（就是 | 符号）</li>
</ul>
<h3 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h3><p>这部分我们需要记住三个数字</p>
<ul>
<li>0 - stdin 标准输入</li>
<li>1 - stdout 标准输出</li>
<li>2 - stderr 标准错误<br>重定向输出所用符号是 &gt; 和 &gt;&gt;，其中 &gt; 会清空文件，而 &gt;&gt; 则是追加。那前面的三个数字在哪里呢？其实 &gt; 相当于 1&gt;，&gt;&gt; 相当于 1&gt;&gt;</li>
</ul>
<p>然后我们来看看标准错误输出，一般来说有两种处理方式，一种是和标准输出重定向到一起，那么通过 command &gt; output.txt 2&gt;&amp;1 或 cmd &amp;&gt; output.txt 即可；另一种则是分开两个文件，那么使用 command 2&gt;stderr.txt 1&gt;stdout.txt 即可；如果不想保存任何标准错误输出（甚至都不想在终端中见到），可以 command 2&gt;/dev/null，这里的 /dev/null 是一个特殊的设备文件，接收到的任何数据都会被丢弃。</p>
<p>标准输入的用法和输出类似，这里不再赘述。另外如果需要把标准输出通过管道运到两个不同的地方时（| 只能重定向到一个地方），可以使用 tee 命令，不过这里暂时略过，留到之后的中级教程中介绍。</p>
<h3 id="条件流程"><a href="#条件流程" class="headerlink" title="条件流程"></a>条件流程</h3><p>比较常用的就是 if 的套路，格式为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition;</span><br><span class="line">then</span><br><span class="line">    commands;</span><br><span class="line">elif condition;</span><br><span class="line">then</span><br><span class="line">    commands;</span><br><span class="line">else</span><br><span class="line">    commands</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>如果觉得这样写太长，可以利用逻辑操作与短路原理来进行编写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 如果 condition 为真，则执行 action</span><br><span class="line">[ condition ] &amp;&amp; action;  </span><br><span class="line"># 如果 condition 为假，则执行 action</span><br><span class="line">[ condition ] || action;</span><br></pre></td></tr></table></figure>
<h3 id="算术比较"><a href="#算术比较" class="headerlink" title="算术比较"></a>算术比较</h3><p>条件通常被放置在封闭的中括号内，一定要注意 [ 和 ] 脸变有空格！如果我们需要进行算术比较，就需要使用如下的比较符号</p>
<ul>
<li>-gt 大于</li>
<li>-lt 小于</li>
<li>-ge 大于等于</li>
<li>-le 小于等于</li>
<li>-eq 等于</li>
<li>-ne 不等于</li>
<li>-a 逻辑与，例如 [ $var -ne 0 -a $var2 -gt 2 ]</li>
<li>-o 逻辑或，例如 [ $var -ne 0 -o $var2 -gt 2 ]</li>
</ul>
<p>一个实际的例子：检测是否是超级用户</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if [ $UID -ne 0 ]; then</span><br><span class="line">    echo &quot;你不是超级用户(root)，请以 root 身份运行&quot;</span><br><span class="line">else</span><br><span class="line">    echo &quot;当前是超级用户&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h3 id="文件系统测试"><a href="#文件系统测试" class="headerlink" title="文件系统测试"></a>文件系统测试</h3><p>有的时候我们可能需要对不同的文件进行一定的判断，下面是可以使用的比较方法：</p>
<ul>
<li>[ -f $file_var ] 如果给定的变量包含正常的文件路径或文件名，则返回真</li>
<li>[ -x $var ] 如果给定的变量包含的文件可执行，则返回真</li>
<li>[ -d $var ] 如果给定的变量包含的是目录，则返回真</li>
<li>[ -e $var ] 如果给定的变量包含的文件存在，则返回真</li>
<li>[ -c $var ] 如果给定的变量包含的是一个字符设备文件，则返回真</li>
<li>[ -b $var ] 如果给定的变量包含的是一个块设备文件的路径，则返回真</li>
<li>[ -w $var ] 如果给定的变量包含的文件可写，则返回真</li>
<li>[ -r $var ] 如果给定的变量包含的文件可读，则返回真</li>
<li>[ -L $var ] 如果给定的变量包含的是一个符号链接，则返回真</li>
</ul>
<h3 id="字符串比较"><a href="#字符串比较" class="headerlink" title="字符串比较"></a>字符串比较</h3><p>比较字符串的时候最好使用双中括号，比较的语法为：</p>
<ul>
<li>[[ $str1 = $str2 ]] 文本一样时返回真，注意 = 前后都必须有一个空格</li>
<li>[[ $str1 == $str2 ]] 文本一样时返回真，和上一个一样，只是写法不同</li>
<li>[[ $str1 != $str2 ]] 文本不一样时返回真</li>
<li>[[ $str1 &gt; $str2 ]] 如果 str1 的字母序比 str2 大，则返回真</li>
<li>[[ $str1 &lt; $str2 ]] 如果 str1 的字母序比 str2 小，则返回真</li>
<li>[[ -z $str1 ]] 如果 str1 是空字符串，则返回真</li>
<li>[[ -n $str1 ]] 如果 str1 是非空字符串，则返回真</li>
<li>可以通过 &amp;&amp; 和 || 来组合多个条件。如果不想写太多的方括号，那么可以用 test 命令，比如 [ $var -eq 0] 等价于 test $var -eq 0</li>
</ul>
<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>设定 IFS 变量即告诉 shell 脚本要以什么为分隔符，这里的 IFS 表示 Internal Field Separator。我们来看看下面一段脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data=&quot;class1,class2,class3,class4&quot;</span><br><span class="line">IFS=,</span><br><span class="line">for item in $data;</span><br><span class="line">do</span><br><span class="line">    echo Item: $item</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>输出为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Item: class1</span><br><span class="line">Item: class2</span><br><span class="line">Item: class3</span><br><span class="line">Item: class4</span><br></pre></td></tr></table></figure>
<p>这里因为指定了分隔符，所以会把字符串用 ,，分隔，然后就可以利用循环来输出了。前面的例子中我们看到了 for 循环，这里我们再来看一段 for 循环的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for i in &#123;a..z&#125;</span><br><span class="line">do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>这样就可以输出 a-z 了，当然也可以换成其他的，比如 {1..43}, {a..h}, {A..K} 等等</p>
<p>还可以使用类似 C 语言的 for 循环，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">for ((i=0; i&lt;10; i++))</span><br><span class="line">&#123;</span><br><span class="line">    echo $i</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外的循环有 while 和 until，其实是类似的，这里只给出格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># while 循环</span><br><span class="line">while condition # 如果 condition 为 true 则是无限循环</span><br><span class="line">do</span><br><span class="line">    commands</span><br><span class="line">done</span><br><span class="line"># until 循环</span><br><span class="line">until condition</span><br><span class="line">do</span><br><span class="line">    action</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>函数的定义和非常简单，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function foo()</span><br><span class="line">&#123;</span><br><span class="line">   echo &quot;Arguments work just like script arguments: $@&quot;</span><br><span class="line">   echo &quot;And: $1 $2...&quot;</span><br><span class="line">   echo &quot;This is a function&quot;</span><br><span class="line">   return 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以省略 function 关键词，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bar ()</span><br><span class="line">&#123;</span><br><span class="line">   echo &quot;Another way to declare functions!&quot;</span><br><span class="line">   return 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行的话，直接输入函数名即可，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo</span><br><span class="line">bar</span><br><span class="line">foo hello world</span><br></pre></td></tr></table></figure>
<h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><h3 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h3><p>简单来说，别名类似于网上很流行的短链接，只不过我们可以具体设定，比方说我每次写博客都需要进入到某个文件夹，那么我可以这么写 alias blog=”cd ~/Documents/Blog”，我想要快速发布博客时，可以这么写 alias post=”hexo g -d”。这之后我就可以直接用 blog 和 post 命令了，非常方便。</p>
<p>如果想要在每次打开新的 shell 进程时都能够使用这两个『新』命令，那么可以把前面两句写在 ~/.bashrc 或 ~/.bash_profile 中。</p>
<h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><p>Shell 脚本最强大的地方就是能够通过管道把不同的应用程序串起来，这样每个都完成一小部分工作，最终完成一个看起来很复杂的任务。大概的样子是这样的 $ command1 | command2 | command3</p>
<p>大家可以尝试一下这条命令 ls | cat -n</p>
<p>小结<br>本文我们从打印文本开始，见到了解了最基本的 Shell 脚本语法和 Bash 的基本操作。之后的系列文章会继续深入下去，用更多例子来进行讲解。</p>
<h1 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h1><h2 id="help"><a href="#help" class="headerlink" title="help"></a>help</h2><ul>
<li>–help：查看指令信息</li>
<li>man：查看帮助信息，其中第一个指令后面的数字有特殊意义<ul>
<li>1:使用者在shell环境中可以操作的指令或可可执行文件</li>
<li>5：配置文件或者是某些文件的格式</li>
<li>8: 系统管理员可用的管理指令<br>cal 显示日历</li>
</ul>
</li>
</ul>
<h2 id="man"><a href="#man" class="headerlink" title="man"></a>man</h2><p>基本上，man page大致分成下面这几个部分：<br>代号 内容 说明<br>NAME 简短的指令、数据名称说明<br>SYNOPSIS 简短的指令下达语法（syntax）简介<br>DESCRIPTION 较为完整的说明，这部分最好仔细看看！<br>OPTIONS 针对 SYNOPSIS 部分中，有列举的所有可用的选项说明<br>COMMANDS 当这个程序（软件）在执行的时候，可以在此程序（软件）中下达的<br>指令<br>FILES 这个程序或数据所使用或参考或链接到的某些文件<br>SEE ALSO 可以参考的，跟这个指令或数据有相关的其他说明！<br>EXAMPLE 一些可以参考的范例</p>
<p>man page中<br>利用 / 或 ? 来搜寻字串时，可以用 n 来继续下一个搜寻 （不论是 / 或 ?） ，<br>可以利用 N 来进行“反向”搜寻。举例来说，我以 /vbird 搜寻 vbird 字串， 那么<br>可以 n 继续往下查询，用 N 往上查询。若以 ?vbird 向上查询 vbird 字串， 那<br>我可以用 n 继续“向上”查询，用 N 反向查询。</p>
<p>man -f [指令]，寻找相关的指令帮助<br>man -k [指令]，寻找描述和名字中包含指令的帮助</p>
<h2 id="info"><a href="#info" class="headerlink" title="info"></a>info</h2><p>和man差不多，但info是文字模式的网页显示数据<br>按h显示info page页面下的快捷键<br>按n和p，u来去别的节点<br>按空格翻页<br>按q退出</p>
<h1 id="文本编辑"><a href="#文本编辑" class="headerlink" title="文本编辑"></a>文本编辑</h1><h2 id="nano"><a href="#nano" class="headerlink" title="nano"></a>nano</h2><p>nano 文件名 会直接创建一个文件<br>使用ctrl+x保存文件</p>
<h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><p>待完成</p>
<h1 id="正确的关机方法"><a href="#正确的关机方法" class="headerlink" title="正确的关机方法"></a>正确的关机方法</h1><ul>
<li>syne 命令可以让内存中的信息直接保存到硬盘中，防止数据丢失</li>
<li>shutdown/poweroff 关机</li>
<li>halt 进入系统停止的模式，屏幕可能会保留一些讯息，这与你的电源管理模式有关</li>
<li>poweroff 进入系统关机模式，直接关机没有提供电力喔！</li>
<li>reboot 直接重新开机</li>
<li>suspend 进入休眠模式</li>
</ul>
<h1 id="附录——常用命令"><a href="#附录——常用命令" class="headerlink" title="附录——常用命令"></a>附录——常用命令</h1><h2 id="压缩解压-tar"><a href="#压缩解压-tar" class="headerlink" title="压缩解压 tar"></a>压缩解压 tar</h2><p>如果要在服务器之间发送大量数据，肯定少不了压缩和解压这两步，但是 tar 这个命令的参数之多，让我很绝望，于是我发明了一个简单的记忆方法。</p>
<p>使用 tar 命令只要记得参数是『必选+自选+f』即可，我们先来看看『必选！五选一』:</p>
<ul>
<li>-c 意为 create，表示创建压缩包</li>
<li>-x 意为 extract，表示解压</li>
<li>-t 表示查看内容</li>
<li>-r 给压缩包追加文件</li>
<li>-u 意为 update，更新压缩包中的文件</li>
</ul>
<p>注意了，上面是一定要五选一的，不能一个都不选，也不能同时选俩。但是自选的部分就可以按照需要挑选了，比如：</p>
<ul>
<li>-z 使用 gzip 属性</li>
<li>-j 使用 bz2 属性</li>
<li>-Z 使用 compress 属性</li>
<li>-v 意为 verbose，显示详细的操作过程</li>
<li>-O 将文件输出到标准输出</li>
</ul>
<p>然后最后一个一定要是 f 后面跟压缩包名（无论是要解压还是要压缩，都是指压缩包的名字）。接下来我们看看具体实例，就很容易理解具体的用法了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 假设我们有很多 .md 文件需要打包，那么可以使用</span><br><span class="line">tar -cf posts.tar *.md # c 是创建压缩包，也就是压缩，然后是 f，给出压缩包名，最后是要压缩的文件</span><br><span class="line"># 然后我们发现还有一些 .txt 文件也需要打包进去，那么可以使用</span><br><span class="line">tar -rf posts.tar *.txt # r 是追加文件</span><br><span class="line"># 然后我们发现 hello.md 弄错了，修正后需要更新到压缩包中，可以使用</span><br><span class="line">tar -uf post.tar hello.md # u 是更新</span><br><span class="line"># 压缩好了，我们来看看压缩包的内容，可以使用</span><br><span class="line">tar -tf posts.tar # t 是列出文件内容</span><br><span class="line"># 把压缩包发送到其他位置之后，需要解压，可以使用</span><br><span class="line">tar -xf posts.tar # x 是解压</span><br></pre></td></tr></table></figure>
<p>加入自选参数后的用法（要不要加 v 可以看个人喜好）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># tar.gz 相关</span><br><span class="line">tar -czf posts.tar.gz *.md # 压缩</span><br><span class="line">tar -xzf posts.tar.gz # 解压</span><br><span class="line"># tar.bz2 相关</span><br><span class="line">tar -cjf posts.tar.bz2 *.md # 压缩</span><br><span class="line">tar -xjf posts.tar.bz2 # 解压</span><br><span class="line"># tar.Z 相关</span><br><span class="line">tar -cZf posts.tar.Z *.md # 压缩</span><br><span class="line">tar -xZf posts.tar.Z # 解压</span><br></pre></td></tr></table></figure>
<p>总结一波，遇到不同类型的文件，请用不同的套路来应对：</p>
<ul>
<li>*.tar -&gt; tar -xf</li>
<li>*.tar.gz -&gt; tar -xzf</li>
<li>*.tar.bz2 -&gt; tar -xjf</li>
<li>*.tar.Z -&gt; tar -xZf</li>
<li>*.gz -&gt; gzip -d</li>
<li>*.rar -&gt; unrar e</li>
<li>*.zip -&gt; unzip</li>
</ul>
<h2 id="空间占用-du"><a href="#空间占用-du" class="headerlink" title="空间占用 du"></a>空间占用 du</h2><p>很多时候磁盘被写满了是各种奇怪错误的源头，所以如何快速找到问题所在就很重要了，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 显示当前文件下 Top 10 空间占用的文件/目录，</span><br><span class="line"># s 表示不显示每个子目录或文件的大小</span><br><span class="line"># h 表示用更加自然的方式显示（比如 K/M/G 这样）</span><br><span class="line">du -sh * | sort -nr | head</span><br></pre></td></tr></table></figure>
<h2 id="系统状态-top"><a href="#系统状态-top" class="headerlink" title="系统状态 top"></a>系统状态 top</h2><p>了解系统状态一般少不了 top 命令，虽然基本上不需要做任何操作，但是还是有一些可以自定义的内容的，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 查看某用户的进程</span><br><span class="line">top -u wdxtub</span><br><span class="line"># 进入系统状态显示后，具体值代表的意思是</span><br><span class="line"># PR    进程优先级，越小优先级越高</span><br><span class="line"># VIRT  占用的虚拟内存</span><br><span class="line"># RES   占用的物理内存</span><br><span class="line"># SHR   占用的共享内存</span><br><span class="line"># S     进程状态（S - 休眠，R - 正在运行，Z - 僵死状态，N - 优先级为负数）</span><br><span class="line"># TIME+ 进程启动后占用的总 CPU 时间</span><br><span class="line"># 可以按照不同的指标排序显示，按对应键即可</span><br><span class="line"># P 按照 CPU 使用率排序</span><br><span class="line"># T 按照 MITE+ 排序</span><br><span class="line"># M 按内存使用占比排序</span><br></pre></td></tr></table></figure>
<p>其他查看进程相关信息的命令有<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 查看进程内存分布</span><br><span class="line">pmap -d 12345 # 12345 是进程号</span><br><span class="line"># 按照内存排序，这里的 grep 可以过滤特定的用户</span><br><span class="line">ps -e -o &apos;pid,comm,srgs,pcpu,rsz,vsz,stime,user,uid&apos; | grep wdxtub | sort nrk5</span><br></pre></td></tr></table></figure></p>
<h2 id="查找-find"><a href="#查找-find" class="headerlink" title="查找 find"></a>查找 find</h2><p>在命令行界面中进行查找是每个需要在服务器上执行操作的同学都必备的技能，这里用实例来说明常见的实用用法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 找出七天前的文件</span><br><span class="line">find / -type f -mtime +7 -print</span><br><span class="line"># / 表示从根目录中查找</span><br><span class="line"># -type f 表示找出系统普通文件，不包含目录</span><br><span class="line"># -mtime +n 表示寻找 n 天前的数据</span><br><span class="line"># -print 打印文件名称</span><br><span class="line"># 找出并删除七天前的文件</span><br><span class="line">find /temp/ -type f -mtime +7 -print -exec rm -f &#123;&#125; \;</span><br><span class="line"># -exec 表示后面执行系统命令</span><br><span class="line"># &#123;&#125; 只有该符号能跟在命令你后面</span><br><span class="line"># \; 结束符号</span><br><span class="line">find /temp/ -type f -mtime +7 -print | xargs rm -f</span><br><span class="line"># 使用管道和 xargs = -exec</span><br><span class="line"># 查找 /var 下最大的十个文件</span><br><span class="line">find /var -type f -ls | sort -k 7 -r -n | head</span><br><span class="line"># 查找 /var/log 下大于 5GB 的文件</span><br><span class="line">find /var/log/ -type f -size +5120M -exec ls -lh &#123;&#125; \;</span><br><span class="line"># 找出今天所有文件并将它们拷贝到另一个目录</span><br><span class="line">find /home/wdxtub/ -ctime 0 -print -exec cp &#123;&#125; /mnt/backup/&#123;&#125; \;</span><br></pre></td></tr></table></figure>
<h2 id="远程登录-ssh"><a href="#远程登录-ssh" class="headerlink" title="远程登录 ssh"></a>远程登录 ssh</h2><ul>
<li>ssh -vvv username@ip ssh 的 debug 模式</li>
<li>ssh -i key.pem username@ip 用 pem key 登录 ssh</li>
</ul>
<h2 id="奇技淫巧"><a href="#奇技淫巧" class="headerlink" title="奇技淫巧"></a>奇技淫巧</h2><p>这里是一些比较零碎的命令行技巧</p>
<ul>
<li>openssl rand -hex n 产生随机的十六进制数，n 是字符数</li>
<li>source /path/to/filename 在当前 shell 里执行一个文件里的命令</li>
<li>${variable:0:5} 截取变量的前五个字符</li>
<li>wget -r –no-parent –reject “index.html*” <a href="http://hostname/" target="_blank" rel="noopener">http://hostname/</a> -P /home/user/dirs 用 wget 抓取完整的网站目录结构，存放到本地目录中</li>
<li>mkdir -p /home/wdxtub/{test0,test1,test2} 一次创建多个目录</li>
<li>dd if=/dev/zero of=/tmp/output.img bs=8k count=256k; rm -rf /tmp/output.img 测试硬盘写入速度</li>
<li>hdparm -Tt /dev/sda 测试硬盘读取速度</li>
<li>echo -n “test” | md5sum 获取文本的 md5</li>
<li>curl -I <a href="http://wdxtub.com" target="_blank" rel="noopener">http://wdxtub.com</a> 获取 HTTP 头信息</li>
<li>netstat -tln4 | awk ‘{print $4}’ | cut -f2 -d: | grep -o ‘[0-9]*’ 显示所有 tcp4 监听端口</li>
<li>time command 查看命令的运行时间</li>
<li>export 查看所有的环境变量</li>
<li>cmp file1 file2 文件内容对比</li>
<li>cat -n file 内容前面会显示行号</li>
<li>lsof -i:22 查看 22 端口现在运行的程序</li>
<li>lsof -c abc 显示 abc 进程现在打开的文件</li>
<li>lsof -p 12 看进程号为 12 的进程打开了哪些文件</li>
</ul>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="http://wittyfans.com/2016/12/03/bzs-linux-concept-guide/">Linux概念指南——小土刀</a></li>
<li><a href="https://www.gitbook.com/book/wizardforcel/vbird-linux-basic-4e/details" target="_blank" rel="noopener">鸟哥的Linux私房菜</a></li>
<li><a href="http://yhhx.tech/2017/06/11/笔记/Arch-Linux安装记录/" target="_blank" rel="noopener">Arch-Linux安装记录/</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/linux/1507_caojh/index.html" target="_blank" rel="noopener">Linux防火墙firewalld</a></li>
<li><a href="https://www.jianshu.com/p/37735e3511c2" target="_blank" rel="noopener">Linux常用软件安装</a></li>
<li><a href="https://wizardforcel.gitbooks.io/network-basic/content/0.html" target="_blank" rel="noopener">网络基础功</a></li>
<li></li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/uploads/wechat-reward-image.png" alt="wittyfans WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag"># Linux</a>
          
            <a href="/tags/coding/" rel="tag"># coding</a>
          
            <a href="/tags/shell/" rel="tag"># shell</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/coding/Powershell常用命令.html" rel="next" title="PowerShell常用命令">
                <i class="fa fa-chevron-left"></i> PowerShell常用命令
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/writing/OmniGraffle使用记录.html" rel="prev" title="OmniGraffle使用记录">
                OmniGraffle使用记录 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="wittyfans" />
          <p class="site-author-name" itemprop="name">wittyfans</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">66</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">73</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wittyfans" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://music.163.com/#/user/event?id=5842815" target="_blank" title="Netease Music">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Netease Music
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.instagram.com/wittyfans/" target="_blank" title="Instagram">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Instagram
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wittyfans" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#按下开机键后发生了什么？"><span class="nav-number">1.</span> <span class="nav-text">按下开机键后发生了什么？</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#终端与仿真器"><span class="nav-number">2.</span> <span class="nav-text">终端与仿真器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文件系统"><span class="nav-number">3.</span> <span class="nav-text">文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统的实现"><span class="nav-number">3.1.</span> <span class="nav-text">文件系统的实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看权限"><span class="nav-number">3.2.</span> <span class="nav-text">查看权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改权限"><span class="nav-number">3.3.</span> <span class="nav-text">修改权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用数字类型改变文件权限"><span class="nav-number">3.3.1.</span> <span class="nav-text">用数字类型改变文件权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#符号类型改变文件权限"><span class="nav-number">3.3.2.</span> <span class="nav-text">符号类型改变文件权限</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件和目录权限的不同"><span class="nav-number">3.4.</span> <span class="nav-text">文件和目录权限的不同</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统常用操作"><span class="nav-number">3.5.</span> <span class="nav-text">文件系统常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#移动-mv"><span class="nav-number">3.5.1.</span> <span class="nav-text">移动 mv</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除-rm"><span class="nav-number">3.5.2.</span> <span class="nav-text">删除 rm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件内容查阅"><span class="nav-number">3.5.3.</span> <span class="nav-text">文件内容查阅</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#取文件的数据"><span class="nav-number">3.5.4.</span> <span class="nav-text">取文件的数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改文件时间、创建新文件"><span class="nav-number">3.5.5.</span> <span class="nav-text">修改文件时间、创建新文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件与目录的默认权限与隐藏权限"><span class="nav-number">3.5.6.</span> <span class="nav-text">文件与目录的默认权限与隐藏权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#file命令"><span class="nav-number">3.5.7.</span> <span class="nav-text">file命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关于PATH"><span class="nav-number">3.6.</span> <span class="nav-text">关于PATH</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#管道与流"><span class="nav-number">4.</span> <span class="nav-text">管道与流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#进程"><span class="nav-number">5.</span> <span class="nav-text">进程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#进程间的通信"><span class="nav-number">5.1.</span> <span class="nav-text">进程间的通信</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bash"><span class="nav-number">6.</span> <span class="nav-text">Bash</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#HelloWord"><span class="nav-number">6.1.</span> <span class="nav-text">HelloWord</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本操作"><span class="nav-number">6.2.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#打印文本"><span class="nav-number">6.3.</span> <span class="nav-text">打印文本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Echo"><span class="nav-number">6.3.1.</span> <span class="nav-text">Echo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cat-head-tail-uniq-cut"><span class="nav-number">6.3.2.</span> <span class="nav-text">cat, head, tail, uniq, cut</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表达式"><span class="nav-number">6.4.</span> <span class="nav-text">表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">6.4.1.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数学运算"><span class="nav-number">6.4.2.</span> <span class="nav-text">数学运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重定向"><span class="nav-number">6.4.3.</span> <span class="nav-text">重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条件流程"><span class="nav-number">6.4.4.</span> <span class="nav-text">条件流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#算术比较"><span class="nav-number">6.4.5.</span> <span class="nav-text">算术比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件系统测试"><span class="nav-number">6.4.6.</span> <span class="nav-text">文件系统测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符串比较"><span class="nav-number">6.4.7.</span> <span class="nav-text">字符串比较</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#循环"><span class="nav-number">6.4.8.</span> <span class="nav-text">循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数"><span class="nav-number">6.4.9.</span> <span class="nav-text">函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进阶"><span class="nav-number">6.5.</span> <span class="nav-text">进阶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#别名"><span class="nav-number">6.5.1.</span> <span class="nav-text">别名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#管道"><span class="nav-number">6.5.2.</span> <span class="nav-text">管道</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#帮助"><span class="nav-number">7.</span> <span class="nav-text">帮助</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#help"><span class="nav-number">7.1.</span> <span class="nav-text">help</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#man"><span class="nav-number">7.2.</span> <span class="nav-text">man</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#info"><span class="nav-number">7.3.</span> <span class="nav-text">info</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#文本编辑"><span class="nav-number">8.</span> <span class="nav-text">文本编辑</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#nano"><span class="nav-number">8.1.</span> <span class="nav-text">nano</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vim"><span class="nav-number">8.2.</span> <span class="nav-text">vim</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正确的关机方法"><span class="nav-number">9.</span> <span class="nav-text">正确的关机方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#附录——常用命令"><span class="nav-number">10.</span> <span class="nav-text">附录——常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#压缩解压-tar"><span class="nav-number">10.1.</span> <span class="nav-text">压缩解压 tar</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#空间占用-du"><span class="nav-number">10.2.</span> <span class="nav-text">空间占用 du</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#系统状态-top"><span class="nav-number">10.3.</span> <span class="nav-text">系统状态 top</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找-find"><span class="nav-number">10.4.</span> <span class="nav-text">查找 find</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#远程登录-ssh"><span class="nav-number">10.5.</span> <span class="nav-text">远程登录 ssh</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#奇技淫巧"><span class="nav-number">10.6.</span> <span class="nav-text">奇技淫巧</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考"><span class="nav-number">11.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wittyfans</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("7sScl0n1AlEtVDaUHuXzxPqc-gzGzoHsz", "qKXpoqGbK1sdFYMiik7Evuan");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
