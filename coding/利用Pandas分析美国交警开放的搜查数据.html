<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Data Science,Pandas,Big Data," />





  <link rel="alternate" href="/atom.xml" title="wittyfans" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="一次偶然的机会看到王树义老师的推荐YouTube上的这个pandas视频教程，于是花了点时间学习了一下，也就有了这篇笔记，因为课程是英文的，也没有提供中文字幕，所以我的笔记也就懒得再用中文写了。">
<meta name="keywords" content="Data Science,Pandas,Big Data">
<meta property="og:type" content="article">
<meta property="og:title" content="利用Pandas分析美国交警开放的搜查数据">
<meta property="og:url" content="http://wittyfans.com/coding/利用Pandas分析美国交警开放的搜查数据.html">
<meta property="og:site_name" content="wittyfans">
<meta property="og:description" content="一次偶然的机会看到王树义老师的推荐YouTube上的这个pandas视频教程，于是花了点时间学习了一下，也就有了这篇笔记，因为课程是英文的，也没有提供中文字幕，所以我的笔记也就懒得再用中文写了。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-01-12T06:44:13.922Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="利用Pandas分析美国交警开放的搜查数据">
<meta name="twitter:description" content="一次偶然的机会看到王树义老师的推荐YouTube上的这个pandas视频教程，于是花了点时间学习了一下，也就有了这篇笔记，因为课程是英文的，也没有提供中文字幕，所以我的笔记也就懒得再用中文写了。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wittyfans.com/coding/利用Pandas分析美国交警开放的搜查数据.html"/>





  <title> 利用Pandas分析美国交警开放的搜查数据 | wittyfans </title>
  <script type="text/javascript" src="/js/src/love.js"></script>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">wittyfans</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">学则不固,知则不惑</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://wittyfans.com/coding/利用Pandas分析美国交警开放的搜查数据.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="wittyfans">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="wittyfans">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="wittyfans" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                利用Pandas分析美国交警开放的搜查数据
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-12T14:23:30+08:00">
                2019-01-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/coding/" itemprop="url" rel="index">
                    <span itemprop="name">coding</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          
             <span id="/coding/利用Pandas分析美国交警开放的搜查数据.html" class="leancloud_visitors" data-flag-title="利用Pandas分析美国交警开放的搜查数据">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
               <span>℃</span>
              </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>一次偶然的机会看到<a href="">王树义</a>老师的推荐YouTube上的这个pandas视频教程，于是花了点时间学习了一下，也就有了这篇笔记，因为课程是英文的，也没有提供<br>中文字幕，所以我的笔记也就懒得再用中文写了。</p>
</blockquote>
<a id="more"></a>
<h1 id="利用Pandas分析美国交警开放的搜查数据"><a href="#利用Pandas分析美国交警开放的搜查数据" class="headerlink" title="利用Pandas分析美国交警开放的搜查数据"></a>利用Pandas分析美国交警开放的搜查数据</h1><h2 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h2><p>The tutorial will not cover pandas basics. If you are new to pandas or just need a refresher, I recommend watching some videos from my <a href="http://www.dataschool.io/easier-data-analysis-with-pandas/" target="_blank" rel="noopener">free pandas course</a>. Alternatively, you can review all of the code from my pandas course in this Jupyter notebook.</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/justmarkham/pycon-2018-tutorial" target="_blank" rel="noopener">Using pandas for Better (and Worse) Data Science</a></li>
<li><a href="https://www.youtube.com/watch?v=hl-TGI4550M&amp;list=PL5-da3qGB5IBITZj_dYSFqnd_15JgqwA6&amp;index=1" target="_blank" rel="noopener">Pandas best practices - Youtube link</a></li>
</ul>
<h1 id="Begin"><a href="#Begin" class="headerlink" title="Begin"></a>Begin</h1><h2 id="DownLoad-the-data"><a href="#DownLoad-the-data" class="headerlink" title="DownLoad the data"></a>DownLoad the data</h2><h3 id="Raw-data"><a href="#Raw-data" class="headerlink" title="Raw data"></a>Raw data</h3><ul>
<li><a href="https://openpolicing.stanford.edu/data/" target="_blank" rel="noopener">Link</a></li>
<li><a href="https://github.com/5harad/openpolicing/blob/master/DATA-README.md" target="_blank" rel="noopener">How to use the date</a></li>
</ul>
<h3 id="Cleared-Data-use-this"><a href="#Cleared-Data-use-this" class="headerlink" title="Cleared Data(use this)"></a>Cleared Data(use this)</h3><ul>
<li><a href="https://github.com/justmarkham/pycon-2018-tutorial/blob/master/police.csv" target="_blank" rel="noopener">police</a></li>
</ul>
<h2 id="About-the-data"><a href="#About-the-data" class="headerlink" title="About the data"></a>About the data</h2><ul>
<li>For each state in the dataset, They provide data in three formats(We use csv format)</li>
<li>If a column cannot be computed using the data a state has provided, it is set to NA.</li>
<li>For several fields (e.g., driver_race) we include a “raw” column which records the original data values from which we infer standardized values</li>
</ul>
<p>We include the raw columns because our data processing pipeline is extensive, requiring judgment calls and subjective decisions.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Column name</td>
<td>Column meaning</td>
<td>Example value</td>
</tr>
<tr>
<td>id</td>
<td>The unique ID we assign to each stop. Contains the state and year.</td>
<td>VT-2011-00012</td>
</tr>
<tr>
<td>state（州）</td>
<td>The two-letter code for the state in which the stop occurred.</td>
<td>VT</td>
</tr>
<tr>
<td>stop_date（被搜查的日期）</td>
<td>The date of the stop, in YYYY-MM-DD format. Some states do not provide the exact stop date: for example, they only provide the year or quarter in which the stop occurred. For these states, stop_date is set to the date at the beginning of the period: for example, January 1 if only year is provided.</td>
<td>2011-11-27</td>
</tr>
<tr>
<td>stop_time(被警察搜查时的时间)</td>
<td>The 24-hour time of the stop, in HH:MM format.</td>
<td>20:15</td>
</tr>
<tr>
<td>location_raw</td>
<td>The original data value from which we compute the county (or comparably granular location) in which the stop occurred. Not in a standardized format across states.</td>
<td>Winooski</td>
</tr>
<tr>
<td>county_name</td>
<td>The standardized name of the county in which the stop occurred.</td>
<td>Chittenden County</td>
</tr>
<tr>
<td>county_fips</td>
<td>The standardized 5-digit FIPS code in which the stop occurred.</td>
<td>50007</td>
</tr>
<tr>
<td>district</td>
<td>In several states (e.g., Illinois) the stop county cannot be inferred, but a comparably granular location can. This comparably granular location is stored in the district column. Most states do not have this column.</td>
<td>ILLINOIS STATE POLICE 01</td>
</tr>
<tr>
<td>fine_grained_location</td>
<td>Any higher-resolution data about where the stop occurred: e.g., milepost or address. Not standardized across states.</td>
<td>90400 I 89 N; EXIT 15 MM90/40</td>
</tr>
<tr>
<td>police_department</td>
<td>The police department or agency that made the stop. Not in a standard format across states.</td>
<td>WILLISTON VSP</td>
</tr>
<tr>
<td>driver_gender</td>
<td>The driver’s gender, as recorded by the trooper. M, F, or NA.</td>
<td>M</td>
</tr>
<tr>
<td>driver_age_raw</td>
<td>The original data value from which we compute the driver’s age when they were stopped. May be age, birth year, or birth date. Not in a standard format across states.</td>
<td>1988</td>
</tr>
<tr>
<td>driver_age</td>
<td>The driver’s age when they were stopped. Set to NA if less than 15 or greater than or equal to 100.</td>
<td>23</td>
</tr>
<tr>
<td>driver_race_raw</td>
<td>The original data value from which the driver’s standardized race is computed. Not in a standard format across states.</td>
<td>African American</td>
</tr>
<tr>
<td>driver_race</td>
<td>The standardized driver race. Possible values are White, Black, Hispanic, Asian, Other, and NA, with NA denoting values which are unknown. Asian refers to Asian, Pacific Islander, and Indian. Native Americans/American Indians are included in the “other” category. Anyone with Hispanic ethnicity is classified as Hispanic, regardless of their recorded race.</td>
<td>Black</td>
</tr>
<tr>
<td>violation_raw</td>
<td>The violation committed by the driver, in the language of the original data. Not in a standard format across states. Some stops have multiple violations.</td>
<td>Speeding (10–19 MPH Over Prima Facie Limit *)</td>
</tr>
<tr>
<td>violation</td>
<td>The violation committed by the driver, standardized into categories which are consistent across states.</td>
<td>Speeding</td>
</tr>
<tr>
<td>search_conducted（是否被搜查）</td>
<td>A TRUE/FALSE value indicating whether a search was performed.</td>
<td>TRUE</td>
</tr>
<tr>
<td>search_type_raw</td>
<td>The justification for the search, in the language of the original data. NA if no search was performed. Not in a standard format across states. Some states have multiple justifications for a search.</td>
<td>CONSENT SEARCH CONDUCTED</td>
</tr>
<tr>
<td>search_type</td>
<td>The normalized justification for the search. Where possible, this is standardized into categories which are consistent across states. For example, if something is clearly a consent search, search_type is referred to as “Consent”.</td>
<td>Consent</td>
</tr>
<tr>
<td>contraband_found</td>
<td>A TRUE/FALSE value indicating whether a search was performed and contraband was found. FALSE if no search was performed.</td>
<td>TRUE</td>
</tr>
<tr>
<td>stop_outcome</td>
<td>The outcome of the stop. Many states have idiosyncratic outcomes — for example, “CHP 215” in California — so this column is not standardized across states. “Citation” and “Warning” are the values which occur most commonly across states. If the stop has multiple outcomes, the most severe outcome is used. For example, if a stop resulted in a citation and a warning, stop_outcome would be “Citation”.</td>
<td>Citation</td>
</tr>
<tr>
<td>is_arrested</td>
<td>A TRUE/FALSE value indicating whether an arrest was made.</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
<ul>
<li>FIPS：<a href="https://zh.wikipedia.org/wiki/%E8%81%AF%E9%82%A6%E8%B3%87%E6%96%99%E8%99%95%E7%90%86%E6%A8%99%E6%BA%96" target="_blank" rel="noopener">联邦信息处理标准（英语：Federal Information Processing Standards，缩写FIPS）</a></li>
<li>VT: <a href="https://www.google.com/search?q=vt%E6%98%AF%E5%93%AA%E4%B8%AA%E5%B7%9E&amp;rlz=1C5CHFA_enUS783US785&amp;oq=VT&amp;aqs=chrome.0.69i59j69i57j0l4.1878j0j1&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener">美国的一个州</a></li>
<li>M,F: 记录性别，M男，F女</li>
<li>race: 可不是速度或者竞赛，而是种族,参考分类如下，与数据里的可能不一样，<a href="https://www.zhihu.com/question/21007176" target="_blank" rel="noopener">了解更多</a><ol>
<li>American Indian or Alaska Native</li>
<li>Asian</li>
<li>Black or African American</li>
<li>Native Hawaiian or Other Pacific Islander</li>
<li>White</li>
</ol>
</li>
<li>violation：违章</li>
<li>NAN means the value is missing or irrelevant for that data row.</li>
</ul>
<h1 id="Know-the-data"><a href="#Know-the-data" class="headerlink" title="Know the data"></a>Know the data</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pd.read_csv()</span><br><span class="line">pd.head()</span><br><span class="line">pd.tail()</span><br><span class="line">pd.dtypes</span><br><span class="line">pd.isnull().sum()</span><br></pre></td></tr></table></figure>
<h1 id="Handle-the-data"><a href="#Handle-the-data" class="headerlink" title="Handle the data"></a>Handle the data</h1><h2 id="1-Remove-the-column-that-only-contains-missing-values"><a href="#1-Remove-the-column-that-only-contains-missing-values" class="headerlink" title="1. Remove the column that only contains missing values"></a>1. Remove the column that only contains missing values</h2><h3 id="Drop-column"><a href="#Drop-column" class="headerlink" title="Drop column"></a>Drop column</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ri.drop(&apos;value&apos;,aixs=&apos;columns&apos;,inplace=True)</span><br><span class="line"></span><br><span class="line"># aixs = &apos;columns&apos;即我们要进行的是列操作，有时候也用aixs = 1代替。</span><br><span class="line"># inplace = True,即处理完后替代原来的数据，相当于下面这种写法：</span><br><span class="line"></span><br><span class="line">ri = ri.drop(&apos;county_name&apos;,axis=1)</span><br></pre></td></tr></table></figure>
<p>There is another way to drop the columns, like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del ri[&apos;columns_name&apos;]</span><br></pre></td></tr></table></figure>
<p>you can do that as this, that’s fine, but it’s not the <em>Pandas way</em>.</p>
<p>Tips:</p>
<ul>
<li>Pay attention to default arguments</li>
<li>check your work</li>
<li>There is more than one way to do everything in pandas</li>
</ul>
<h2 id="2-Do-men-or-women-speed-more-often"><a href="#2-Do-men-or-women-speed-more-often" class="headerlink" title="2. Do men or women speed more often?"></a>2. Do men or women speed more often?</h2><h3 id="driver-gender-violaton"><a href="#driver-gender-violaton" class="headerlink" title="driver_gender,violaton"></a>driver_gender,violaton</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.violation == &quot;Speeding&quot;].driver_gender.value_counts() </span><br><span class="line">ri[ri.violation == &quot;Speeding&quot;].driver_gender.value_counts(normalize=True) # get the percent value, 如果一个人超速，那么多大几率是男性或女性</span><br></pre></td></tr></table></figure>
<p>反过来看：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.driver_gender == &apos;M&apos;].violation.value_counts(normalize=True)</span><br><span class="line">ri[ri.driver_gender == &apos;F&apos;].violation.value_counts(normalize=True)</span><br></pre></td></tr></table></figure>
<p>合并成一条命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(&apos;driver_gender&apos;).violation.value_counts(normalize=True)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>when you wirte the groupby, just think for each value(in here is gender, man or women).</p>
</blockquote>
<ul>
<li>count(): 返回所有数据统计之和</li>
<li>value_counts(): 分别统计该数据分类下（如果有）的值</li>
<li>normalize = True: 该选项等于True，则会返回 <em>relative frequencies of the unique values.</em></li>
</ul>
<h2 id="3-Does-gender-affect-who-gets-searched-during-a-stop"><a href="#3-Does-gender-affect-who-gets-searched-during-a-stop" class="headerlink" title="3. Does gender affect who gets searched during a stop?"></a>3. Does gender affect who gets searched during a stop?</h2><h3 id="driver-gender-search-conducted"><a href="#driver-gender-search-conducted" class="headerlink" title="driver_gender,search_conducted"></a>driver_gender,search_conducted</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_conducted.value_counts(normalize=True)</span><br></pre></td></tr></table></figure>
<p>Same results with above, how does that work?<br>If the serious value is bool type and you can always just get a sum to konw the number of ones, or a mean to get the percentage of ones, that will simplify you code.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_conducted.mean()</span><br></pre></td></tr></table></figure>
<p>groupby gender:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(&apos;driver_gender&apos;).search_conducted.mean()</span><br></pre></td></tr></table></figure>
<p>Does that prove any things? No, </p>
<ul>
<li>Causation is difficult to conclude, so focus on relationships.</li>
<li>Include all relevant factors when studying a relationship.</li>
</ul>
<h2 id="4-Why-is-search-type-missing-so-often"><a href="#4-Why-is-search-type-missing-so-often" class="headerlink" title="4. Why is search_type missing so often?"></a>4. Why is search_type missing so often?</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_conducted.value_counts()</span><br></pre></td></tr></table></figure>
<p>search_conducted means a search performed, 即一个车主被警察查了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_type.count()</span><br></pre></td></tr></table></figure>
<p>search_type, the reason for search performed, 即警察为什么要查这个车。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.search_conducted == False].search_type.value_counts()</span><br></pre></td></tr></table></figure>
<p>return empty series, why? because there is no value to count, nan and null is not a value, if it’s not what you want,add dropna= False in the value_counts() method likt this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.search_conducted == False].search_type.value_counts(dropna=False)</span><br></pre></td></tr></table></figure>
<h2 id="5-During-a-search-how-often-is-the-driver-frisked"><a href="#5-During-a-search-how-often-is-the-driver-frisked" class="headerlink" title="5. During a search, how often is the driver frisked?"></a>5. During a search, how often is the driver frisked?</h2><blockquote>
<p>How to know is there a word in a string in Python? You may use ‘a’ in b, this is the pythoy way, we got pandas way like this:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ri.search_type.str.contains()</span><br></pre></td></tr></table></figure>
<p>针对每一行，判断是否有字符串在其中，有则返回True，无则False.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ri[&apos;frisk&apos;] = ri.search_type.str.contains(&apos;Probable Cause&apos;)</span><br><span class="line">ri.frisk.value_counts(dropna=False)</span><br><span class="line">ri.frisk.sum()</span><br><span class="line">ri.frisk.mean()</span><br><span class="line">1182/(1182+2014)</span><br></pre></td></tr></table></figure>
<p>the mean, is caculated by frisked / (frisked+unfrisked), and will <strong>excluded the missing values.</strong></p>
<h2 id="6-Which-year-had-the-least-number-of-stops"><a href="#6-Which-year-had-the-least-number-of-stops" class="headerlink" title="6. Which year had the least number of stops?"></a>6. Which year had the least number of stops?</h2><h3 id="Method-1-Use-the-str-slice"><a href="#Method-1-Use-the-str-slice" class="headerlink" title="Method 1: Use the str.slice"></a>Method 1: Use the str.slice</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_date.str.slice(0,4).value_counts()</span><br></pre></td></tr></table></figure>
<p>The stop_date format is: 2005-01-02, so slice(0,4) will return 2005, then do a value_counts will get the number of stops in all years.</p>
<h3 id="Method-2-Use-the-datetime"><a href="#Method-2-Use-the-datetime" class="headerlink" title="Method 2: Use the datetime"></a>Method 2: Use the datetime</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">combined = ri.stop_date.str.cat(ri.stop_time,sep=&apos; &apos;)</span><br><span class="line">ri[&apos;stop_datetime&apos;] = pd.to_datetime(combined)</span><br></pre></td></tr></table></figure>
<p>Use the pd.to_datetime method to convert a concated string to a datatime type value, then add a new col in ri.<br>cat is a string method to concat two string, the sep arg is a string or char you want insert in center.</p>
<p>So, after that, how to get the year value?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_datetime.dt.year.value_counts()</span><br></pre></td></tr></table></figure>
<p>datetime has a method .dt, and you can .year, .day, etc.</p>
<h2 id="7-How-does-drug-activity-change-by-time-of-day"><a href="#7-How-does-drug-activity-change-by-time-of-day" class="headerlink" title="7. How does drug activity change by time of day?"></a>7. How does drug activity change by time of day?</h2><h3 id="stop-datetime-drugs-related-stop"><a href="#stop-datetime-drugs-related-stop" class="headerlink" title="stop_datetime,drugs_related_stop"></a>stop_datetime,drugs_related_stop</h3><p>Let’s specific, for every hour, what is the rate of the drugs_related_stop?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean()</span><br><span class="line">ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot()</span><br></pre></td></tr></table></figure>
<p>if you want the notebook auto show the img, make sure you imported the packge.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<p>then when you type .plot() the img will show automatically.</p>
<p>Lesssons:</p>
<ul>
<li>Consider removing chunks of data that may be biased</li>
<li>Use the datetime data type for dates and times</li>
</ul>
<h2 id="8-Do-most-stops-occur-at-night"><a href="#8-Do-most-stops-occur-at-night" class="headerlink" title="8. Do most stops occur at night?"></a>8. Do most stops occur at night?</h2><p>Let do this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_datetime.dt.hour.value_counts().plot()</span><br></pre></td></tr></table></figure>
<p>you will get an error img, because the plot is generated by the value, not the index(in here is the hour),<br>so you need to sort with index first,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_datetime.dt.hour.value_counts().sort_index().plot()</span><br></pre></td></tr></table></figure>
<p>bt, how to define the night, In my view 22-4 is night, I want to filter the hours:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ri[(ri.stop_datetime.dt.hour &gt; 4) &amp; (ri.stop_datetime.dt.hour &lt; 22)].shape</span><br></pre></td></tr></table></figure>
<p>if you have a category, want to apply the hours, you can define a method and map to the hours.</p>
<h2 id="9-Find-the-bad-data-in-the-stop-duration-column-and-fix-it"><a href="#9-Find-the-bad-data-in-the-stop-duration-column-and-fix-it" class="headerlink" title="9. Find the bad data in the stop_duration column and fix it"></a>9. Find the bad data in the stop_duration column and fix it</h2><p>We want to turn the stop_duration value equals ‘1’ to ‘NAN’, how?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[(ri.stop_duration == &apos;1&apos;) | (ri.stop_duration == &apos;2&apos;)].stop_duration == &apos;NAN&apos;</span><br></pre></td></tr></table></figure>
<p>that looks make sense,but check the value counts, it does’nt work.</p>
<p>why? acturlly, you may get a warnning,</p>
<blockquote>
<p><em>A value is trying to be set on a copy of a slice from a DataFrame.</em></p>
</blockquote>
<p>You should use loc.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.loc[(ri.stop_duration == &apos;1&apos;) | (ri.stop_duration == &apos;2&apos;),&apos;stop_duration&apos;] = &apos;NAN&apos;</span><br></pre></td></tr></table></figure>
<p>注意比较一下这两者用法上的区别，如果想要了解更多loc的用法，可以关注该作者的另一个单独介绍的视频，<a href="https://www.youtube.com/watch?v=xvpNA7bC8cs" target="_blank" rel="noopener">油管链接</a>。</p>
<p>but you get two string format ‘NAN’, you want get a really NAN value, okay, let fix it:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">ri.loc[ri.stop_duration == &apos;NAN&apos;,&apos;stop_duration&apos;] = np.nan</span><br></pre></td></tr></table></figure>
<p>there you go!</p>
<h1 id="生词"><a href="#生词" class="headerlink" title="生词"></a>生词</h1><ul>
<li>search：这里应该理解为警察的搜查</li>
<li>hypothetical: 假设</li>
<li>slick way,精明的小技巧</li>
<li>registration searched: 车牌造假违章</li>
<li>conducted: 处理、行为</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>您的支持将鼓励我继续创作！</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/uploads/wechat-reward-image.png" alt="wittyfans WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
    </div>
  </div>


      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Data-Science/" rel="tag"># Data Science</a>
          
            <a href="/tags/Pandas/" rel="tag"># Pandas</a>
          
            <a href="/tags/Big-Data/" rel="tag"># Big Data</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/coding/Pandas常用操作.html" rel="next" title="Pandas常用操作">
                <i class="fa fa-chevron-left"></i> Pandas常用操作
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="wittyfans" />
          <p class="site-author-name" itemprop="name">wittyfans</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">33</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">49</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wittyfans" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://music.163.com/#/user/event?id=5842815" target="_blank" title="Netease Music">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Netease Music
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.instagram.com/wittyfans/" target="_blank" title="Instagram">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Instagram
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wittyfans" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#利用Pandas分析美国交警开放的搜查数据"><span class="nav-number">1.</span> <span class="nav-text">利用Pandas分析美国交警开放的搜查数据</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#要求"><span class="nav-number">1.1.</span> <span class="nav-text">要求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">1.2.</span> <span class="nav-text">参考</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Begin"><span class="nav-number">2.</span> <span class="nav-text">Begin</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#DownLoad-the-data"><span class="nav-number">2.1.</span> <span class="nav-text">DownLoad the data</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Raw-data"><span class="nav-number">2.1.1.</span> <span class="nav-text">Raw data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cleared-Data-use-this"><span class="nav-number">2.1.2.</span> <span class="nav-text">Cleared Data(use this)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#About-the-data"><span class="nav-number">2.2.</span> <span class="nav-text">About the data</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Know-the-data"><span class="nav-number">3.</span> <span class="nav-text">Know the data</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Handle-the-data"><span class="nav-number">4.</span> <span class="nav-text">Handle the data</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Remove-the-column-that-only-contains-missing-values"><span class="nav-number">4.1.</span> <span class="nav-text">1. Remove the column that only contains missing values</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Drop-column"><span class="nav-number">4.1.1.</span> <span class="nav-text">Drop column</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Do-men-or-women-speed-more-often"><span class="nav-number">4.2.</span> <span class="nav-text">2. Do men or women speed more often?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#driver-gender-violaton"><span class="nav-number">4.2.1.</span> <span class="nav-text">driver_gender,violaton</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Does-gender-affect-who-gets-searched-during-a-stop"><span class="nav-number">4.3.</span> <span class="nav-text">3. Does gender affect who gets searched during a stop?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#driver-gender-search-conducted"><span class="nav-number">4.3.1.</span> <span class="nav-text">driver_gender,search_conducted</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Why-is-search-type-missing-so-often"><span class="nav-number">4.4.</span> <span class="nav-text">4. Why is search_type missing so often?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-During-a-search-how-often-is-the-driver-frisked"><span class="nav-number">4.5.</span> <span class="nav-text">5. During a search, how often is the driver frisked?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Which-year-had-the-least-number-of-stops"><span class="nav-number">4.6.</span> <span class="nav-text">6. Which year had the least number of stops?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-1-Use-the-str-slice"><span class="nav-number">4.6.1.</span> <span class="nav-text">Method 1: Use the str.slice</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Method-2-Use-the-datetime"><span class="nav-number">4.6.2.</span> <span class="nav-text">Method 2: Use the datetime</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-How-does-drug-activity-change-by-time-of-day"><span class="nav-number">4.7.</span> <span class="nav-text">7. How does drug activity change by time of day?</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#stop-datetime-drugs-related-stop"><span class="nav-number">4.7.1.</span> <span class="nav-text">stop_datetime,drugs_related_stop</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Do-most-stops-occur-at-night"><span class="nav-number">4.8.</span> <span class="nav-text">8. Do most stops occur at night?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Find-the-bad-data-in-the-stop-duration-column-and-fix-it"><span class="nav-number">4.9.</span> <span class="nav-text">9. Find the bad data in the stop_duration column and fix it</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#生词"><span class="nav-number">5.</span> <span class="nav-text">生词</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wittyfans</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("7sScl0n1AlEtVDaUHuXzxPqc-gzGzoHsz", "qKXpoqGbK1sdFYMiik7Evuan");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
