<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>wittyfans</title>
  
  <subtitle>å­¦åˆ™ä¸å›º,çŸ¥åˆ™ä¸æƒ‘</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wittyfans.com/"/>
  <updated>2019-02-09T16:24:25.546Z</updated>
  <id>http://wittyfans.com/</id>
  
  <author>
    <name>wittyfans</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>NumPyæ“ä½œæ•°ç»„</title>
    <link href="http://wittyfans.com/coding/NumPy%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84.html"/>
    <id>http://wittyfans.com/coding/NumPyæ“ä½œæ•°ç»„.html</id>
    <published>2019-02-09T15:00:40.000Z</published>
    <updated>2019-02-09T16:24:25.546Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¯¹æ•°ç»„çš„æ“ä½œæ˜¯ <em>NumPy</em> ä¸­å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œäº†è§£è¿™äº›å†…ç½®çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ çš„æ•ˆç‡äº‹åŠåŠŸå€ã€‚</p></blockquote><a id="more"></a><h1 id="æ“ä½œæ•°ç»„"><a href="#æ“ä½œæ•°ç»„" class="headerlink" title="æ“ä½œæ•°ç»„"></a>æ“ä½œæ•°ç»„</h1><h2 id="np-meshgridæ–¹æ³•"><a href="#np-meshgridæ–¹æ³•" class="headerlink" title="np.meshgridæ–¹æ³•"></a>np.meshgridæ–¹æ³•</h2><p>å¦‚æœä½ ç»™meshgridä¸¤ä¸ªä¸€ä½æ•°ç»„ï¼ŒAåƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ğ‘1,ğ‘2,ğ‘3]</span><br></pre></td></tr></table></figure><p>Båƒè¿™æ ·:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ğ‘1,ğ‘2,ğ‘3]</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿è¡Œ <em>np.meshgrid(A,B)</em>,é‚£ä¹ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªåµŒå¥—æ•°ç»„ï¼Œé‡Œé¢åˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ğ‘1,ğ‘1,ğ‘1],[ğ‘2,ğ‘2,ğ‘2],[ğ‘3,ğ‘3,ğ‘3]]</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ğ‘1,ğ‘1,ğ‘1],[ğ‘2,ğ‘2,ğ‘2],[ğ‘3,ğ‘3,ğ‘3]]</span><br></pre></td></tr></table></figure><p>By adding these two arrays together, we can create the 2D array containing, as its elements, every combination of sums between the numbers in the original elements. Arrays such as linspace and arange are typically used to constuct N-D arrays used to plot in 3 dimensions.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import plotly.plotly as py</span><br><span class="line">import plotly.graph_objs as go</span><br><span class="line"></span><br><span class="line">x = np.arange(-10, 10, 0.4)</span><br><span class="line">y = np.arange(-10, 10, 0.4)</span><br><span class="line">XX, YY = np.meshgrid(x, y)</span><br><span class="line">ZZ = np.sin(XX**2 + YY**2) / (XX**2 + YY**2)</span><br><span class="line"></span><br><span class="line">lines = []</span><br><span class="line">line_marker = dict(color=&apos;#0066FF&apos;, width=2)</span><br><span class="line">for i, j, k in zip(XX, YY, ZZ):</span><br><span class="line">    lines.append(go.Scatter3d(x=i, y=j, z=k, mode=&apos;lines&apos;, line=line_marker))</span><br><span class="line"></span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title=&apos;Wireframe with Meshgrid&apos;,</span><br><span class="line">    showlegend=False</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=lines, layout=layout)</span><br><span class="line">py.iplot(fig, filename=&apos;numpy-arange-to-meshgrid&apos;)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/02/08/5c5d6f5855efe.png" alt="ç»˜å›¾è¯·é…åˆplotly"></p><h2 id="np-whereæ–¹æ³•"><a href="#np-whereæ–¹æ³•" class="headerlink" title="np.whereæ–¹æ³•"></a>np.whereæ–¹æ³•</h2><p>å‡è®¾ä½ æœ‰ä¸‰ä¸ªæ•°ç»„ï¼Œç¬¬ä¸‰ä¸ªæ•°ç»„å­˜çš„æ˜¯å¸ƒå°”å€¼ï¼Œä½ æƒ³è¦æŒ‰ç…§æ¡ä»¶å»å‰ä¸¤ä¸ªæ•°ç»„ä¸­é€‰å€¼ï¼Œå¦‚æœç¬¬ä¸‰ä¸ªæ•°ç»„ä¸­çš„å€¼æ˜¯çœŸï¼Œé‚£ä¹ˆå°±å»ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­æ‹¿å¯¹åº”çš„å€¼ï¼Œå¦åˆ™å°±æ‹¿ç¬¬äºŒä¸ªæ•°ç»„ä¸­çš„å€¼ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<em>zip</em> å‡½æ•°å®ç°è¿™ä¸€éœ€æ±‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">xarr = np.array([1.1, 1.2, 1.3, 1.4, 1.5])</span><br><span class="line"></span><br><span class="line">yarr = np.array([2.1, 2.2, 2.3, 2.4, 2.5])</span><br><span class="line"></span><br><span class="line">cond = np.array([True, False, True, True, False])</span><br><span class="line"></span><br><span class="line">result = [(x if contidion else y) for x,y,contidion in zip(xarr,yarr,cond)]</span><br><span class="line">result</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¿™æ ·å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼š</p><ol><li>å¦‚æœæ•°ç»„å¾ˆå¤§å°±ä¼šæœ‰æ€§èƒ½é—®é¢˜</li><li>å¤šé‡æ•°ç»„æ— æ³•è¿™æ ·æ“ä½œ</li></ol><p>åˆ©ç”¨ <em>np.where</em> æ–¹æ³•ï¼Œå°±å¯ä»¥ç®€å•çš„å®ç°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = np.where(cond,xarr,yarr)</span><br></pre></td></tr></table></figure><p><em>np.where</em> ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«äº†ä½ éœ€è¦çš„å€¼ã€‚</p><p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå°†ä¸€å †æ•°ä¸­çš„å€¼è¿›è¡Œæ›¿æ¢ï¼Œæ­£æ•°å˜æˆ2ï¼Œè´Ÿæ•°å˜æˆ-2:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randn(2, 10)</span><br><span class="line">arr</span><br><span class="line"></span><br><span class="line"># out</span><br><span class="line">array([[-0.81110748,  0.68433723,  0.52473733, -0.41852741, -2.84401244,</span><br><span class="line">        -1.68747418, -0.11169401, -1.10101844, -0.8750002 ,  1.18884515],</span><br><span class="line">       [-0.30515971,  0.60605408,  0.16320091, -0.99053775, -0.76669183,</span><br><span class="line">        -0.29594746,  0.33500369,  0.28612921, -0.93350166, -0.67301814]])</span><br><span class="line"></span><br><span class="line">np.where(arr&lt;0,-2,2)</span><br><span class="line"># out</span><br><span class="line">array([[-2,  2,  2, -2, -2, -2, -2, -2, -2,  2],</span><br><span class="line">       [-2,  2,  2, -2, -2, -2,  2,  2, -2, -2]])</span><br></pre></td></tr></table></figure><p>é€šè¿‡å°†arræœ¬èº«ä¼ è¿›å»ï¼Œå¯ä»¥æŒ‡ä¿®æ”¹æŸä¸€éƒ¨åˆ†çš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯æŒ‡å°†è´Ÿæ•°ä¿®æ”¹ä¸º-2ï¼Œæ­£æ•°ä¸å˜:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">np.where(arr&lt;0,-2,arr)</span><br><span class="line"># out</span><br><span class="line"></span><br><span class="line">array([[-2.        ,  0.68433723,  0.52473733, -2.        , -2.        ,</span><br><span class="line">        -2.        , -2.        , -2.        , -2.        ,  1.18884515],</span><br><span class="line">       [-2.        ,  0.60605408,  0.16320091, -2.        , -2.        ,</span><br><span class="line">        -2.        ,  0.33500369,  0.28612921, -2.        , -2.        ]])</span><br></pre></td></tr></table></figure><h2 id="æ•°å­¦æ–¹æ³•"><a href="#æ•°å­¦æ–¹æ³•" class="headerlink" title="æ•°å­¦æ–¹æ³•"></a>æ•°å­¦æ–¹æ³•</h2><p><em>Numpy</em> æ”¯æŒå¾ˆå¤šå¸¸ç”¨çš„æ•°å­¦æ–¹æ³•ï¼Œæ¯”å¦‚å¯¹æ•°ç»„æ±‚å’Œï¼Œç®—å¹³å‡å€¼ï¼Œç­‰ç­‰ï¼Œå¯ä»¥ç›´æ¥å¯¹æ•°ç»„å¯¹è±¡è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <em>np.method</em> çš„æ–¹å¼è°ƒç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.rand(2,2)*10</span><br><span class="line">arr</span><br><span class="line">out:</span><br><span class="line">array([[ 0.89779239,  8.62581317],</span><br><span class="line">       [ 3.48522587,  5.17990087]])</span><br></pre></td></tr></table></figure><h2 id="å¹³å‡å€¼"><a href="#å¹³å‡å€¼" class="headerlink" title="å¹³å‡å€¼"></a>å¹³å‡å€¼</h2><p><em>arr.mean()</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.5471830734485419</span><br></pre></td></tr></table></figure><p>å¯¹æ¨ªå‘æ•°å€¼æ±‚å¹³å‡ï¼š</p><p><em>arr.mean(axis=1)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([ 4.76180278,  4.33256337])</span><br></pre></td></tr></table></figure><p>çºµå‘æ•°æ±‚å¹³å‡ï¼š</p><p><em>arr.mean(axis=0)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([ 2.19150913,  6.90285702])</span><br></pre></td></tr></table></figure><h2 id="æ±‚å’Œ"><a href="#æ±‚å’Œ" class="headerlink" title="æ±‚å’Œ"></a>æ±‚å’Œ</h2><p><em>arr.sum()</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">18.188732293794168</span><br></pre></td></tr></table></figure><p>æ±‚å’Œå‡½æ•°ä¹Ÿå¯ä»¥ç”¨ <em>axis</em> æ¥æŒ‡å®šè¡Œæˆ–åˆ—æ±‚å’Œã€‚</p><blockquote><p>æ›´å¤šæ–¹æ³•è¯·å‚è€ƒé™„å½•ã€‚</p></blockquote><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p><img src="https://i.loli.net/2019/02/09/5c5e8e1bb9f55.jpg" alt="math_funcs.jpg"></p><h2 id="å¸ƒå°”æ•°ç»„æ–¹æ³•"><a href="#å¸ƒå°”æ•°ç»„æ–¹æ³•" class="headerlink" title="å¸ƒå°”æ•°ç»„æ–¹æ³•"></a>å¸ƒå°”æ•°ç»„æ–¹æ³•</h2><p>å¯ä»¥å¯¹ä¸€ä¸ªåŒ…å«Trueå’ŒFalseçš„å¸ƒå°”æ•°ç»„æ‰§è¡Œ <em>sum</em> è¿ç®—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randn(100)</span><br><span class="line">(arr &gt; 0).sum()</span><br><span class="line"></span><br><span class="line">49</span><br></pre></td></tr></table></figure><p><em>bools.any()</em> æµ‹è¯•æ•°ç»„ä¸­æ˜¯å¦æœ‰ <em>True</em> çš„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bools = np.array([False])</span><br><span class="line">bools.any()</span><br><span class="line"></span><br><span class="line"># è¾“å‡º</span><br><span class="line">False</span><br></pre></td></tr></table></figure><p><em>bools.all()</em> æµ‹è¯•æ‰€æœ‰å€¼æ˜¯å¦éƒ½æ˜¯ <em>True</em>.</p><h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><p>NumPy çš„æ•°ç»„æ’åºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randn(6)</span><br><span class="line">arr.sort()</span><br></pre></td></tr></table></figure><p><em>sort</em> æ˜¯ <em>in-place</em> çš„ï¼Œ ä¹Ÿå°±æ˜¯ä¼šä¿®æ”¹åŸæ¥æ•°ç»„çš„æ•°æ®ã€‚</p><h2 id="Uniqueå‡½æ•°"><a href="#Uniqueå‡½æ•°" class="headerlink" title="Uniqueå‡½æ•°"></a>Uniqueå‡½æ•°</h2><p>uniqueå‡½æ•°è¿”å›æ’åºåçš„ã€æ•°ç»„ä¸­å”¯ä¸€çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">names = np.array([&apos;Bob&apos;, &apos;Joe&apos;, &apos;Will&apos;, &apos;Bob&apos;, &apos;Will&apos;, &apos;Joe&apos;, &apos;Joe&apos;])</span><br><span class="line">np.unique(names)</span><br></pre></td></tr></table></figure><p>å®ƒçš„ä½œç”¨å’Œä¸‹é¢çš„ä»£ç å·®ä¸å¤š:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sorted(set(names))</span><br></pre></td></tr></table></figure><h2 id="in1då‡½æ•°"><a href="#in1då‡½æ•°" class="headerlink" title="in1då‡½æ•°"></a>in1då‡½æ•°</h2><p>in1då‡½æ•°æµ‹è¯•ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼ï¼Œæ˜¯å¦éƒ½åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¦‚æœåœ¨å°±è¿”å›Trueï¼Œä¸å†è¿”å›False:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">values = np.array([1,2,3])</span><br><span class="line">np.in1d(values,[1])</span><br><span class="line"># </span><br><span class="line">arrray([True,False,False])</span><br></pre></td></tr></table></figure><p>æ›´å¤šå‡½æ•°è¯·å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2019/02/09/5c5eea638e62f.jpeg" alt="array_set_operations.jpeg"></p><h1 id="NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ"><a href="#NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ" class="headerlink" title="NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ"></a>NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ</h1><p>NumPyå¯ä»¥ä»ç£ç›˜è¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥å°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ã€‚è¿™ä¸ªéƒ¨åˆ†åªè®²ä¸€äº›åŸºæœ¬çš„å†…å®¹ï¼Œå› ä¸ºå¤§å®¶å¯èƒ½æ›´å–œæ¬¢ç”¨ <em>Pandas</em> æ¥å¯¼å…¥æ•°æ®ã€‚</p><p>åˆ†åˆ«ä»‹ç»ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ul><li><em>np.save</em></li><li><em>np.load</em></li></ul><h2 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arrange(10)</span><br><span class="line">np.save(&apos;/Users/wittyfans/Desktop/data&apos;,arr)</span><br></pre></td></tr></table></figure><h2 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">saved = np.load(&apos;/Users/wittyfans/Desktop/data.npy&apos;)</span><br><span class="line">saved</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…å‚¨å­˜"><a href="#æ‰“åŒ…å‚¨å­˜" class="headerlink" title="æ‰“åŒ…å‚¨å­˜"></a>æ‰“åŒ…å‚¨å­˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.savez(&apos;path&apos;,a=arr,b=arr)</span><br></pre></td></tr></table></figure><h2 id="è¯»å–æ‰“åŒ…æ–‡ä»¶"><a href="#è¯»å–æ‰“åŒ…æ–‡ä»¶" class="headerlink" title="è¯»å–æ‰“åŒ…æ–‡ä»¶"></a>è¯»å–æ‰“åŒ…æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arch = np.load(&apos;path.npz&apos;)</span><br><span class="line">arch[&apos;a&apos;] # é€šè¿‡ç±»ä¼¼dictçš„æ–¹å¼æ¥è¯»å–æ•°æ®</span><br><span class="line">arch[&apos;b&apos;]</span><br></pre></td></tr></table></figure><h2 id="éšæœºç”Ÿæˆ"><a href="#éšæœºç”Ÿæˆ" class="headerlink" title="éšæœºç”Ÿæˆ"></a>éšæœºç”Ÿæˆ</h2><p>ç”Ÿæˆç¬¦åˆæ­£æ€åˆ†å¸ƒçš„4x4æ•°ç»„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">samples = np.random.normal(size=(4, 4))</span><br><span class="line">samples</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([[ 0.5732,</span><br><span class="line"></span><br><span class="line">0.1933, 0.4429, 1.2796],</span><br><span class="line"></span><br><span class="line">[ 0.575 , [-0.5367, [ 0.1525,</span><br><span class="line"></span><br><span class="line">0.4339, -0.7658, -1.237 ],</span><br><span class="line"></span><br><span class="line">1.8545, -0.92 , -0.1082],</span><br><span class="line"></span><br><span class="line">0.9435, -1.0953, -0.144 ]])</span><br></pre></td></tr></table></figure><p>Pythonå†…ç½®çš„ <em>random</em> æ¨¡å—ï¼Œç›¸æ¯”äºNumPyè¦æ…¢ä¸€ä¸ªæ•°é‡çº§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from random import normalvariate</span><br><span class="line"></span><br><span class="line">N = 1000000</span><br><span class="line"></span><br><span class="line">%timeit samples = [normalvariate(0, 1) for _ in range(N)] 1.77 s +- 126 ms per loop (mean +- std. dev. of 7 runs, 1 loop each)</span><br><span class="line"></span><br><span class="line">%timeit np.random.normal(size=N) 61.7 ms +- 1.32 ms per loop (mean +- std. dev. of 7 runs, 10 loops each)</span><br></pre></td></tr></table></figure><p>è¿™äº›éšæœºæ•°éƒ½æ˜¯æ ¹æ®ç§å­å³ <em>seed</em> ç”Ÿæˆçš„,å¦‚æœæ¯æ¬¡ç”Ÿæˆéšæœºæ•°çš„æ—¶å€™seedéƒ½ä¸å˜ï¼Œé‚£ä¹ˆæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°éƒ½ä¼šæ˜¯ä¸€æ ·çš„ã€‚é»˜è®¤NumPyä¼šæ ¹æ®æ—¶é—´æ¥æ›´æ”¹seedï¼Œè¿™æ ·æ¯æ¬¡æˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°ä¸ä¸€æ ·çš„éšæœºæ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># éšæœºäº§ç”Ÿä¸€ä¸ªæ•°æ®ï¼Œæ­¤éšæœºæ•°æ˜¯å˜åŠ¨çš„</span><br><span class="line">print(np.random.random())</span><br><span class="line">print(&apos;--åˆ†å‰²çº¿0--&apos;)</span><br><span class="line"># è®¾ç½®éšæœºæ•°ç§å­</span><br><span class="line">np.random.seed(1)</span><br><span class="line"># äº§ç”Ÿä¸€ç»„é¡ºåºçš„å›ºå®šçš„æ•°æ•°æ®</span><br><span class="line">for _ in range(5):</span><br><span class="line">    print(np.random.random())</span><br><span class="line"># æ­¤æ—¶ï¼Œå¦‚æœå†ç”Ÿæˆä¸€ä¸ªæ•°æ®ï¼Œè¯¥æ•°æ®ä¹Ÿæ˜¯å›ºå®šçš„</span><br><span class="line">print(&apos;--åˆ†å‰²çº¿1--&apos;)</span><br><span class="line">print(np.random.random())</span><br><span class="line"># è¯´æ˜æˆ‘ä»¬è®¾ç½®çš„ç§å­ä¼šä¸€ç›´æœ‰æ•ˆï¼Œé™¤éæˆ‘ä»¬å†æ¬¡è®¾ç½®</span><br><span class="line">np.random.seed()</span><br><span class="line">print(&apos;--åˆ†å‰²çº¿2--&apos;)</span><br><span class="line"># æ­¤éšæœºæ•°æ˜¯å˜åŠ¨çš„</span><br><span class="line">print(np.random.random())</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.jianshu.com/p/7f4f2303a125" target="_blank" rel="noopener">æ•°æ®åˆ†æå­¦ä¹ ç¬”è®°</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¯¹æ•°ç»„çš„æ“ä½œæ˜¯ &lt;em&gt;NumPy&lt;/em&gt; ä¸­å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œäº†è§£è¿™äº›å†…ç½®çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ çš„æ•ˆç‡äº‹åŠåŠŸå€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="numpy" scheme="http://wittyfans.com/tags/numpy/"/>
    
  </entry>
  
  <entry>
    <title>Numpy Universal Functions</title>
    <link href="http://wittyfans.com/coding/Numpy-Universal-Functions.html"/>
    <id>http://wittyfans.com/coding/Numpy-Universal-Functions.html</id>
    <published>2019-02-09T08:01:12.000Z</published>
    <updated>2019-02-09T08:05:49.260Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Numpyä¸­ä¸€äº›åŸºæœ¬å‡½æ•°å‚è€ƒã€‚</p></blockquote><a id="more"></a><h1 id="Universal-Functions"><a href="#Universal-Functions" class="headerlink" title="Universal Functions"></a>Universal Functions</h1><p><em>Universal Functions</em> ä¹Ÿå« <em>ufunc</em>ï¼Œæ¯”å¦‚å¼€æ ¹ <em>sqrt</em>ï¼Œ<em>exp</em>:</p><p><em>Sqrt:</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(10)</span><br><span class="line">np.sqrt(arr)</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">array([ 0.        ,  1.        ,  1.41421356,  1.73205081,  2.        ,</span><br><span class="line">        2.23606798,  2.44948974,  2.64575131,  2.82842712,  3.        ])</span><br></pre></td></tr></table></figure><p><em>exp:</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">np.exp(arr)</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">array([  1.00000000e+00,   2.71828183e+00,   7.38905610e+00,</span><br><span class="line">         2.00855369e+01,   5.45981500e+01,   1.48413159e+02,</span><br><span class="line">         4.03428793e+02,   1.09663316e+03,   2.98095799e+03,</span><br><span class="line">         8.10308393e+03])</span><br></pre></td></tr></table></figure><p>ä½ æœ‰ä¸¤ä¸ªæ•°ç»„ï¼Œå®ƒä»¬çš„é•¿åº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½ éœ€è¦å¯¹æ¯”ä¸¤ä¸ªæ•°ç»„ä¸­å¯¹åº”çš„å€¼ï¼Œè¿”å›å¤§çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randn(1,10)*10</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([[  7.45106569,   2.47039999,  13.3143474 ,  11.73359137,</span><br><span class="line">         -5.16471496,   3.37688733,  -3.03783497,  13.94821303,</span><br><span class="line">        -13.79166595,   4.35553629]])</span><br><span class="line"></span><br><span class="line">b = np.random.randn(1,10)*10</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([[  0.73315303,   5.87494888,   4.01168595,   3.78652398,</span><br><span class="line">         -0.35151181,  -5.61564742,   3.0190971 ,  -2.28944227,</span><br><span class="line">          6.45900038,  14.22907421]])</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ <em>np</em> çš„ <em>maximun</em> å‡½æ•°å°±å¯ä»¥åšåˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.maximum(a,b)</span><br><span class="line"># è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">array([[  7.45106569,   5.87494888,  13.3143474 ,  11.73359137,</span><br><span class="line">         -0.35151181,   3.37688733,   3.0190971 ,  13.94821303,</span><br><span class="line">          6.45900038,  14.22907421]])</span><br></pre></td></tr></table></figure><h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><p><img src="https://i.loli.net/2019/02/09/5c5e89c06da7b.jpg" alt="ufuncs"></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Numpyä¸­ä¸€äº›åŸºæœ¬å‡½æ•°å‚è€ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="numpy" scheme="http://wittyfans.com/tags/numpy/"/>
    
  </entry>
  
  <entry>
    <title>Windows æ‰¹é‡æ˜ å°„å¹¶é‡å‘½åç½‘ç»œé©±åŠ¨å™¨</title>
    <link href="http://wittyfans.com/coding/Windows-%E6%89%B9%E9%87%8F%E6%98%A0%E5%B0%84%E5%B9%B6%E9%87%8D%E5%91%BD%E5%90%8D%E7%BD%91%E7%BB%9C%E9%A9%B1%E5%8A%A8%E5%99%A8.html"/>
    <id>http://wittyfans.com/coding/Windows-æ‰¹é‡æ˜ å°„å¹¶é‡å‘½åç½‘ç»œé©±åŠ¨å™¨.html</id>
    <published>2019-02-08T09:24:34.000Z</published>
    <updated>2019-02-08T09:40:23.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¦‚ä½•ç”¨è„šæœ¬æ‰¹é‡æ˜ å°„windowsç½‘ç»œé©±åŠ¨å™¨ï¼Œå¹¶ä¿®æ”¹å…¶åç§°ï¼Ÿ</p></blockquote><a id="more"></a><p>æ˜ å°„ç½‘ç»œé©±åŠ¨å™¨åï¼Œå¯ä»¥ç›´æ¥åœ¨windowsçš„èµ„æºç®¡ç†å™¨ä¸­è®¿é—®æŒ‡å®šçš„ç½‘ç»œè·¯å¾„ï¼Œä¸ç”¨æ¯æ¬¡éƒ½è¾“å…¥å¸¸å¸¸çš„è·¯å¾„åœ°å€ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p><p><img src="https://msegceporticoprodassets.blob.core.windows.net/inline-media/0e21d35a-52f5-4ea4-9971-d0c4a23ea705-zh-hans" alt=""></p><h1 id="æ‰‹åŠ¨æ˜ å°„"><a href="#æ‰‹åŠ¨æ˜ å°„" class="headerlink" title="æ‰‹åŠ¨æ˜ å°„"></a>æ‰‹åŠ¨æ˜ å°„</h1><p>æ˜ å°„ç½‘ç»œè·¯å¾„å¾ˆç®€å•</p><ol><li>ç›´æ¥æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œç„¶åé€‰æ‹©æ˜ å°„ç½‘ç»œé©±åŠ¨å™¨</li><li>åœ¨â€œé©±åŠ¨å™¨â€åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©é©±åŠ¨å™¨å·ã€‚ï¼ˆä»»ä½•å¯ç”¨é©±åŠ¨å™¨å·å‡å¯ã€‚ï¼‰</li><li>åœ¨â€œæ–‡ä»¶å¤¹â€æ¡†ä¸­ï¼Œé”®å…¥æ–‡ä»¶å¤¹æˆ–è®¡ç®—æœºçš„è·¯å¾„ï¼Œæˆ–è€…é€‰æ‹©â€œæµè§ˆâ€ä»¥æŸ¥æ‰¾æ–‡ä»¶å¤¹æˆ–è®¡ç®—æœºã€‚è‹¥è¦åœ¨æ¯æ¬¡ç™»å½•åˆ°ç”µè„‘æ—¶éƒ½è¿›è¡Œè¿æ¥ï¼Œè¯·é€‰ä¸­â€œç™»å½•æ—¶é‡æ–°è¿æ¥â€å¤é€‰æ¡†ã€‚<br>é€‰æ‹©â€œå®Œæˆâ€ã€‚</li></ol><p>ä½†è¿™æœ‰ä¸ªé—®é¢˜ï¼Œå³å®ƒæ˜ å°„åæ˜¾ç¤ºçš„åå­—æ˜¯è¯¥æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œå¦‚æœåå­—ä¸­æœ‰ç©ºæ ¼æˆ–è€…ä¸­æ–‡ï¼Œå¯èƒ½ä¼šå‡ºç°åå­—å°±æ˜¯æ•´ä¸ªè·¯å¾„çš„æƒ…å†µï¼Œå°½ç®¡ä½ å¯ä»¥æ‰‹åŠ¨æ”¹è¿‡æ¥ï¼Œä½†å¦‚æœä½ è¦åœ¨åŸŸä¸­æ‰¹é‡ç»™ç”µè„‘æ˜ å°„ï¼Œè¿™ç§æ–¹å¼å°±ä¸å¤ªæ–¹ä¾¿äº†ã€‚</p><h1 id="batç›´æ¥æ˜ å°„"><a href="#batç›´æ¥æ˜ å°„" class="headerlink" title="batç›´æ¥æ˜ å°„"></a>batç›´æ¥æ˜ å°„</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ECHO OFF</span><br><span class="line">net use Z: /delete</span><br><span class="line">net use Z: \\you\\net\\url /persistent:yes</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><p>é€šè¿‡batæ‰¹é‡æ˜ å°„ï¼Œä¸è¿‡è¿™ç§æ–¹æ³•ä¹Ÿæ— æ³•è‡ªå®šä¹‰åå­—ã€‚</p><h1 id="ä¿®æ”¹æ³¨å†Œè¡¨-bat"><a href="#ä¿®æ”¹æ³¨å†Œè¡¨-bat" class="headerlink" title="ä¿®æ”¹æ³¨å†Œè¡¨+bat"></a>ä¿®æ”¹æ³¨å†Œè¡¨+bat</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">net use F: /delete</span><br><span class="line">reg add HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\MountPoints2\##\10.22.22.2#disk#file#&apos;wittyfans file&apos;#files /v _LabelFromReg /t REG_SZ /f /d &quot;æˆ‘éšä¾¿æ˜ å°„çš„ä¸€ä¸ªç›˜&quot;</span><br><span class="line">net use F: &quot;\\10.22.22.2\disk\file\wittyfans file\files&quot; /persistent:yes</span><br></pre></td></tr></table></figure><p>å…ˆå°†éœ€è¦å‘½åçš„ç›˜ç¬¦åˆ é™¤ï¼Œå†å°†è·¯å¾„å’Œéœ€è¦å®šä¹‰çš„åå­—æ·»åŠ åˆ°æ³¨å†Œè¡¨,éšåæ˜ å°„å³å¯ã€‚<br>éœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</p><ul><li>åœ¨æ³¨å†Œè¡¨ç¼–è¾‘è¯­å¥ä¸­ï¼Œåé¢çš„è·¯å¾„ä¸­çš„æ–œæ éœ€è¦ç”¨äº•å·æ›¿ä»£</li><li>è·¯å¾„ä¸­æ–‡ä»¶å¤¹çš„åå­—ä¸­åŒ…å«ç©ºæ ¼çš„ï¼Œéœ€è¦ç”¨å¼•å·æ‹¬èµ·æ¥</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¦‚ä½•ç”¨è„šæœ¬æ‰¹é‡æ˜ å°„windowsç½‘ç»œé©±åŠ¨å™¨ï¼Œå¹¶ä¿®æ”¹å…¶åç§°ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="windows" scheme="http://wittyfans.com/tags/windows/"/>
    
      <category term="cmd" scheme="http://wittyfans.com/tags/cmd/"/>
    
  </entry>
  
  <entry>
    <title>NumPyä¹‹NDarraysåˆ›å»ºã€è¿ç®—ã€åˆ‡ç‰‡ã€ç´¢å¼•</title>
    <link href="http://wittyfans.com/coding/NumPy%E4%B9%8BNDarrays%E5%88%9B%E5%BB%BA%E3%80%81%E8%BF%90%E7%AE%97%E3%80%81%E5%88%87%E7%89%87%E3%80%81%E7%B4%A2%E5%BC%95.html"/>
    <id>http://wittyfans.com/coding/NumPyä¹‹NDarraysåˆ›å»ºã€è¿ç®—ã€åˆ‡ç‰‡ã€ç´¢å¼•.html</id>
    <published>2019-02-08T08:55:13.000Z</published>
    <updated>2019-02-08T08:57:19.539Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ— é¡»å¤šè®²ï¼ŒMost important foundational packages for numerical computing in Python.</p></blockquote><a id="more"></a><h1 id="NumPyä¹‹NDarraysåˆ›å»ºã€è¿ç®—ã€åˆ‡ç‰‡ã€ç´¢å¼•"><a href="#NumPyä¹‹NDarraysåˆ›å»ºã€è¿ç®—ã€åˆ‡ç‰‡ã€ç´¢å¼•" class="headerlink" title="NumPyä¹‹NDarraysåˆ›å»ºã€è¿ç®—ã€åˆ‡ç‰‡ã€ç´¢å¼•"></a>NumPyä¹‹NDarraysåˆ›å»ºã€è¿ç®—ã€åˆ‡ç‰‡ã€ç´¢å¼•</h1><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Numpyï¼Ÿç»™ä½ ä¸¤ç»„æ•°æ®è¿ç®—ï¼Œç„¶åå¯¹æ¯”ä¸€ä¸‹æ€§èƒ½å°±çŸ¥é“äº†ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">my_arr = np.arange(1000000)</span><br><span class="line"></span><br><span class="line">my_list = list(range(1000000))</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯¹ä¸¤ç»„æ•°ä¹˜ä»¥2</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%time for _ in range(10): my_arr2 = my_arr * 2 </span><br><span class="line"></span><br><span class="line">CPU times: user 20 ms, sys: 50 ms, total: 70 ms Wall time: 72.4 ms</span><br><span class="line"></span><br><span class="line">%time for _ in range(10): my_list2 = [x * 2 for x in my_list] </span><br><span class="line"></span><br><span class="line">CPU times: user 760 ms, sys: 290 ms, total: 1.05 s</span><br></pre></td></tr></table></figure><h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><p>Numpyä¸­ç”Ÿæˆéšæœºæ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">data = np.random.randn(2,3)</span><br></pre></td></tr></table></figure><p>æ•°æ®é•¿è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.05094946, -1.54555805, -1.19695135],</span><br><span class="line">       [-1.06169454,  1.13763682,  0.57538678]])</span><br></pre></td></tr></table></figure><p>å°†å®ƒä»¬ä¹˜10:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[  9.41882893,   3.20674452,  18.05866858],</span><br><span class="line">       [ -7.97835594,  -9.56449228,  -0.83342424]])</span><br></pre></td></tr></table></figure><p>ä¸¤ä»½æ•°æ®ç›¸åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-2.37617968,  3.45388874, -0.64218591],</span><br><span class="line">       [-2.99399147, -1.11118452, -1.11992404]])</span><br></pre></td></tr></table></figure><p>å¯¹äºNumpyçš„æ•°æ®ï¼š</p><blockquote><p>An ndarray is a generic multidimensional container for homogeneous data; that is, all of the elements must be the same type. Every array has a shape, a tuple indicating the size of each dimension, and a dtype, an object describing the data type of the array:</p></blockquote><ul><li>æ‰€æœ‰çš„æ•°æ®å¿…é¡»æ˜¯åŒæ ·çš„ç±»å‹</li><li>æ¯ä¸ªæ•°ç»„éƒ½æœ‰ä¸€ä¸ªå…ƒç»„ç±»å‹çš„shapeå±æ€§ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°ç»„çš„ç»´åº¦ä¿¡æ¯</li><li>æ¯ä¸ªæ•°ç»„éƒ½æœ‰ä¸€ä¸ªdtypeå±æ€§ç”¨æ¥æè¿°å®ƒå…¶ä¸­çš„æ•°æ®ç±»å‹</li></ul><p>å¦‚ä¸Šé¢çš„dataï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data.shape ---&gt; (2, 3)</span><br><span class="line">data.dtype --&gt; dtype(&apos;float64&apos;)</span><br></pre></td></tr></table></figure><blockquote><p>While itâ€™s not necessary to have a deep understanding of NumPy for many data analytical applications, becoming proficient in array-oriented programming and thinking is a key step along the way to becoming a scientific Python guru.</p></blockquote><h2 id="åˆ›å»º-NDarrays"><a href="#åˆ›å»º-NDarrays" class="headerlink" title="åˆ›å»º NDarrays"></a>åˆ›å»º NDarrays</h2><p>ç›´æ¥ä»æ•°ç»„åˆ›å»ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data1 = [6,7.5,8,0,1]</span><br><span class="line">arr1 = np.array(data1)</span><br><span class="line">arr1</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä»å¤šç»´æ•°ç»„åˆ›å»ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data2 = [[1, 2, 3, 4], [5, 6, 7, 8]]</span><br><span class="line">arr2 = np.array(data2)</span><br><span class="line"></span><br><span class="line">arr2.shape --&gt; (2,4)</span><br><span class="line">arr2.dim --&gt;2</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <em>ndim</em> å±æ€§æ¥çœ‹æ•°ç»„çš„ç»´åº¦ä¿¡æ¯ã€‚</p><p>Numpyè¿˜æœ‰ä¸€äº›æœ‰è¶£çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åˆ›å»º0å’Œ1ï¼Œæˆ–è€…ç©ºå€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.zeros(10) --&gt; åˆ›å»º10ä¸ª0çš„æ•°ç»„</span><br><span class="line">np.zeros((3,6))</span><br><span class="line">np.empty((2,3,2)) --&gt; åˆ›å»ºä¸¤ä¸ªä¸¤åˆ—ä¸‰è¡Œçš„æ•°ç»„</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›åˆ›å»º<em>ndarrays</em>çš„æ–¹æ³•ï¼š</p><ul><li>array: Convert input data (list, tuple, array, or other sequence type) to an ndarray either by inferring a dtype</li><li>asarray: Convert input to ndarray, but do not copy if the input is already an ndarray</li><li>arange: Like the built-in range but returns an ndarray instead of a list</li></ul><p>æ›´å¤šçš„æ–¹æ³•å¯ä»¥å‚è€ƒï¼š<em>Python for data analyse, Table 4-1</em></p><h2 id="NDarraysçš„æ•°æ®ç±»å‹"><a href="#NDarraysçš„æ•°æ®ç±»å‹" class="headerlink" title="NDarraysçš„æ•°æ®ç±»å‹"></a>NDarraysçš„æ•°æ®ç±»å‹</h2><p>ndarrays çš„data typeæˆ–è€…æ˜¯dtypeåŒ…å«äº†ä¸€äº›åŸºæœ¬çš„ä¿¡æ¯(meta),arrayåœ¨å®šä¹‰çš„æ—¶å€™æ˜¯å¯ä»¥æŒ‡å®šæ•°æ®ç±»å‹çš„ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr1 = np.array([1,2,3],dtype=np.float64)</span><br><span class="line">arr2 = np.array([1,2,3],dtype=np.int32)</span><br></pre></td></tr></table></figure><p>æ•°æ®ç±»å‹å¯ä»¥ç›¸äº’è½¬åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr = np.array([1,2,3,4])</span><br><span class="line">arr.dtype</span><br><span class="line"># è¾“å‡º dtype(&apos;int64&apos;)</span><br><span class="line"></span><br><span class="line">arr = np.array([1,2,3,4])</span><br><span class="line">floatarr = arr.astype(np.float64)</span><br><span class="line">floatarr.dtype</span><br><span class="line"># è¾“å‡º dtype(&apos;float64&apos;)</span><br></pre></td></tr></table></figure><p>ç›¸åçš„<em>float</em>ä¹Ÿå¯ä»¥è½¬åŒ–æˆ <em>int</em>,åè¿›åˆ¶å¤šå‡ºæ¥çš„éƒ¨åˆ†ä¼šè¢«å››èˆäº”å…¥ã€‚</p><h2 id="æ•°ç»„è¿ç®—"><a href="#æ•°ç»„è¿ç®—" class="headerlink" title="æ•°ç»„è¿ç®—"></a>æ•°ç»„è¿ç®—</h2><p>ä¸‹é¢æ˜¯åŸºæœ¬çš„è¿ç®—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr = np.array([[1., 2., 3.], [4., 5., 6.]])</span><br></pre></td></tr></table></figure><p>ä¹˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr*arr</span><br><span class="line"># out</span><br><span class="line">array([[  1.,   4.,   9.],</span><br><span class="line">       [ 16.,  25.,  36.]])</span><br></pre></td></tr></table></figure><p>å‡:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr-arr</span><br><span class="line"># out</span><br><span class="line">array([[ 0.,  0.,  0.],</span><br><span class="line">       [ 0.,  0.,  0.]])</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰çš„è¿ç®—éƒ½æ˜¯åŸºäºç›¸å¯¹å…³ç³»çš„ï¼Œè®°ä½è¿™ä¸€ç‚¹å³å¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œnpè¿˜æ”¯æŒæ¯”è¾ƒï¼Œå‡è®¾ä¸¤ä¸ªarrå¯¹æ¯”ï¼Œè¿”å›ç»“æœä¼šæ˜¯ä¸€ä¸ªåŒ…å«trueæˆ–falseçš„æ•°ç»„ã€‚</p><h2 id="åˆ‡ç‰‡å’Œç´¢å¼•"><a href="#åˆ‡ç‰‡å’Œç´¢å¼•" class="headerlink" title="åˆ‡ç‰‡å’Œç´¢å¼•"></a>åˆ‡ç‰‡å’Œç´¢å¼•</h2><p>Numpyçš„åˆ‡ç‰‡å’Œç´¢å¼•å’Œæ•°ç»„çš„å·®ä¸å¤šï¼Œåˆ‡ç‰‡å°±æ˜¯æŒ‰ç…§åæ ‡æˆ–è€…åæ ‡èŒƒå›´æ¥æ‰¾å‡ºå¯¹åº”ï¼Œæˆ–å¯¹åº”èŒƒå›´å†…çš„å€¼ï¼Œæ ¹æ®åæ ‡æ¥ç†è§£å°±å¾ˆç®€å•</p><p><img src="https://i.loli.net/2019/02/08/5c5d05c2d4a0f.jpeg" alt=""></p><p>ä½ å¯ä»¥å¯¹ä¸€ä¸ªåˆ‡ç‰‡èŒƒå›´å†…çš„å€¼é‡æ–°èµ‹å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(10)</span><br><span class="line">arr[5] --&gt; 5</span><br><span class="line">arr[5:8] --&gt; [5,6,7]</span><br><span class="line">arr[5:8] = 12</span><br><span class="line">arr --&gt; array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])</span><br></pre></td></tr></table></figure><p>npè®¾è®¡éœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œæ‰€ä»¥å¯¹äºæ•°ç»„çš„æ“ä½œï¼Œéƒ½æ˜¯åœ¨åŸæ¥çš„æ•°æ®ä¸Šæ”¹åŠ¨ï¼Œä¸ä¼šcopyã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arr_slice = arr[5:8]</span><br><span class="line">arr_slice</span><br><span class="line"># out: array([5, 6, 7])</span><br><span class="line"></span><br><span class="line">arr_slice[:] = 9 # [:]æ˜¯åº”ç”¨åœ¨æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">arr</span><br><span class="line"># out: array([0, 1, 2, 3, 4, 9, 9, 9, 8, 9])</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¦copyï¼Œnpæä¾›äº†ä¸€ä¸ªcopyå‡½æ•°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">arr3d = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])</span><br><span class="line">copyed = arr3d.copy()</span><br><span class="line">copyed</span><br><span class="line"># out:</span><br><span class="line">array([[[ 1,  2,  3],</span><br><span class="line">        [ 4,  5,  6]],</span><br><span class="line"></span><br><span class="line">       [[ 7,  8,  9],</span><br><span class="line">        [10, 11, 12]]])</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ä¸¤ä¸ªç»´åº¦ä¸Šåˆ‡ç‰‡ï¼š</p><p><em>arr2d[:]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[1, 2, 3],</span><br><span class="line">       [4, 5, 6],</span><br><span class="line">       [7, 8, 9]])</span><br></pre></td></tr></table></figure><p><em>arr2d[:2]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[1, 2, 3],</span><br><span class="line">       [4, 5, 6]])</span><br></pre></td></tr></table></figure><p><em>arr2d[:2,1:]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[2, 3],</span><br><span class="line">       [5, 6]])</span><br></pre></td></tr></table></figure><p><em>arr2d[:,:0]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[1],</span><br><span class="line">       [4],</span><br><span class="line">       [7]])</span><br></pre></td></tr></table></figure><p>å‚ç…§ä¸‹å›¾ï¼ŒåŠ¨æ‰‹å®è·µå‡ æ¬¡ï¼Œå°±ä¼šæ‡‚å…¶ä¸­çš„å¥—è·¯äº†ã€‚</p><p><img src="https://i.loli.net/2019/02/08/5c5d054478e7b.jpeg" alt=""></p><h2 id="Boolean-Indexing"><a href="#Boolean-Indexing" class="headerlink" title="Boolean Indexing"></a>Boolean Indexing</h2><p>æˆ‘ä»¬æœ‰ä¸€æ‰¹åå­—:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">names = np.array([&apos;Bob&apos;, &apos;Joe&apos;, &apos;Will&apos;, &apos;Bob&apos;, &apos;Will&apos;, &apos;Joe&apos;, &apos;Joe&apos;])</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ <em>names == â€˜Bobâ€™</em> æ¥è¿”å›ä¸€ä¸ªæ£€æŸ¥ç»“æœï¼Œè¿™ä¸ªç»“æœåŒ…å«çš„æ˜¯ä¸€ä¸ª <em>bollean</em> çš„ <em>list</em>.</p><p><em>names == â€˜Bobâ€™</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([ True, False, False,  True, False, False, False], dtype=bool)</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä»½æ•°æ®ï¼Œä¹Ÿæ˜¯7è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å§è¿™ä¸ªåŒ…å« <em>True</em> å’Œ <em>False</em> çš„l <em>List</em> ä¼ è¿›å»ï¼Œè¿™æ · <em>Numpy</em> ä¼šé€‰å‡ºé‚£äº›å¯¹åº” <em>True</em> çš„è¡Œã€‚</p><p><em>data = np.random.randn(7,4)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.71030181, -0.14900916, -1.15238417, -0.49395683],</span><br><span class="line">       [-0.92601472,  0.88452947, -0.9206763 , -0.43338155],</span><br><span class="line">       [-0.68093622,  0.93612942,  0.03261537,  1.44615091],</span><br><span class="line">       [ 1.40919226, -0.07214425, -0.07973205, -1.01432059],</span><br><span class="line">       [-0.4042085 ,  0.66812768,  0.4715137 ,  0.34981598],</span><br><span class="line">       [ 0.89631112, -0.70534677,  0.44560626,  0.6133761 ],</span><br><span class="line">       [-0.28979691,  0.58481489, -0.06945283, -0.99545537]])</span><br></pre></td></tr></table></figure><p><em>data[names==â€™Bobâ€™]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.71030181, -0.14900916, -1.15238417, -0.49395683],</span><br><span class="line">       [ 1.40919226, -0.07214425, -0.07973205, -1.01432059]])</span><br></pre></td></tr></table></figure><blockquote><p> Boolean selection will not fail if the boolean array is not the correct length, so I recommend care when using this feature.</p></blockquote><p>ä¸Šé¢çš„é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥é…åˆåˆ‡ç‰‡ï¼š</p><p><em>data[names==â€™Bobâ€™,:1]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.71030181],</span><br><span class="line">       [ 1.40919226]])</span><br></pre></td></tr></table></figure><p>é€‰æ‹©é™¤äº† <em>Bob</em> ä¹‹å¤–çš„åå­—ï¼š</p><ul><li><em>names != â€˜Bobâ€™</em></li><li><em>~(names == â€˜Bobâ€™)</em></li></ul><p>å¯¹äº <em>names</em> çš„è¿‡æ»¤ï¼Œå¯ä»¥ç”¨ç»„åˆæ¡ä»¶ï¼š</p><ul><li><em>cond = names == â€˜Bobâ€™</em></li><li><em>cond = (names==â€™Bobâ€™) | (names == â€˜willâ€™)</em></li></ul><p>å¯¹äº <em>data</em> ä¹Ÿä¸€æ ·ï¼š</p><p><em>data[data &lt; 0] = 0</em></p><p>è®¾ç½®æ•´è¡Œçš„å€¼ä¹Ÿéå¸¸ç®€å•ï¼š</p><p><em>data[names != â€˜Joeâ€™] = 7</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array([[ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [-0.92601472,  0.88452947, -0.9206763 , -0.43338155],</span><br><span class="line">       [ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [ 0.89631112, -0.70534677,  0.44560626,  0.6133761 ],</span><br><span class="line">       [-0.28979691,  0.58481489, -0.06945283, -0.99545537]])</span><br></pre></td></tr></table></figure><h2 id="Fancy-Indexing"><a href="#Fancy-Indexing" class="headerlink" title="Fancy Indexing"></a>Fancy Indexing</h2><p>Fancy indexing is a term adopted by NumPy to describe indexing using integer arrays. Suppose we had an 8 Ã— 4 array:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = np.empty((8,4),dtype=np.int)</span><br><span class="line">for i in range(8):</span><br><span class="line">    arr[i] = i</span><br><span class="line">arr</span><br></pre></td></tr></table></figure><p>é€‰æ‹©å•ä¸ªå€¼ï¼š</p><p><em>arr[3,0]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out: 3</span><br></pre></td></tr></table></figure><p>é€‰æ‹©å¤šè¡Œï¼š</p><p><em>arr[[3,0]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[3, 3, 3, 3],</span><br><span class="line">       [0, 0, 0, 0]])</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªæŒ‰é¡ºåºæ’åˆ—çš„ <em>8x4</em> çš„æ•°ç»„ï¼š</p><p><em>arr = np.arange(32).reshape((8,4))</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0,  1,  2,  3],</span><br><span class="line">       [ 4,  5,  6,  7],</span><br><span class="line">       [ 8,  9, 10, 11],</span><br><span class="line">       [12, 13, 14, 15],</span><br><span class="line">       [16, 17, 18, 19],</span><br><span class="line">       [20, 21, 22, 23],</span><br><span class="line">       [24, 25, 26, 27],</span><br><span class="line">       [28, 29, 30, 31]])</span><br></pre></td></tr></table></figure><p>æŒ‰é€‰æ‹©å‰ä¸¤ä¸ªå­æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ï¼š</p><p><em>arr[[1,2],[0,0]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([4, 8])</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥å¯¹é€‰æ‹©å‡ºæ¥çš„æ•°ç»„ï¼Œè¿›è¡Œæ’åºï¼š</p><p><em>arr[[1,2]][:]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[ 4,  5,  6,  7],</span><br><span class="line">       [ 8,  9, 10, 11]])</span><br></pre></td></tr></table></figure><p><em>arr[[1,2]][:,[0]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[4],</span><br><span class="line">       [8]])</span><br></pre></td></tr></table></figure><p><em>arr[[1,2]][:,[0,3,2,1]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[ 4,  7,  6,  5],</span><br><span class="line">       [ 8, 11, 10,  9]])</span><br></pre></td></tr></table></figure><blockquote><p>Fancy indexing always copies the data into a new array.</p></blockquote><h2 id="Transposing-Arrays-and-Swapping-Axes"><a href="#Transposing-Arrays-and-Swapping-Axes" class="headerlink" title="Transposing Arrays and Swapping Axes"></a>Transposing Arrays and Swapping Axes</h2><h3 id="Shape"><a href="#Shape" class="headerlink" title="Shape"></a>Shape</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">value = 18</span><br><span class="line">x = 2</span><br><span class="line">y = 9</span><br><span class="line">arr = np.arange(value).reshape((x,y))</span><br><span class="line">arr</span><br><span class="line"># è¾“å‡º </span><br><span class="line">array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8],</span><br><span class="line">       [ 9, 10, 11, 12, 13, 14, 15, 16, 17]])</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">value = 18</span><br><span class="line">x = 3</span><br><span class="line">y = 6</span><br><span class="line">arr = np.arange(value).reshape((x,y))</span><br><span class="line"># è¾“å‡º</span><br><span class="line">array([[ 0,  1,  2,  3,  4,  5],</span><br><span class="line">       [ 6,  7,  8,  9, 10, 11],</span><br><span class="line">       [12, 13, 14, 15, 16, 17]])</span><br></pre></td></tr></table></figure><p>åªéœ€è¦ç¡®ä¿ Value = X <em> Y å°±å¯ä»¥ä»»æ„ </em>shape* äº†ã€‚</p><h3 id="Transposing"><a href="#Transposing" class="headerlink" title="Transposing"></a>Transposing</h3><p>çœ‹ä¾‹å­ï¼š</p><p><em>arr = np.arange(18).reshape((3,6))</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0,  1,  2,  3,  4,  5],</span><br><span class="line">       [ 6,  7,  8,  9, 10, 11],</span><br><span class="line">       [12, 13, 14, 15, 16, 17]])</span><br></pre></td></tr></table></figure><p><em>arr.T</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0,  6, 12],</span><br><span class="line">       [ 1,  7, 13],</span><br><span class="line">       [ 2,  8, 14],</span><br><span class="line">       [ 3,  9, 15],</span><br><span class="line">       [ 4, 10, 16],</span><br><span class="line">       [ 5, 11, 17]])</span><br></pre></td></tr></table></figure><p><em>Transposing</em> åœ¨çŸ©é˜µè®¡ç®—ä¸­ç”¨çš„éå¸¸å¤šï¼Œæ¯”å¦‚ç”¨ <em>np.dot</em> æ–¹æ³•è®¡ç®—çŸ©é˜µçš„å†…ç§¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arra = np.array([2,3,0])</span><br><span class="line">arrb = np.array([2,-1,1])</span><br><span class="line">np.dot(arra,arrb)</span><br><span class="line"># è¾“å‡º 1</span><br></pre></td></tr></table></figure><blockquote><p>æ€ä¹ˆè®¡ç®—å†…ç§¯ï¼Ÿçœ‹ä¸‹å›¾å°±æ˜ç™½äº†</p></blockquote><p><img src="https://i.loli.net/2019/02/08/5c5d41ff41077.png" alt=""></p><p><img src="https://i.loli.net/2019/02/08/5c5d4246ea899.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ— é¡»å¤šè®²ï¼ŒMost important foundational packages for numerical computing in Python.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="numpy" scheme="http://wittyfans.com/tags/numpy/"/>
    
      <category term="ndarrays" scheme="http://wittyfans.com/tags/ndarrays/"/>
    
  </entry>
  
  <entry>
    <title>Pythonæ–‡ä»¶æ“ä½œä¸ç¼–ç </title>
    <link href="http://wittyfans.com/coding/Python%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E4%B8%8E%E7%BC%96%E7%A0%81.html"/>
    <id>http://wittyfans.com/coding/Pythonæ–‡ä»¶æ“ä½œä¸ç¼–ç .html</id>
    <published>2019-02-06T14:34:30.000Z</published>
    <updated>2019-02-06T14:38:32.686Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨æ•°æ®åˆ†æä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨<em>pandas</em>çš„ <em>read_csv</em>æ–¹æ³•æ¥è¯»å–ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œä½†ç†è§£è¿™èƒŒåçš„åŸç†ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œè€Œä¸”å¹¸è¿çš„æ˜¯ï¼Œè¿™å¾ˆç®€å•ã€‚</p></blockquote><a id="more"></a><h1 id="Pythonä¸æ–‡ä»¶ã€æ“ä½œç³»ç»Ÿäº¤äº’"><a href="#Pythonä¸æ–‡ä»¶ã€æ“ä½œç³»ç»Ÿäº¤äº’" class="headerlink" title="Pythonä¸æ–‡ä»¶ã€æ“ä½œç³»ç»Ÿäº¤äº’"></a>Pythonä¸æ–‡ä»¶ã€æ“ä½œç³»ç»Ÿäº¤äº’</h1><h2 id="æ–‡ä»¶è¯»å–"><a href="#æ–‡ä»¶è¯»å–" class="headerlink" title="æ–‡ä»¶è¯»å–"></a>æ–‡ä»¶è¯»å–</h2><p>pythonä½¿ç”¨openæ–¹æ³•æ¥å—ä¸€ä¸ªè·¯å¾„ï¼ˆç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„éƒ½å¯ä»¥ï¼‰æ¥è¯»å–è¯»å–æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = &apos;/Users/wittyfans/Documents/data/all_girls.csv&apos; # :)</span><br><span class="line">f = open(path)</span><br></pre></td></tr></table></figure><p>é»˜è®¤æ‰“å¼€æ˜¯ä»¥ <em>r</em> æ¨¡å¼æ‰“å¼€çš„ï¼Œå³åªè¯»ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨æ¨å¯¼å¼æ¥è¯»å–æ–‡ä»¶ä¸­çš„è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lines = [x.rstrip() for x in open(path)]</span><br></pre></td></tr></table></figure><p>å½“ä½ ä½¿ç”¨openæ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¸€å®šè¦å…³æ‰è¿™ä¸ªæ–‡ä»¶:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>pythonä¹Ÿè€ƒè™‘åˆ°äº†ä¸€äº›äººå¯èƒ½è®°æ€§ä¸å¥½ï¼Œæ‰€ä»¥å»ºè®®ä½ ä½¿ç”¨è¿™ç§æ–¹å¼è·Ÿæ–‡ä»¶äº¤äº’ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open(path) as f:</span><br><span class="line">lines = [x.rstrip() for x in f]</span><br></pre></td></tr></table></figure><p><em>with</em> è¯­å¥ä¼šè‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚</p><p>åœ¨ä½¿ç”¨openè¯­å¥çš„æ˜¯ï¼Œæœ‰ä¸€ç‚¹è¦å°å¿ƒï¼Œå¦‚æœå½“å‰æ–‡ä»¶å¤¹å…§æœ‰ä¸€ä¸ªa.txtçš„æ–‡ä»¶ï¼Œå¦‚æœä½ ä¸å°å¿ƒä½¿ç”¨äº† <em>f = open(â€˜./a.txtâ€™,â€™wâ€™)</em> è¯­å¥ï¼Œé‚£ä¹ˆpythonä¼šç«‹å³åˆ›å»ºä¸€ä¸ªa.txtæ–‡ä»¶ï¼Œå¹¶æ›¿æ¢æ‰å½“å‰çš„ï¼ˆå°å¿ƒâš ï¸ï¼‰ã€‚</p><p>å‡è®¾å½“å‰æ–‡ä»¶å¤¹ä¸­æœ‰ä¸€ä¸ªftext.txtæ–‡ä»¶ï¼Œå¦‚æœæˆ‘è¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œåˆ™å¯ä»¥æ­£å¸¸æ˜¾ç¤ºæ–‡ä»¶ä¸­çš„å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with open(&quot;./ftest.txt&quot;) as f:</span><br><span class="line">    lines = [line for line in f]</span><br><span class="line">    print(lines)</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘è¿™æ ·å†™:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">with open(&quot;./ftest.txt&quot;,&apos;w&apos;) as f:</span><br><span class="line">    lines = [line for line in f]</span><br><span class="line">    print(lines)</span><br></pre></td></tr></table></figure><p>åˆ™ä¼šæŠ¥é”™ï¼š<em>UnsupportedOperation: not readable</em>ï¼Œå› ä¸ºæ–‡ä»¶ä¾æ®è¢«è¦†ç›–ã€‚<br>æ–‡ä»¶æ¨¡å¼è¿˜æœ‰ä¸€ä¸ª <em>x</em>ï¼Œå®ƒä¹Ÿä¼šåœ¨pathæŒ‡å®šçš„è·¯å¾„ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œä¸è¿‡å¦‚æœè·¯å¾„ä¸­å·²ç»æœ‰äº†æ–‡ä»¶ï¼Œåˆ™ä¼šåˆ›å»ºå¤±è´¥ã€‚</p><p>å¦‚æœä½ æƒ³åœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œäº†è§£å½“å‰è¯»å–åˆ°äº†å“ªä¸€è¡Œï¼Œæˆ–è€…æ ¹æ®è¡Œæ•°å»åšæ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ <em>f.tell()</em> å‡½æ•°ã€‚</p><h2 id="å†™æ–‡ä»¶"><a href="#å†™æ–‡ä»¶" class="headerlink" title="å†™æ–‡ä»¶"></a>å†™æ–‡ä»¶</h2><p>ä½¿ç”¨æ–‡ä»¶å¯¹è±¡çš„ <em>write</em> æˆ–è€… <em>writelines</em> æ–¹æ³•å³å¯å‘æ–‡ä»¶æ‰§è¡Œå†™æ“æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">with open(&apos;tmp.txt&apos;,&apos;w&apos;) as handle:</span><br><span class="line">handle.writelines(x for x in open(path) if len(x) &gt; 1)</span><br><span class="line"></span><br><span class="line">with open(&apos;tmp.txt&apos;) as f:</span><br><span class="line">lines = f.readlines()</span><br></pre></td></tr></table></figure><h2 id="Byteså’ŒUnicodeç±»å‹"><a href="#Byteså’ŒUnicodeç±»å‹" class="headerlink" title="Byteså’ŒUnicodeç±»å‹"></a>Byteså’ŒUnicodeç±»å‹</h2><p>è®¡ç®—æœºæœ€æ—©çš„ç¼–ç ç±»å‹æ˜¯ASCIIï¼Œèƒ½å­˜ä¸€ä¸ªå­—èŠ‚çš„ä¿¡æ¯ï¼Œå¯¹ä¸è‹±æ–‡åˆšå¥½å¤Ÿç”¨ï¼Œä½†æ˜¯å¦‚æœå¯¹äºæ±‰å­—ï¼Œæœ€å°‘éœ€è¦ä¸¤ä¸ªå­—èŠ‚æ‰èƒ½å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥åé¢ä¸ºäº†ç»Ÿä¸€ï¼Œå°±åˆ¶å®šäº†Unicodeã€‚å› ä¸ºç”¨ä¸¤ä¸ªå­—èŠ‚å»å­˜æœ¬æ¥ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥å­˜ä¸‹æ¥çš„ä¸œè¥¿ï¼Œunicodeä¼šæœ‰äº›æµªè´¹ï¼Œäºæ˜¯å°±å‡ºç°äº†utf-8ï¼Œå®ƒæŠŠä¸€ä¸ªUnicodeå­—ç¬¦æ ¹æ®ä¸åŒçš„æ•°å­—å¤§å°ç¼–ç æˆ1-6ä¸ªå­—èŠ‚ï¼Œå¸¸ç”¨çš„è‹±æ–‡å­—æ¯è¢«ç¼–ç æˆ1ä¸ªå­—èŠ‚ï¼Œæ±‰å­—é€šå¸¸æ˜¯3ä¸ªå­—èŠ‚ï¼Œåªæœ‰å¾ˆç”Ÿåƒ»çš„å­—ç¬¦æ‰ä¼šè¢«ç¼–ç æˆ4-6ä¸ªå­—èŠ‚ï¼Œè¿™æ ·åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„æ—¶å€™ï¼Œå¯ä»¥èŠ‚çœå¾ˆå¤šå¸¦å®½ã€‚</p><p>è¿™äº›ç¼–ç éƒ½æ˜¯å¯ä»¥ç›¸äº’è½¬åŒ–çš„ï¼Œåœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œç»Ÿä¸€ä½¿ç”¨Unicodeç¼–ç ï¼Œå½“éœ€è¦ä¿å­˜åˆ°ç¡¬ç›˜æˆ–è€…éœ€è¦ä¼ è¾“çš„æ—¶å€™ï¼Œå°±è½¬æ¢ä¸ºUTF-8ç¼–ç ã€‚</p><p>Pythonçš„å­—ç¬¦ä¸²ç±»å‹æ˜¯strï¼Œåœ¨å†…å­˜ä¸­ä»¥Unicodeè¡¨ç¤ºï¼Œä¸€ä¸ªå­—ç¬¦å¯¹åº”è‹¥å¹²ä¸ªå­—èŠ‚ï¼Œå¦‚æœè¦åœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œæˆ–è€…ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œå°±éœ€è¦æŠŠstrå˜ä¸ºä»¥å­—èŠ‚ä¸ºå•ä½çš„bytesã€‚</p><p>pythonä¸­çš„å­—èŠ‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = b&apos;ABC&apos;# å­—èŠ‚ç±»å‹çš„æ•°æ®ï¼Œåªå ç”¨ä¸€ä¸ªå­—èŠ‚</span><br><span class="line">x = &apos;ABC&apos; # strï¼Œunicodeç±»å‹çš„æ•°æ®ï¼Œå ç”¨å¤šä¸ªå­—èŠ‚</span><br></pre></td></tr></table></figure><p>unicodeç±»å‹çš„æ•°æ®ï¼ˆstrï¼‰ï¼Œå¯ä»¥è½¬åŒ–æˆå­—èŠ‚ç±»å‹è¡¨ç¤ºçš„æ•°æ®ï¼Œé€šè¿‡encodeæ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;ABC&apos;.encode(&apos;ascii&apos;) # unicodeç±»å‹çš„strï¼Œè½¬åŒ–æˆasciiç¼–ç ç±»å‹çš„æ•°æ®ï¼Œè½¬åŒ–åå ç”¨1ä¸ªå­—èŠ‚</span><br><span class="line">&apos;ä¸­æ–‡&apos;.encode(&apos;utf-8&apos;) # unicodeç±»å‹çš„strï¼Œè½¬åŒ–æˆutf-8ç¼–ç ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚ä»å†…å­˜åˆ°ç¡¬ç›˜</span><br></pre></td></tr></table></figure><p>åœ¨pythonä¸­ï¼Œå¦‚æœä½ æƒ³è¦è¯»å–10ä¸ªå­—ç¬¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open(path) as f:</span><br><span class="line">chars = f.read(10)</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¼šä»æ–‡ä»¶ä¸­è¯»å–10ä¸ªå­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯UTF-8æ ¼å¼ä¸‹çš„10ä¸ªå­—ç¬¦ã€‚</p><p>å¦‚æœä½ ä»¥ <em>rb</em> æ¨¡å¼æ‰“å¼€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">with open(path,&apos;rb&apos;) as f:</span><br><span class="line">data = f.read(10)</span><br></pre></td></tr></table></figure><p>åˆ™pythonä¼šè¯»å–10ä¸ªå­—èŠ‚ï¼Œå¦‚æœæ˜¯åŒä¸€ä»½æ•°æ®ï¼Œåˆ™è¯»å–10ä¸ªå­—èŠ‚çš„è¿™ç§æ–¹å¼ä¼šå°‘ä¸€äº›æ•°æ®ã€‚</p><p>å¯¹äºfileçš„seekæ–¹æ³•è¦æ³¨æ„ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ—¶å€™å‡ºé”™ï¼Œä¼šå¯¼è‡´åé¢çš„è¯»å–ä¹Ÿå‡ºé”™ã€‚</p><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001431664106267f12e9bef7ee14cf6a8776a479bdec9b9000" target="_blank" rel="noopener">å­—ç¬¦ä¸²å’Œç¼–ç -å»–é›ªå³°</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åœ¨æ•°æ®åˆ†æä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨&lt;em&gt;pandas&lt;/em&gt;çš„ &lt;em&gt;read_csv&lt;/em&gt;æ–¹æ³•æ¥è¯»å–ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œä½†ç†è§£è¿™èƒŒåçš„åŸç†ä¹Ÿæ˜¯éå¸¸é‡è¦çš„ï¼Œè€Œä¸”å¹¸è¿çš„æ˜¯ï¼Œè¿™å¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå‡½æ•°ã€ç”Ÿæˆå™¨ã€å¼‚å¸¸å¤„ç†</title>
    <link href="http://wittyfans.com/coding/Python%E5%87%BD%E6%95%B0%E3%80%81%E7%94%9F%E6%88%90%E5%99%A8%E3%80%81%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html"/>
    <id>http://wittyfans.com/coding/Pythonå‡½æ•°ã€ç”Ÿæˆå™¨ã€å¼‚å¸¸å¤„ç†.html</id>
    <published>2019-02-06T07:40:48.000Z</published>
    <updated>2019-02-06T07:44:37.219Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å‡½æ•°ï¼šå‘½åç©ºé—´ã€å¤šä¸ªå€¼è¿”å›ã€å‡½æ•°ä½œä¸ºå¯¹è±¡ã€Lambdaï¼›<br>ç”Ÿæˆå™¨ï¼šç”Ÿæˆå™¨è¡¨è¾¾å¼ã€itertoolsï¼›<br>é”™è¯¯ä¸å¼‚å¸¸æ•è·ï¼štry è¯­å¥çš„ä½¿ç”¨ï¼›</p></blockquote><a id="more"></a><h1 id="Python-å‡½æ•°"><a href="#Python-å‡½æ•°" class="headerlink" title="Python å‡½æ•°"></a>Python å‡½æ•°</h1><h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p>å‡½æ•°æ˜¯å®ç°ä»£ç å¤ç”¨ä¸ç»„ç»‡åŒ–æœ€é‡è¦çš„æ–¹æ³•ï¼Œå‡½æ•°ç”¨ <strong>def</strong> å…³é”®å­—å®šä¹‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def my_func(x,y,z=1.5):</span><br><span class="line">if z&gt;1:</span><br><span class="line">return z*(x+y)</span><br><span class="line">else:</span><br><span class="line">return z/(x+y)</span><br></pre></td></tr></table></figure><p>pythonä¸­è¿”å›å¤šä¸ªå€¼ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œå¦‚æœä½ å†™çš„å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆé»˜è®¤pythonä¼šè¿”å› <strong>None</strong>.</p><p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ <em>positional arguments</em> å’Œ <em>keyword arguments</em>. <em>keyword arguments</em> åœ¨è®¾ç½®å‡½æ•°çš„é»˜è®¤å‚æ•°çš„æ—¶å€™ç”¨çš„æ¯”è¾ƒå¤šï¼Œåœ¨å‰é¢çš„å‡½æ•°ä¸­ï¼Œxå’Œyæ˜¯ <em>positional arguments</em>ï¼Œè€Œzæ˜¯ <em>keyword arguments</em>ã€‚</p><p>è¿™äº›å‚æ•°çš„é¡ºåºæ˜¯æœ‰é™åˆ¶çš„ï¼š</p><blockquote><p>keyword arguments must follow the positional arguments(if any).</p></blockquote><h2 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h2><p>å‡½æ•°å¯ä»¥è®¿é—®ä¸¤ç§ç±»å‹çš„å˜é‡ï¼Œ<em>global</em> å’Œ <em>local</em> çš„ï¼Œä¸­æ–‡å«å…¨å±€çš„æˆ–å±€éƒ¨çš„ã€‚</p><p>å±€éƒ¨å˜é‡åœ¨å‡½æ•°è¿è¡Œçš„æ—¶å€™é©¬ä¸Šåˆ›å»ºï¼Œå¦‚æœå‡½æ•°è¿è¡Œå®Œæ¯•ï¼Œé©¬ä¸Šä¼šè¢«é”€æ¯ï¼ˆä¹Ÿæœ‰ä¾‹å¤–ï¼Œä½†ä¸åœ¨è¿™é‡Œçš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼‰ã€‚</p><p>æ¯”å¦‚ä¸‹é¢çš„å‡½æ•°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def func():</span><br><span class="line">a = []</span><br><span class="line">for i in range(5):</span><br><span class="line">a.append(i)</span><br></pre></td></tr></table></figure><p><strong>func()</strong>å‡½æ•°è°ƒç”¨åï¼Œåœ¨å®ƒçš„å†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„æ•°ç»„ï¼Œç„¶å5ä¸ªå…ƒç´ æ·»åŠ äº†è¿›å»ï¼Œä½†å½“å‡½æ•°è¿è¡Œç»“æŸåï¼Œaé©¬ä¸Šå°±ä¼šè¢«é”€æ¯ã€‚</p><p>å‡è®¾å°†ä»£ç æ”¹æˆè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line">def func():</span><br><span class="line">for i in range(5):</span><br><span class="line">a.append(i)</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å‡½æ•°å¤–é¢çš„å˜é‡æ˜¯å¯èƒ½çš„ï¼Œä½†è¿™äº›å˜é‡å¿…é¡»å£°æ˜ä¸º <em>global</em> ç±»å‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = None</span><br><span class="line">def bind_a_variable():</span><br><span class="line">global a</span><br><span class="line">a = []</span><br><span class="line">bind_a_variable() # è¾“å‡º []</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ªäººä¸æ˜¯å¾ˆæ¨èä½¿ç”¨ <em>global</em> å…³é”®å­—ï¼Œé€šå¸¸æ¥è¯´å…¨å±€å˜é‡éƒ½ç”¨æ¥å­˜å‚¨ä¸€äº›ç³»ç»Ÿçš„çŠ¶æ€ï¼Œå¦‚æœä½ éœ€è¦å¤§é‡çš„ä½¿ç”¨ï¼Œæ›´æ¨èä½ ç”¨æ›´é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼Œä¾‹å¦‚ç±»ã€‚</p></blockquote><h2 id="è¿”å›å¤šä¸ªå€¼"><a href="#è¿”å›å¤šä¸ªå€¼" class="headerlink" title="è¿”å›å¤šä¸ªå€¼"></a>è¿”å›å¤šä¸ªå€¼</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def f():</span><br><span class="line">a = 5</span><br><span class="line">b = 6</span><br><span class="line">c = 7</span><br><span class="line">return a,b,c</span><br></pre></td></tr></table></figure><p>pythonçš„å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œå®ƒä»¬ä¼šè¢«åŒ…è£…æˆä¸€ä¸ªå…ƒç»„ï¼Œéšåå†è¢«è§£åŒ…ã€‚</p><h2 id="å‡½æ•°ä½œä¸ºå¯¹è±¡"><a href="#å‡½æ•°ä½œä¸ºå¯¹è±¡" class="headerlink" title="å‡½æ•°ä½œä¸ºå¯¹è±¡"></a>å‡½æ•°ä½œä¸ºå¯¹è±¡</h2><p>å› ä¸ºpythonçš„å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥åšå¾ˆå¤šåˆ«çš„è¯­è¨€å¾ˆéš¾åšåˆ°çš„äº‹æƒ…ã€‚<br>å‡è®¾æˆ‘ä»¬æœ‰ä¸€äº›æ•°æ®éœ€è¦æ¸…ç†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">states = [&apos; Alabama &apos;, &apos;Georgia!&apos;, &apos;Georgia&apos;, &apos;georgia&apos;, &apos;FlOrIda&apos;,&apos;south carolina##&apos;, &apos;West virginia?&apos;]</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å¤„ç†è¿‡ç”¨æˆ·æäº¤ä¸Šæ¥çš„æ•°æ®å°±æ‡‚æˆ‘è¯´çš„ï¼Œå¾ˆå¤šç®€ç›´æƒ³è±¡ä¸åˆ°è¾“å…¥éƒ½ä¼šå‘ç”Ÿï¼Œå¯¹äºé‚£äº›è¾“å…¥ï¼Œæˆ‘ä»¬è¦å»æ‰é¦–å°¾ç©ºæ ¼ï¼Œå¤šä½™çš„ç¬¦å·ï¼Œæ­£ç¡®çš„é¦–å­—æ¯å¤§å°å†™ç­‰ç­‰ã€‚ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨è‡ªå¸¦çš„reæ­£åˆ™æ¨¡å—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import re</span><br><span class="line"></span><br><span class="line">def clean_strings(strings):</span><br><span class="line">result = []</span><br><span class="line">for value in strings:</span><br><span class="line">value = value.strip()</span><br><span class="line">value = re.sub(&apos;[!#?]&apos;,&apos;&apos;,value)</span><br><span class="line">value = value.title()</span><br><span class="line">result = append(value)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç»“æœçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">clean_strings(states)</span><br><span class="line">è¾“å‡º:</span><br><span class="line">[&apos;Alabama&apos;,&apos;Georgia&apos;, &apos;Georgia&apos;, &apos;Georgia&apos;, &apos;Florida&apos;, &apos;South Carolina&apos;, &apos;West Virginia&apos;]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‡½æ•°ä½œä¸ºå¯¹è±¡ï¼Œå­˜åˆ°æ•°ç»„ä¸­ï¼Œæ¥å®ç°è¿™ä¸€éœ€æ±‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">def remove_punctuation(value):</span><br><span class="line">return re.sub(&apos;[!#?]&apos;, &apos;&apos;, value)</span><br><span class="line"># å‡½æ•°æ•°ç»„</span><br><span class="line">clean_ops = [str.strip,remove_punctuation,str.title]</span><br><span class="line"></span><br><span class="line"># opså‚æ•°æ¥å—å‡½æ•°æ•°ç»„å¯¹è±¡</span><br><span class="line">def clean_string(strings,ops):</span><br><span class="line">result = []</span><br><span class="line">for value in strings:</span><br><span class="line">for function in ops:</span><br><span class="line">value = function(value)</span><br><span class="line">result.append(value)</span><br><span class="line">return result</span><br><span class="line"></span><br><span class="line">clean_string(states,clean_ops)</span><br><span class="line"></span><br><span class="line">è¾“å‡ºæ˜¯ä¸€æ ·çš„:</span><br><span class="line">[&apos;Alabama&apos;,&apos;Georgia&apos;, &apos;Georgia&apos;, &apos;Georgia&apos;, &apos;Florida&apos;, &apos;South Carolina&apos;, &apos;West Virginia&apos;]</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼å¯ä»¥è®©ä½ çš„ä»£ç æ›´è§£è€¦ã€‚</p><p>ç”¨mapæ–¹æ³•ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°ä½œç”¨åˆ°åºåˆ—çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for x in map(remove_punctuation,states):</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure><h2 id="Lambda"><a href="#Lambda" class="headerlink" title="Lambda"></a>Lambda</h2><p>Lambdaæ˜¯æŠŠé‚£äº›å¾ˆç®€çŸ­çš„å‡½æ•°å½¢å¼åšäº†ç®€åŒ–ï¼Œè®©ä½ å¯ä»¥ç”¨ä¸€ç§éå¸¸ç®€å•çš„æ–¹å¼å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå°†è¿™ä¸ªå°å‡½æ•°ç”¨åœ¨éœ€è¦å®ƒçš„åœ°æ–¹ï¼Œè¿™åœ¨ç‰¹å®šçš„æƒ…å¢ƒä¸‹ï¼Œéå¸¸æ–¹ä¾¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def short_function(x):</span><br><span class="line">return x* 2</span><br><span class="line"># ç­‰äº</span><br><span class="line">equiv_anon = lambda x: x*2</span><br></pre></td></tr></table></figure><p>çœ‹ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def apply_to_list(some_list,f):</span><br><span class="line">return [f(x) for x in some_list]</span><br><span class="line"></span><br><span class="line">ints = [1,2,3,4]</span><br><span class="line">apply_to_list(ints,lambdax:x*2)</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥åœ¨å‚æ•°ä¸­ï¼Œç›´æ¥å®šä¹‰è¦ä¼ è¿›å»çš„å‚æ•°ã€‚</p><p>å†æ¥çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼Œä½ æœ‰ä¸€å †å­—ç¬¦ï¼Œä½ éœ€è¦æ ¹æ®æ¯ä¸€ä¸ªå­—ç¬¦ä¸­å­—æ¯å‡ºç°çš„ä¸ªæ•°å¤šå°‘æ¥æ’åºï¼ˆé‡å¤çš„ä¸ç®—ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">strings = [&apos;foo&apos;, &apos;card&apos;, &apos;bar&apos;, &apos;aaaa&apos;, &apos;abab&apos;]</span><br><span class="line">strings.sort(key= lambda x: len(set(list(x))))</span><br></pre></td></tr></table></figure><ul><li>list,ä¼šå°†å­—æ¯ä¸²åˆ†è§£</li><li>set,ä¼šå»æ‰é‡å¤çš„å­—æ¯</li></ul><p>æœ€åç®—å‡ºæ¯ä¸ªå­—æ¯ä¸²çš„é•¿åº¦å¹¶ä»¥æ­¤æ’åºã€‚</p><blockquote><p>lambdaå‡½æ•°æ˜¯æ²¡æœ‰<strong>name</strong>å±æ€§çš„</p></blockquote><h1 id="ç”Ÿæˆå™¨"><a href="#ç”Ÿæˆå™¨" class="headerlink" title="ç”Ÿæˆå™¨"></a>ç”Ÿæˆå™¨</h1><p>å¯ä»¥å°†<em>iter</em>å‡½æ•°ä½œç”¨åˆ°åºåˆ—ä¸Šï¼Œè¿™æ ·ä¾¿è¿”å›äº†ä¸€ä¸ªç”Ÿæˆå™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict_iterator = iter(some_dict)</span><br><span class="line"></span><br><span class="line">dict_iterator </span><br><span class="line">è¾“å‡º: &lt;dict_keyiterator at 0x7fbbd5a9f908&gt;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨liståŒ…å«ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¾—åˆ°å†…éƒ¨çš„å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(dict_iterator)</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå™¨æ˜¯æƒ°æ€§çš„ï¼Œæ¯”å¦‚ä½ è¦è¯»ä¸€ä¸ªæ–‡ä»¶æœ‰ä¸€ä¸‡è¡Œï¼Œä½ ä¸éœ€è¦ä¸€æ¬¡æ€§å…¨éƒ¨çš„è¯»å–ï¼Œç”¨ç”Ÿæˆå™¨ï¼Œä½ åªéœ€è¦ä¸€è¡Œä¸€è¡Œçš„è¿”å›ã€‚</p><h2 id="ç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#ç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="ç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>ç”Ÿæˆå™¨è¡¨è¾¾å¼</h2><p>ç”Ÿæˆå™¨è¡¨è¾¾å¼å’Œåˆ—è¡¨æ¨å¯¼å¼æœ‰äº›ç±»ä¼¼ï¼Œä¸è¿‡åŒ…è£¹å®ƒçš„æ˜¯æ‹¬å·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gen = (x ** 2 for x in range(100))</span><br><span class="line">gen </span><br><span class="line"># è¾“å‡º &lt;generator object &lt;genexpr&gt; at 0x109cbf3b8&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§å†™æ³•å’Œä¸‹é¢çš„ä»£ç å®Œå…¨ä¸€æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def make_gen():</span><br><span class="line">for x in range(100):</span><br><span class="line">yield x**2</span><br><span class="line">gen = make_gen()</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆå™¨å¯ä»¥åƒæ•°ç»„ä¸€æ ·å½“ä½œå‡½æ•°çš„å‚æ•°ï¼Œæ¯”å¦‚è®¡ç®—listå…§æ‰€æœ‰æ•°çš„å’Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gen = [x ** 2 for x in range(100)]</span><br><span class="line">sum(gen) # è¾“å‡º328350</span><br><span class="line"></span><br><span class="line">gen = ï¼ˆx ** 2 for x in range(100)ï¼‰</span><br><span class="line">sum(gen) # ç”Ÿæˆå™¨å½“ä½œå‚æ•°ï¼Œä¸€æ ·è¾“å‡º328350</span><br></pre></td></tr></table></figure><h1 id="itertools"><a href="#itertools" class="headerlink" title="itertools"></a>itertools</h1><p><em>itertools</em>æ ‡å‡†åº“ä¸ºä¸€äº›å¸¸ç”¨çš„æ•°æ®ï¼Œå†…ç½®äº†ä¸€äº›é€šç”¨çš„ç”Ÿæˆå™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import itertools</span><br><span class="line"></span><br><span class="line">first_letter = lambda x: x[0]</span><br><span class="line"></span><br><span class="line">names = [&apos;Alan&apos;, &apos;Adam&apos;, &apos;Wes&apos;, &apos;Will&apos;, &apos;Albert&apos;, &apos;Steven&apos;]</span><br><span class="line"></span><br><span class="line">for letter, names in itertools.groupby(names, first_letter):</span><br><span class="line">print(letter, list(names)) # names is a generator</span><br><span class="line"></span><br><span class="line"># è¾“å‡º</span><br><span class="line">A [&apos;Alan&apos;, &apos;Adam&apos;] </span><br><span class="line">W [&apos;Wes&apos;, &apos;Will&apos;] </span><br><span class="line">A [&apos;Albert&apos;] </span><br><span class="line">S [&apos;Steven&apos;]</span><br></pre></td></tr></table></figure><h1 id="é”™è¯¯ä¸å¼‚å¸¸æ•è·"><a href="#é”™è¯¯ä¸å¼‚å¸¸æ•è·" class="headerlink" title="é”™è¯¯ä¸å¼‚å¸¸æ•è·"></a>é”™è¯¯ä¸å¼‚å¸¸æ•è·</h1><p>å¥å£®çš„ç¨‹åºä¸€å®šè¦æœ‰é”™è¯¯ä¸å¼‚å¸¸æ•è·ï¼Œæˆ‘ä¹ˆè¦è¿›è¡Œç±»å‹è½¬åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">float(&apos;1.2345&apos;) ---&gt; 1.2345</span><br><span class="line">float(&apos;string&apos;) ---&gt; value error</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ•è·è¿™ä¸ªå¼‚å¸¸ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def attemp_float(x)</span><br><span class="line">tyr:</span><br><span class="line">return float(x)</span><br><span class="line">except:</span><br><span class="line">return x</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œå¦‚æœæ•è·åˆ°äº†value errorï¼Œå°±ä¼šè¿”å›è¾“å‡ºçš„æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">float(&apos;1.2345&apos;) ---&gt; 1.2345</span><br><span class="line">float(&apos;string&apos;) ---&gt; string</span><br></pre></td></tr></table></figure><p>å‡½æ•°æœ‰å¯èƒ½ä¼šè¿”å›åˆ«çš„é”™è¯¯ï¼Œè¿™æ—¶å€™éœ€è¦æŠŠå¯èƒ½å‡ºç°çš„é”™è¯¯å†™å‡ºæ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">except(TypeError,ValueError)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶è¯»å–ä¸­ï¼Œä½ æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰æ“ä½œï¼Œä½ éƒ½éœ€è¦æŠŠå®ƒå…³é—­ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°finalè¯­å¥ï¼Œå³ä¸ç®¡å‰é¢æ˜¯å¦æ•è·åˆ°äº†å¼‚å¸¸ï¼Œæœ€ç»ˆéƒ½è¦åšçš„äº‹æƒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = open(path,&apos;w&apos;)</span><br><span class="line">try:</span><br><span class="line">write_to_file(f)</span><br><span class="line">finally:</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å‡½æ•°ï¼šå‘½åç©ºé—´ã€å¤šä¸ªå€¼è¿”å›ã€å‡½æ•°ä½œä¸ºå¯¹è±¡ã€Lambdaï¼›&lt;br&gt;ç”Ÿæˆå™¨ï¼šç”Ÿæˆå™¨è¡¨è¾¾å¼ã€itertoolsï¼›&lt;br&gt;é”™è¯¯ä¸å¼‚å¸¸æ•è·ï¼štry è¯­å¥çš„ä½¿ç”¨ï¼›&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Pythonæ¨å¯¼å¼æ¢ç©¶</title>
    <link href="http://wittyfans.com/coding/Python%E6%8E%A8%E5%AF%BC%E5%BC%8F%E6%8E%A2%E7%A9%B6.html"/>
    <id>http://wittyfans.com/coding/Pythonæ¨å¯¼å¼æ¢ç©¶.html</id>
    <published>2019-02-06T04:08:59.000Z</published>
    <updated>2019-02-06T04:13:26.510Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ¨å¯¼å¼åº”è¯¥æ˜¯pythonä¸­æœ€å—å–œçˆ±çš„ä¸€éƒ¨åˆ†å†…å®¹äº†ï¼Œå®ƒå¯ä»¥è®©ä½ ä»¥ä¸€ç§ç®€å•çš„å½¢å¼è¿‡æ»¤åŸæ¥çš„æ•°æ®ç”Ÿæˆä¸€ä»½æ–°çš„æ•°æ®ã€‚</p></blockquote><a id="more"></a><h1 id="æ¨å¯¼å¼"><a href="#æ¨å¯¼å¼" class="headerlink" title="æ¨å¯¼å¼"></a>æ¨å¯¼å¼</h1><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>åœ¨æ•°ç»„ä¸­ï¼Œæ¨å¯¼å¼çš„ç”¨æ³•ç±»ä¼¼è¿™æ ·ï¼š</p><p>[<em>expr</em> for val in collection if <em>condition</em>]</p><p>åŸºæœ¬ä¸Šå’Œä¸‹é¢çš„forå¾ªç¯çš„æ„æ€ä¸€æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">result = []</span><br><span class="line">for val in collection:</span><br><span class="line">    if condition:</span><br><span class="line">        result.append(expr)</span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string = [&apos;a&apos;,&apos;as&apos;,&apos;bat&apos;,&apos;car&apos;,&apos;dove&apos;,&apos;python&apos;]</span><br><span class="line">[x.upper() for x in strings if len(x) &gt;2]</span><br><span class="line"></span><br><span class="line">[&apos;BAT&apos;,&apos;CAR&apos;,&apos;DOVE&apos;,&apos;PYTHON&apos;]</span><br></pre></td></tr></table></figure><h2 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h2><p>å­—å…¸çš„æ¨å¯¼å¼ï¼Œç±»ä¼¼è¿™æ ·ï¼Œæ³¨æ„å¤–é¢æ˜¯èŠ±æ‹¬å·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict_comp = &#123;key-expr:value-expr for value in collection if condition&#125;</span><br></pre></td></tr></table></figure><p>å¿«é€Ÿå»ºç«‹é”®å€¼å¯¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loc_mapping = &#123;val:index for index,val in enumerate(strings)&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾ä½ æœ‰ä¸€å †è‚¡ç¥¨æ•°æ®:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">prices = &#123;</span><br><span class="line">    &apos;ACME&apos;: 45.23,</span><br><span class="line">    &apos;AAPL&apos;: 612.78,</span><br><span class="line">    &apos;IBM&apos;: 205.55,</span><br><span class="line">    &apos;HPQ&apos;: 37.20,</span><br><span class="line">    &apos;FB&apos;: 10.75</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å­—å…¸æ¨å¯¼æ¥è¿‡æ»¤è¿™äº›æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># è¿‡æ»¤å‡ºä»·æ ¼é«˜äº200çš„</span><br><span class="line">p1 = &#123;key: value for key, value in prices.items() if value &gt; 200&#125;</span><br><span class="line"></span><br><span class="line"># æ‰¾å‡ºç§‘æŠ€å…¬å¸</span><br><span class="line">tech_names = &#123;&apos;AAPL&apos;, &apos;IBM&apos;, &apos;HPQ&apos;, &apos;MSFT&apos;&#125;</span><br><span class="line">p2 = &#123;key: value for key, value in prices.items() if key in tech_names&#125;</span><br></pre></td></tr></table></figure><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h2><p>é›†åˆçš„æ¨å¯¼å¼å’Œåˆ—è¡¨å‡ ä¹ä¸€æ ·ï¼Œé™¤äº†å¤–é¢çš„æ‹¬å·ä¸ä¸€æ ·<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;expr for value in collection if condition&#125;</span><br></pre></td></tr></table></figure></p><p>å‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ªé›†åˆï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰é›†åˆå…ƒç´ çš„é•¿åº¦ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·å†™:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unique_lengths = &#123;len(x) for x in strings&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨mapå‡½æ•°ï¼Œå¯ä»¥æ›´ç®€æ´ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(map(len,strings))</span><br></pre></td></tr></table></figure><h2 id="å¤åˆæ¨å¯¼"><a href="#å¤åˆæ¨å¯¼" class="headerlink" title="å¤åˆæ¨å¯¼"></a>å¤åˆæ¨å¯¼</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ªäºŒç»´æ•°ç»„åŒ…å«äº†è‹±è¯­å’Œè¥¿ç­ç‰™è¯­çš„åå­—:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">all_data = [</span><br><span class="line">                [&apos;John&apos;, &apos;Emily&apos;, &apos;Michael&apos;, &apos;Mary&apos;, &apos;Steven&apos;],</span><br><span class="line">                [&apos;Maria&apos;, &apos;Juan&apos;, &apos;Javier&apos;, &apos;Natalia&apos;, &apos;Pilar&apos;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç°åœ¨æƒ³è¦æ‰¾å‡ºè¿™ä¸¤ä¸ªå­åˆ—è¡¨ä¸­ï¼ŒåŒ…å«eå­—æ¯çš„ä¸ªæ•°å¤§äºç­‰äºä¸¤ä¸ªçš„ï¼Œè¿™æ ·æˆ‘ä»¬å†™ä¸€ä¸ªå¤åˆæ¨å¯¼:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">result = [name for names in all_data for name in names if name.count(&apos;e&apos;) &gt;=2 ]</span><br><span class="line">result = [&apos;Steven&apos;]</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™ä¹Ÿè®¸æœ‰ç‚¹éš¾ä»¥ç†è§£ï¼Œå†æ¥çœ‹ä¸€ä¸ªå°†å…ƒç»„åˆå¹¶æˆæ•°ç»„çš„ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">some_tuples = [(1,2,3),(4,5,6),(7,8,9)]</span><br><span class="line">flattened = [x for tup in some_tuples for x in tup]</span><br><span class="line">flattened #è¾“å‡º [1,2,3,4,5,6,7,8,9]</span><br></pre></td></tr></table></figure><p>åœ¨[]ä¸­çš„è¡¨è¾¾å¼çš„é¡ºåºï¼Œå…¶å®å’Œæˆ‘ä»¬è‡ªå·±å†™çš„éå†æ•°ç»„æ˜¯ä¸€æ ·çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flattened = []</span><br><span class="line">for tup in some_tuples:</span><br><span class="line">    for x in tup:</span><br><span class="line">        flattened.append(x)</span><br></pre></td></tr></table></figure><p>æ¨å¯¼å¼å°½ç®¡å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™ä¹Ÿè¦ä»ä»£ç å¯è¯»æ€§ä¸Šå»æ€è€ƒé—®é¢˜ï¼Œè€Œä¸æ˜¯è®©äººåœ¨è¯­æ³•ä¸Šé¢å¾ˆå›°æƒ‘ä½ å†™çš„ä»£ç ï¼Œè™½ç„¶è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">some_tuples = [(1,2,3),(4,5,6),(7,8,9)]</span><br><span class="line">[[x for x in tup] for tup in some_tuples]</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><em>Python for data analyse - List,Set, and Dict Comprehensions</em></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ¨å¯¼å¼åº”è¯¥æ˜¯pythonä¸­æœ€å—å–œçˆ±çš„ä¸€éƒ¨åˆ†å†…å®¹äº†ï¼Œå®ƒå¯ä»¥è®©ä½ ä»¥ä¸€ç§ç®€å•çš„å½¢å¼è¿‡æ»¤åŸæ¥çš„æ•°æ®ç”Ÿæˆä¸€ä»½æ–°çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Built-in Data Structures in Python</title>
    <link href="http://wittyfans.com/coding/Built-in-Data-Structures-in-Python.html"/>
    <id>http://wittyfans.com/coding/Built-in-Data-Structures-in-Python.html</id>
    <published>2019-02-06T02:38:36.000Z</published>
    <updated>2019-02-06T04:05:28.646Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å…ƒç»„ã€æ•°ç»„ã€å­—å…¸ã€é›†åˆï¼ŒåŠå¸¸ç”¨æ“ä½œã€‚</p></blockquote><a id="more"></a><h1 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h1><h2 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h2><p>å…ƒç»„å†…éƒ¨å…ƒç´ ç¡®å®šä»¥åï¼Œä¸å¯ä¿®æ”¹ï¼›å¦‚æœå…ƒç»„é‡Œå¯ä»¥æ”¾æ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œåˆ›å»ºä¸€ä¸ªå…ƒç»„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tup = 4,5,6</span><br></pre></td></tr></table></figure><p>åµŒå¥—å…ƒç»„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tup = (4,5,6),(7,8,9)</span><br></pre></td></tr></table></figure><p>å…¶å®ç­‰äº:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tup = ((4,5,6),(7,8,9))</span><br></pre></td></tr></table></figure><p>ä»»ä½•åºåˆ—æˆ–å¯è¿­ä»£çš„å¯¹è±¡éƒ½å¯ä»¥è½¬åŒ–ä¸ºå…ƒç»„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tuple([3,4,5])</span><br><span class="line">tuple(&apos;string&apos;)</span><br></pre></td></tr></table></figure><p>é€šè¿‡tuple[]è¿™ç§æ–¹å¼èµ·æ¥è®¿é—®å…ƒç»„çš„å†…å®¹ã€‚</p><p>å…ƒç»„å¯ä»¥ç›¸åŠ ï¼Œå˜æˆä¸€ä¸ªæ›´é•¿çš„å…ƒç»„ï¼Œå³a+b = abï¼›ä¹Ÿå¯ç›¸ä¹˜ï¼Œå³ab*4 = abababab</p><h2 id="è§£åŒ…"><a href="#è§£åŒ…" class="headerlink" title="è§£åŒ…"></a>è§£åŒ…</h2><p>å¦‚æœä½ å°è¯•å°†å…ƒç»„èµ‹å€¼ç»™å¤šä¸ªå˜é‡ï¼ŒPythonä¼šå°è¯•æŠŠå…ƒç»„æ‹†å¼€åˆ†åˆ«èµ‹å€¼ç»™è¿™äº›å˜é‡ï¼ˆå³è§£åŒ…ï¼‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup = (1,2,3)</span><br><span class="line">a,b,c = tup</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œa = 1, b = 2, c = 3;</p><p>åµŒå¥—çš„å…ƒç»„ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup = (1,2,(3,4))</span><br><span class="line">a,b,(c,d) = tup</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œd = 4ï¼›</p><p>åœ¨åˆ«çš„è¯­è¨€ä¸­ï¼Œå¦‚æœä½ è¦äº¤æ¢ä¸¤ä¸ªå…ƒç´ ï¼Œéœ€è¦è¿™æ ·æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tmp = a</span><br><span class="line">a = b</span><br><span class="line">b = tmp</span><br></pre></td></tr></table></figure><p>pythoné‡Œé¢å¯ä»¥è¿™æ ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b,a = a,b</span><br></pre></td></tr></table></figure><p>è§£åŒ…è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç”¨æ³•ï¼Œæ¯”å¦‚æŒ‰ç…§å…ƒç»„çš„æ•°æ®ç»“æ„è§£åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">seq = [(1,2,3),(4,5,6),(7,8,9)]</span><br><span class="line">for a,b,c in seq:</span><br><span class="line">    print(&apos;a=&#123;&#125;,b=&#123;&#125;,c=&#123;&#125;&apos;.format(a,b,c))</span><br></pre></td></tr></table></figure><p>åªæå–å‰é¢å‡ ä¸ªå…ƒç´ ï¼Œåé¢çš„æ”¾ä¸€èµ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">values = 1,2,3,4,5</span><br><span class="line">a,b,*rest = values</span><br></pre></td></tr></table></figure><p>å…ƒç»„æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ç»Ÿè®¡ç‰¹å®šçš„å€¼åœ¨å…ƒç»„ä¸­å‡ºç°çš„æ¬¡æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = (1,2,2,3)</span><br><span class="line">a.count(2) # è¾“å‡º2,å› ä¸º2å‡ºç°äº†ä¸¤æ¬¡</span><br></pre></td></tr></table></figure><h2 id="å‘½åå…ƒç»„"><a href="#å‘½åå…ƒç»„" class="headerlink" title="å‘½åå…ƒç»„"></a>å‘½åå…ƒç»„</h2><blockquote><p>è¿™éƒ¨åˆ†ä¸ºé«˜çº§å†…å®¹ï¼Œçœ‹ä¸æ‡‚çš„å¯ä»¥è·³è¿‡ã€‚</p></blockquote><p>ä½¿ç”¨å‘½åå…ƒç»„éœ€è¦å…ˆå¯¼å…¥,å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•…äº‹Stockï¼Œé‡Œé¢æœ‰è‚¡ç¥¨çš„åå­—ï¼Œè‚¡ä»½æ•°é‡sharesï¼Œè¿˜æœ‰è‚¡ä»·priceï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªå‘½åå…ƒç»„å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from collections import namedtuple</span><br><span class="line">Stock = namedtuple(&apos;Stock&apos;, [&apos;name&apos;, &apos;shares&apos;, &apos;price&apos;])</span><br></pre></td></tr></table></figure></p><p>åŒæ—¶æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç”¨æ¥è®¡ç®—å¸‚å€¼ï¼Œå¯ä»¥æ³¨æ„åˆ°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå‘½åå…ƒç»„å¯¹è±¡s,æœ‰äº†è¿™ä¸ªå¯¹è±¡ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è°ƒç”¨sçš„shareså’Œpriceå±æ€§ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def compute_cost(records):</span><br><span class="line">    total = 0.0</span><br><span class="line">    for rec in records:</span><br><span class="line">        s = Stock(*rec)</span><br><span class="line">        total += s.shares * s.price</span><br><span class="line">    return total</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è¿™æ ·æ“ä½œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apple = Stock(&apos;name&apos;,100,297)</span><br><span class="line">apple.shares * apple.price</span><br></pre></td></tr></table></figure><p>éœ€æ³¨æ„è¿™æ ·ä¼šæŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compute_cost(&apos;apple&apos;,100,297) ---&gt; takes 1 positional argument but 3 were given</span><br></pre></td></tr></table></figure><p>å‘½åå…ƒç¥–åˆ›å»ºåä¸å¯ä¿®æ”¹ï¼Œæ¯”å¦‚ apple.shares = 10 , ä¼šæŠ¥é”™ã€‚å¦‚æœå®åœ¨è¦æ”¹ï¼Œå¯ä»¥ä½¿ç”¨apple = apple._replace(shares=10)ï¼Œå¦‚æœä½ çš„ç›®æ ‡æ˜¯å®šä¹‰ä¸€ä¸ªéœ€è¦æ›´æ–°å¾ˆå¤šå®ä¾‹å±æ€§çš„é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆå‘½åå…ƒç»„å¹¶ä¸æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚ è¿™æ—¶å€™ä½ åº”è¯¥è€ƒè™‘å®šä¹‰ä¸€ä¸ªåŒ…å« <strong>slots</strong> æ–¹æ³•çš„ç±»ã€‚</p><h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><p>æ•°ç»„ç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿï¼Œæ•°ç»„å¯ä»¥åŒ…å«Noneå€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a_list = [1,2,None]</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä»å…ƒç»„è½¬åŒ–è€Œæ¥:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tup = (&apos;foo&apos;,&apos;bar&apos;,&apos;baz&apos;)</span><br><span class="line">b_list = list(tup)</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŒ‰ç…§ç´¢å¼•æ¥ä¿®æ”¹æ•°ç»„çš„å€¼:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b_list[1] = &apos;peekaboo&apos;</span><br></pre></td></tr></table></figure><p>listå¯ä»¥ç›´æ¥è½¬åŒ–ç”Ÿæˆå™¨æˆ–è€…è¿­ä»£å™¨:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gen = range(10)</span><br><span class="line">gen # è¾“å‡ºrange(0,10)</span><br><span class="line"></span><br><span class="line">list(gen) # è¾“å‡º[0,1,2,3,4,5,6,7,8,9,10]</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ ã€åˆ é™¤"><a href="#æ·»åŠ ã€åˆ é™¤" class="headerlink" title="æ·»åŠ ã€åˆ é™¤"></a>æ·»åŠ ã€åˆ é™¤</h2><p>ä½¿ç”¨appendæ–¹æ³•å³å¯å¾€æ•°ç»„æ·»åŠ å…ƒç´ :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">values = [&apos;a&apos;,&apos;b&apos;]</span><br><span class="line">values.append(&apos;c&apos;)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨insertæ–¹æ³•å‘æŒ‡å®šçš„ä½ç½®æ’å…¥å…ƒç´ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">values.sert(1,&apos;-&apos;)</span><br><span class="line">values è¾“å‡º# [&apos;a&apos;,&apos;-&apos;,&apos;b&apos;,&apos;c&apos;]</span><br></pre></td></tr></table></figure><blockquote><p>insertæ¯”appendè¦èŠ±è´¹æ›´å¤šçš„èµ„æºï¼Œå› ä¸ºinsertåï¼Œå…¶åé¢çš„å…ƒç´ éƒ½è¦æŒªä½ç½®ï¼Œå¦‚æœä½ è¦åœ¨æ•°ç»„çš„é¦–å°¾æ“ä½œï¼Œå¯ä»¥å»çœ‹çœ‹collections.deque</p></blockquote><p>ç›¸åçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨popæ–¹æ³•æ¥å–å‡ºæŒ‡å®šä½ç½®çš„å…ƒç´ , è¿™æ—¶å€™åé¢çš„å…ƒç´ ä¹Ÿéƒ½ä¼šå¾€å‰é¢ç§»åŠ¨:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">values.pop(0) # a</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç›´æ¥æ ¹æ®å€¼æ¥åˆ é™¤æŸä¸ªå…ƒç´ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">values.remove(&apos;b&apos;)</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥æŸä¸ªå…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&apos;a&apos; in [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]</span><br><span class="line">&apos;a&apos; not in [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æ•°ç»„æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œæ¯”å­—å…¸å’Œsetsè¦æ…¢çš„å¤šã€‚</p></blockquote><h2 id="è¿ç®—"><a href="#è¿ç®—" class="headerlink" title="è¿ç®—"></a>è¿ç®—</h2><p>æ•°ç»„çš„ç›¸åŠ ï¼Œå³é¦–å°¾ç›¸è¿ï¼Œa+b = ab; æ•°ç»„çš„ç›¸åŠ éœ€è¦åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œè¿˜è¦è¿›è¡Œå¤åˆ¶è¿ç®—ï¼Œæ‰€ä»¥è€—è´¹çš„èµ„æºä¼šæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨extendæ–¹æ³•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&apos;a&apos;]+[&apos;b&apos;] # [&apos;a&apos;,&apos;b&apos;]</span><br><span class="line">[&apos;a&apos;].extend([&apos;b&apos;])</span><br></pre></td></tr></table></figure><h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><p>ä½ å¯ä»¥ç›´æ¥æ’åºä¸€ä¸ªæ•°ç»„ï¼Œä¸”ä¸éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œåªéœ€è¦è°ƒç”¨sortæ–¹æ³•å³å¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [7,2,1]</span><br><span class="line">a.sort()</span><br><span class="line">a #è¾“å‡º [1,2,7]</span><br></pre></td></tr></table></figure><p>sortæ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯ä»¥å®šä¹‰sortçš„æ¡ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šè¿‡å­—ç¬¦çš„é•¿åº¦æ¥æ’åºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b = [&apos;saw&apos;,&apos;small&apos;,&apos;he&apos;,&apos;six&apos;]</span><br><span class="line">b.sort(key=len)</span><br></pre></td></tr></table></figure><h2 id="äºŒåˆ†æŸ¥æ‰¾ä¸æ“ä½œ"><a href="#äºŒåˆ†æŸ¥æ‰¾ä¸æ“ä½œ" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾ä¸æ“ä½œ"></a>äºŒåˆ†æŸ¥æ‰¾ä¸æ“ä½œ</h2><p>pythonå†…ç½®äº†ä¸€ä¸ªbisectæ¨¡å—ï¼Œå®ç°äº†åŸºäºäºŒåˆ†æŸ¥æ‰¾çš„ç®—æ³•ï¼Œåœ¨åˆ—è¡¨ä¸­æŸ¥æ‰¾å…ƒç´ å¯ä»¥ä½¿ç”¨ list.index() æ–¹æ³•ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚å¯¹äºå¤§æ•°æ®é‡ï¼Œåˆ™å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾è¿›è¡Œä¼˜åŒ–ï¼ŒäºŒåˆ†æŸ¥æ‰¾ä¹Ÿæˆä¸ºæŠ˜åŠæŸ¥æ‰¾ï¼Œç®—æ³•æ¯ä¸€æ¬¡æ¯”è¾ƒéƒ½ä½¿æœç´¢èŒƒå›´ç¼©å°ä¸€åŠï¼Œ å…¶æ—¶é—´å¤æ‚åº¦ä¸º O(logn)ï¼Œéœ€è¦æ³¨æ„ï¼ŒäºŒåˆ†æŸ¥æ‰¾è¦æ±‚å¯¹è±¡å¿…é¡»æœ‰åºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c = [1,2,2,2,3,4,7]</span><br><span class="line">bisect.bisect(c,2) # è¿”å›ä¼šæ’å…¥çš„ä½ç½®ï¼Œå³ç´¢å¼•4</span><br><span class="line">bisect.bisect(c,5) # è¿”å›5</span><br><span class="line">bisect.insort(c,6) # æ’å…¥åˆ°4åé¢</span><br></pre></td></tr></table></figure><h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>é€šè¿‡å°†å½¢å¦‚start:stopedçš„æ ¼å¼ä¼ ç»™[],å°±å¯ä»¥åœ¨åºåˆ—å¯¹è±¡ä¸­åˆ‡å‡ºä½ æƒ³è¦çš„éƒ¨åˆ†ï¼Œä¸¾ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq = [6,5,3,5,7,2]</span><br><span class="line">seq[2:4] # è¾“å‡º [3, 5]</span><br></pre></td></tr></table></figure><p>åˆ‡ç‰‡ä¹Ÿå¯ä»¥èµ‹å€¼ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq[2:4] = [0,0]</span><br><span class="line">seq # è¾“å‡º [6, 5, 0, 0, 7, 2]</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¦é€‰æ‹©ä¹‹å‰æˆ–è€…ä¹‹åçš„æ‰€æœ‰å€¼ï¼Œå°†ä¸€è¾¹çœç•¥å³å¯ï¼Œæ¯”å¦‚æˆ‘è¦é€‰æ‹©index=3ä¹‹åçš„æ‰€æœ‰å€¼ï¼Œå³[3:]ã€‚</p><p>ä½ ç”šè‡³å¯ä»¥æŒ‡å®šæ­¥é•¿ï¼Œä¹Ÿå°±æ˜¯éš”å¤šè¿œé€‰ä¸€ä¸ªå€¼ï¼Œä¾‹å¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">seq = [6,5,3,5,7,2]</span><br><span class="line">seq[::2] # è¾“å‡º [6, 3, 7]</span><br><span class="line">seq[::3] # è¾“å‡º [6, 5]</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³å°†æ•°ç»„åè½¬ï¼Œå°†æ­¥é•¿è®¾ä¸º-1è¯•è¯•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">seq = [6,5,3,5,7,2]</span><br><span class="line">seq[::-1] # è¾“å‡º[2, 7, 5, 3, 5, 6]</span><br></pre></td></tr></table></figure><h1 id="å†…ç½®çš„åºåˆ—å‡½æ•°"><a href="#å†…ç½®çš„åºåˆ—å‡½æ•°" class="headerlink" title="å†…ç½®çš„åºåˆ—å‡½æ•°"></a>å†…ç½®çš„åºåˆ—å‡½æ•°</h1><h2 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate"></a>enumerate</h2><p>åœ¨ç”¨for inå¾ªç¯ä¸€ä¸ªåºåˆ—çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸æƒ³è¦è·Ÿè¸ªindexï¼Œä¸ºæ­¤ä½ å¯èƒ½ä¼šå£°æ˜ä¸€ä¸ªiæ¥è®°å½•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i = 0</span><br><span class="line">for v in values:</span><br><span class="line">    ...</span><br><span class="line">    i+=1</span><br></pre></td></tr></table></figure><p>ä¸è¿‡pythonå·²ç»å†…ç½®äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥å¸®åˆ°ä½ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for index,value in enumerate([&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]):</span><br><span class="line">    print(value,index)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„indexå°±æ˜¯ä½ æƒ³è¦çš„é‚£ä¸ªiäº†ã€‚enumerateåœ¨å°†åˆ—è¡¨è½¬åŒ–ä¸ºå­—å…¸çš„æ—¶å€™å°¤å…¶æ–¹ä¾¿:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">some_list = [&apos;for&apos;,&apos;bar&apos;,&apos;baz&apos;]</span><br><span class="line">mapping = &#123;&#125;</span><br><span class="line">for i,v in enumerate(some_list):</span><br><span class="line">    mapping[v] = i</span><br><span class="line">    </span><br><span class="line">#è¾“å‡º: &#123;&apos;bar&apos;:1,&apos;baz&apos;:2,&apos;foo&apos;:0&#125;</span><br></pre></td></tr></table></figure><h2 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h2><p>sortedå‡½æ•°æ¥æ”¶ä¸€ä¸ªåºåˆ—å¯¹è±¡ï¼Œæ’åºåè¿”å›ä¸€ä¸ªæ–°çš„ã€‚</p><h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><p>zipä¼šå°†ä¸¤ä¸ªåºåˆ—ä¸­çš„å…ƒç´ ä¸€ä¸€å¯¹åº”ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">seq1 = [&apos;scott&apos;,&apos;frank&apos;,&apos;jason&apos;]</span><br><span class="line">seq2 = [&apos;1&apos;,&apos;2&apos;,&apos;3&apos;]</span><br><span class="line">zipped = zip(seq1,seq2)</span><br><span class="line">list(zipped) # è¾“å‡º: [(&apos;scott&apos;,&apos;1&apos;),(&apos;frank&apos;,&apos;2&apos;),(&apos;jason&apos;,&apos;3&apos;)]</span><br></pre></td></tr></table></figure><p>zipå¯ä»¥æ¥å—3ä¸ªåºåˆ—ä¸€ä¸€å¯¹åº”ï¼Œå¯¹åº”å…³ç³»æŒ‰ç…§æœ€çŸ­çš„å¤„ç†ã€‚</p><p>å°†å¦‚ä¸Šå‡½æ•°ç»“åˆï¼Œå¯ä»¥å®ç°ä¸€äº›å¾ˆéªšçš„å†™æ³•ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼Œå°†åºåˆ—ç»“åˆå¹¶æŒ‰é¡ºåºæ‰“å°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">for i (a,b) in enmerate(zip(se1,seq2)):</span><br><span class="line">    print(&apos;&#123;&#125;:&#123;&#125;,&#123;&#125;&apos;.format(i,a,b))</span><br></pre></td></tr></table></figure></p><p>ç»Ÿè®¡åå’Œå§“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pitchers = [(&apos;Nolan&apos;, &apos;Ryan&apos;), (&apos;Roger&apos;, &apos;Clemens&apos;),(&apos;Schilling&apos;, &apos;Curt&apos;)]</span><br><span class="line"></span><br><span class="line">first_names, last_names = zip(*pitchers)</span><br><span class="line"></span><br><span class="line">first_names # (&apos;Nolan&apos;, &apos;Roger&apos;, &apos;Schilling&apos;)</span><br><span class="line"></span><br><span class="line">last_names # (&apos;Ryan&apos;, &apos;Clemens&apos;, &apos;Curt&apos;)</span><br></pre></td></tr></table></figure><h2 id="reversed"><a href="#reversed" class="headerlink" title="reversed"></a>reversed</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(reversed(range(10)))</span><br></pre></td></tr></table></figure><p>reversedè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¦‚æœä½ æƒ³è¦å–å‡ºå…¶ä¸­æ•°æ®ï¼Œéœ€è¦ç”¨liståŒ…è£…ä¸€ä¸‹ã€‚</p><h1 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h1><p>å­—å…¸æ˜¯pythonä¸­æœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œåˆ›å»ºdictå¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨èŠ±æ‹¬å·å°±åˆ›å»ºäº†ä¸€ä¸ªdictã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;&#125;</span><br></pre></td></tr></table></figure><p>å¢åŠ å…ƒç´ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">d[1] = &apos;hi&apos;</span><br><span class="line">d[&apos;one&apos;] = 1</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥å­—å…¸ä¸­æ˜¯å¦æœ‰æŸä¸ªkey(æ£€æŸ¥çš„ä¸æ˜¯valuesï¼Œè€Œæ˜¯key)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 in d</span><br></pre></td></tr></table></figure><p>åˆ é™¤å­—å…¸ä¸­çš„å€¼ï¼Œå¯ä»¥ç”¨delå‘½ä»¤ï¼Œæˆ–è€…popæ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;&#125;</span><br><span class="line">d[&apos;v&apos;] = 10</span><br><span class="line">d[&apos;C&apos;] = 11</span><br><span class="line">del d[&apos;v&apos;]</span><br><span class="line"></span><br><span class="line">ret = d.pop(&apos;C&apos;)</span><br><span class="line">ret # 11</span><br></pre></td></tr></table></figure><p>popæ–¹æ³•ä¼šè¿”å›åˆ é™¤çš„å…ƒç´ ã€‚</p><p>å¯ä»¥ç›´æ¥ä½¿ç”¨d.keys()ï¼Œå’Œd.values()æ–¹æ³•è®¿é—®dictçš„æ‰€æœ‰keyså’Œvaluesã€‚</p><p>ä½¿ç”¨d.update()æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸¤ä¸ªdictåˆå¹¶ã€‚</p><p>ä»ä¸¤ä¸ªåºåˆ—åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œä½ ä¹Ÿè®¸ä¼šå‡†å¤‡ä¸€ä¸ªindexåˆ—è¡¨å’Œvaluesåˆ—è¡¨ï¼Œå†ç”¨forå¾ªç¯æ‰‹åŠ¨åˆ›å»ºï¼Œå¤§å¯ä¸å¿…ã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨dict+zipå‡½æ•°æ¥å®šä¹‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapping = dict(zip(indexs,values))</span><br></pre></td></tr></table></figure><h2 id="é»˜è®¤å€¼"><a href="#é»˜è®¤å€¼" class="headerlink" title="é»˜è®¤å€¼"></a>é»˜è®¤å€¼</h2><p>æ£€æµ‹dictæ˜¯å¦æ‹¥æœ‰æŸä¸ªå€¼ï¼Œå¦‚æœæœ‰å°±å–å‡ºæ¥ï¼Œæ²¡æœ‰å°±è®¾ç½®é»˜è®¤å€¼ï¼Œè¿™åº”è¯¥æ˜¯å¾ˆå¸¸ç”¨çš„æ“ä½œäº†ï¼Œä¸ºæ­¤ä½ å¯èƒ½ä¼šå†™å¦‚ä¸‹çš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if key in some_dict:</span><br><span class="line">    value = some_dict[key]</span><br><span class="line">else:</span><br><span class="line">    value = default_value</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨dictå†…ç½®çš„getæ–¹æ³•ï¼Œå¯ä»¥è®©ä½ çš„ä»£ç æ›´ç®€æ´ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value = some_dict.get(key,default_value)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æœ‰ä¸€å †å­—ç¬¦ä¸²éœ€è¦æŒ‰ç…§é¦–å­—æ¯åˆ†ç±»ï¼Œä½ å¯èƒ½ä¼šè¿™æ ·å†™:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">words = [&apos;apple&apos;,&apos;bat&apos;,&apos;bar&apos;,&apos;atom&apos;,&apos;book&apos;]</span><br><span class="line">by_letter = &#123;&#125;</span><br><span class="line"></span><br><span class="line">for word in words:</span><br><span class="line">letter = word[0]</span><br><span class="line">if letter not in by_letter:</span><br><span class="line">    by_letter[letter] = [word]</span><br><span class="line">else:</span><br><span class="line">    by_letter[letter].append(word)</span><br></pre></td></tr></table></figure><p>å€ŸåŠ©dictçš„setdefaultæ–¹æ³•ï¼Œå¯ä»¥è®©ä½ çš„ä»£ç æ›´ç®€æ´:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">words = [&apos;apple&apos;,&apos;bat&apos;,&apos;bar&apos;,&apos;atom&apos;,&apos;book&apos;]</span><br><span class="line">by_letter = &#123;&#125;</span><br></pre></td></tr></table></figure><h2 id="keyçš„ç±»å‹"><a href="#keyçš„ç±»å‹" class="headerlink" title="keyçš„ç±»å‹"></a>keyçš„ç±»å‹</h2><p>å­—å…¸çš„å€¼å¯ä»¥æ˜¯ä»»ä½•pythonçš„å¯¹è±¡ï¼Œè€Œkeyåˆ™ä¸è¡Œï¼Œå¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼Œä½ å¯ä»¥ç”¨hashå‡½æ•°å»æ£€æµ‹ï¼Œå¦‚æœèƒ½è¿”å›å€¼ï¼Œè¯´æ˜å®ƒå¯ä»¥ä½œä¸ºå­—å…¸çš„keyï¼Œå¦‚æœæŠ¥é”™å°±ä¸è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hash(&apos;string&apos;) # ok</span><br><span class="line">hash((1,2,[2,3])) # æŠ¥é”™ï¼Œå› ä¸ºlistæ˜¯å¯å˜çš„</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€å®šè¦listä½œä¸ºé”®ï¼Œå¯ä»¥å…ˆå°†å®ƒè½¬åŒ–æˆå…ƒç»„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;&#125;</span><br><span class="line">d[tuple([1,2,3])] = 5</span><br><span class="line">d</span><br></pre></td></tr></table></figure><h2 id="å­—å…¸é«˜çº§ç”¨æ³•"><a href="#å­—å…¸é«˜çº§ç”¨æ³•" class="headerlink" title="å­—å…¸é«˜çº§ç”¨æ³•"></a>å­—å…¸é«˜çº§ç”¨æ³•</h2><p>collectionæ¨¡å—å¯¹å­—å…¸ä¹Ÿæä¾›äº†å¾ˆå¤šæ–¹ä¾¿çš„æ–¹æ³•ï¼š</p><h3 id="å¤šä¸ªå­—å…¸éå†"><a href="#å¤šä¸ªå­—å…¸éå†" class="headerlink" title="å¤šä¸ªå­—å…¸éå†"></a>å¤šä¸ªå­—å…¸éå†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from collections import ChainMap</span><br><span class="line">c = ChainMap(a,b)</span><br><span class="line">print(c[&apos;x&apos;]) # Outputs 1 (from a)</span><br><span class="line">print(c[&apos;y&apos;]) # Outputs 2 (from b)</span><br><span class="line">print(c[&apos;z&apos;]) # Outputs 3 (from a)</span><br></pre></td></tr></table></figure><h2 id="å­—å…¸åˆå¹¶"><a href="#å­—å…¸åˆå¹¶" class="headerlink" title="å­—å…¸åˆå¹¶"></a>å­—å…¸åˆå¹¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;&apos;x&apos;: 1, &apos;z&apos;: 3 &#125;</span><br><span class="line">b = &#123;&apos;y&apos;: 2, &apos;z&apos;: 4 &#125;</span><br><span class="line">merged = ChainMap(a, b)</span><br><span class="line">merged[&apos;x&apos;] # è¾“å‡º 1</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹</span><br><span class="line">a[&apos;x&apos;] = 42</span><br><span class="line">merged[&apos;x&apos;] # è¾“å‡º42</span><br></pre></td></tr></table></figure><h1 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h1><p>é›†åˆæ˜¯æ²¡æœ‰é¡ºåºå…³ç³»çš„å…ƒç´ æ”¾åœ¨ä¸€èµ·ã€‚ä½ å¯ä»¥æƒ³è±¡æˆæ˜¯å­—å…¸ä¸­ï¼Œåªæœ‰keyï¼Œæ²¡æœ‰å€¼ã€‚å­—å…¸çš„åˆ›å»ºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set([1,2,3,4])</span><br><span class="line">&#123;1,2,3,4&#125;</span><br></pre></td></tr></table></figure><p>é›†åˆæ”¯æŒæ•°å­¦å±‚é¢çš„è¿ç®—ï¼Œæ¯”å¦‚äº¤é›†ã€å¹¶é›†ç­‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a =&#123;1,2,3,4,5,6,7,8&#125;</span><br><span class="line">b = &#123;3,4,5,6,7,8&#125;</span><br><span class="line">&#125;</span><br><span class="line">a.union(b) æˆ–è€… a | b</span><br><span class="line">a.intersection(b) æˆ–è€… a &amp; b</span><br><span class="line"></span><br><span class="line">&#123;1,2,3&#125;.issubset(a)</span><br></pre></td></tr></table></figure><p>æ›´å¤šçš„è¿ç®—è§„åˆ™å¯ä»¥å»ç½‘ä¸ŠæŸ¥æŸ¥çœ‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å…ƒç»„ã€æ•°ç»„ã€å­—å…¸ã€é›†åˆï¼ŒåŠå¸¸ç”¨æ“ä½œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Dash åŸºç¡€</title>
    <link href="http://wittyfans.com/coding/Dash-%E5%9F%BA%E7%A1%80.html"/>
    <id>http://wittyfans.com/coding/Dash-åŸºç¡€.html</id>
    <published>2019-01-31T13:48:29.000Z</published>
    <updated>2019-01-31T14:11:46.263Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Dashæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ Web APPæ„å»ºæ¡†æ¶ï¼Œè¿™ä¸ªéƒ¨åˆ†åŒ…å«äº†Dashçš„å®‰è£…ï¼Œdashä¸­çš„layoutï¼Œå¦‚ä½•å»ä¸ªæ€§åŒ–dashä¸­çš„htmlå…ƒç´ ï¼Œä»¥åŠå¤ç”¨dashçš„å…ƒç´ ï¼Œå¦‚ä½•ä½¿ç”¨dashçš„å›è°ƒå‡½æ•°ï¼Œå®æ—¶æ•°æ®ç›‘æ§ç­‰.</p></blockquote><a id="more"></a><h1 id="Dash-çš„ç‰¹ç‚¹"><a href="#Dash-çš„ç‰¹ç‚¹" class="headerlink" title="Dash çš„ç‰¹ç‚¹"></a>Dash çš„ç‰¹ç‚¹</h1><p>Dash is a productive Python framework for building web applications,This part contains dash install, layout of dash, how to style the html tag in dash, using the callbacks, update data in real time,etc.</p><ul><li>building data visualization apps</li><li>Inherently cross-platform and mobile ready</li></ul><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>å¦‚æœç›´æ¥pip install dash,é‚£åœ¨å¯¼å…¥æŸäº›ç»„ä»¶ï¼ˆä¾‹å¦‚æˆ‘å¯¼å…¥Eventç»„ä»¶ï¼‰çš„æ—¶å€™ä¼šæç¤ºæ‰¾ä¸åˆ°åŒ…ï¼Œåé¢æˆ‘é‡æ–°é€šè¿‡æŒ‡å®šdashå®˜æ–¹æ–‡æ¡£ä¸­çš„å‘½ä»¤é‡æ–°å®‰è£…åï¼ŒæˆåŠŸè§£å†³äº†è¯¥é—®é¢˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install dash==0.35.1  # The core dash backend</span><br><span class="line">pip install dash-html-components==0.13.4  # HTML components</span><br><span class="line">pip install dash-core-components==0.42.1  # Supercharged components</span><br><span class="line">pip install dash-table==3.1.11  # Interactive DataTable component (new!)</span><br></pre></td></tr></table></figure><h1 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h1><h2 id="Hello-Dash"><a href="#Hello-Dash" class="headerlink" title="Hello Dash"></a>Hello Dash</h2><blockquote><p>Layoutæè¿°äº†è¯¥appæ˜¯ä»€ä¹ˆæ ·å­,æ‰€æœ‰çš„å¯è§†åŒ–ç»„å»ºéƒ½ç”¨pythonç±»æ¥å®šä¹‰ï¼Œä¸»è¦æœ‰ä¸¤ç§dash_core_componentså’Œdash_html_componentsï¼Œä¸è¿‡ä½ ä¹Ÿå¯ä»¥å®šä¹‰è‡ªå·±çš„jså’Œreact.jsç±»ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">app.layout = html.Div(children=[</span><br><span class="line">    html.H1(children=&apos;Hello Dash&apos;),</span><br><span class="line"></span><br><span class="line">    html.Div(children=&apos;&apos;&apos;</span><br><span class="line">        Dash: A web application framework for Python.</span><br><span class="line">    &apos;&apos;&apos;),</span><br><span class="line"></span><br><span class="line">    dcc.Graph(</span><br><span class="line">        id=&apos;example-graph&apos;,</span><br><span class="line">        figure=&#123;</span><br><span class="line">            &apos;data&apos;: [</span><br><span class="line">                &#123;&apos;x&apos;: [1, 2, 3], &apos;y&apos;: [4, 1, 2], &apos;type&apos;: &apos;bar&apos;, &apos;name&apos;: &apos;SF&apos;&#125;,</span><br><span class="line">                &#123;&apos;x&apos;: [1, 2, 3], &apos;y&apos;: [2, 4, 5], &apos;type&apos;: &apos;bar&apos;, &apos;name&apos;: u&apos;MontrÃ©al&apos;&#125;,</span><br><span class="line">            ],</span><br><span class="line">            &apos;layout&apos;: &#123;</span><br><span class="line">                &apos;title&apos;: &apos;Dash Data Visualization&apos;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><p>html.Div()æ˜¯ä¸€ä¸ªdivç»„ä»¶ï¼Œå…¶ä¸­å¯ä»¥å¢åŠ å­å…ƒç´ ï¼Œæ–¹æ³•æ˜¯ç›´æ¥åœ¨é‡Œé¢å®šä¹‰childrenå³å¯ï¼Œchildrenåœ¨htmlç»„ä»¶ä¸­æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œæ‰€ä»¥åœ¨H1å…ƒç´ ä¸­ï¼Œä½ è¿˜å¯ä»¥ç»§ç»­å®šä¹‰childrenï¼Œé€šè¿‡è¿™ç§åµŒå¥—å…³ç³»ï¼Œä½ å°±å¯ä»¥æ„å»ºéœ€è¦çš„ç½‘é¡µå…ƒç´ ã€‚</p><p>dcc.Graph()æ˜¯ä¸€ä¸ªå›¾å½¢å…ƒç´ ï¼Œå…¶idæ˜¯è¿™ä¸ªå¯¹è±¡çš„idï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªidæ¥æ‰¾åˆ°è¿™ä¸ªå…ƒç´ ï¼Œå¹¶ä¸å…¶äº¤äº’ã€‚<br>figureæ˜¯è¿™ä¸ªå›¾å½¢å¯¹è±¡çš„æ•°æ®ï¼Œæ¯”å¦‚æœ€é‡è¦çš„æ•°æ®ï¼Œä»¥åŠè¯¥å›¾çš„æ ‡é¢˜ã€‚</p><p>æœ€åï¼Œapp.run_server(debug=True)ä¼šå¯åŠ¨æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥åˆ°å½“å‰æ–‡ä»¶å¤¹ï¼Œå°†è¯¥pythonæ–‡ä»¶ç›´æ¥è¿è¡Œï¼Œéšåå³å¯çœ‹åˆ°ç›¸å…³çš„æœåŠ¡å¯åŠ¨ï¼Œé€šè¿‡dashæä¾›ç½‘å€å°±å¯ä»¥çœ‹åˆ°appçš„é¡µé¢äº†ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>The dash_core_components describe higher-level components that are interactive and are generated with JavaScript, HTML, and CSS through the React.js library.</li><li>html.H1(children=â€™Hello Dashâ€™) is the same as html.H1(â€˜Hello Dashâ€™)</li></ul><p>Dashæ˜¯ hot-reloading çš„ï¼Œå³å¦‚æœä½ çš„appå·²ç»è¿è¡Œèµ·æ¥äº†ï¼Œä½ åšäº†ä»»ä½•æ›´æ”¹ï¼Œç½‘é¡µéƒ½ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œä½ å¯ä»¥ç›´æ¥çœ‹åˆ°æ–°çš„å˜åŒ–ã€‚</p><blockquote><p>Dash will automatically refresh your browser when you make a change in your code.</p></blockquote><h2 id="Style-html"><a href="#Style-html" class="headerlink" title="Style html"></a>Style html</h2><p>Dashçš„å…ƒç´ éƒ½å¯ä»¥è‡ªå®šä¹‰ï¼Œä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰CSSçš„æ–¹å¼æ¥æ›´æ”¹å…ƒç´ çš„å±æ€§å’Œæ’ç‰ˆï¼Œè¿˜æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥å¯¹æ¯”ä¸‹é¢å’Œä¸Šé¢çš„åŒºåˆ«ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">colors = &#123;</span><br><span class="line">    &apos;background&apos;: &apos;#111111&apos;,</span><br><span class="line">    &apos;text&apos;: &apos;#7FDBFF&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.layout = html.Div(style=&#123;&apos;backgroundColor&apos;: colors[&apos;background&apos;]&#125;, children=[</span><br><span class="line">    html.H1(</span><br><span class="line">        children=&apos;Hello Dash&apos;,</span><br><span class="line">        style=&#123;</span><br><span class="line">            &apos;textAlign&apos;: &apos;center&apos;,</span><br><span class="line">            &apos;color&apos;: colors[&apos;text&apos;]</span><br><span class="line">        &#125;</span><br><span class="line">    ),</span><br><span class="line"></span><br><span class="line">    html.Div(children=&apos;Dash: A web application framework for Python.&apos;, style=&#123;</span><br><span class="line">        &apos;textAlign&apos;: &apos;center&apos;,</span><br><span class="line">        &apos;color&apos;: colors[&apos;text&apos;]</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    dcc.Graph(</span><br><span class="line">        id=&apos;example-graph-2&apos;,</span><br><span class="line">        figure=&#123;</span><br><span class="line">            &apos;data&apos;: [</span><br><span class="line">                &#123;&apos;x&apos;: [1, 2, 3], &apos;y&apos;: [4, 1, 2], &apos;type&apos;: &apos;bar&apos;, &apos;name&apos;: &apos;SF&apos;&#125;,</span><br><span class="line">                &#123;&apos;x&apos;: [1, 2, 3], &apos;y&apos;: [2, 4, 5], &apos;type&apos;: &apos;bar&apos;, &apos;name&apos;: u&apos;MontrÃ©al&apos;&#125;,</span><br><span class="line">            ],</span><br><span class="line">            &apos;layout&apos;: &#123;</span><br><span class="line">                &apos;plot_bgcolor&apos;: colors[&apos;background&apos;],</span><br><span class="line">                &apos;paper_bgcolor&apos;: colors[&apos;background&apos;],</span><br><span class="line">                &apos;font&apos;: &#123;</span><br><span class="line">                    &apos;color&apos;: colors[&apos;text&apos;]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„dash htmlç»„ä»¶å’Œhtmlå…ƒç´ çš„åŒºåˆ«ï¼š</p><ol><li>HTMLä¸­çš„styleå±æ€§æ˜¯ä»¥åˆ†å·åˆ†éš”çš„å­—ç¬¦ä¸²ã€‚åœ¨Dashä¸­ç”¨å­—å…¸</li><li>The children of the HTML tag is specified through the children keyword argument. By convention, this is always the first argument and so it is often omitted.</li></ol><h2 id="å¤ç”¨ç»„ä»¶"><a href="#å¤ç”¨ç»„ä»¶" class="headerlink" title="å¤ç”¨ç»„ä»¶"></a>å¤ç”¨ç»„ä»¶</h2><h2 id="Pandas-dataframeåˆ°table"><a href="#Pandas-dataframeåˆ°table" class="headerlink" title="Pandas dataframeåˆ°table"></a>Pandas dataframeåˆ°table</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(</span><br><span class="line">    &apos;https://gist.githubusercontent.com/chriddyp/&apos;</span><br><span class="line">    &apos;c78bf172206ce24f77d6363a2d754b59/raw/&apos;</span><br><span class="line">    &apos;c353e8ef842413cae56ae3920b8fd78468aa4cb2/&apos;</span><br><span class="line">    &apos;usa-agricultural-exports-2011.csv&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def generate_table(dataframe, max_rows=10):</span><br><span class="line">    return html.Table(</span><br><span class="line">        # Header</span><br><span class="line">        [html.Tr([html.Th(col) for col in dataframe.columns])] +</span><br><span class="line"></span><br><span class="line">        # Body</span><br><span class="line">        [html.Tr([</span><br><span class="line">            html.Td(dataframe.iloc[i][col]) for col in dataframe.columns</span><br><span class="line">        ]) for i in range(min(len(dataframe), max_rows))]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">app.layout = html.Div(children=[</span><br><span class="line">    html.H4(children=&apos;US Agriculture Exports (2011)&apos;),</span><br><span class="line">    generate_table(df)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><h2 id="æ›´å¤šçš„å¯è§†åŒ–ç»„ä»¶"><a href="#æ›´å¤šçš„å¯è§†åŒ–ç»„ä»¶" class="headerlink" title="æ›´å¤šçš„å¯è§†åŒ–ç»„ä»¶"></a>æ›´å¤šçš„å¯è§†åŒ–ç»„ä»¶</h2><p>dash_core_componentsåº“ä¸­ï¼Œæœ‰ä¸€ä¸ªGraphçš„ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç»˜åˆ¶å¯äº¤äº’çš„å¯è§†åŒ–ç»„å»ºï¼Œä½¿ç”¨å¼€æºçš„plotly.jsï¼Œæ”¯æŒ35ç§å›¾åƒç»˜åˆ¶ã€‚</p><p>graphä¸­çš„figureå‚æ•°ï¼Œè·Ÿplotly.pyä¸­çš„figureå‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œä½ å¯ä»¥å‚è€ƒ<a href="https://plot.ly/python/" target="_blank" rel="noopener">plotly</a>çš„å®˜æ–¹æ–‡æ¡£äº†è§£æ›´å¤šã€‚</p><h2 id="MarkDown"><a href="#MarkDown" class="headerlink" title="MarkDown"></a>MarkDown</h2><p>dashæ”¯æŒmarkdown,ç”¨â€˜â€™â€˜æ‹¬èµ·æ¥ï¼Œç„¶ååœ¨å…¶ä¸­å†™markdownå³å¯ï¼Œæœ€ååœ¨htmlä¸­ï¼Œå°†childrenæŒ‡å®šä¸ºè¯¥markdownæ ¼å¼çš„stringå¯¹è±¡ã€‚</p><h2 id="Core-Components"><a href="#Core-Components" class="headerlink" title="Core Components"></a>Core Components</h2><p>The dash_core_components includes a set of higher-level components like dropdowns, graphs, markdown blocks, and more.</p><h2 id="å¸®åŠ©"><a href="#å¸®åŠ©" class="headerlink" title="å¸®åŠ©"></a>å¸®åŠ©</h2><p>ä½ å¯ä»¥åœ¨pythonå‘½ä»¤è¡Œä¸­ï¼Œä½¿ç”¨help(dcc.Dropdown)ç±»ä¼¼å½¢å¼æ¥äº†è§£dashçš„å…ƒç´ ã€‚</p><h2 id="Layout-æ€»ç»“"><a href="#Layout-æ€»ç»“" class="headerlink" title="Layout æ€»ç»“"></a>Layout æ€»ç»“</h2><p>The layout of a Dash app describes what the app looks like. The layout is a hierarchical tree of components. The dash_html_components library provides classes for all of the HTML tags and the keyword arguments describe the HTML attributes like style, className, and id. The dash_core_components library generates higher-level components like controls and graphs.</p><h1 id="Callbacks"><a href="#Callbacks" class="headerlink" title="Callbacks"></a>Callbacks</h1><p>åœ¨ä¸Šä¸€ç« ï¼Œæˆ‘ä»¬å­¦ä¹ dashçš„åŸºæœ¬ç»„ä»¶ï¼Œé•¿ä»€ä¹ˆæ ·å­ï¼Œhtmlæ¨¡å—æä¾›äº†è®¸å¤špythonå®ç°çš„htmlç±»ï¼Œå¯ä»¥ç”¨æ¥æ„å»ºhtmlå…ƒç´ ï¼ŒåŒæ—¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨htmlçš„å±æ€§å¦‚stileï¼Œclassnameï¼Œidæ¥è‡ªå®šä¹‰htmlçš„å…ƒç´ ã€‚</p><p>è¿™ä¸€ç« ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å’ŒDashäº¤äº’ã€‚</p><h2 id="å®æ—¶æ•°æ®è·Ÿè¸ª"><a href="#å®æ—¶æ•°æ®è·Ÿè¸ª" class="headerlink" title="å®æ—¶æ•°æ®è·Ÿè¸ª"></a>å®æ—¶æ•°æ®è·Ÿè¸ª</h2><p>é¦–å…ˆçœ‹ä¸€ä¸ªå®æ—¶æ•°æ®æ˜¾ç¤ºçš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html #for tags like div,table</span><br><span class="line">from dash.dependencies import Input,Output</span><br><span class="line"></span><br><span class="line">app = dash.Dash() # dash is a flask app</span><br><span class="line">app.layout = html.Div(children=[</span><br><span class="line">    dcc.Input(id=&apos;input&apos;,value=&apos;Enter something&apos;,type=&apos;text&apos;)</span><br><span class="line">    html.Div(id=&apos;output&apos;)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">@app.callback(</span><br><span class="line">    Output(component_id=&apos;output&apos;,component_property=&apos;children&apos;),</span><br><span class="line">    [Input(component_id=&apos;input&apos;,component_property=&apos;value&apos;)]</span><br><span class="line">)</span><br><span class="line">def update_value(input_data): # update_valueå¹¶æ²¡æœ‰åœ¨å“ªé‡Œè¿è¡Œï¼Œè¿™ä¸ªæ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿå½“inputæ›´æ–°çš„æ—¶å€™ï¼Œè¢«è£…é¥°å™¨åŒ…è£¹çš„å‡½æ•°ï¼Œä¼šè‡ªåŠ¨è¿è¡Œ</span><br><span class="line">    return &quot;Input: &#123;&#125;&quot;.format(input_data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.run_server(debug=True)</span><br></pre></td></tr></table></figure><ul><li>åœ¨childrenä¸­ï¼Œä½¿ç”¨çš„æ˜¯dcc.Inputï¼Œä¸æ˜¯dependenciesä¸­çš„</li><li>dcc.Input()åŸºæœ¬ä¸Šæ˜¯ç±»ä¼¼htmlä¸­çš„æ–‡æœ¬è¾“å…¥æ¡†,ä¸”å¿…é¡»æŒ‡å®šid</li><li>@å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨ä¹‹åçš„å‡½æ•°å³update_valueè¿è¡Œåï¼Œå¯¹å®ƒçš„è¿”å›å€¼è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼ˆè£…é¥°ï¼‰ï¼Œåœ¨è¿™ç±»æ˜¯æ›´æ–°ç½‘é¡µä¸­çš„å€¼</li><li>å½“inputæ›´æ–°çš„æ—¶å€™ï¼Œè¢«è£…é¥°å™¨åŒ…è£¹çš„å‡½æ•°ï¼Œä¼šè‡ªåŠ¨è¿è¡Œ</li><li>component_idå’Œcomponent_propertyæ˜¯å¯ä»¥çœç•¥çš„,The component_id and component_property keywords are optional</li><li>æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬æ²¡æœ‰å»è®¾ç½®inputçš„åˆå€¼ï¼Œäº‹å®ä¸Šï¼Œdashè¿è¡Œçš„æ—¶å€™ï¼Œä¼šå…ˆè°ƒç”¨ä¸€écallbackï¼Œè¿™æ ·å°±èƒ½è¾¾åˆ°è®¾ç½®åˆå§‹å€¼çš„ç›®çš„</li></ul><p>çœ‹ä¸€ä¸‹å®˜æ–¹çš„æ–‡æ¡£:</p><p><em>In Dash, the inputs and outputs of our application are simply the properties of a particular component. In this example, our input is the â€œvalueâ€ property of the component that has the ID â€œmy-idâ€. Our output is the â€œchildrenâ€ property of the component with the ID â€œmy-divâ€.</em></p><p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆoutputæ˜¯ Output() è¿™æ ·çš„ï¼Œinputæ˜¯ [input()] çš„å‘¢ï¼Ÿ</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://www.jianshu.com/p/fd746acbdf1e" target="_blank" rel="noopener">è£…é¥°å™¨</a></li><li><a href="https://dash.plot.ly/getting-started-part-2" target="_blank" rel="noopener">å…³äºè¿™ä¸€èŠ‚çš„æ›´å¤šä¾‹å­ä¸è§£ç­”</a></li></ul><h2 id="Sliderå›¾ç»˜åˆ¶"><a href="#Sliderå›¾ç»˜åˆ¶" class="headerlink" title="Sliderå›¾ç»˜åˆ¶"></a>Sliderå›¾ç»˜åˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line">import pandas as pd</span><br><span class="line">import plotly.graph_objs as go</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(</span><br><span class="line">    &apos;https://raw.githubusercontent.com/plotly/&apos;</span><br><span class="line">    &apos;datasets/master/gapminderDataFiveYear.csv&apos;)</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">app.layout = html.Div([</span><br><span class="line">    dcc.Graph(id=&apos;graph-with-slider&apos;),</span><br><span class="line">    dcc.Slider(</span><br><span class="line">        id=&apos;year-slider&apos;,</span><br><span class="line">        min=df[&apos;year&apos;].min(),</span><br><span class="line">        max=df[&apos;year&apos;].max(),</span><br><span class="line">        value=df[&apos;year&apos;].min(),</span><br><span class="line">        marks=&#123;str(year): str(year) for year in df[&apos;year&apos;].unique()&#125;</span><br><span class="line">    )</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.callback(</span><br><span class="line">    dash.dependencies.Output(&apos;graph-with-slider&apos;, &apos;figure&apos;),</span><br><span class="line">    [dash.dependencies.Input(&apos;year-slider&apos;, &apos;value&apos;)])</span><br><span class="line">def update_figure(selected_year):</span><br><span class="line">    filtered_df = df[df.year == selected_year]</span><br><span class="line">    traces = []</span><br><span class="line">    for i in filtered_df.continent.unique():</span><br><span class="line">        df_by_continent = filtered_df[filtered_df[&apos;continent&apos;] == i]</span><br><span class="line">        traces.append(go.Scatter(</span><br><span class="line">            x=df_by_continent[&apos;gdpPercap&apos;],</span><br><span class="line">            y=df_by_continent[&apos;lifeExp&apos;],</span><br><span class="line">            text=df_by_continent[&apos;country&apos;],</span><br><span class="line">            mode=&apos;markers&apos;,</span><br><span class="line">            opacity=0.7,</span><br><span class="line">            marker=&#123;</span><br><span class="line">                &apos;size&apos;: 15,</span><br><span class="line">                &apos;line&apos;: &#123;&apos;width&apos;: 0.5, &apos;color&apos;: &apos;white&apos;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            name=i</span><br><span class="line">        ))</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">        &apos;data&apos;: traces,</span><br><span class="line">        &apos;layout&apos;: go.Layout(</span><br><span class="line">            xaxis=&#123;&apos;type&apos;: &apos;log&apos;, &apos;title&apos;: &apos;GDP Per Capita&apos;&#125;,</span><br><span class="line">            yaxis=&#123;&apos;title&apos;: &apos;Life Expectancy&apos;, &apos;range&apos;: [20, 90]&#125;,</span><br><span class="line">            margin=&#123;&apos;l&apos;: 40, &apos;b&apos;: 40, &apos;t&apos;: 10, &apos;r&apos;: 10&#125;,</span><br><span class="line">            legend=&#123;&apos;x&apos;: 0, &apos;y&apos;: 1&#125;,</span><br><span class="line">            hovermode=&apos;closest&apos;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨pandasè¯»å–æ•°æ®</li><li>dcc.Slider()æŒ‡å®šæ¥Sliderå›¾çš„åŸºæœ¬å±æ€§</li><li>å½“æ•°æ®æœ‰æ›´æ–°çš„æ—¶å€™ï¼Œupdate_figureæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨</li><li>go.Scatterå®šä¹‰äº†æ¯ä¸€ä¸ªScatteråº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ï¼Œå…¶ä¸­çš„æ•°æ®ä»dfä¸­åˆ†æå¾—åˆ°</li><li>tracesæ˜¯æ‰€æœ‰Scatterç»„æˆçš„æ•°ç»„ï¼Œä¹Ÿæ˜¯è¯¥å›¾çš„æ•°æ®æº</li></ul><p>âš ï¸ï¼šThe callback does not modify the original data, it just creates copies of the dataframe by filtered through pandas filters. This is important: <strong>Your callbacks should never mutate variables outside of their scope</strong></p><h2 id="å¤šä¸ªè¾“å…¥"><a href="#å¤šä¸ªè¾“å…¥" class="headerlink" title="å¤šä¸ªè¾“å…¥"></a>å¤šä¸ªè¾“å…¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line">import pandas as pd</span><br><span class="line">import plotly.graph_objs as go</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(</span><br><span class="line">    &apos;https://gist.githubusercontent.com/chriddyp/&apos;</span><br><span class="line">    &apos;cb5392c35661370d95f300086accea51/raw/&apos;</span><br><span class="line">    &apos;8e0768211f6b747c0db42a9ce9a0937dafcbd8b2/&apos;</span><br><span class="line">    &apos;indicators.csv&apos;)</span><br><span class="line"></span><br><span class="line">available_indicators = df[&apos;Indicator Name&apos;].unique()</span><br><span class="line"></span><br><span class="line">app.layout = html.Div([</span><br><span class="line">    html.Div([</span><br><span class="line"></span><br><span class="line">        html.Div([</span><br><span class="line">            dcc.Dropdown(</span><br><span class="line">                id=&apos;xaxis-column&apos;,</span><br><span class="line">                options=[&#123;&apos;label&apos;: i, &apos;value&apos;: i&#125; for i in available_indicators],</span><br><span class="line">                value=&apos;Fertility rate, total (births per woman)&apos;</span><br><span class="line">            ),</span><br><span class="line">            dcc.RadioItems(</span><br><span class="line">                id=&apos;xaxis-type&apos;,</span><br><span class="line">                options=[&#123;&apos;label&apos;: i, &apos;value&apos;: i&#125; for i in [&apos;Linear&apos;, &apos;Log&apos;]],</span><br><span class="line">                value=&apos;Linear&apos;,</span><br><span class="line">                labelStyle=&#123;&apos;display&apos;: &apos;inline-block&apos;&#125;</span><br><span class="line">            )</span><br><span class="line">        ],</span><br><span class="line">        style=&#123;&apos;width&apos;: &apos;48%&apos;, &apos;display&apos;: &apos;inline-block&apos;&#125;),</span><br><span class="line"></span><br><span class="line">        html.Div([</span><br><span class="line">            dcc.Dropdown(</span><br><span class="line">                id=&apos;yaxis-column&apos;,</span><br><span class="line">                options=[&#123;&apos;label&apos;: i, &apos;value&apos;: i&#125; for i in available_indicators],</span><br><span class="line">                value=&apos;Life expectancy at birth, total (years)&apos;</span><br><span class="line">            ),</span><br><span class="line">            dcc.RadioItems(</span><br><span class="line">                id=&apos;yaxis-type&apos;,</span><br><span class="line">                options=[&#123;&apos;label&apos;: i, &apos;value&apos;: i&#125; for i in [&apos;Linear&apos;, &apos;Log&apos;]],</span><br><span class="line">                value=&apos;Linear&apos;,</span><br><span class="line">                labelStyle=&#123;&apos;display&apos;: &apos;inline-block&apos;&#125;</span><br><span class="line">            )</span><br><span class="line">        ],style=&#123;&apos;width&apos;: &apos;48%&apos;, &apos;float&apos;: &apos;right&apos;, &apos;display&apos;: &apos;inline-block&apos;&#125;)</span><br><span class="line">    ]),</span><br><span class="line"></span><br><span class="line">    dcc.Graph(id=&apos;indicator-graphic&apos;),</span><br><span class="line"></span><br><span class="line">    dcc.Slider(</span><br><span class="line">        id=&apos;year--slider&apos;,</span><br><span class="line">        min=df[&apos;Year&apos;].min(),</span><br><span class="line">        max=df[&apos;Year&apos;].max(),</span><br><span class="line">        value=df[&apos;Year&apos;].max(),</span><br><span class="line">        marks=&#123;str(year): str(year) for year in df[&apos;Year&apos;].unique()&#125;</span><br><span class="line">    )</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">@app.callback(</span><br><span class="line">    dash.dependencies.Output(&apos;indicator-graphic&apos;, &apos;figure&apos;),</span><br><span class="line">    [dash.dependencies.Input(&apos;xaxis-column&apos;, &apos;value&apos;),</span><br><span class="line">     dash.dependencies.Input(&apos;yaxis-column&apos;, &apos;value&apos;),</span><br><span class="line">     dash.dependencies.Input(&apos;xaxis-type&apos;, &apos;value&apos;),</span><br><span class="line">     dash.dependencies.Input(&apos;yaxis-type&apos;, &apos;value&apos;),</span><br><span class="line">     dash.dependencies.Input(&apos;year--slider&apos;, &apos;value&apos;)])</span><br><span class="line">def update_graph(xaxis_column_name, yaxis_column_name,</span><br><span class="line">                 xaxis_type, yaxis_type,</span><br><span class="line">                 year_value):</span><br><span class="line">    dff = df[df[&apos;Year&apos;] == year_value]</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">        &apos;data&apos;: [go.Scatter(</span><br><span class="line">            x=dff[dff[&apos;Indicator Name&apos;] == xaxis_column_name][&apos;Value&apos;],</span><br><span class="line">            y=dff[dff[&apos;Indicator Name&apos;] == yaxis_column_name][&apos;Value&apos;],</span><br><span class="line">            text=dff[dff[&apos;Indicator Name&apos;] == yaxis_column_name][&apos;Country Name&apos;],</span><br><span class="line">            mode=&apos;markers&apos;,</span><br><span class="line">            marker=&#123;</span><br><span class="line">                &apos;size&apos;: 15,</span><br><span class="line">                &apos;opacity&apos;: 0.5,</span><br><span class="line">                &apos;line&apos;: &#123;&apos;width&apos;: 0.5, &apos;color&apos;: &apos;white&apos;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )],</span><br><span class="line">        &apos;layout&apos;: go.Layout(</span><br><span class="line">            xaxis=&#123;</span><br><span class="line">                &apos;title&apos;: xaxis_column_name,</span><br><span class="line">                &apos;type&apos;: &apos;linear&apos; if xaxis_type == &apos;Linear&apos; else &apos;log&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            yaxis=&#123;</span><br><span class="line">                &apos;title&apos;: yaxis_column_name,</span><br><span class="line">                &apos;type&apos;: &apos;linear&apos; if yaxis_type == &apos;Linear&apos; else &apos;log&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">            margin=&#123;&apos;l&apos;: 40, &apos;b&apos;: 40, &apos;t&apos;: 10, &apos;r&apos;: 0&#125;,</span><br><span class="line">            hovermode=&apos;closest&apos;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><h2 id="å¤šä¸ªè¾“å‡º"><a href="#å¤šä¸ªè¾“å‡º" class="headerlink" title="å¤šä¸ªè¾“å‡º"></a>å¤šä¸ªè¾“å‡º</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">app.layout = html.Div([</span><br><span class="line">    dcc.RadioItems(</span><br><span class="line">        id=&apos;dropdown-a&apos;,</span><br><span class="line">        options=[&#123;&apos;label&apos;: i, &apos;value&apos;: i&#125; for i in [&apos;Canada&apos;, &apos;USA&apos;, &apos;Mexico&apos;]],</span><br><span class="line">        value=&apos;Canada&apos;</span><br><span class="line">    ),</span><br><span class="line">    html.Div(id=&apos;output-a&apos;),</span><br><span class="line"></span><br><span class="line">    dcc.RadioItems(</span><br><span class="line">        id=&apos;dropdown-b&apos;,</span><br><span class="line">        options=[&#123;&apos;label&apos;: i, &apos;value&apos;: i&#125; for i in [&apos;MTL&apos;, &apos;NYC&apos;, &apos;SF&apos;]],</span><br><span class="line">        value=&apos;MTL&apos;</span><br><span class="line">    ),</span><br><span class="line">    html.Div(id=&apos;output-b&apos;)</span><br><span class="line"></span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.callback(</span><br><span class="line">    dash.dependencies.Output(&apos;output-a&apos;, &apos;children&apos;),</span><br><span class="line">    [dash.dependencies.Input(&apos;dropdown-a&apos;, &apos;value&apos;)])</span><br><span class="line">def callback_a(dropdown_value):</span><br><span class="line">    return &apos;You\&apos;ve selected &quot;&#123;&#125;&quot;&apos;.format(dropdown_value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.callback(</span><br><span class="line">    dash.dependencies.Output(&apos;output-b&apos;, &apos;children&apos;),</span><br><span class="line">    [dash.dependencies.Input(&apos;dropdown-b&apos;, &apos;value&apos;)])</span><br><span class="line">def callback_b(dropdown_value):</span><br><span class="line">    return &apos;You\&apos;ve selected &quot;&#123;&#125;&quot;&apos;.format(dropdown_value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><h1 id="çŠ¶æ€ç›‘å¬"><a href="#çŠ¶æ€ç›‘å¬" class="headerlink" title="çŠ¶æ€ç›‘å¬"></a>çŠ¶æ€ç›‘å¬</h1><p>ä¹‹å‰çš„ä»£ç ä¸­ï¼Œdashä¼šå¯¹æˆ‘ä»¬çš„è¾“å…¥å®æ—¶ç›‘å¬ï¼Œä¸€æ—¦æœ‰å˜åŒ–å°±dashå°±ä¼šå»æ›´æ–°æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line">from dash.dependencies import Input, Output</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">app.layout = html.Div([</span><br><span class="line">    dcc.Input(id=&apos;input-1&apos;, type=&apos;text&apos;, value=&apos;MontrÃ©al&apos;),</span><br><span class="line">    dcc.Input(id=&apos;input-2&apos;, type=&apos;text&apos;, value=&apos;Canada&apos;),</span><br><span class="line">    html.Div(id=&apos;output&apos;)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.callback(Output(&apos;output&apos;, &apos;children&apos;),</span><br><span class="line">              [Input(&apos;input-1&apos;, &apos;value&apos;),</span><br><span class="line">               Input(&apos;input-2&apos;, &apos;value&apos;)])</span><br><span class="line">def update_output(input1, input2):</span><br><span class="line">    return u&apos;Input 1 is &quot;&#123;&#125;&quot; and Input 2 is &quot;&#123;&#125;&quot;&apos;.format(input1, input2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure><p>ä½†æœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³è¿™æ ·ï¼Œæˆ‘ä»¬å¸Œæœ›å®šä¹‰ä¸€ä¸ªæŒ‰é’®ï¼Œç­‰æˆ‘ä»¬è¾“å…¥å¥½äº†ï¼Œè‡ªå·±ç‚¹å‡»æŒ‰é’®æ¥è®©dashè¯†åˆ«ï¼Œè¿™æ—¶å€™å¯ä»¥è¿™æ ·åš:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import dash</span><br><span class="line">import dash_core_components as dcc</span><br><span class="line">import dash_html_components as html</span><br><span class="line">from dash.dependencies import Input, Output, State</span><br><span class="line"></span><br><span class="line">external_stylesheets = [&apos;https://codepen.io/chriddyp/pen/bWLwgP.css&apos;]</span><br><span class="line"></span><br><span class="line">app = dash.Dash(__name__, external_stylesheets=external_stylesheets)</span><br><span class="line"></span><br><span class="line">app.layout = html.Div([</span><br><span class="line">    dcc.Input(id=&apos;input-1-state&apos;, type=&apos;text&apos;, value=&apos;MontrÃ©al&apos;),</span><br><span class="line">    dcc.Input(id=&apos;input-2-state&apos;, type=&apos;text&apos;, value=&apos;Canada&apos;),</span><br><span class="line">    html.Button(id=&apos;submit-button&apos;, n_clicks=0, children=&apos;Submit&apos;),</span><br><span class="line">    html.Div(id=&apos;output-state&apos;)</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@app.callback(Output(&apos;output-state&apos;, &apos;children&apos;),</span><br><span class="line">              [Input(&apos;submit-button&apos;, &apos;n_clicks&apos;)],</span><br><span class="line">              [State(&apos;input-1-state&apos;, &apos;value&apos;),</span><br><span class="line">               State(&apos;input-2-state&apos;, &apos;value&apos;)])</span><br><span class="line">def update_output(n_clicks, input1, input2):</span><br><span class="line">    return u&apos;&apos;&apos;</span><br><span class="line">        The Button has been pressed &#123;&#125; times,</span><br><span class="line">        Input 1 is &quot;&#123;&#125;&quot;,</span><br><span class="line">        and Input 2 is &quot;&#123;&#125;&quot;</span><br><span class="line">    &apos;&apos;&apos;.format(n_clicks, input1, input2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    app.run_server(debug=True)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Dashæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ Web APPæ„å»ºæ¡†æ¶ï¼Œè¿™ä¸ªéƒ¨åˆ†åŒ…å«äº†Dashçš„å®‰è£…ï¼Œdashä¸­çš„layoutï¼Œå¦‚ä½•å»ä¸ªæ€§åŒ–dashä¸­çš„htmlå…ƒç´ ï¼Œä»¥åŠå¤ç”¨dashçš„å…ƒç´ ï¼Œå¦‚ä½•ä½¿ç”¨dashçš„å›è°ƒå‡½æ•°ï¼Œå®æ—¶æ•°æ®ç›‘æ§ç­‰.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="web" scheme="http://wittyfans.com/tags/web/"/>
    
      <category term="dash" scheme="http://wittyfans.com/tags/dash/"/>
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data" scheme="http://wittyfans.com/tags/data/"/>
    
  </entry>
  
  <entry>
    <title>Python and Flask - CS50_Beyond_2019 Notes</title>
    <link href="http://wittyfans.com/coding/Python-and-Flask-CS50-Beyond-2019-Notes.html"/>
    <id>http://wittyfans.com/coding/Python-and-Flask-CS50-Beyond-2019-Notes.html</id>
    <published>2019-01-30T13:19:31.000Z</published>
    <updated>2019-01-31T13:58:51.179Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Flask æ˜¯ä¸€ä¸ª Python å®ç°çš„ Web å¼€å‘å¾®æ¡†æ¶.</p></blockquote><a id="more"></a><h1 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h1><p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åè¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ªpyæ–‡ä»¶ï¼Œç„¶ååœ¨å‘½ä»¤åå¯¼å…¥ï¼Œè¿™æ ·flaskæ‰çŸ¥é“è¦è¿è¡Œå“ªä¸ªç¨‹åº:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export FLASK_APP=hello.py</span><br></pre></td></tr></table></figure><p>å¯¼å…¥ä»¥åå°±å¯ä»¥ç›´æ¥åœ¨å½“å‰ç›®å½•ä½¿ç”¨flask run äº†ã€‚</p><h1 id="ç¬¬ä¸€ä¸ªflaskç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªflaskç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªflaskç¨‹åº"></a>ç¬¬ä¸€ä¸ªflaskç¨‹åº</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask,render_template</span><br><span class="line">app = Flask(__name__) # æ–°å»ºä¸€ä¸ªflask app</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/&quot;) </span><br><span class="line">def index():</span><br><span class="line">    return &quot;Hello,Word!&quot;</span><br></pre></td></tr></table></figure><ul><li>@app.route(â€œ/â€œ)æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå¦‚æœæœ‰äººè®¿é—®/ï¼Œé‚£ä¹ˆå°±è¿è¡Œè¢«è£…é¥°å™¨è£…é¥°çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿”å›Hello,wordï¼</li></ul><h1 id="å‚æ•°ä¼ é€’"><a href="#å‚æ•°ä¼ é€’" class="headerlink" title="å‚æ•°ä¼ é€’"></a>å‚æ•°ä¼ é€’</h1><h2 id="å•ä¸ªå‚æ•°"><a href="#å•ä¸ªå‚æ•°" class="headerlink" title="å•ä¸ªå‚æ•°"></a>å•ä¸ªå‚æ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&quot;/wittyfans&quot;) </span><br><span class="line">def wittyfans():</span><br><span class="line">    return &quot;Hello, My master!!!&quot;</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/&lt;string:name&gt;&quot;) </span><br><span class="line">def hello(name):</span><br><span class="line">    name = name.capitalize()</span><br><span class="line">    return f&quot;Hello! &#123;name&#125;&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¾“å…¥localhost:/wittyfanså°±è¿”å›â€Hello, My master!!!â€,å¦‚æœæ˜¯åˆ«çš„å°±è¿”å›ä»–è¾“å…¥çš„åå­—ã€‚</p><blockquote><p>åœ¨routeä¸­å®šä¹‰å˜é‡ï¼Œå®ƒå¯ä»¥ä¼ åˆ°å‡½æ•°é‡Œä½¿ç”¨.flaskä¼šè·¯ç”±åˆ°æœ€å…·ä½“çš„ç½‘å€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¾“å…¥/wittyfansè¿˜æ˜¯ä¼šè¢«ä¸Šé¢çš„å‡½æ•°å¤„ç†.</p></blockquote><h2 id="å¤šä¸ªå‚æ•°"><a href="#å¤šä¸ªå‚æ•°" class="headerlink" title="å¤šä¸ªå‚æ•°"></a>å¤šä¸ªå‚æ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&quot;/&lt;string:admin_name&gt;/&lt;string:password&gt;&quot;) </span><br><span class="line">def varify(admin_name,password):</span><br><span class="line">    if admin_name == &apos;wittyfans&apos; and password == &apos;123&apos;:</span><br><span class="line">        return &apos;Welcome here&apos;</span><br><span class="line">    else:</span><br><span class="line">        return &apos;error&apos;</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨htmlæ–‡ä»¶æ„å»ºç½‘é¡µ"><a href="#ä½¿ç”¨htmlæ–‡ä»¶æ„å»ºç½‘é¡µ" class="headerlink" title="ä½¿ç”¨htmlæ–‡ä»¶æ„å»ºç½‘é¡µ"></a>ä½¿ç”¨htmlæ–‡ä»¶æ„å»ºç½‘é¡µ</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&apos;/&apos;)</span><br><span class="line">def index():</span><br><span class="line">    return render_template(&quot;index.html&quot;)</span><br></pre></td></tr></table></figure><p>å¯¹äºç½‘é¡µæ¥è¯´ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯ä¼ å‡ºhtmlæ–‡ä»¶,è¿™æ—¶å€™éœ€è¦åœ¨æ ¹ç›®å½•æ–°å»ºtemplatesæ–‡ä»¶å¤¹ï¼Œå¹¶å°†htmlæ–‡ä»¶æ”¾åœ¨å…¶ä¸­</p><p>æˆ‘ä»¬å¯ä»¥å°†è¾“å…¥çš„å€¼åšå¤„ç†åé‡æ–°å¡«å……ç»™htmlæ–‡ä»¶:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&apos;/&lt;string:name&gt;&apos;)</span><br><span class="line">def index(name):</span><br><span class="line">    return render_template(&quot;index.html&quot;,name=name.capitalize())</span><br></pre></td></tr></table></figure><h1 id="ç¤ºä¾‹ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ–°å¹´"><a href="#ç¤ºä¾‹ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ–°å¹´" class="headerlink" title="ç¤ºä¾‹ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ–°å¹´"></a>ç¤ºä¾‹ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯æ–°å¹´</h1><p>é€»è¾‘éƒ¨åˆ†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&apos;/&apos;)</span><br><span class="line">def index():</span><br><span class="line">    now = datetime.datetime.now()</span><br><span class="line">    is_new_years = now.month == 1 and now.day == 1</span><br><span class="line">    print(is_new_years)</span><br><span class="line">    return render_template(&quot;index.html&quot;,is_new_years=is_new_years)</span><br></pre></td></tr></table></figure><p>htmlä¸­,ä½¿ç”¨Conditional Templating</p><figure class="highlight plain"><figcaption><span>html> </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;</span><br><span class="line">            wittyfans</span><br><span class="line">        &lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &#123;% if is_new_years %&#125;</span><br><span class="line">            &lt;h1&gt;YES&lt;/h1&gt;</span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">            &lt;h1&gt;NO&lt;/h1&gt;</span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ol><li><a href="https://www.youtube.com/watch?v=pP23CtOI-1U&amp;t=2772s" target="_blank" rel="noopener">Python and Flask - CS50 Beyond 2019)</a></li><li><a href="https://dormousehole.readthedocs.io/en/latest/" target="_blank" rel="noopener">Flaskæ–‡æ¡£</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Flask æ˜¯ä¸€ä¸ª Python å®ç°çš„ Web å¼€å‘å¾®æ¡†æ¶.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="flask" scheme="http://wittyfans.com/tags/flask/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨Pythonæ¥æ’ç­ï¼Ÿ</title>
    <link href="http://wittyfans.com/coding/%E7%94%A8Python%E6%9D%A5%E6%8E%92%E7%8F%AD%EF%BC%9F.html"/>
    <id>http://wittyfans.com/coding/ç”¨Pythonæ¥æ’ç­ï¼Ÿ.html</id>
    <published>2019-01-16T12:58:01.000Z</published>
    <updated>2019-01-16T13:23:57.693Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™ä¹Ÿæ˜¯å¯ä»¥åšçš„çš„ï¼Œå¹¶ä¸æ¯”excelå·®å“¦</p></blockquote><a id="more"></a><h1 id="è¯¦è§£"><a href="#è¯¦è§£" class="headerlink" title="è¯¦è§£"></a>è¯¦è§£</h1><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä»½åŸæ•°æ®ï¼Œæˆ‘å¾—åˆ°çš„æ•°æ®å¦‚ä¸‹ï¼š</p><p><img src="https://bn1301files.storage.live.com/y4m21Og1jBfF-UnSCjBwTTl8sK4ek_tNWEsoLbHnc5WgckaDFeMLEikagYp4GIem_ZafSMVF99qhAKoJyFeQQGAj6WRZ1oBjqvV5rv4qEIM8kqdGQvefUtYNl3jG5u6MP5M6HB3G5AU2ZSmPMJKbD2wJjtAvECQ82EB4276NlVCV3JPUB-tnFXxSPyOFQiK95dQMFz2XF_xC_VwXrZMdNNaww/Raw_data.png?psid=1&amp;width=2743&amp;height=1354" alt=""></p><ul><li>Name: ä¸Šç­çš„åŒäº‹</li><li>Aå’ŒV: ä¸åŒçš„ç­æ¬¡</li><li>0: å½“å¤©ä¼‘æ¯</li></ul><p>æˆ‘ä»¬çš„éœ€æ±‚æ˜¯ï¼Œä¼‘æ¯æ—¶é—´ç”±ç»„é•¿äº‹å…ˆå¡«å¥½ï¼Œéšåéšæœºå°†ç­æ¬¡åˆ†ç»™æ¯å¤©ä¸Šç­çš„äººï¼Œéœ€è¦ä¿è¯åˆ†å‡ºå»çš„ç­æ¬¡ä¸å¯ä»¥é‡å¤ï¼Œå¹¶ä¸”æ˜¯éšæœºçš„ï¼Œå³æ¯ä¸ªäººä¸å¯ä»¥æ¯å¤©éƒ½æ˜¯ä¸€æ ·çš„ç­ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬å¯¼å…¥ç›¸å…³çš„åŒ…:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import random</span><br></pre></td></tr></table></figure><p>æ–°å»ºä¸€ä¸ªç­æ¬¡ç”Ÿæˆç±»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Schedules:  </span><br><span class="line">    def __init__(self,schedules):</span><br><span class="line">        self._index = len(schedules)</span><br><span class="line">        self._schedules = schedules</span><br><span class="line">        </span><br><span class="line">    def get_schedules(self):</span><br><span class="line">        if self._index &gt; 0:                </span><br><span class="line">            pointer = random.choice([x for x in range(len(self._schedules))])</span><br><span class="line">            scheduleType = self._schedules[pointer]</span><br><span class="line">            del self._schedules[pointer]</span><br><span class="line">            self._index -= 1</span><br><span class="line">            return scheduleType</span><br><span class="line">        else:</span><br><span class="line">            return None</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»çš„ä½œç”¨å°±æ˜¯ï¼Œä½ åˆå§‹åŒ–çš„æ˜¯ç»™ä»–ä¸€äº›ç­æ¬¡åˆ—è¡¨ï¼Œä»–ä¼šè¿”å›ä¸€ä¸ªéšæœºçš„ç­æ¬¡ï¼Œå¦‚æœç­çº§åˆ—è¡¨ä¸­çš„ç­æ¬¡å·²ç»åˆ†é…å®Œäº†ï¼Œåˆ™è¿”å›Noneã€‚</p><p>ç„¶åæˆ‘ä»¬å†å†™ä¸€ä¸ªé’ˆå¯¹æ¯ä¸€åˆ—è®¾ç½®ç­æ¬¡çš„æ–¹æ³•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">def set_schedule(col):</span><br><span class="line">    if col.name != &apos;Name&apos;:</span><br><span class="line">        colSchedules = col</span><br><span class="line">        # è¯¥åˆ—ä¸­å€¼ä¸ç­‰äº0çš„ç´¢å¼•</span><br><span class="line">        pointers = list(col[col != 0].index)</span><br><span class="line">        # å€¼ç­ç±»å‹</span><br><span class="line">        scheduleType = [&apos;A1&apos;,&apos;A2&apos;,&apos;A3&apos;,&apos;A4&apos;,&apos;V3&apos;,&apos;V2&apos;,&apos;A5&apos;,&apos;A6&apos;,&apos;A8&apos;,&apos;A7&apos;,&apos;V1&apos;,&apos;A9&apos;,&apos;A0&apos;]</span><br><span class="line">        random.shuffle(scheduleType)</span><br><span class="line">        random.shuffle(pointers)</span><br><span class="line">        for pointer in pointers:</span><br><span class="line">#             print(&quot;æ­£åœ¨å¡«ç¬¬&#123;&#125;ä¸ª&quot;.format(pointer))</span><br><span class="line">#             print(&quot;ç­è¡¨è¿˜å‰©&#123;&#125;ä¸ª&quot;.format(len(scheduleType)))</span><br><span class="line">            if len(scheduleType) &gt; 0:</span><br><span class="line">                schedule = scheduleType.pop()</span><br><span class="line">#                 print(&quot;æ‹¿åˆ°ç­çš„ç±»å‹æ˜¯&#123;&#125;&quot;.format(schedule))</span><br><span class="line">                colSchedules[pointer] = schedule</span><br><span class="line">#                 print(&quot;ä¿®æ”¹ä¹‹åçš„ç­è¡¨æ˜¯&#123;&#125;&quot;.format(colSchedules))</span><br><span class="line">            else:</span><br><span class="line">                colSchedules[pointer] = &apos;A&apos;</span><br><span class="line">                continue</span><br><span class="line">        col = colSchedules</span><br><span class="line">    else:</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘å°†ç­æ¬¡å†™åœ¨äº†æ–¹æ³•é‡Œé¢ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä»å¤–é¢ä¼ è¿›å»ï¼Œè¯¥ä¸€ä¸‹å‚æ•°å³å¯ã€‚æœ€åï¼Œç”¨pandaså…ˆå°†åŸå§‹æ•°æ®å¯¼å…¥:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_excel(&quot;/Users/wittyfans/Documents/å·¥ä½œ/Python NoteBook/Schedule/Schedule.xlsx&quot;)</span><br></pre></td></tr></table></figure><p>è¿è¡Œå°±å¯ä»¥çœ‹åˆ°æ•°æ®å•¦ï¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">days = [x for x in data.columns if x  != &apos;Name&apos;]</span><br><span class="line">data.apply(set_schedule)</span><br><span class="line">data</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥å°†æ•°æ®å¯¼å‡ºä¸ºexcelï¼Œä½¿ç”¨pandasçš„to_excelæ–¹æ³•å³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.to_excel(filePath)</span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="https://bn1301files.storage.live.com/y4mgtmM4T-r7AH8W5f3qKw2Lwo5j3UcAzDQKqjXx64gUN0v-af8c9K1_5k36eZSR81X0UKiwKBZCu7aiq8Syryn3bdniNX_VB1UQGVR0QQubDCz31GMRRdyAFmOHh1y82j2hFmy1zc_NtPtVNTPASdhpKriZpKHtrl2xYcSNvf1hVPIsaTz-QhoZwhmeTFxaw78oywC9LXkQpGP0YSApebQ3w/a.png?psid=1&amp;width=2146&amp;height=1146" alt="ç¬¬ä¸€æ¬¡ç­è¡¨"></p><p><img src="https://bn1301files.storage.live.com/y4m799Xq0W25h8l7V_3QOEXZgBFG2hhTi_5IEVz1G6ZwvNe3uJYNl1_PNw7z3aaWDGdjZ6YgXWb1-Jdm_LpkexITUQ5Q6kKUmZAxLOsH6Idfxx5hcoyJE08fRdZEuN_mZJRn6z3egU9E1UH_EQsSoEVLOfJf6EzpJhhvxfyTiwnYpkrGwI7mu3eOI3EOJjgbbrFclxQV9ZXEXtBS5c-PD6FYg/b.png?psid=1&amp;width=2144&amp;height=1154" alt="ç¬¬äºŒæ¬¡ç­è¡¨"></p><p><img src="https://bn1301files.storage.live.com/y4mmmd_AK_zt5HwbnyJ4cKtO6UIRCEfot9dkcnyWXRo0T-Jh1TQjoTLxp1ujOvjh9rKtFxrH7hwgAtQni_OvfKOEDIL2oWoJvUjHAfoEadE2MVtqP-R2TWSej27Scl1Sh7oIvviZuB5dZlekB7f2Zs7nVswpPS-fldACbYuKJLU8LH85C7Dc0NcXCVuxS_jnZszmMoh4XXumEPzpxL6JV97rQ/c.png?psid=1&amp;width=2132&amp;height=1132" alt="ç¬¬ä¸‰æ¬¡è¿è¡Œ"></p><h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import random</span><br><span class="line"></span><br><span class="line">class Schedules:  </span><br><span class="line">    def __init__(self,schedules):</span><br><span class="line">        self._index = len(schedules)</span><br><span class="line">        self._schedules = schedules</span><br><span class="line">        </span><br><span class="line">    def get_schedules(self):</span><br><span class="line">        if self._index &gt; 0:                </span><br><span class="line">            pointer = random.choice([x for x in range(len(self._schedules))])</span><br><span class="line">            scheduleType = self._schedules[pointer]</span><br><span class="line">            del self._schedules[pointer]</span><br><span class="line">            self._index -= 1</span><br><span class="line">            return scheduleType</span><br><span class="line">        else:</span><br><span class="line">            return None</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">def set_schedule(col):</span><br><span class="line">    if col.name != &apos;Name&apos;:</span><br><span class="line">        colSchedules = col</span><br><span class="line">        # è¯¥åˆ—ä¸­å€¼ä¸ç­‰äº0çš„ç´¢å¼•</span><br><span class="line">        pointers = list(col[col != 0].index)</span><br><span class="line">        # å€¼ç­ç±»å‹</span><br><span class="line">        scheduleType = [&apos;A1&apos;,&apos;A2&apos;,&apos;A3&apos;,&apos;A4&apos;,&apos;V3&apos;,&apos;V2&apos;,&apos;A5&apos;,&apos;A6&apos;,&apos;A8&apos;,&apos;A7&apos;,&apos;V1&apos;,&apos;A9&apos;,&apos;A0&apos;]</span><br><span class="line">        random.shuffle(scheduleType)</span><br><span class="line">        random.shuffle(pointers)</span><br><span class="line">        for pointer in pointers:</span><br><span class="line">#             print(&quot;æ­£åœ¨å¡«ç¬¬&#123;&#125;ä¸ª&quot;.format(pointer))</span><br><span class="line">#             print(&quot;ç­è¡¨è¿˜å‰©&#123;&#125;ä¸ª&quot;.format(len(scheduleType)))</span><br><span class="line">            if len(scheduleType) &gt; 0:</span><br><span class="line">                schedule = scheduleType.pop()</span><br><span class="line">#                 print(&quot;æ‹¿åˆ°ç­çš„ç±»å‹æ˜¯&#123;&#125;&quot;.format(schedule))</span><br><span class="line">                colSchedules[pointer] = schedule</span><br><span class="line">#                 print(&quot;ä¿®æ”¹ä¹‹åçš„ç­è¡¨æ˜¯&#123;&#125;&quot;.format(colSchedules))</span><br><span class="line">            else:</span><br><span class="line">                colSchedules[pointer] = &apos;A&apos;</span><br><span class="line">                continue</span><br><span class="line">        col = colSchedules</span><br><span class="line">    else:</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">data = pd.read_excel(&quot;/Users/wittyfans/Documents/å·¥ä½œ/Python NoteBook/Schedule/Schedule.xlsx&quot;)</span><br><span class="line">days = [x for x in data.columns if x  != &apos;Name&apos;]</span><br><span class="line">data.apply(set_schedule)</span><br><span class="line">data</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯å¯ä»¥åšçš„çš„ï¼Œå¹¶ä¸æ¯”excelå·®å“¦&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="pandas" scheme="http://wittyfans.com/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>Pythonå¦‚ä½•è¿æ¥WindowsSMBå…±äº«æ–‡ä»¶å¤¹?</title>
    <link href="http://wittyfans.com/coding/Python%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5WindowsSMB%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9.html"/>
    <id>http://wittyfans.com/coding/Pythonå¦‚ä½•è¿æ¥WindowsSMBå…±äº«æ–‡ä»¶å¤¹.html</id>
    <published>2019-01-16T12:48:05.000Z</published>
    <updated>2019-01-16T12:50:19.975Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æƒ³è®¿é—® Windows SMB æœåŠ¡å™¨ä¸Šçš„å…±äº«æ–‡ä»¶ï¼Ÿè¯•è¯•è¿™æ‹›</p></blockquote><a id="more"></a><h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><ol><li>å®‰è£…pysmb, pip install pysmb</li><li>å¯¼å…¥ç›¸å…³çš„åŒ…</li><li>ä½¿ç”¨æ–¹æ³•è§æ³¨é‡Š</li></ol><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://pysmb.readthedocs.io/en/latest/api/smb_SMBConnection.html" target="_blank" rel="noopener">SMBConnection Class</a></li><li><a href="http://melonteam.com/posts/cong_yi_ge_xiao_ren_wu_kai_shi__python_xue_xi_bi_ji/#%E5%85%B3%E4%BA%8E%E7%88%AC%E8%99%AB" target="_blank" rel="noopener">ä¸€ä¸ªå°ä»»åŠ¡</a></li></ul><h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from smb.SMBConnection import SMBConnection</span><br><span class="line"># æ–°å»ºè¿æ¥å¯¹è±¡</span><br><span class="line">conn = SMBConnection(&apos;domain_user_name&apos;, &apos;you_password&apos;, &apos;device_hostname&apos;, &apos;server_ip&apos;, domain = &apos;domain_address&apos;, use_ntlm_v2=True, is_direct_tcp=True)</span><br><span class="line"># è¿”å›å€¼ä¸ºå¸ƒå°”å‹ï¼Œè¡¨ç¤ºè¿æ¥æˆåŠŸä¸å¦</span><br><span class="line">result = conn.connect(&apos;server_ip&apos;, 445)</span><br><span class="line"></span><br><span class="line"># æ£€ç´¢æ–‡ä»¶</span><br><span class="line">for f in conn.listPath(&apos;share_folder_name&apos;,&apos;folder_name_in_prvious_one&apos;):</span><br><span class="line">    print(f.filename)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æƒ³è®¿é—® Windows SMB æœåŠ¡å™¨ä¸Šçš„å…±äº«æ–‡ä»¶ï¼Ÿè¯•è¯•è¿™æ‹›&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="windows" scheme="http://wittyfans.com/tags/windows/"/>
    
      <category term="smb" scheme="http://wittyfans.com/tags/smb/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ç”¨Scrapyå¼€å‘ä¸€ä¸ªè´´å§çˆ¬è™«</title>
    <link href="http://wittyfans.com/coding/%E5%A6%82%E4%BD%95%E7%94%A8Scrapy%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E8%B4%B4%E5%90%A7%E7%88%AC%E8%99%AB.html"/>
    <id>http://wittyfans.com/coding/å¦‚ä½•ç”¨Scrapyå¼€å‘ä¸€ä¸ªè´´å§çˆ¬è™«.html</id>
    <published>2019-01-16T12:38:35.000Z</published>
    <updated>2019-01-16T12:44:39.158Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å°±æ˜¯çœ‹çœ‹å¤§å®¶åœ¨è´´å§ç©å•¥ï¼Œçˆ¬äº†100å¤šå…†æ¯æ ¡çš„æ•°æ®ï¼Œå›æ¥æ…¢æ…¢åˆ†æï¼Œä»¥åå†åšä¸ªæ•°æ®å¯è§†åŒ–ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æ‹¿å»çˆ¬ä¸€ä¸‹è‡ªå·±å–œæ¬¢çš„è´´å§ã€‚</p></blockquote><a id="more"></a><h1 id="scrapy"><a href="#scrapy" class="headerlink" title="scrapy"></a>scrapy</h1><p>A scrapy projects, <a href="https://github.com/wittyfans/scrapy" target="_blank" rel="noopener">Github Link</a>.</p><h1 id="è´´å§çˆ¬è™«å¼€å‘è®°å½•"><a href="#è´´å§çˆ¬è™«å¼€å‘è®°å½•" class="headerlink" title="è´´å§çˆ¬è™«å¼€å‘è®°å½•"></a>è´´å§çˆ¬è™«å¼€å‘è®°å½•</h1><h2 id="æŠ“å–æ•°æ®å¹¶å­˜å‚¨"><a href="#æŠ“å–æ•°æ®å¹¶å­˜å‚¨" class="headerlink" title="æŠ“å–æ•°æ®å¹¶å­˜å‚¨"></a>æŠ“å–æ•°æ®å¹¶å­˜å‚¨</h2><p>å› ä¸ºæˆ‘è¦æŠ“å–å¾ˆå¤šé“¾æ¥ï¼Œæœ€å¼€å§‹çš„æƒ³æ³•å°±æ˜¯ç›´æ¥æŠŠæ‰€æœ‰çš„urlç»™å†…ç½®çš„start_urlsæ–¹æ³•ï¼Œäºæ˜¯æˆ‘è‡ªå·±å†™äº†ä¸ªç”Ÿæˆå™¨ï¼Œç›´æ¥æ€¼ç»™äº†å®ƒï¼Œä½†å‘ç°ä¸ç®¡ç”¨ã€‚<br>ç¿»äº†ä¸‹å®˜æ–¹çš„æ–‡æ¡£ï¼š</p><blockquote><p>make_requests_from_url() å°†è¢«è°ƒç”¨æ¥åˆ›å»ºRequestå¯¹è±¡ã€‚ è¯¥æ–¹æ³•ä»…ä»…ä¼šè¢«Scrapyè°ƒç”¨ä¸€æ¬¡ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å…¶å®ç°ä¸ºç”Ÿæˆå™¨</p></blockquote><p>äºæ˜¯å°±è‡ªå·±å†™äº†ç”Ÿæˆå™¨ç»™make_requests_from_url() ç”¨ï¼Œåœ¨æŠŠresponse è¿”å›:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">def start_requests(self):</span><br><span class="line">    self.logger.info(&quot;START:&quot;)</span><br><span class="line">    for url in self.getBBSUrl(&quot;å®ˆæœ›å…ˆé”‹&quot;,10):</span><br><span class="line">        yield self.make_requests_from_url(url)</span><br></pre></td></tr></table></figure><blockquote><p>ä½†åé¢åˆå‘ç°è¿™ä¸ªåœ¨æœ€æ–°çš„å®˜æ–¹æ–‡æ¡£é‡Œé¢æ²¡æœ‰, åŸæ¥, Spider.make_requests_from_url is deprecated (issue 1728, fixes issue 1495), çœ‹æ¥åˆè¦æ”¹ä¸€ä¸‹æ‰è¡Œï¼Œå…ˆæŒ–ä¸ªå‘å§ã€‚</p></blockquote><p><em>æ›´æ–°ï¼š</em></p><p>çœ‹äº†ä¸‹å®˜æ–¹çš„ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Return multiple Requests and items from a single callback:</span><br><span class="line"></span><br><span class="line">import scrapy</span><br><span class="line"></span><br><span class="line">class MySpider(scrapy.Spider):</span><br><span class="line">    name = &apos;example.com&apos;</span><br><span class="line">    allowed_domains = [&apos;example.com&apos;]</span><br><span class="line">    start_urls = [</span><br><span class="line">        &apos;http://www.example.com/1.html&apos;,</span><br><span class="line">        &apos;http://www.example.com/2.html&apos;,</span><br><span class="line">        &apos;http://www.example.com/3.html&apos;,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    def parse(self, response):</span><br><span class="line">        for h3 in response.xpath(&apos;//h3&apos;).extract():</span><br><span class="line">            yield &#123;&quot;title&quot;: h3&#125;</span><br><span class="line"></span><br><span class="line">        for url in response.xpath(&apos;//a/@href&apos;).extract():</span><br><span class="line">            yield scrapy.Request(url, callback=self.parse)</span><br></pre></td></tr></table></figure><p>ç›´æ¥å°† yield self.make_requests_from_url(url) æ¢æˆ yield scrapy.Request(url, callback=self.parse) å°±å¥½äº†ã€‚</p><p>ä¹‹å‰æ˜¯ä½¿ç”¨ç›´æ¥èµ‹å€¼çš„æ–¹å¼æ¥å°†xpathè§£æåˆ°çš„å€¼ç»™itemï¼Œä¹Ÿå°±æ˜¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">    alltitles = []</span><br><span class="line">    item = TiebaItem()</span><br><span class="line">    titles = response.xpath(&quot;//a[@class=&apos;j_th_tit &apos;]//text()&quot;).extract()</span><br><span class="line">    for title in titles:</span><br><span class="line">        alltitles.append(title)</span><br><span class="line">    item[&quot;summarys&quot;] = alltitles</span><br><span class="line">    return item</span><br></pre></td></tr></table></figure><p>titlesæ˜¯ä¸€ä¸ªé¡µé¢ä¸­æ‰€æœ‰çš„titleï¼Œæ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œä½†å‘ç°å¦‚æœæˆ‘ç›´æ¥å°†titleèµ‹å€¼åˆ°itemï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¿™é‡Œçº¯ç²¹å¤šæ­¤ä¸€ä¸¾ï¼Œæ‰€ä»¥å˜æˆ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">    item = TiebaItem()</span><br><span class="line">    titles = response.xpath(&quot;//a[@class=&apos;j_th_tit &apos;]//text()&quot;).extract()</span><br><span class="line">    item[&quot;summarys&quot;] = titles</span><br><span class="line">    return item</span><br></pre></td></tr></table></figure><p>åé¢æ”¹ç”¨äº†ItemLoaderï¼ŒItemLoaderæ˜¯æ›´æŠ½è±¡çš„ä¸€ç§ä½¿ç”¨æ–¹å¼ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨itemé‡Œé¢çš„ï¼Œæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½éœ€è¦åˆ›å»ºitemï¼Œä¹‹åå†<br>é€šè¿‡response.xpathé€‰æ‹©éœ€è¦çš„å€¼ï¼Œèµ‹å€¼ç»™itemé‡Œé¢å¯¹åº”çš„å­—æ®µã€‚</p><p>itemLoaderæŠŠè¿™ä¸ªè¿‡ç¨‹æŠ½è±¡ä¸ºï¼Œä½ åœ¨æ–°å»ºitemLoaderçš„æ—¶å€™æŠŠè¦è£…æ•°æ®çš„itemç»™æˆ‘ï¼Œç„¶ååªéœ€è¦ç»™æˆ‘å­—æ®µå’Œè¦å­˜çš„å€¼å°±å¥½ï¼Œå¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œä½ è¿˜å¯ä»¥åœ¨itemLoaderè¿™ä¸ªç¯èŠ‚å¯¹ä¸€äº›æ•°æ®åšå¤„ç†ï¼Œæ¯”å¦‚é¦–å°¾ç©ºæ ¼å»é™¤ï¼Œæ·»åŠ ç‰¹å®šå­—æ®µç­‰ã€‚</p><p>æ‰€ä»¥ä¿®æ”¹åçš„å­˜å‚¨ä»£ç å˜æˆäº†è¿™æ ·:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">        l = ItemLoader(item=TiebaItem(),response=response)</span><br><span class="line">        l.add_xpath(&quot;summarys&quot;,&quot;//a[@class=&apos;j_th_tit &apos;]//text()&quot;)</span><br><span class="line">        l.add_xpath(&quot;links&quot;,&apos;//a[@class=&quot;j_th_tit &quot;]//@href&apos;)</span><br><span class="line">        return l.load_item()</span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹å¼:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">    post = l.nested_xpath(&quot;//a[@class=&apos;j_th_tit &apos;]&quot;)</span><br><span class="line">    post.add_xpath(&apos;summary&apos;, &apos;text()&apos;)</span><br><span class="line">    post.add_xpath(&apos;link&apos;, &apos;@href&apos;)</span><br><span class="line">    return l.load_item()</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘æå–äº†å¸–å­çš„ä¸¤æ¡æ•°æ®ï¼Œä¸€ä¸ªæ˜¯æ ‡é¢˜ï¼Œå¦ä¸€ä¸ªæ˜¯æ ‡é¢˜çš„é“¾æ¥ï¼Œå­˜å‚¨åœ¨itemé‡Œé¢æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;&quot;summarys&quot;:[&quot;æ ‡é¢˜1&quot;,&quot;æ ‡é¢˜2&quot;],&quot;Links&quot;:[&quot;Link1&quot;,&quot;Link2&quot;]&#125;,</span><br><span class="line">    &#123;&quot;summarys&quot;:[&quot;æ ‡é¢˜3&quot;,&quot;æ ‡é¢˜4&quot;],&quot;Links&quot;:[&quot;Link3&quot;,&quot;Link4&quot;]&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>è¿™åŸºæœ¬ä¸Šæ˜¯è¯·æ±‚ä¸€æ¬¡ï¼Œè¿”å›äº†è´´å§é‡Œé¢ä¸€é¡µçš„æ•°æ®ï¼Œç„¶åä»ä¸­æå–äº†æ‰€æœ‰æ ‡é¢˜å’Œé“¾æ¥ï¼Œæ‰€ä»¥æ˜¯ä¸€æ¬¡è¯·æ±‚ï¼Œä¸€è¡Œæ•°æ®ã€‚é‚£æœ‰æ²¡æœ‰åŠæ³•æŠŠæ‰€æœ‰çš„æ ‡é¢˜å’Œé“¾æ¥åˆå¹¶åˆ°ä¸€èµ·å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ä»å¤šä¸ªè¯·æ±‚æå–åˆ°çš„æ•°æ®å­˜åˆ°itemä¸­çš„åŒä¸€ä¸ªå­—æ®µé‡Œã€‚</p><p>ä»”ç»†æƒ³æƒ³è¿™æ ·æœ‰å¿…è¦å—ï¼Ÿç”¨pdåˆ†æä¸€ä¸‹è¿™ä¸ªjsonæ•°æ®çœ‹çœ‹ã€‚</p><blockquote><p>Method 1</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">summarys = []</span><br><span class="line">links = []</span><br><span class="line"></span><br><span class="line">for link in data.link:</span><br><span class="line">    for value in link:</span><br><span class="line">        url = &quot;tieba.baidu.com&quot;+str(value)</span><br><span class="line">        links.append(url)</span><br><span class="line">for summary in data.summary:</span><br><span class="line">    for value in summary:</span><br><span class="line">        summarys.append(value)</span><br><span class="line">post = pd.DataFrame()</span><br><span class="line">post[&quot;summarys&quot;] = summarys</span><br><span class="line">post[&quot;link&quot;] = links</span><br><span class="line">post</span><br></pre></td></tr></table></figure><blockquote><p>Method 2</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">def toPD(data):</span><br><span class="line">    post = pd.DataFrame()</span><br><span class="line">    for col in data.columns:</span><br><span class="line">        coldata = []</span><br><span class="line">        for value in data[col]:</span><br><span class="line">            for j in value:</span><br><span class="line">                coldata.append(j)</span><br><span class="line">        post[col] = pd.Series(coldata)</span><br><span class="line">    return post</span><br><span class="line">toPD(data)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0å“ˆå“ˆå“ˆå“ˆå¤§å¹ºè›¾å­tieba.baidu.com/p/5982395208</span><br><span class="line">1å®‰å¨œç©å®¶è¡¨ç¤ºçœ‹åˆ°å ¡å’å’Œå¥¥ä¸½èå°±é«˜å…´ï¼Œæ‰“ä¸åŠ¨é¶å¤ªå®‰é€¸äº†tieba.baidu.com/p/5984392212</span><br><span class="line">2è¿™ä¸ª200hzçš„æœ‰äººç”¨è¿‡å—ï¼Œå’Œ144çš„å·®å¤šå°‘?å¹³å¸¸åªæ‰“å®ˆæœ›å…ˆtieba.baidu.com/p/5978507290</span><br><span class="line">3è¿™éº¦å…‹é›·æ˜¯æŒ‚å— å¤§å®¶å¸®å¿™çœ‹çœ‹tieba.baidu.com/p/5984115608</span><br><span class="line">4æˆ‘çœŸæ˜¯æœäº†ï¼Œå‰ŠçŒªçš„æ—¶å€™ï¼Œæˆ‘ä¸å‡ºå£°ï¼Œå› ä¸ºæˆ‘ä¸ç©ï¼›å‰Š76çš„æ—¶å€™ï¼Œtieba.baidu.com/p/5982819128</span><br><span class="line">5è¿™éš¾é“å°±æ˜¯å¼€çªäº†å—ï¼Ÿtieba.baidu.com/p/5979734484</span><br></pre></td></tr></table></figure><p>æ£€æŸ¥äº†ä¸‹é“¾æ¥ï¼Œè·Ÿæ ‡é¢˜ä¸€æ ·ï¼Œé‚£å°±å…ˆè¿™æ ·å§ï¼Œç»§ç»­ç ”ç©¶æ·±åº¦çˆ¬å–ï¼Œå¤šæŠ“ä¸€äº›ä¿¡æ¯ã€‚</p><p>ç”¨scrapy çš„shellè°ƒè¯•äº†ä¸€ä¸‹ï¼Œå¾—åˆ°äº†è¿™äº›ä¿¡æ¯çš„xpathçš„è¡¨è¾¾å¼:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l.add_xpath(&apos;replysCount&apos;,&apos;//span[@class=&quot;threadlist_rep_num center_text&quot;]//text()&apos;) #å›å¤æ•°</span><br><span class="line">l.add_xpath(&apos;authorName&apos;,&apos;//span[@class=&quot;frs-author-name-wrap&quot;]//text()&apos;) #ä½œè€…åå­—</span><br><span class="line">l.add_xpath(&apos;authorMainPageUrl&apos;,&apos;//span[@class=&quot;frs-author-name-wrap&quot;]//@href&apos;) #ä½œè€…ä¸»é¡µé“¾æ¥</span><br></pre></td></tr></table></figure><p>ç”¨pandaå¤„ç†äº†ä¸€ä¸‹ï¼Œå¾—åˆ°å¦‚ä¸‹æ•°æ®:</p><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">Index</th><th style="text-align:center">authorMainUrl</th><th style="text-align:center">author</th><th style="text-align:center">posturl</th><th style="text-align:center">replys</th><th>summary</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">tieba.baidu.com/home/main/?un=%E7%BA%AF%E5%B1%</td><td style="text-align:center">ä¸€å‘¼å¸ä¸€</td><td style="text-align:center">tieba.baidu.com/p/5978804665</td><td style="text-align:center">94</td><td style="text-align:center">æ¯›å¦¹è¿™ä¸ªè‹±é›„æ˜¯ä¸æ˜¯è¯¥å‰Šäº†?ç«æŠ€æŠŠæŠŠéƒ½æœ‰ï¼Œä¸‡é‡‘æ²¹çš„å­˜åœ¨ï¼Œå¥¹çš„ç›¾</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">tieba.baidu.com/home/main/?un=q526246486&amp;ie=ut</td><td style="text-align:center">è´´å§ç”¨æˆ·</td><td style="text-align:center">tieba.baidu.com/p/5924655619</td><td style="text-align:center">41</td><td style="text-align:center">è¿™æ³¢åˆ€å¤§å®¶æ‰“å‡ åˆ†</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">tieba.baidu.com/home/main/?un=%E9%99%86%E6%95%</td><td style="text-align:center">é™†æ•£æ•£</td><td style="text-align:center">tieba.baidu.com/p/5984318268</td><td style="text-align:center">3</td><td style="text-align:center">ç®—äº† ä¸æƒ³éª‚äº† é±¼å¡˜æ°´çœŸå¤šæˆ‘ä½›äº†</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">tieba.baidu.com/home/main/?un=%E8%99%90%E7%88%</td><td style="text-align:center">è™çˆ†</td><td style="text-align:center">tieba.baidu.com/p/5983683236</td><td style="text-align:center">104</td><td style="text-align:center">ä¸ºä»€ä¹ˆä½ ä»¬æœ‰é‚£ä¹ˆå¤šå°å§å§ä¸€èµ·ç©</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">tieba.baidu.com/home/main/?un=G7IP9&amp;ie=utf-8&amp;i</td><td style="text-align:center">é»æ›¦</td><td style="text-align:center">tieba.baidu.com/p/5983616276</td><td style="text-align:center">65</td><td style="text-align:center">é—®å‡ ä¸ªé—®é¢˜</td></tr></tbody></table><p><strong>Tips:</strong></p><ul><li>String çš„startwith()æ–¹æ³•å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼Œä½†å¿…é¡»æ˜¯tupleï¼Œä¹Ÿå°±æ˜¯string.startwith((â€˜aâ€™,â€™bâ€™))</li></ul><p>ä½†æ­¤æ—¶åˆé‡åˆ°äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå½“æˆ‘åœ¨pandasé‡Œè¿›è¡Œåˆ—æ•°æ®åˆå¹¶çš„æ—¶å€™ï¼Œæç¤ºå‡ºé”™ï¼Œåº”è¯¥æ˜¯åˆ—é•¿ä¸ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯æŸäº›æ•°æ®æœ‰é—æ¼ã€‚ç„¶åç”¨<br>pd.Series()è§£å†³äº†é—®é¢˜ï¼Œå®ƒä¼šå°†ç¼ºå¤±çš„æ•°æ®å¡«å……ä¸ºNaNï¼Œä½†ç¼ºå‘ç°æ ‡é¢˜å’Œå‘å¸–äººçš„å¯¹åº”å…³ç³»å‡ºé”™äº†ã€‚</p><p>è¿™æ—¶å€™å°±æŠ›å‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶è¦ä¿ç•™itemä¸­æ•°æ®çš„ç»“æ„ï¼Œé‚£ä¹ˆåœ¨åˆå¹¶æ•°æ®çš„æ—¶å€™ï¼Œæ˜¯å¦å¯ä»¥ä¿è¯æ•°æ®çš„å¯¹åº”å…³ç³»å‘¢ï¼Ÿ</p><h2 id="2018-12-22"><a href="#2018-12-22" class="headerlink" title="2018.12.22"></a>2018.12.22</h2><p><strong>æ–°é—®é¢˜çš„æ–°æ€è€ƒï¼š</strong></p><blockquote><p>ç›®å‰è§£å†³é—®é¢˜çš„æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œå‡è®¾ä¸€ä¸ªåˆ†é¡µæœ‰10ä¸ªå¸–å­ï¼Œæˆ‘ä¸€æ¬¡æ€§æ‹¿10ä¸ªå¸–å­çš„æ ‡é¢˜ï¼Œå‘å¸–äººï¼Œå›å¤é‡ï¼Œè¿™10ä¸ªå¸–å­å¤„ç†å®Œäº†ï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥ã€‚è¿™æ ·ä¼šé‡åˆ°åˆå¹¶æ•°æ®çš„é—®é¢˜,<br>å…¶æ¬¡å‡ºæ¥çš„æ•°æ®ï¼Œä¹Ÿæ˜¯åæ¡ä¸€ç»„çš„å­˜å‚¨åœ¨itemé‡Œé¢ã€‚å¦‚æœæˆ‘ä¹‹åå†æƒ³å¾—åˆ°è¿™ä¸ªå¸–å­çš„å†…å®¹ï¼Œå›å¤è¿™ä¸ªå¸–å­çš„äººï¼Œè¿™äº›äººçš„ä¿¡æ¯ï¼Œéš¾é“å†å»æ‰¾ä¹‹å‰çš„URLï¼Œå†æŠŠæ‹¿åˆ°çš„æ•°æ®å»åšå¤æ‚çš„åˆå¹¶å—ï¼Ÿ<br>è¿™ä¹ˆä¸€æƒ³è§‰å¾—ç°åœ¨çš„æ–¹æ³•ä¸è¡Œï¼Œä¸€å¼€å§‹æˆ‘åªæ˜¯è€ƒè™‘åˆ°äº†çˆ¬è¿™äº›æ ‡é¢˜åšåˆ†æï¼Œä½†ç°åœ¨æƒ³è¦æ›´å¤šçš„æ•°æ®ï¼Œå°±å¿…é¡»æ¢ä¸€ç§æ–¹æ³•ã€‚</p></blockquote><p>Todo:</p><ul><li>æœ‰ä¸€ä¸ªdivæœ‰ä¸¤ä¸ªclassï¼Œä¸€ä¸ªæ˜¯gril, å¦ä¸€ä¸ªæ˜¯hot gril, é‚£ä¹ˆåœ¨æˆ‘é€šè¿‡girlå®šä½åˆ°äº†è¿™ä¸ªâ€œgrilâ€ä¹‹åï¼Œæ€ä¹ˆçŸ¥é“å¥¹æ˜¯hot girlå‘¢ï¼Ÿ</li></ul><h2 id="æ–°çš„æ¶æ„"><a href="#æ–°çš„æ¶æ„" class="headerlink" title="æ–°çš„æ¶æ„"></a>æ–°çš„æ¶æ„</h2><p>ç°åœ¨çš„æ–¹æ³•æ˜¯ï¼Œåˆ©ç”¨æ·±å±‚çˆ¬å–ã€‚åˆšå¼€å§‹çš„è¯·æ±‚è¿˜æ˜¯ä¸€æ ·çš„ï¼Œè¯·æ±‚ä¸€é¡µçš„æ•°æ®ï¼Œç„¶åä»ä¸­æ”¶é›†æ‰€æœ‰å¸–å­çš„é“¾æ¥ï¼Œè¿™æ—¶å€™è¿”å›è¿™ä¸€é¡µçš„å¸–å­é“¾æ¥çš„listï¼Œç„¶ååœ¨ä¸€ä¸ªä¸ªå¾ªç¯è¯·æ±‚ï¼Œå›æ¥çš„æ•°æ®ä¼ ç»™å›è°ƒæ–¹æ³•å¤„ç†å¹¶å­˜å‚¨åˆ°itemé‡Œé¢ã€‚</p><p>è¿™é‡Œçš„å…³é”®åœ¨äºï¼Œç¬¬ä¸€é¡µçš„æ•°æ®æŠ“å–å®Œäº†ä¹‹åï¼Œå¾—æ‰¾åˆ°ä¸‹ä¸€é¡µçš„é“¾æ¥ç»§ç»­è¯·æ±‚ï¼Œä»è¯·æ±‚çš„æ•°æ®ä¸­ç»§ç»­æ‰¾å¸–å­ï¼Œæ‰¾ä¸‹ä¸€é¡µï¼Œå¦‚æ­¤å¾ªç¯ï¼Œé€šè¿‡æŒ‡å®šCLOSESPIDER_ITEMCOUNTçš„å€¼å¯ä»¥è®©çˆ¬è™«åœ¨çˆ¬äº†ç‰¹å®šçš„å€¼ååœä¸‹æ¥ï¼Œä¸ç„¶ä¼šä¸€ç›´ç»§ç»­ä¸‹ä¸€é¡µï¼Œå‚è§ä¸‹é¢çš„tips.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">    # get the next page info</span><br><span class="line">    nextPageUrls = response.xpath(&quot;//a[@class=&apos;next pagination-item &apos;]//@href&quot;)</span><br><span class="line">    for url in nextPageUrls.extract():</span><br><span class="line">        self.logger.info(&quot;=====Now request:&#123;&#125;=====&quot;.format(url))</span><br><span class="line">        yield scrapy.Request(urljoin(&apos;https://tieba.baidu.com&apos;,url))</span><br><span class="line"></span><br><span class="line">    # get the post urls and collec the info.</span><br><span class="line">    postSubUrls = response.xpath(&quot;//a[@class=&apos;j_th_tit &apos;]//@href&quot;).extract()</span><br><span class="line">    postUrls = list(map(self.addPref,postSubUrls))</span><br><span class="line">    for url in postUrls.__reversed__():</span><br><span class="line">        yield scrapy.Request(url,callback=self.parsePost,meta=&#123;&apos;url&apos;:url&#125;)</span><br><span class="line"></span><br><span class="line">def parsePost(self,response):</span><br><span class="line">    l = ItemLoader(item=TiebaItem(),response=response)</span><br><span class="line">    title = response.xpath(&quot;//div[@class=&apos;core_title_wrap_bright clearfix&apos;]//text()&quot;).extract()[0]</span><br><span class="line">    l.add_value(&quot;link&quot;,response.meta[&apos;url&apos;])</span><br><span class="line">    l.add_value(&quot;title&quot;,title)</span><br><span class="line">    l.add_xpath(&quot;replyUsers&quot;,&quot;//div[@class=&apos;d_author&apos;]//li[@class=&apos;d_name&apos;]//a[@class=&apos;p_author_name j_user_card&apos;]//text()&quot;)</span><br><span class="line">    l.add_xpath(&quot;replyContent&quot;,&quot;//div[@class=&apos;d_post_content j_d_post_content &apos;]//text()&quot;)</span><br><span class="line">    yield l.load_item()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘å°†ä¸‹ä¸€é¡µçš„è¯·æ±‚æ”¾åœ¨æŠ½å–å¸–å­å†…å®¹åé¢ï¼Œå°±ä¼šå‡ºç°åªèƒ½æŠ“ä¸€é¡µçš„æƒ…å†µï¼ŒæŠ˜è…¾äº†åŠå¤©ï¼Œåå‚è€ƒã€Šç²¾é€šPYTHONçˆ¬è™«æ¡†æ¶Scrapyâ€”â€”å¼‚æ­¥å›¾ä¹¦ã€‹ä»£ç æ‰è§£å†³ï¼Œä¸çŸ¥ä½•æ•…ï¼Œå¾…ç ”ç©¶ã€‚</p><p>ä¸€äº›æŠ€å·§ï¼š</p><ul><li><a href="https://www.zhihu.com/question/54773510" target="_blank" rel="noopener">åˆ©ç”¨metaå‚æ•°ï¼Œåœ¨è¯·æ±‚ä¹‹é—´ä¼ ä¿¡æ¯</a></li><li>å¤šåˆ©ç”¨ urljoin æ¥åˆå¹¶urlï¼Œè€Œä¸æ˜¯è‡ªå·±å†™å‡½æ•°å†map</li><li>scrapy crawl name -s CLOSESPIDER_ITEMCOUNT=100 é€šè¿‡-sæŒ‡å®šCLOSESPIDER_ITEMCOUNTçš„å€¼å¯ä»¥è®©çˆ¬è™«åœ¨çˆ¬äº†ç‰¹å®šçš„å€¼ååœä¸‹æ¥</li></ul><h2 id="2018-12-23"><a href="#2018-12-23" class="headerlink" title="2018.12.23"></a>2018.12.23</h2><p>ä»Šå¤©æ¢äº†ä¸ªä¸ªéŸ³ä¹ä¸»é¢˜çš„è´´å§billboardå§æŠ“æ•°æ®ï¼Œå‘ç°xpathè¡¨è¾¾å¼éƒ½æŠ“ä¸åˆ°ä¸œè¥¿äº†ï¼Œæ£€æŸ¥äº†ä¸€ä¸‹å‘ç°ä¸åŒçš„å§æŸäº›ä¸œè¥¿è¿˜ä¸ä¸€æ ·ï¼Œæ¯”å¦‚billboardå§å’Œå®ˆæœ›å…ˆé”‹å§å¸–å­å†…å®¹çš„classï¼š</p><ul><li>â€œd_post_content j_d_post_content â€</li><li>â€œd_post_content j_d_post_content  clearfixâ€</li></ul><p>billboardå§çš„classå¢åŠ äº†ä¸€ä¸ªclearfixçš„å€¼ï¼Œè¿™æ˜¯ç”¨æ¥æ¸…é™¤æµ®åŠ¨çš„ï¼Œè¦äº†è§£æ¸…æ¥šæµ®åŠ¨æ˜¯å¹²å˜›ï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/9d6a6fc3e398" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« </a>ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªåŠæ³•</p><ul><li>æ‰¾åˆ°è¿™ä¸ªclearfixçš„è§„å¾‹ï¼Œæœ‰clearfixçš„å§æˆ–è€…å¸–å­å°±ç»™æˆ‘ä»¬çš„xpathè¡¨è¾¾å¼åŠ ä¸Š</li><li>è¿˜æ˜¯æŒ‰ç…§åŸæ¥çš„æ–¹æ³•å»å–å€¼ï¼Œå¦‚æœå–ä¸åˆ°ï¼Œé‚£å°±åŠ ä¸Šclearfix</li></ul><p>ç›®å‰æ¥çœ‹ç¬¬äºŒç§æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå…ˆè¯•è¯•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># æ ‡é¢˜</span><br><span class="line">title = response.xpath(&quot;//div[@class=&apos;core_title_wrap_bright clearfix&apos;]//text()&quot;)</span><br><span class="line">if title:</span><br><span class="line">    title = title.extract()[0]</span><br><span class="line">else:</span><br><span class="line">    title = response.xpath(&quot;//div[@class=&apos;core_title core_title_theme_bright&apos;]//text()&quot;).extract()[0]</span><br><span class="line">                                        </span><br><span class="line"># é“¾æ¥</span><br><span class="line">l.add_value(&quot;link&quot;,response.meta[&apos;url&apos;])</span><br><span class="line">l.add_value(&quot;title&quot;,title)</span><br><span class="line"># è·Ÿå¸–ç”¨æˆ·</span><br><span class="line">l.add_xpath(&quot;replyUsers&quot;,&quot;//div[@class=&apos;d_author&apos;]//li[@class=&apos;d_name&apos;]//a[@class=&apos;p_author_name j_user_card&apos;]//text()&quot;)</span><br><span class="line"># è·Ÿå¸–å†…å®¹</span><br><span class="line">replyContent = response.xpath(&quot;//div[@class=&apos;d_post_content j_d_post_content  clearfix&apos;]//text()&quot;)</span><br><span class="line">if replyContent:</span><br><span class="line">    replyContent = replyContent.extract()</span><br><span class="line">else:</span><br><span class="line">    replyContent = response.xpath(&quot;//div[@class=&apos;d_post_content j_d_post_content &apos;]//text()&quot;).extract()</span><br><span class="line">l.add_value(&quot;replyContent&quot;,replyContent)</span><br></pre></td></tr></table></figure><p>æ²¡é—®é¢˜ï¼ŒæˆåŠŸæŠ“åˆ°æ‰€éœ€è¦çš„ä¿¡æ¯,ç°åœ¨æˆ‘è¦æŠ“å»æ›´å¤šç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¿™å¸–å­å›å¤çš„äººæ˜¯ä¸ªå¦¹å­è¿˜æ˜¯æ±‰å­é‚£è‚¯å®šå¾—çŸ¥é“ä¸ï¼Œé€šè¿‡åˆ†æhtmlç»“æœï¼Œè¢«æˆ‘å‘ç°äº†è¿™ä¹ˆä¸€ä¸ªå­—æ®µ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data-field=&quot;&#123;</span><br><span class="line"></span><br><span class="line">    &quot;author&quot;:&#123;&quot;user_id&quot;:2350893056,&quot;user_name&quot;:&quot;GYGGYFDDH&quot;,&quot;name_u&quot;:&quot;GYGGYFDDH&amp;ie=utf-8&quot;,&quot;user_sex&quot;:2,&quot;portrait&quot;:&quot;00c84759474759464444481f8c&quot;,&quot;is_like&quot;:1,&quot;level_id&quot;:6,&quot;level_name&quot;:&quot;\u51cc\u6ce2\u55b5\u6b65&quot;,&quot;cur_score&quot;:118,&quot;bawu&quot;:0,&quot;props&quot;:null,&quot;user_nickname&quot;:&quot;\u767d\u00ba\u82d7\u7f2a&quot;&#125;,</span><br><span class="line"></span><br><span class="line">    &quot;content&quot;:&#123;&quot;post_id&quot;:123353095371,&quot;is_anonym&quot;:false,&quot;open_id&quot;:&quot;tbclient&quot;,&quot;open_type&quot;:&quot;android&quot;,&quot;date&quot;:&quot;2018-12-23 10:35&quot;,&quot;vote_crypt&quot;:&quot;&quot;,&quot;post_no&quot;:1,&quot;type&quot;:&quot;0&quot;,&quot;comment_num&quot;:0,&quot;is_fold&quot;:0,&quot;ptype&quot;:&quot;0&quot;,&quot;is_saveface&quot;:false,&quot;props&quot;:null,&quot;post_index&quot;:0,&quot;pb_tpoint&quot;:null&#125;</span><br><span class="line">    </span><br><span class="line">    &#125;&quot;</span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯çªç ´å£äº†ï¼Œauthoræ˜¯ç”¨æˆ·çš„ä¿¡æ¯ï¼Œcontentæ˜¯è¿™ä¸ªå¸–å­çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å›å¤çš„æ—¶é—´ã€‚user_sexå°±æ˜¯æ€§åˆ«ï¼Œ1æ˜¯ç”·ï¼Œ2æ˜¯å¥³ï¼Œä»”ç»†ä¸€çœ‹è¿™é‡Œé¢è¿˜æœ‰ç”¨æˆ·çš„è®¾å¤‡ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨çš„æ˜¯è‹¹æœè¿˜æ˜¯å®‰å“ã€‚<br>è¯•ç€æŠ“ä¸€äº›ä¿¡æ¯ä¸‹æ¥ï¼Œxpathè¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">l.add_xpath(&quot;replyUsers&quot;,&quot;//div[@class=&apos;p_postlist&apos;]/div/attribute::data-field&quot;)</span><br></pre></td></tr></table></figure><p>é€‰å–æ‰€æœ‰classæ˜¯p_postlistçš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç„¶åé€‰æ‹©å®ƒçš„å«åšdata-fieldçš„å±æ€§ï¼Œå³ä¸Šé¢çš„ä¿¡æ¯äº†ï¼ŒæŠ“åˆ°äº†æ‰€æœ‰çš„æ•°æ®ï¼Œç”¨pdè¿‡æ»¤ä¸€ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">usernames = []</span><br><span class="line">usersexs = []</span><br><span class="line">for users in sxyData.replyUsers:</span><br><span class="line">    for userinfo in users:</span><br><span class="line">        userInfoString = &quot;&quot;.join(userinfo)</span><br><span class="line">        if userInfoString.startswith(&quot;&#123;&quot;):</span><br><span class="line">            user = pd.read_json(userInfoString)</span><br><span class="line">            usernames.append(user.author[&quot;user_name&quot;])</span><br><span class="line">            usersexs.append(user.author[&quot;user_sex&quot;])</span><br><span class="line">users = &#123;&apos;names&apos;:usernames,&apos;sex&apos;:usersexs&#125;</span><br><span class="line">users = pd.DataFrame(users)</span><br><span class="line">users</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¼šä»ä¸­æå–å‡ºç”¨æˆ·åå’Œæ€§åˆ«ï¼Œå› ä¸ºæŸäº›æ•°æ®ä¸æ˜¯ä»¥{}åŒ…è£…çš„ï¼Œæ‰€ä»¥åœ¨ç”¨pdæå–jsonå¯¹è±¡ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­ä¸€ä¸‹,å¾—åˆ°çš„æ•°æ®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0å¤œå’Œæµ·19961</span><br><span class="line">1åä¸½atobekeigo2</span><br><span class="line">5æ°¸ä¸­ä¸€å°ç”Ÿ0</span><br><span class="line">6å“¦å•¦å•¦æ—…é€”å•¦0</span><br><span class="line">7lzlzyz1</span><br></pre></td></tr></table></figure></p><ul><li>1ï¼šç”·ç”Ÿ</li><li>2ï¼šå¥³ç”Ÿ</li><li>0:æœªçŸ¥</li></ul><h2 id="todo"><a href="#todo" class="headerlink" title="todo"></a>todo</h2><ul><li>ä¸‹åˆçªç„¶æƒ³åˆ°ï¼Œåº”è¯¥å¯ä»¥é€šè¿‡å­æˆ–çˆ¶èŠ‚ç‚¹è·å–è¿™ä¸ªclassçš„å±æ€§ï¼Œå†å»æå–ä¿¡æ¯ï¼Œè¿™æ ·å°±ä¸éœ€è¦åˆ¤æ–­äº†ï¼Œç›´æ¥å¯ä»¥æ ¹æ®ç›¸å¯¹å…³ç³»é€‰æ‹©å®ƒçš„classå</li></ul><h2 id="2018-12-24"><a href="#2018-12-24" class="headerlink" title="2018.12.24"></a>2018.12.24</h2><p>åœ¨å¤„ç†æŠ“å¸–å­å†…å®¹çš„æ—¶å€™å‡ºç°ä¸€äº›é—®é¢˜ï¼Œå› ä¸ºæœ‰ä¸€äº›å¸–å­çš„è¯„è®ºå¾ˆå¤šï¼Œä¹Ÿæ˜¯æœ‰ä¸‹ä¸€é¡µçš„ï¼Œè™½ç„¶å¤„ç†é€»è¾‘å’Œå¸–å­åˆ—è¡¨çš„å·®ä¸å¤šï¼Œä½†ä»”ç»†ç ”ç©¶åå‘ç°æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¹¶ä¸”æ‰¾å‡ºäº†ä¹‹å‰çš„ä»£ç çš„ç¼ºé™·:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">        # get the post urls and collec the info.</span><br><span class="line">        postSubUrls = response.xpath(&quot;//a[@class=&apos;j_th_tit &apos;]//@href&quot;).extract()</span><br><span class="line">        self.logger.info(&quot;==============Now Request pages===========&#123;&#125;&quot;.format(postSubUrls))</span><br><span class="line">        for subrul in postSubUrls:</span><br><span class="line">            url = urljoin(self.urlPrefix,subrul)</span><br><span class="line">            self.logger.info(&quot;----------Now request url=============&#123;&#125;&quot;.format(url))</span><br><span class="line">            yield scrapy.Request(url,callback=self.parsePost,meta=&#123;&apos;url&apos;:url&#125;)</span><br><span class="line"></span><br><span class="line">        # get the next page info</span><br><span class="line">        nextPageUrls = response.xpath(&quot;//a[@class=&apos;next pagination-item &apos;]//@href&quot;)    </span><br><span class="line">        for url in nextPageUrls.extract():</span><br><span class="line">            yield scrapy.Request(urljoin(self.urlPrefix,url),callback=self.parse)</span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯è¿™é‡Œçš„æŠ“å¸–å­å†…å®¹å’Œä¸‹ä¸€é¡µçš„é¡ºåºå¯¹è°ƒäº†ï¼Œä»¥åŠä¹‹å‰æˆ‘åœ¨yieldä¸‹ä¸€é¡µçš„æ—¶å€™ï¼Œç«Ÿç„¶æ²¡æœ‰æŒ‡å®šå›æ‰æ–¹æ³•ï¼Œè¿™å¯¼è‡´ç¬¬ä¸€é¡µå¸–å­é‡Œé¢å°±æœ‰äº›å¸–å­æ²¡æœ‰æŠ“ä¸‹æ¥ã€‚éšåå¼€å§‹ç ”ç©¶å¦‚ä½•æŠ“ç¬¬äºŒé¡µçš„è¯„è®ºï¼Œæ­¤å¤„é‡åˆ°ä¸€ä¸ªå¤§å‘, å³ç¬¬äºŒé¡µçš„æ ‡é¢˜å˜äº†ï¼Œå˜æˆäº†â€å›å¤ï¼š {åŸæ¥çš„æ ‡é¢˜}â€,å¯¼è‡´æ–°æŠ“ä¸‹æ¥çš„æ ‡é¢˜éƒ½<br>å­˜åˆ°äº†å¦ä¸€ä¸ªå­—æ®µï¼Œæˆ‘è¿˜ä»¥ä¸ºæ²¡æŠ“ä¸‹æ¥ï¼Œä¸€ç›´åœ¨æ”¹ï¼Œä¹‹æ‰€ä»¥å­˜åˆ°äº†ä¸‹ä¸€ä¸ªå­—æ®µï¼Œæ˜¯å› ä¸ºæˆ‘åœ¨ä¸‹ä¸€é¡µçš„è¯·æ±‚å‘èµ·ä¹‹å‰ï¼Œå°±å·²ç»yieldè¿”å›äº†l.load_item().</p><p>æ‰¾åˆ°åŸå› äº†å°±å¥½åŠäº†ï¼Œå¯¹äºé‚£äº›æŠ“ä¸‹ä¸€é¡µçš„è¯„è®ºçš„å¸–å­ï¼Œå®ƒçš„titleæˆ‘ä»¬å¯ä»¥ä¸€å¼€å§‹å°±æŒ‡å®šï¼Œç„¶åé€šè¿‡metaä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚ä¸­åˆ¤æ–­å¦‚æœmetaä¸­æœ‰titleï¼Œé‚£ä¹ˆtitleå°±è®¾ç½®ä¸ºmetaä¸­çš„ï¼Œè¿™é‡Œåœ¨åˆ¤æ–­meta(metaæ˜¯ä¸€ä¸ªå­—å…¸)ä¸­æ˜¯å¦æŸä¸ªkeyçš„æ—¶å€™çŠ¯äº†ä¸ªå°é”™,æˆ‘æ˜¯è¿™ä¹ˆå†™çš„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if d.meta[&apos;apples&apos;]:</span><br></pre></td></tr></table></figure><p>ä½†å…¶å®åº”è¯¥è¿™æ ·å†™:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if &apos;apples&apos; in d:</span><br></pre></td></tr></table></figure><p>å‚è§ï¼š<a href="https://stackoverflow.com/questions/44035287/check-key-exist-in-python-dict/44035382" target="_blank" rel="noopener">Check key exist in python dict</a></p><p>ä½†è¿™æ ·æŠ“ä¸‹æ¥çš„å¸–å­è¿˜æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“çˆ¬è™«çˆ¬ä¸‹ä¸€ä¸ªè¯„è®ºé¡µçš„æ—¶å€™ï¼Œè¿™ä¸€é¡µçš„æ•°æ®å®ƒå°±ä¼šè¿”å›ï¼Œæ‰€ä»¥åœ¨jsonæ•°æ®ä¸­ï¼Œå°±ä¼šæœ‰æ ‡é¢˜ï¼Œé“¾æ¥é‡å¤ï¼Œä½†è¯„è®ºå’Œè·Ÿå¸–ç”¨æˆ·ä¸ä¸€æ ·çš„æ•°æ®ï¼Œæœ¬æ¥çš„æ•°æ®æ˜¯ä¸€ä¸ªå¸–å­ä¸€æ¡æ•°æ®ï¼Œä½†ç°åœ¨æ˜¯åªè¦è¿™ä¸ªå¸–å­åˆä¸‹ä¸€é¡µçš„è¯„è®ºï¼Œå°±ä¼šæ–°å»ºä¸€æ¡æ•°æ®ï¼Œè™½ç„¶å®ƒçš„æ ‡é¢˜å’Œé“¾æ¥æ˜¯ä¸€æ ·çš„ã€‚</p><h2 id="2018-12-26"><a href="#2018-12-26" class="headerlink" title="2018.12.26"></a>2018.12.26</h2><p>è¿™é—®é¢˜å›°æ‰°äº†æˆ‘å¥½å‡ å¤©ï¼Œè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°è§£å†³çš„åŠæ³•ï¼Œå°è¯•è¿‡:</p><ul><li>åœ¨çˆ¬å–commentsçš„è¿‡ç¨‹ä¸­ï¼Œä¸yeildæ•°æ®ï¼Œå°†çˆ¬ä¸‹æ¥çš„è¯„è®ºappendç»™metaï¼Œå›è°ƒæ–¹æ³•æŒ‡å‘è‡ªèº«ï¼Œé‡å¤ç›´åˆ°æ²¡æœ‰ä¸‹ä¸€é¡µä¸ºæ­¢ï¼Œä½†è¿™æ ·scrapyç›´æ¥æŠŠä¹‹å‰çš„æ•°æ®éƒ½ä¸¢æ‰äº†ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ¯æ¬¡é‡æ–°<br>è¿›å…¥æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½newäº†ä¸€ä¸ªæ–°çš„itemLoaderã€‚</li></ul><blockquote><p>æš‚æ—¶æç½®ä¸€ä¸‹ï¼Œåæ­£å¸–å­æ ‡é¢˜æ˜¯ä¸€æ ·çš„ï¼Œåé¢ç”¨pandaså¤„ç†ä¸€ä¸‹å§ã€‚</p></blockquote><p>æˆ‘æƒ³æå–å‡ºæ¥çš„æ•°æ®æ˜¯ï¼Œæ¯ä¸ªcommentsä½œä¸ºä¸€æ¡è®°å½•ï¼ŒåŒæ—¶è®°å½•å¸–å­çš„æ ‡é¢˜å’Œç”¨æˆ·ï¼Œä½†æ¯”å¯¹æŠ“ä¸‹æ¥çš„æ•°æ®åå‘ç°è¯„è®ºä¸­çš„ç”¨æˆ·æ•°é‡å’Œè¯„è®ºæœ¬èº«ä¸ä¸€è‡´ï¼Œè¿™å°±å°´å°¬äº†ï¼Œä¸å»ºç«‹å¥½å¯¹åº”å…³ç³»ï¼Œæ•°æ®æ ¹æœ¬å°±æ²¡åŠæ³•åˆ†æå•Šã€‚</p><p>ä¸è¿‡åŸºæœ¬å¯ä»¥ç¡®å®šï¼Œè¯„è®ºä¸­çš„ç¬¬ä¸€æ¡å°±æ˜¯æ¥¼ä¸»ï¼Œå…ˆæŠŠæ¥¼ä¸»çš„ä¿¡æ¯æŠ“å‡ºæ¥å§ã€‚</p><h2 id="2019-01-07"><a href="#2019-01-07" class="headerlink" title="2019.01.07"></a>2019.01.07</h2><p>ä»Šå¤©äº†è§£åˆ°scrapyçš„å¦ä¸€ä¸ªç‰¹æ€§ï¼Œå³CrawlSpiderç±»å‹çš„çˆ¬è™«ï¼Œåœ¨è¿™ä¸ªçˆ¬è™«é‡Œé¢ï¼Œå®ƒå¯ä»¥åƒä¸‹é¢è¿™æ ·å»æŠ½å–postçš„è¿æ¥å’Œä¸‹ä¸€é¡µçš„é“¾æ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rules = (</span><br><span class="line">    Rule(LinkExtractor(restrict_xpaths=&quot;//div[@class=&apos;pb_footer&apos;]//ul[@class=&apos;l_posts_num&apos;]//a&quot;),callback=&apos;parse&apos;),</span><br><span class="line">    Rule(LinkExtractor(restrict_xpaths=&quot;//a[@class=&apos;j_th_tit &apos;]&quot;),callback=&apos;parsePost&apos;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ã€Šç²¾é€špythonçˆ¬è™«ã€‹è¿™æœ¬ä¹¦ä¸Šè¯´ï¼š</p><blockquote><p>Ruleä¸­å¯ä»¥æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æˆ‘å†™çš„callback=â€™parseâ€™(è¿™é‡Œåªèƒ½æ˜¯å‡½æ•°çš„å­—ç¬¦ä¸²åå­—ï¼Œè€Œä¸æ˜¯self.parse)ã€‚å¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šcallbackå‡½æ•°ï¼Œé‚£ä¹ˆscrapyå°†ä¼šè·Ÿè¸ªå·²ç»æŠ½å–çš„é“¾æ¥ï¼Œå¦‚æœä½ å¸Œæœ›è·Ÿè¸ªé“¾æ¥ï¼Œé‚£ä¹ˆéœ€è¦å†callbackä¸­ä½¿ç”¨returnæˆ–yieldè¿”å›å®ƒä»¬ï¼Œæˆ–è€…å°†Ruleçš„followå‚æ•°è®¾ç½®ä¸ºtrueï¼Œå½“ä½ çš„é¡µé¢æ—¢åŒ…å«itemåˆåŒ…å«å…¶ä»–æœ‰ç”¨çš„å¯¼èˆªé“¾æ¥æ—¶ï¼Œè¯¥åŠŸèƒ½å¯èƒ½ä¼šéå¸¸æœ‰ç”¨ã€‚</p></blockquote><p>çœ‹å®Œè¿™ä¸€æ®µï¼Œæˆ‘æœ‰å‡ ä¸ªç–‘é—®ï¼š</p><ul><li>callbackå‡½æ•°ä¸­ï¼Œå¦‚ä½•æ‹¿åˆ°æƒ³è·Ÿè¸ªçš„é“¾æ¥ï¼Ÿ</li><li>yieldçš„é“¾æ¥ï¼Œç›´æ¥è¿”å›è¿™ä¸ªé“¾æ¥ï¼Œè¿˜æ˜¯è¿”å›responseå¯¹è±¡ï¼Ÿ</li><li>è¿”å›çš„æ•°æ®ï¼ˆæˆ–è€…é“¾æ¥ï¼‰ï¼Œç”±è°æ¥å¤„ç†ï¼Ÿ</li></ul><p>rules: æ˜¯Ruleå¯¹è±¡çš„é›†åˆï¼Œç”¨äºåŒ¹é…ç›®æ ‡ç½‘ç«™å¹¶æ’é™¤å¹²æ‰°<br>parse_start_url: ç”¨äºçˆ¬å–èµ·å§‹å“åº”ï¼Œå¿…é¡»è¦è¿”å›Itemï¼ŒRequestä¸­çš„ä¸€ä¸ªã€‚</p><p>æŸ¥äº†ä¸€äº›èµ„æ–™ï¼Œrulesçš„è§„åˆ™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rules = [</span><br><span class="line">    Rule(</span><br><span class="line">        link_extractor,     # LinkExtractorå¯¹è±¡</span><br><span class="line">        callback=None,      # è¯·æ±‚åˆ°å“åº”æ•°æ®æ—¶çš„å›è°ƒå‡½æ•°</span><br><span class="line">        cb_kwargs=None,     # è°ƒç”¨å‡½æ•°è®¾ç½®çš„å‚æ•°,ä¸è¦æŒ‡å®šä¸ºparse</span><br><span class="line">        follow=None,        # æ˜¯å¦ä»responseè·Ÿè¿›é“¾æ¥ï¼Œä¸ºå¸ƒå°”å€¼</span><br><span class="line">        process_links=None, # è¿‡æ»¤linkextractoråˆ—è¡¨ï¼Œæ¯æ¬¡è·å–åˆ—è¡¨æ—¶éƒ½ä¼šè°ƒç”¨</span><br><span class="line">        process_request=None    # è¿‡æ»¤request,æ¯æ¬¡æå–requestéƒ½ä¼šè°ƒç”¨</span><br><span class="line">    )</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>LinkExtractorçš„å‚æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class scrapy.contrib.linkextractor.sgml.SgmlLinkExtractor(</span><br><span class="line">    allow = (),         # ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼å‚æ•°çš„æ•°æ®ä¼šè¢«æå–</span><br><span class="line">    deny = (),          # ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼å‚æ•°çš„æ•°æ®ç¦æ­¢æå–</span><br><span class="line">    allow_domains = (),     # åŒ…å«çš„åŸŸåä¸­å¯ä»¥æå–æ•°æ®</span><br><span class="line">    deny_domains = (),      # åŒ…å«çš„åŸŸåä¸­ç¦æ­¢æå–æ•°æ®</span><br><span class="line">    deny_extensions = (),       </span><br><span class="line">    restrict_xpath = (),        # ä½¿ç”¨xpathæå–æ•°æ®ï¼Œå’Œallowå…±åŒèµ·ä½œç”¨</span><br><span class="line">    tags = (),          # æ ¹æ®æ ‡ç­¾åç§°æå–æ•°æ®</span><br><span class="line">    attrs = (),         # æ ¹æ®æ ‡ç­¾å±æ€§æå–æ•°æ®</span><br><span class="line">    canonicalize = (),</span><br><span class="line">    unique = True,          # å‰”é™¤é‡å¤é“¾æ¥è¯·æ±‚</span><br><span class="line">    process_value = None</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><h1 id="xpathå‚è€ƒ"><a href="#xpathå‚è€ƒ" class="headerlink" title="xpathå‚è€ƒ"></a>xpathå‚è€ƒ</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. è¿›å…¥scrapyè°ƒè¯•ç•Œé¢</span><br><span class="line">scrapy shell &apos;url&apos;</span><br><span class="line"></span><br><span class="line">2. è°ƒè¯•ç•Œé¢ä½¿ç”¨xpath</span><br><span class="line">response.xpath(&apos;&apos;)</span><br><span class="line"></span><br><span class="line">3. æŠ“å–æŒ‡å®šç±»çš„å…ƒç´ ,//ä¸ºè·å–æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›çš„æ˜¯listï¼Œæ‰€æœ‰å¦‚æœåœ¨ä¸Šä¸€çº§ä½¿ç”¨äº†//,é‚£ä¹ˆä¸‹ä¸€çº§ä¹Ÿæ˜¯ç”¨//,å¦‚æœæ˜¯/,é‚£ä¹ˆæå–çš„å°±æ˜¯è¯¥listä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line">xpath(&apos;//div[@class=&quot;title&quot;]//text()&apos;),text()ä¸ºè·å–è¯¥å…ƒç´ ä¸‹çš„æ–‡æœ¬ï¼Œå¦‚æœéœ€è¦çº¯æ–‡æœ¬ï¼Œè¿˜éœ€è¦åœ¨åé¢åŠ extract()æ–¹æ³•</span><br><span class="line"></span><br><span class="line">4. æå–å±æ€§</span><br><span class="line">xpath(&quot;//div[@class=&apos;pb_footer&apos;]//ul[@class=&apos;l_posts_num&apos;]//a//@href&quot;),ä¸»è¦æ˜¯åé¢çš„@href</span><br></pre></td></tr></table></figure><h1 id="scrapyå‚è€ƒ"><a href="#scrapyå‚è€ƒ" class="headerlink" title="scrapyå‚è€ƒ"></a>scrapyå‚è€ƒ</h1><h2 id="setting"><a href="#setting" class="headerlink" title="setting"></a>setting</h2><blockquote><p>è¿™é‡Œè¯´çš„è®¾ç½®ï¼Œåªè¦åœ¨setting.pyä¸­æ·»åŠ ä¸€æ¡è®°å½•å³å¯</p></blockquote><ol><li><p>è®¾ç½®utf-8æ ¼å¼ï¼Œé¿å…ä¸­æ–‡å‡ºé”™<br>FEED_EXPORT_ENCODING = â€˜utf-8â€™</p></li><li><p>ä¸éµå®ˆç½‘ç«™çš„çˆ¬è™«ç­–ç•¥<br>ROBOTSTXT_OBEY = False</p></li></ol><h2 id="commands"><a href="#commands" class="headerlink" title="commands"></a>commands</h2><ol><li><p>å¯åŠ¨çˆ¬è™«<br>scrapy crawl CrawlerName</p></li><li><p>å¯åŠ¨çˆ¬è™«ï¼Œå¯¼å‡ºæ•°æ®ä¸ºjson<br>scrapy crawl CrawlerName -o filename.json </p></li><li><p>çˆ¬äº†æŒ‡å®šçš„æ•°æ®åï¼Œå°±å…³é—­<br>scrapy crawl CrawlerName -o filename.json -s CLOSESPIDER_ITEMCOUNT=50</p></li></ol><h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><p>scrapy shellç¯å¢ƒä¸‹ï¼Œé…ç½®user-agent:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">url = &apos;http://www.example.com&apos;</span><br><span class="line">request = scrapy.Request(url, headers=&#123;&apos;User-Agent&apos;: &apos;Mybot&apos;&#125;)</span><br><span class="line">fetch(request)</span><br></pre></td></tr></table></figure><ol><li>ç”Ÿæˆçˆ¬è™«<br>scrapy genspider -l æŸ¥çœ‹å¯ç”¨çš„æ¨¡ç‰ˆ<br>scrapy genspider -t crawl name url </li></ol>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å°±æ˜¯çœ‹çœ‹å¤§å®¶åœ¨è´´å§ç©å•¥ï¼Œçˆ¬äº†100å¤šå…†æ¯æ ¡çš„æ•°æ®ï¼Œå›æ¥æ…¢æ…¢åˆ†æï¼Œä»¥åå†åšä¸ªæ•°æ®å¯è§†åŒ–ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æ‹¿å»çˆ¬ä¸€ä¸‹è‡ªå·±å–œæ¬¢çš„è´´å§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="crawler" scheme="http://wittyfans.com/tags/crawler/"/>
    
      <category term="scrapy" scheme="http://wittyfans.com/tags/scrapy/"/>
    
  </entry>
  
  <entry>
    <title>ç”¨Pythonåšæ•°æ®å¯è§†åŒ–</title>
    <link href="http://wittyfans.com/coding/%E7%94%A8Python%E5%81%9A%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96.html"/>
    <id>http://wittyfans.com/coding/ç”¨Pythonåšæ•°æ®å¯è§†åŒ–.html</id>
    <published>2019-01-16T12:24:41.000Z</published>
    <updated>2019-01-16T12:35:42.105Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Talk is cheap, show me the picture!</p></blockquote><a id="more"></a><h1 id="å¯¼å…¥ç›¸å…³åŒ…"><a href="#å¯¼å…¥ç›¸å…³åŒ…" class="headerlink" title="å¯¼å…¥ç›¸å…³åŒ…"></a>å¯¼å…¥ç›¸å…³åŒ…</h1><p>Import the plt:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br></pre></td></tr></table></figure><h1 id="ä¸åŒçš„å›¾è¡¨"><a href="#ä¸åŒçš„å›¾è¡¨" class="headerlink" title="ä¸åŒçš„å›¾è¡¨"></a>ä¸åŒçš„å›¾è¡¨</h1><p>you can do this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">data.plt.bar()</span><br></pre></td></tr></table></figure><p>and this is the diffrent types plot:</p><ul><li>â€˜barâ€™ or â€˜barhâ€™ for bar plots</li><li>â€˜histâ€™ for histogram</li><li>â€˜boxâ€™ for boxplot</li><li>â€˜kdeâ€™ or â€˜densityâ€™ for density plots</li><li>â€˜areaâ€™ for area plots</li><li>â€˜scatterâ€™ for scatter plots</li><li>â€˜hexbinâ€™ for hexagonal bin plots</li><li>â€˜pieâ€™ for pie plots</li></ul><p>and you can specific the kind in methond:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(kind=&apos;bar&apos;)</span><br></pre></td></tr></table></figure><p>Reference:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.plot.area     df.plot.barh     df.plot.density  df.plot.hist     df.plot.line     df.plot.scatter</span><br><span class="line">df.plot.bar      df.plot.box      df.plot.hexbin   df.plot.kde      df.plot.pie</span><br></pre></td></tr></table></figure><h1 id="æŠŠåˆ—åˆå¹¶å±•ç¤º"><a href="#æŠŠåˆ—åˆå¹¶å±•ç¤º" class="headerlink" title="æŠŠåˆ—åˆå¹¶å±•ç¤º"></a>æŠŠåˆ—åˆå¹¶å±•ç¤º</h1><p>When you plotting,stacked = True means conbined the columns value,from this:</p><p><img src="https://pandas.pydata.org/pandas-docs/stable/_images/bar_plot_multi_ex.png" alt=""></p><p>to this</p><p><img src="https://pandas.pydata.org/pandas-docs/stable/_images/bar_plot_stacked_ex.png" alt=""></p><p>plot.bar(stacked=True); </p><p>If you want thehorizontal bar plots, use the barh method:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">df2.plot.barh(stacked=True)</span><br></pre></td></tr></table></figure><h1 id="ä½¿ç”¨ç»˜å›¾å¯¹è±¡"><a href="#ä½¿ç”¨ç»˜å›¾å¯¹è±¡" class="headerlink" title="ä½¿ç”¨ç»˜å›¾å¯¹è±¡"></a>ä½¿ç”¨ç»˜å›¾å¯¹è±¡</h1><p>Plots in matplotlib is a Figure object, you can new a plot window:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br></pre></td></tr></table></figure><h2 id="å¤šä¸ªå›¾ä¸€èµ·ç»˜åˆ¶"><a href="#å¤šä¸ªå›¾ä¸€èµ·ç»˜åˆ¶" class="headerlink" title="å¤šä¸ªå›¾ä¸€èµ·ç»˜åˆ¶"></a>å¤šä¸ªå›¾ä¸€èµ·ç»˜åˆ¶</h2><p>and you can add the sub plots to this object,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure() </span><br><span class="line">ax1 = fig.add_subplot(2, 2, 1) </span><br><span class="line">ax2 = fig.add_subplot(2, 2, 2) </span><br><span class="line">ax3 = fig.add_subplot(2, 2, 3)</span><br><span class="line">ax4 = fig.add_subplot(2, 2, 4)</span><br></pre></td></tr></table></figure><p>This will let you get four plot sub plots in one  window, and any command will show in the last plot.</p><h2 id="å¿«é€Ÿåˆ›å»ºå¤šä¸ªå­å›¾"><a href="#å¿«é€Ÿåˆ›å»ºå¤šä¸ªå­å›¾" class="headerlink" title="å¿«é€Ÿåˆ›å»ºå¤šä¸ªå­å›¾"></a>å¿«é€Ÿåˆ›å»ºå¤šä¸ªå­å›¾</h2><p>and you create subplots fast like this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig,axes = plt.subplots(3,3)</span><br><span class="line">axes[0,0].hist(np.random.randn(100),bins=20,color=&apos;k&apos;,alpha=0.3)</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶å­å›¾ä¹‹é—´çš„é—´éš™"><a href="#æ§åˆ¶å­å›¾ä¹‹é—´çš„é—´éš™" class="headerlink" title="æ§åˆ¶å­å›¾ä¹‹é—´çš„é—´éš™"></a>æ§åˆ¶å­å›¾ä¹‹é—´çš„é—´éš™</h2><p>subplots spacing is under control by </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.subplots_adjust(wspace=0,hspace=0)</span><br></pre></td></tr></table></figure><h1 id="ä¸ªæ€§åŒ–"><a href="#ä¸ªæ€§åŒ–" class="headerlink" title="ä¸ªæ€§åŒ–"></a>ä¸ªæ€§åŒ–</h1><h2 id="çº¿çš„è™šå®ã€é¢œè‰²"><a href="#çº¿çš„è™šå®ã€é¢œè‰²" class="headerlink" title="çº¿çš„è™šå®ã€é¢œè‰²"></a>çº¿çš„è™šå®ã€é¢œè‰²</h2><p>In the plot() method, it can accept a string to stylying, to plot x verus y with green dashes , you would execute:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.plot(x,y,&apos;g--&apos;)</span><br></pre></td></tr></table></figure><p>of course, the color and dash can setting seperate:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ax.plot(x, y, linestyle=&apos;--&apos;, color=&apos;g&apos;)</span><br></pre></td></tr></table></figure><p>linestyle:</p><ul><li>-</li><li>--</li></ul><p>Line plots can additionally have <em>markers</em> to highlight the actual data points.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">plot(&apos;ko--&apos;)</span><br><span class="line"></span><br><span class="line">or</span><br><span class="line"></span><br><span class="line">plot(marker=&apos;o&apos;)</span><br></pre></td></tr></table></figure><h2 id="ä¸€ä»½æ•°æ®ï¼Œå¤šç§å±•ç¤ºæ–¹å¼"><a href="#ä¸€ä»½æ•°æ®ï¼Œå¤šç§å±•ç¤ºæ–¹å¼" class="headerlink" title="ä¸€ä»½æ•°æ®ï¼Œå¤šç§å±•ç¤ºæ–¹å¼"></a>ä¸€ä»½æ•°æ®ï¼Œå¤šç§å±•ç¤ºæ–¹å¼</h2><p>æˆ‘ä»¬å¯ä»¥å°†ä¸åŒçš„drawstyleç»“åˆåœ¨ä¸€èµ·ï¼Œæ”¾åœ¨åŒä¸€å¹…å›¾ä¸­æ˜¾ç¤ºï¼Œæ¯”å¦‚è¿™æ ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot(linestyle=&apos;--&apos;,color=&apos;g&apos;,marker=&apos;o&apos;,label=&apos;Default&apos;)</span><br><span class="line">ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot(linestyle=&apos;-&apos;,color=&apos;r&apos;,marker=&apos;o&apos;,label=&apos;steps-post&apos;,drawstyle=&apos;steps-post&apos;)</span><br><span class="line">plt.legend(loc=&apos;best&apos;)</span><br></pre></td></tr></table></figure><p><img src="https://xfjlcq.bn.files.1drv.com/y4mHSUL0Fe0J2icuEUtKoUHovl1jCzOHR3BSoy5LdPsDttVbG0OJYys58TNGyXOLLj0elzuvTe8dSPxanf28ZanIF5y-qdjw_BoG3hlVLh0HiLxXbQpTRX2Mdg_wqv7jHA-cWaQdKRwpT07LUWhQNNF97VE4rtUSwCGLslxsludS7d7FTp1X9_c9z1eMPE5Nj2-Z4FZYU6zSUZXSD_iLFspsw/legendPlot.png?psid=1" alt=""></p><p>drawstyleçš„ç±»å‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&apos;default&apos;, &apos;steps&apos;, &apos;steps-pre&apos;, &apos;steps-mid&apos;, &apos;steps-post&apos;&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º"><a href="#å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º" class="headerlink" title="å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º"></a>å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º</h2><p>An easy way to adding legends:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from numpy.random import randn </span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(1, 1, 1)</span><br><span class="line">ax.plot(randn(1000).cumsum(), &apos;k&apos;, label=&apos;one&apos;) ax.plot(randn(1000).cumsum(), &apos;k--&apos;, label=&apos;two&apos;)</span><br><span class="line">ax.plot(randn(1000).cumsum(), &apos;k.&apos;, label=&apos;three&apos;) </span><br><span class="line">ax.legend(loc=&apos;best&apos;)</span><br></pre></td></tr></table></figure><blockquote><p>The loc tells matplotlib where to place the plot. If you arenâ€™t picky, â€˜bestâ€™ is a good option, as it will choose a location that is most out of the way. To exclude one or more elements from the legend, pass no label or label=â€™<em>nolegend</em>â€˜.</p></blockquote><h2 id="è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§"><a href="#è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§" class="headerlink" title="è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§"></a>è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§</h2><p>è®¾ç½®plotçš„æ ‡é¢˜:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ax.set_title(&apos;Drugs Releted Stop Search Rate&apos;)</span><br></pre></td></tr></table></figure><p>è®¾ç½®xè½´çš„æ ‡é¢˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ax.set_xlabel(&apos;hours&apos;)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„xè½´çš„å•ä½å’Œæ ‡ç­¾ä¹Ÿå¯ä»¥è®¾ç½®ï¼Œæ³¨æ„ä¸ªæ•°å¿…é¡»ç»Ÿä¸€:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drm = ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean()</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(1,1,1)</span><br><span class="line">ax.plot(drm)</span><br><span class="line"></span><br><span class="line">ticks = ax.set_xticks([0,6,12,18])</span><br><span class="line">labels = ax.set_xticklabels([&apos;Mid Night&apos;,&apos;Morning&apos;,&apos;Moon&apos;,&apos;AftenNoon&apos;])</span><br></pre></td></tr></table></figure><blockquote><p>Y-axis is same, substituting y for x in above.</p></blockquote><h2 id="å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶"><a href="#å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶" class="headerlink" title="å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶"></a>å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig,ax = plt.subplots(figsize=(16,7))</span><br><span class="line">data.groupby(&apos;A&apos;,&apos;B&apos;).count().unstack().plot(ax=ax)</span><br></pre></td></tr></table></figure><p>Use the unstack method to plotting.</p><blockquote><p>To be contiunedâ€¦</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Talk is cheap, show me the picture!&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="bigdata" scheme="http://wittyfans.com/tags/bigdata/"/>
    
      <category term="numpy" scheme="http://wittyfans.com/tags/numpy/"/>
    
      <category term="pandas" scheme="http://wittyfans.com/tags/pandas/"/>
    
      <category term="ploting" scheme="http://wittyfans.com/tags/ploting/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨Pandasåˆ†æç¾å›½äº¤è­¦å¼€æ”¾çš„æœæŸ¥æ•°æ®</title>
    <link href="http://wittyfans.com/coding/%E5%88%A9%E7%94%A8Pandas%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E4%BA%A4%E8%AD%A6%E5%BC%80%E6%94%BE%E7%9A%84%E6%90%9C%E6%9F%A5%E6%95%B0%E6%8D%AE.html"/>
    <id>http://wittyfans.com/coding/åˆ©ç”¨Pandasåˆ†æç¾å›½äº¤è­¦å¼€æ”¾çš„æœæŸ¥æ•°æ®.html</id>
    <published>2019-01-12T06:23:30.000Z</published>
    <updated>2019-01-16T12:16:56.712Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸€æ¬¡å¶ç„¶çš„æœºä¼šçœ‹åˆ°<a href="">ç‹æ ‘ä¹‰</a>è€å¸ˆçš„æ¨èYouTubeä¸Šçš„è¿™ä¸ªpandasè§†é¢‘æ•™ç¨‹ï¼Œäºæ˜¯èŠ±äº†ç‚¹æ—¶é—´å­¦ä¹ äº†ä¸€ä¸‹ï¼Œä¹Ÿå°±æœ‰äº†è¿™ç¯‡ç¬”è®°ï¼Œå› ä¸ºè¯¾ç¨‹æ˜¯è‹±æ–‡çš„ï¼Œä¹Ÿæ²¡æœ‰æä¾›<br>ä¸­æ–‡å­—å¹•ï¼Œæ‰€ä»¥æˆ‘çš„ç¬”è®°ä¹Ÿå°±æ‡’å¾—å†ç”¨ä¸­æ–‡å†™äº†ã€‚</p></blockquote><a id="more"></a><h1 id="åˆ©ç”¨Pandasåˆ†æç¾å›½äº¤è­¦å¼€æ”¾çš„æœæŸ¥æ•°æ®"><a href="#åˆ©ç”¨Pandasåˆ†æç¾å›½äº¤è­¦å¼€æ”¾çš„æœæŸ¥æ•°æ®" class="headerlink" title="åˆ©ç”¨Pandasåˆ†æç¾å›½äº¤è­¦å¼€æ”¾çš„æœæŸ¥æ•°æ®"></a>åˆ©ç”¨Pandasåˆ†æç¾å›½äº¤è­¦å¼€æ”¾çš„æœæŸ¥æ•°æ®</h1><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h2><p>The tutorial will not cover pandas basics. If you are new to pandas or just need a refresher, I recommend watching some videos from my <a href="http://www.dataschool.io/easier-data-analysis-with-pandas/" target="_blank" rel="noopener">free pandas course</a>. Alternatively, you can review all of the code from my pandas course in this Jupyter notebook.</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://github.com/justmarkham/pycon-2018-tutorial" target="_blank" rel="noopener">Using pandas for Better (and Worse) Data Science, Gitä¸»é¡µ</a></li><li><a href="https://www.youtube.com/watch?v=hl-TGI4550M&amp;list=PL5-da3qGB5IBITZj_dYSFqnd_15JgqwA6&amp;index=1" target="_blank" rel="noopener">Pandas best practices, Youtube é“¾æ¥</a></li></ul><h1 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h1><h2 id="DownLoad-the-data"><a href="#DownLoad-the-data" class="headerlink" title="DownLoad the data"></a>DownLoad the data</h2><h3 id="åŸå§‹æ•°æ®"><a href="#åŸå§‹æ•°æ®" class="headerlink" title="åŸå§‹æ•°æ®"></a>åŸå§‹æ•°æ®</h3><ul><li><a href="https://openpolicing.stanford.edu/data/" target="_blank" rel="noopener">Link</a></li><li><a href="https://github.com/5harad/openpolicing/blob/master/DATA-README.md" target="_blank" rel="noopener">How to use the date</a></li></ul><h3 id="æ•™ç¨‹ä½¿ç”¨çš„æ•°æ®"><a href="#æ•™ç¨‹ä½¿ç”¨çš„æ•°æ®" class="headerlink" title="æ•™ç¨‹ä½¿ç”¨çš„æ•°æ®"></a>æ•™ç¨‹ä½¿ç”¨çš„æ•°æ®</h3><ul><li><a href="https://github.com/justmarkham/pycon-2018-tutorial/blob/master/police.csv" target="_blank" rel="noopener">police</a></li></ul><h2 id="About-the-data"><a href="#About-the-data" class="headerlink" title="About the data"></a>About the data</h2><ul><li>For each state in the dataset, They provide data in three formats(We use csv format)</li><li>If a column cannot be computed using the data a state has provided, it is set to NA.</li><li>For several fields (e.g., driver_race) we include a â€œrawâ€ column which records the original data values from which we infer standardized values</li></ul><p>We include the raw columns because our data processing pipeline is extensive, requiring judgment calls and subjective decisions.</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>Column name</td><td>Column meaning</td><td>Example value</td></tr><tr><td>id</td><td>The unique ID we assign to each stop. Contains the state and year.</td><td>VT-2011-00012</td></tr><tr><td>stateï¼ˆå·ï¼‰</td><td>The two-letter code for the state in which the stop occurred.</td><td>VT</td></tr><tr><td>stop_dateï¼ˆè¢«æœæŸ¥çš„æ—¥æœŸï¼‰</td><td>The date of the stop, in YYYY-MM-DD format. Some states do not provide the exact stop date: for example, they only provide the year or quarter in which the stop occurred. For these states, stop_date is set to the date at the beginning of the period: for example, January 1 if only year is provided.</td><td>2011-11-27</td></tr><tr><td>stop_time(è¢«è­¦å¯ŸæœæŸ¥æ—¶çš„æ—¶é—´)</td><td>The 24-hour time of the stop, in HH:MM format.</td><td>20:15</td></tr><tr><td>location_raw</td><td>The original data value from which we compute the county (or comparably granular location) in which the stop occurred. Not in a standardized format across states.</td><td>Winooski</td></tr><tr><td>county_name</td><td>The standardized name of the county in which the stop occurred.</td><td>Chittenden County</td></tr><tr><td>county_fips</td><td>The standardized 5-digit FIPS code in which the stop occurred.</td><td>50007</td></tr><tr><td>district</td><td>In several states (e.g., Illinois) the stop county cannot be inferred, but a comparably granular location can. This comparably granular location is stored in the district column. Most states do not have this column.</td><td>ILLINOIS STATE POLICE 01</td></tr><tr><td>fine_grained_location</td><td>Any higher-resolution data about where the stop occurred: e.g., milepost or address. Not standardized across states.</td><td>90400 I 89 N; EXIT 15 MM90/40</td></tr><tr><td>police_department</td><td>The police department or agency that made the stop. Not in a standard format across states.</td><td>WILLISTON VSP</td></tr><tr><td>driver_gender</td><td>The driverâ€™s gender, as recorded by the trooper. M, F, or NA.</td><td>M</td></tr><tr><td>driver_age_raw</td><td>The original data value from which we compute the driverâ€™s age when they were stopped. May be age, birth year, or birth date. Not in a standard format across states.</td><td>1988</td></tr><tr><td>driver_age</td><td>The driverâ€™s age when they were stopped. Set to NA if less than 15 or greater than or equal to 100.</td><td>23</td></tr><tr><td>driver_race_raw</td><td>The original data value from which the driverâ€™s standardized race is computed. Not in a standard format across states.</td><td>African American</td></tr><tr><td>driver_race</td><td>The standardized driver race. Possible values are White, Black, Hispanic, Asian, Other, and NA, with NA denoting values which are unknown. Asian refers to Asian, Pacific Islander, and Indian. Native Americans/American Indians are included in the â€œotherâ€ category. Anyone with Hispanic ethnicity is classified as Hispanic, regardless of their recorded race.</td><td>Black</td></tr><tr><td>violation_raw</td><td>The violation committed by the driver, in the language of the original data. Not in a standard format across states. Some stops have multiple violations.</td><td>Speeding (10â€“19 MPH Over Prima Facie Limit *)</td></tr><tr><td>violation</td><td>The violation committed by the driver, standardized into categories which are consistent across states.</td><td>Speeding</td></tr><tr><td>search_conductedï¼ˆæ˜¯å¦è¢«æœæŸ¥ï¼‰</td><td>A TRUE/FALSE value indicating whether a search was performed.</td><td>TRUE</td></tr><tr><td>search_type_raw</td><td>The justification for the search, in the language of the original data. NA if no search was performed. Not in a standard format across states. Some states have multiple justifications for a search.</td><td>CONSENT SEARCH CONDUCTED</td></tr><tr><td>search_type</td><td>The normalized justification for the search. Where possible, this is standardized into categories which are consistent across states. For example, if something is clearly a consent search, search_type is referred to as â€œConsentâ€.</td><td>Consent</td></tr><tr><td>contraband_found</td><td>A TRUE/FALSE value indicating whether a search was performed and contraband was found. FALSE if no search was performed.</td><td>TRUE</td></tr><tr><td>stop_outcome</td><td>The outcome of the stop. Many states have idiosyncratic outcomes â€” for example, â€œCHP 215â€ in California â€” so this column is not standardized across states. â€œCitationâ€ and â€œWarningâ€ are the values which occur most commonly across states. If the stop has multiple outcomes, the most severe outcome is used. For example, if a stop resulted in a citation and a warning, stop_outcome would be â€œCitationâ€.</td><td>Citation</td></tr><tr><td>is_arrested</td><td>A TRUE/FALSE value indicating whether an arrest was made.</td><td>TRUE</td></tr></tbody></table><ul><li>FIPSï¼š<a href="https://zh.wikipedia.org/wiki/%E8%81%AF%E9%82%A6%E8%B3%87%E6%96%99%E8%99%95%E7%90%86%E6%A8%99%E6%BA%96" target="_blank" rel="noopener">è”é‚¦ä¿¡æ¯å¤„ç†æ ‡å‡†ï¼ˆè‹±è¯­ï¼šFederal Information Processing Standardsï¼Œç¼©å†™FIPSï¼‰</a></li><li>VT: <a href="https://www.google.com/search?q=vt%E6%98%AF%E5%93%AA%E4%B8%AA%E5%B7%9E&amp;rlz=1C5CHFA_enUS783US785&amp;oq=VT&amp;aqs=chrome.0.69i59j69i57j0l4.1878j0j1&amp;sourceid=chrome&amp;ie=UTF-8" target="_blank" rel="noopener">ç¾å›½çš„ä¸€ä¸ªå·</a></li><li>M,F: è®°å½•æ€§åˆ«ï¼ŒMç”·ï¼ŒFå¥³</li><li>race: å¯ä¸æ˜¯é€Ÿåº¦æˆ–è€…ç«èµ›ï¼Œè€Œæ˜¯ç§æ—,å‚è€ƒåˆ†ç±»å¦‚ä¸‹ï¼Œä¸æ•°æ®é‡Œçš„å¯èƒ½ä¸ä¸€æ ·ï¼Œ<a href="https://www.zhihu.com/question/21007176" target="_blank" rel="noopener">äº†è§£æ›´å¤š</a><ol><li>American Indian or Alaska Native</li><li>Asian</li><li>Black or African American</li><li>Native Hawaiian or Other Pacific Islander</li><li>White</li></ol></li><li>violationï¼šè¿ç« </li><li>NAN means the value is missing or irrelevant for that data row.</li></ul><h1 id="Know-the-data"><a href="#Know-the-data" class="headerlink" title="Know the data"></a>Know the data</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pd.read_csv() # è¯»å–csvæ–‡ä»¶</span><br><span class="line">pd.head() # æŸ¥çœ‹è¡¨å¤´</span><br><span class="line">pd.tail() # æŸ¥çœ‹è¡¨å°¾</span><br><span class="line">pd.dtypes # æŸ¥çœ‹åˆ—çš„æ•°æ®ç±»å‹</span><br><span class="line">pd.isnull().sum() # æŸ¥çœ‹nullå€¼æ•°é‡</span><br></pre></td></tr></table></figure><p>Import the data and check the dtypes:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri = pd.read_csv(&quot;/Users/wittyfans/Desktop/pycon-2018-tutorial/police.csv&quot;)</span><br><span class="line">ri.dtypes</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">stop_date                     object</span><br><span class="line">stop_time                     object</span><br><span class="line">driver_gender                 object</span><br><span class="line">driver_age_raw               float64</span><br><span class="line">driver_age                   float64</span><br><span class="line">driver_race                   object</span><br><span class="line">violation_raw                 object</span><br><span class="line">violation                     object</span><br><span class="line">search_conducted                bool</span><br><span class="line">search_type                   object</span><br><span class="line">stop_outcome                  object</span><br><span class="line">is_arrested                   object</span><br><span class="line">stop_duration                 object</span><br><span class="line">drugs_related_stop              bool</span><br><span class="line">frisk                         object</span><br><span class="line">stop_datetime         datetime64[ns]</span><br><span class="line">dtype: object</span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥çœ‹åˆ°æœ‰å¤šå°‘åˆ—ï¼Œä»¥åŠè¿™åˆ—çš„æ•°æ®ç±»å‹ï¼Œå¯¹æ•°æ®æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ã€‚</p></blockquote><h2 id="å¹´é¾„å æ¯”"><a href="#å¹´é¾„å æ¯”" class="headerlink" title="å¹´é¾„å æ¯”"></a>å¹´é¾„å æ¯”</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4mE65e58kzSnXPoiQuv06EIsD_5IgkuxLDZSIWIq3z0080umibcEGypBMNRyxrh-_t8ZpO1tinR38oIAqNEUEN2jl_IJOSCncuaaA6zXZnzvANNfEC9K2OEYVaIvvSF4JQyz1iQdZTfP4mQK8eQeO-2lRc3o0piHzbEaHXgDRDUWRtA6Tt4plvHj9nR-QjmSuni-o7LuM7g9XPA6ylYKSGfQ/driver_ages.png?psid=1" alt="å¹´é¾„åˆ†å¸ƒå›¾"></p><h2 id="ç§æ—å æ¯”"><a href="#ç§æ—å æ¯”" class="headerlink" title="ç§æ—å æ¯”"></a>ç§æ—å æ¯”</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4mTDy70KXCAzr_TjjsNCfUXYf6PAbhCY35FIoI5RleZO2gXs7aWmd3iUvH0lYMbhQLQFxdPLvup9F6M8iSrO8CEMqArMCBoOas1iyxSVO1zs8BX1oFG9_dOse1qmYqQ6mrv5tKl0fIODR5-9HsX9eN2qXj78TYzLcMrnA5wCM_O2CpUE-lzzvrNfx2-dNke55sPxQqnrC1eDjIAGF9VLnagg/driver_race.png?psid=1" alt="ç§æ—å æ¯”"></p><h2 id="æ¯’é©¾è¢«æŸ¥æ—¶æ®µåˆ†å¸ƒ"><a href="#æ¯’é©¾è¢«æŸ¥æ—¶æ®µåˆ†å¸ƒ" class="headerlink" title="æ¯’é©¾è¢«æŸ¥æ—¶æ®µåˆ†å¸ƒ"></a>æ¯’é©¾è¢«æŸ¥æ—¶æ®µåˆ†å¸ƒ</h2><p><img src="https://bn1301files.storage.live.com/y4mhtaWz5NsXj-qGHm5oUrB8ZIP9v0natmwePTIE8zMXgp0lRdXf1cFDU3hqAbkwy3FjZ46xiStnPN5h_P8UswB0h7D2PIFObR082XLqchJMrav4GRzwW2OdACiP6t51_7GB1NsT_ECU5knU2WWhsWpkx4mBD2Ms10uF0wpqGJ4HOWPfFqWxBenEOaBVBAQGW8xBxfhfqtScK7C3g5U8U8xeg/drugs_rate_in_day.png?psid=1&amp;width=2250&amp;height=1050" alt="æ¯’é©¾è¢«æŸ¥æ—¶æ®µåˆ†å¸ƒ"></p><h2 id="ç”·æ€§è¿ç« ç±»åˆ«å‰å"><a href="#ç”·æ€§è¿ç« ç±»åˆ«å‰å" class="headerlink" title="ç”·æ€§è¿ç« ç±»åˆ«å‰å"></a>ç”·æ€§è¿ç« ç±»åˆ«å‰å</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4mY4aDbWKRRPvQNtn3akzjE5rXGJIRn07EZm0ZuqciitsV8N71Y4wtmjeQ8u55C00-Kqz5fdaN6yqpTZdmQE_gHgP1fjruNCIceCrguCkYx3UB7LWHTGNLipTEOIzb3AXhmTStDhMQNetfL9YLF0GL2uqJsDtNYtjGmcXFZDFBotzhrxP2oj1ZFGZPgnFHtrHzzzCEc9t_UUA28kZTijswUg/MViolations.png?psid=1" alt=""></p><h2 id="å¥³æ€§è¿ç« ç±»åˆ«å‰å"><a href="#å¥³æ€§è¿ç« ç±»åˆ«å‰å" class="headerlink" title="å¥³æ€§è¿ç« ç±»åˆ«å‰å"></a>å¥³æ€§è¿ç« ç±»åˆ«å‰å</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4m3ncUi3FGe1kHKeAAd8dat0yoPSrMmDUOV5soHlnkyNMMeNzUoFDvTCO0X13bycvU9zApH8_kS_0Xj-HdgxkoFHKU9NDHcUJo6VW30C0RIyLjuWJY0c-BTR3f3zp3PHj4qWV74CMl9Z32CWzGIcAbvVyCZAMrdMhj_FuZfJBp2wDgDEWjcABDhMcOlDSml6OD1wweR1L0A3jMQbDfwUV3ng/ViolationsType.png?psid=1" alt=""></p><h2 id="ç”·å¥³è¿ç« ç±»åˆ«å¯¹æ¯”"><a href="#ç”·å¥³è¿ç« ç±»åˆ«å¯¹æ¯”" class="headerlink" title="ç”·å¥³è¿ç« ç±»åˆ«å¯¹æ¯”"></a>ç”·å¥³è¿ç« ç±»åˆ«å¯¹æ¯”</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4mMawv_h-NxRbffdJTPb-DlD__xVYddWhBdsrLsu_uDHcfqxYkP7unET7ikEPG_9n0m6v6tu3lb1zARO5tqAjmgMf8eVTFEjRnMAqmTEe7txh0nqah4bSMuPBnIgxoar-iSrKHRWjzOX8hLFTElP2jZPgbXa0ppqcxdKTRZFiVLsVPT8O_aDvIqxAJoxs_Alw7evCxhCMLO9KwopZEYapExg/mf_violations.png?psid=1" alt="ç”·å¥³è¿ç« ç±»åˆ«å¯¹æ¯”"></p><h2 id="æŸ¥è·è¿ç« æ•°ï¼ˆæŒ‰å¹´ï¼‰"><a href="#æŸ¥è·è¿ç« æ•°ï¼ˆæŒ‰å¹´ï¼‰" class="headerlink" title="æŸ¥è·è¿ç« æ•°ï¼ˆæŒ‰å¹´ï¼‰"></a>æŸ¥è·è¿ç« æ•°ï¼ˆæŒ‰å¹´ï¼‰</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4mkfreK_7B57c_c1WH3mQ9Ay6BW04wDjZMWXCgVaAsQ0gn5VoZRKsQmuyjmEKlpBai246ELuuVY0dtZFdlqdKzVKEI9jcLe6vRquAbGFSP0BrXHQo94PkzDbc0ud71OoOtUTHFsEQ-8b89O5OForTQujea-C29DVa5p5zWnRQx7Cfai_V3Cf0dB9yUO7g5CCpB_KoH3mKZVc2roODe4oCP1Q/Violations_years.png?psid=1" alt="æŸ¥è·è¿ç« æ•°"></p><h2 id="è¿ç« æŸ¥è·æ—¶é—´æ®µä¸å¹´ä»½"><a href="#è¿ç« æŸ¥è·æ—¶é—´æ®µä¸å¹´ä»½" class="headerlink" title="è¿ç« æŸ¥è·æ—¶é—´æ®µä¸å¹´ä»½"></a>è¿ç« æŸ¥è·æ—¶é—´æ®µä¸å¹´ä»½</h2><p><img src="https://mcx9ta.bn.files.1drv.com/y4mIUjvRHUmNWYiV_TJbVARksZpQtddC1eI5GVzcjf_AjzpxfD8BDofc68PsmYyYfrfTafDodrlRiaN2ylj7b9sqqShsimXbMbMlGOVwlggUnTZ1uLwOLgyxmKBVcUBmVXnv_jNMX8Iwv5-F0ViFnak1KtVFENNfP1GqMRjBwBqrFx03XwyiYzBaZaTSeF6xahq1N7k2L8TC1j8nO_CFrkVoA/Search_rate_in_years.png?psid=1" alt="è¿ç« æŸ¥è·æ—¶é—´æ®µåˆ†å¸ƒ"></p><h1 id="Handle-the-data"><a href="#Handle-the-data" class="headerlink" title="Handle the data"></a>Handle the data</h1><h2 id="1-Remove-the-column-that-only-contains-missing-values"><a href="#1-Remove-the-column-that-only-contains-missing-values" class="headerlink" title="1. Remove the column that only contains missing values"></a>1. Remove the column that only contains missing values</h2><h3 id="Drop-column"><a href="#Drop-column" class="headerlink" title="Drop column"></a>Drop column</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ri.drop(&apos;value&apos;,aixs=&apos;columns&apos;,inplace=True)</span><br><span class="line"></span><br><span class="line"># aixs = &apos;columns&apos;å³æˆ‘ä»¬è¦è¿›è¡Œçš„æ˜¯åˆ—æ“ä½œï¼Œæœ‰æ—¶å€™ä¹Ÿç”¨aixs = 1ä»£æ›¿ã€‚</span><br><span class="line"># inplace = True,å³å¤„ç†å®Œåæ›¿ä»£åŸæ¥çš„æ•°æ®ï¼Œç›¸å½“äºä¸‹é¢è¿™ç§å†™æ³•ï¼š</span><br><span class="line"></span><br><span class="line">ri = ri.drop(&apos;county_name&apos;,axis=1)</span><br></pre></td></tr></table></figure><p>There is another way to drop the columns, like:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">del ri[&apos;columns_name&apos;]</span><br></pre></td></tr></table></figure><p>you can do that as this, thatâ€™s fine, but itâ€™s not the <em>Pandas way</em>.</p><p>Tips:</p><ul><li>Pay attention to default arguments</li><li>check your work</li><li>There is more than one way to do everything in pandas</li></ul><h2 id="2-Do-men-or-women-speed-more-often"><a href="#2-Do-men-or-women-speed-more-often" class="headerlink" title="2. Do men or women speed more often?"></a>2. Do men or women speed more often?</h2><h3 id="driver-gender-violaton"><a href="#driver-gender-violaton" class="headerlink" title="driver_gender,violaton"></a>driver_gender,violaton</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.violation == &quot;Speeding&quot;].driver_gender.value_counts()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M    32979</span><br><span class="line">F    15482</span><br><span class="line">Name: driver_gender, dtype: int64</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.violation == &quot;Speeding&quot;].driver_gender.value_counts(normalize=True) # get the percent value, å¦‚æœä¸€ä¸ªäººè¶…é€Ÿï¼Œé‚£ä¹ˆå¤šå¤§å‡ ç‡æ˜¯ç”·æ€§æˆ–å¥³æ€§</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">M    0.680527</span><br><span class="line">F    0.319473</span><br><span class="line">Name: driver_gender, dtype: float64</span><br></pre></td></tr></table></figure><p>åè¿‡æ¥çœ‹ï¼Œå¥³æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.driver_gender == &apos;F&apos;].violation.value_counts(normalize=True)</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Speeding               0.658500</span><br><span class="line">Moving violation       0.136277</span><br><span class="line">Equipment              0.105780</span><br><span class="line">Registration/plates    0.043086</span><br><span class="line">Other                  0.029348</span><br><span class="line">Seat belt              0.027009</span><br><span class="line">Name: violation, dtype: float64</span><br></pre></td></tr></table></figure><p>ç”·æ€§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.driver_gender == &apos;M&apos;].violation.value_counts(normalize=True)</span><br></pre></td></tr></table></figure><p>output:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Speeding               0.524350</span><br><span class="line">Moving violation       0.207012</span><br><span class="line">Equipment              0.135671</span><br><span class="line">Other                  0.057668</span><br><span class="line">Registration/plates    0.038461</span><br><span class="line">Seat belt              0.036839</span><br><span class="line">Name: violation, dtype: float64</span><br></pre></td></tr></table></figure></p><p>åˆå¹¶æˆä¸€æ¡å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(&apos;driver_gender&apos;).violation.value_counts(normalize=True)</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">driver_gender  violation          </span><br><span class="line">F              Speeding               0.658500</span><br><span class="line">               Moving violation       0.136277</span><br><span class="line">               Equipment              0.105780</span><br><span class="line">               Registration/plates    0.043086</span><br><span class="line">               Other                  0.029348</span><br><span class="line">               Seat belt              0.027009</span><br><span class="line">M              Speeding               0.524350</span><br><span class="line">               Moving violation       0.207012</span><br><span class="line">               Equipment              0.135671</span><br><span class="line">               Other                  0.057668</span><br><span class="line">               Registration/plates    0.038461</span><br><span class="line">               Seat belt              0.036839</span><br><span class="line">Name: violation, dtype: float64</span><br></pre></td></tr></table></figure><blockquote><p>when you wirte the groupby, just think for each value(in here is gender, man or women).</p></blockquote><ul><li>count(): è¿”å›æ‰€æœ‰æ•°æ®ç»Ÿè®¡ä¹‹å’Œ</li><li>value_counts(): åˆ†åˆ«ç»Ÿè®¡è¯¥æ•°æ®åˆ†ç±»ä¸‹ï¼ˆå¦‚æœæœ‰ï¼‰çš„å€¼</li><li>normalize = True: è¯¥é€‰é¡¹ç­‰äºTrueï¼Œåˆ™ä¼šè¿”å› <em>relative frequencies of the unique values.</em></li></ul><h2 id="3-Does-gender-affect-who-gets-searched-during-a-stop"><a href="#3-Does-gender-affect-who-gets-searched-during-a-stop" class="headerlink" title="3. Does gender affect who gets searched during a stop?"></a>3. Does gender affect who gets searched during a stop?</h2><h3 id="driver-gender-search-conducted"><a href="#driver-gender-search-conducted" class="headerlink" title="driver_gender,search_conducted"></a>driver_gender,search_conducted</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_conducted.value_counts(normalize=True)</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">False    0.965163</span><br><span class="line">True     0.034837</span><br><span class="line">Name: search_conducted, dtype: float64</span><br></pre></td></tr></table></figure><p>Same results with above, how does that work?<br>If the serious value is bool type and you can always just get a sum to konw the number of ones, or a mean to get the percentage of ones, that will simplify you code.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_conducted.mean()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0.03483720473942948</span><br></pre></td></tr></table></figure><p>groupby gender:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(&apos;driver_gender&apos;).search_conducted.mean()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">driver_gender</span><br><span class="line">F    0.020033</span><br><span class="line">M    0.043326</span><br><span class="line">Name: search_conducted, dtype: float64</span><br></pre></td></tr></table></figure><p>Does that prove any things? No, </p><ul><li>Causation is difficult to conclude, so focus on relationships.</li><li>Include all relevant factors when studying a relationship.</li></ul><p>Letâ€™s see details:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby([&apos;driver_gender&apos;,&apos;violation&apos;]).search_conducted.mean()</span><br></pre></td></tr></table></figure></p><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">driver_gender  violation          </span><br><span class="line">F              Equipment              0.042622</span><br><span class="line">               Moving violation       0.036205</span><br><span class="line">               Other                  0.056522</span><br><span class="line">               Registration/plates    0.066140</span><br><span class="line">               Seat belt              0.012598</span><br><span class="line">               Speeding               0.008720</span><br><span class="line">M              Equipment              0.070081</span><br><span class="line">               Moving violation       0.059831</span><br><span class="line">               Other                  0.047146</span><br><span class="line">               Registration/plates    0.110376</span><br><span class="line">               Seat belt              0.037980</span><br><span class="line">               Speeding               0.024925</span><br><span class="line">Name: search_conducted, dtype: float64</span><br></pre></td></tr></table></figure><h2 id="4-Why-is-search-type-missing-so-often"><a href="#4-Why-is-search-type-missing-so-often" class="headerlink" title="4. Why is search_type missing so often?"></a>4. Why is search_type missing so often?</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_conducted.value_counts()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">False    88545</span><br><span class="line">True      3196</span><br><span class="line">Name: search_conducted, dtype: int64</span><br></pre></td></tr></table></figure><p>search_conducted means a search performed, å³ä¸€ä¸ªè½¦ä¸»è¢«è­¦å¯ŸæŸ¥äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.search_type.count()</span><br></pre></td></tr></table></figure><p>output:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Incident to Arrest                                          1219</span><br><span class="line">Probable Cause                                               891</span><br><span class="line">Inventory                                                    220</span><br><span class="line">Reasonable Suspicion                                         197</span><br><span class="line">Protective Frisk                                             161</span><br><span class="line">Incident to Arrest,Inventory                                 129</span><br><span class="line">Incident to Arrest,Probable Cause                            106</span><br><span class="line">Probable Cause,Reasonable Suspicion                           75</span><br><span class="line">Incident to Arrest,Inventory,Probable Cause                   34</span><br><span class="line">Probable Cause,Protective Frisk                               33</span><br><span class="line">Incident to Arrest,Protective Frisk                           33</span><br><span class="line">Inventory,Probable Cause                                      22</span><br><span class="line">Incident to Arrest,Reasonable Suspicion                       13</span><br><span class="line">Incident to Arrest,Inventory,Protective Frisk                 11</span><br><span class="line">Inventory,Protective Frisk                                    11</span><br><span class="line">Protective Frisk,Reasonable Suspicion                         11</span><br><span class="line">Incident to Arrest,Probable Cause,Protective Frisk            10</span><br><span class="line">Incident to Arrest,Probable Cause,Reasonable Suspicion         6</span><br><span class="line">Incident to Arrest,Inventory,Reasonable Suspicion              4</span><br><span class="line">Inventory,Reasonable Suspicion                                 4</span><br><span class="line">Inventory,Probable Cause,Reasonable Suspicion                  2</span><br><span class="line">Inventory,Probable Cause,Protective Frisk                      2</span><br><span class="line">Probable Cause,Protective Frisk,Reasonable Suspicion           1</span><br><span class="line">Incident to Arrest,Protective Frisk,Reasonable Suspicion       1</span><br><span class="line">Name: search_type, dtype: int64</span><br></pre></td></tr></table></figure></p><p>search_type, the reason for search performed, å³è­¦å¯Ÿä¸ºä»€ä¹ˆè¦æŸ¥è¿™ä¸ªè½¦ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.search_conducted == False].search_type.value_counts()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Series([], Name: search_type, dtype: int64)</span><br></pre></td></tr></table></figure><p>return empty series, why? because there is no value to count, nan and null is not a value, if itâ€™s not what you want,add dropna= False in the value_counts() method likt this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.search_conducted == False].search_type.value_counts(dropna=False)</span><br></pre></td></tr></table></figure><h2 id="5-During-a-search-how-often-is-the-driver-frisked"><a href="#5-During-a-search-how-often-is-the-driver-frisked" class="headerlink" title="5. During a search, how often is the driver frisked?"></a>5. During a search, how often is the driver frisked?</h2><blockquote><p>How to know is there a word in a string in Python? You may use â€˜aâ€™ in b, this is the pythoy way, we got pandas way like this:</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ri.search_type.str.contains()</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹æ¯ä¸€è¡Œï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å­—ç¬¦ä¸²åœ¨å…¶ä¸­ï¼Œæœ‰åˆ™è¿”å›Trueï¼Œæ— åˆ™False.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri[&apos;frisk&apos;] = ri.search_type.str.contains(&apos;Probable Cause&apos;)</span><br><span class="line">ri.frisk</span><br></pre></td></tr></table></figure><p>output:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0          NaN</span><br><span class="line">1          NaN</span><br><span class="line">2          NaN</span><br><span class="line">3          NaN</span><br><span class="line">4          NaN</span><br><span class="line">5          NaN</span><br><span class="line">6          NaN</span><br><span class="line">7          NaN</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.frisk.value_counts(dropna=False)</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NaN      88545</span><br><span class="line">False     2014</span><br><span class="line">True      1182</span><br><span class="line">Name: frisk, dtype: int64</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ri.frisk.sum() -&gt; 1182</span><br><span class="line">ri.frisk.mean() -&gt; 0.36983729662077597</span><br><span class="line">1182/(1182+2014) -&gt; 0.36983729662077597</span><br></pre></td></tr></table></figure><p>the mean, is caculated by frisked / (frisked+unfrisked), and will <strong>excluded the missing values.</strong></p><h2 id="6-Which-year-had-the-least-number-of-stops"><a href="#6-Which-year-had-the-least-number-of-stops" class="headerlink" title="6. Which year had the least number of stops?"></a>6. Which year had the least number of stops?</h2><h3 id="Method-1-Use-the-str-slice"><a href="#Method-1-Use-the-str-slice" class="headerlink" title="Method 1: Use the str.slice"></a>Method 1: Use the str.slice</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_date.str.slice(0,4).value_counts()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">2012    10970</span><br><span class="line">2006    10639</span><br><span class="line">2007     9476</span><br><span class="line">2014     9228</span><br><span class="line">2008     8752</span><br><span class="line">2015     8599</span><br><span class="line">2011     8126</span><br><span class="line">2013     7924</span><br><span class="line">2009     7908</span><br><span class="line">2010     7561</span><br><span class="line">2005     2558</span><br></pre></td></tr></table></figure><p>The stop_date format is: 2005-01-02, so slice(0,4) will return 2005, then do a value_counts will get the number of stops in all years.</p><h3 id="Method-2-Use-the-datetime"><a href="#Method-2-Use-the-datetime" class="headerlink" title="Method 2: Use the datetime"></a>Method 2: Use the datetime</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">combined = ri.stop_date.str.cat(ri.stop_time,sep=&apos; &apos;)</span><br><span class="line">ri[&apos;stop_datetime&apos;] = pd.to_datetime(combined)</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">2012    10970</span><br><span class="line">2006    10639</span><br><span class="line">2007     9476</span><br><span class="line">2014     9228</span><br><span class="line">2008     8752</span><br><span class="line">2015     8599</span><br><span class="line">2011     8126</span><br><span class="line">2013     7924</span><br><span class="line">2009     7908</span><br><span class="line">2010     7561</span><br><span class="line">2005     2558</span><br></pre></td></tr></table></figure><p>Use the pd.to_datetime method to convert a concated string to a datatime type value, then add a new col in ri.<br>cat is a string method to concat two string, the sep arg is a string or char you want insert in center.</p><p>So, after that, how to get the year value?</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_datetime.dt.year.value_counts()</span><br></pre></td></tr></table></figure><p>datetime has a method .dt, and you can .year, .day, etc.</p><h2 id="7-How-does-drug-activity-change-by-time-of-day"><a href="#7-How-does-drug-activity-change-by-time-of-day" class="headerlink" title="7. How does drug activity change by time of day?"></a>7. How does drug activity change by time of day?</h2><h3 id="stop-datetime-drugs-related-stop"><a href="#stop-datetime-drugs-related-stop" class="headerlink" title="stop_datetime,drugs_related_stop"></a>stop_datetime,drugs_related_stop</h3><p>Letâ€™s specific, for every hour, what is the rate of the drugs_related_stop?</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">stop_datetime</span><br><span class="line">0     0.019728</span><br><span class="line">1     0.013507</span><br><span class="line">2     0.015462</span><br><span class="line">3     0.017065</span><br><span class="line">4     0.011811</span><br><span class="line">5     0.004762</span><br><span class="line">6     0.003040</span><br><span class="line">7     0.003281</span><br><span class="line">8     0.002687</span><br><span class="line">9     0.006288</span><br><span class="line">10    0.005714</span><br><span class="line">11    0.006976</span><br><span class="line">12    0.004467</span><br><span class="line">13    0.010326</span><br><span class="line">14    0.007810</span><br><span class="line">15    0.006416</span><br><span class="line">16    0.005723</span><br><span class="line">17    0.005517</span><br><span class="line">18    0.010148</span><br><span class="line">19    0.011596</span><br><span class="line">20    0.008084</span><br><span class="line">21    0.013342</span><br><span class="line">22    0.013533</span><br><span class="line">23    0.016344</span><br><span class="line">Name: drugs_related_stop, dtype: float64</span><br></pre></td></tr></table></figure><p>show it!</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot()</span><br></pre></td></tr></table></figure><p>output:</p><p><img src="https://mcwywq.bn.files.1drv.com/y4mkRchu7eh5ClZ_5hMguC0V-k3KY7tnt0-KpbEoif1EgVMEXCdt5VIxstOsVv-urRgNOdK6ebfF1SfkOyqWmxjcfz1a6F9_uQQpW79nkbZmYiKGVvAr1M6vXbh9ly0DNOSCIkNgyrDwQkjpDXtfRMwtfsZkhyd7UqsZJeKMxSsGfClSDqucjlFGZ3A7xkFxLDzORpau6TMPGXIkjjDjMkXHw/drugs_related.png?psid=1" alt=""></p><p>if you want the notebook auto show the img, make sure you imported the packge.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure><p>then when you type .plot() the img will show automatically.</p><p>Lesssons:</p><ul><li>Consider removing chunks of data that may be biased</li><li>Use the datetime data type for dates and times</li></ul><h2 id="8-Do-most-stops-occur-at-night"><a href="#8-Do-most-stops-occur-at-night" class="headerlink" title="8. Do most stops occur at night?"></a>8. Do most stops occur at night?</h2><p>Let do this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_datetime.dt.hour.value_counts().plot()</span><br></pre></td></tr></table></figure><p>you will get an error img, because the plot is generated by the value, not the index(in here is the hour),<br>so you need to sort with index first,</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_datetime.dt.hour.value_counts().sort_index().plot()</span><br></pre></td></tr></table></figure><p>ouput:</p><p><img src="https://mcwywq.bn.files.1drv.com/y4mkRchu7eh5ClZ_5hMguC0V-k3KY7tnt0-KpbEoif1EgVMEXCdt5VIxstOsVv-urRgNOdK6ebfF1SfkOyqWmxjcfz1a6F9_uQQpW79nkbZmYiKGVvAr1M6vXbh9ly0DNOSCIkNgyrDwQkjpDXtfRMwtfsZkhyd7UqsZJeKMxSsGfClSDqucjlFGZ3A7xkFxLDzORpau6TMPGXIkjjDjMkXHw/drugs_related.png?psid=1" alt=""></p><p>and there is a details version:</p><p><img src="https://bn1301files.storage.live.com/y4mfDJ5BskfJi6Bl_KlVmBzKUzosUMz4c6sJtnFknHh-mKevDycVq5ghobnTWVfINyG-pQDAIfZK6UNCZOSpUP2IxLJJtgkpS4TN9lmc0VN0OcINS3bjH7EoGLkpNl0gsmiIlcTiyxb7K_qZyjTjmGu3-rCJ52mGcepghI8NxsInK-WUiy51tw0vQJGV-vKmdX78YOBeACPpGGemOYrpTmCcg/stop_hour_details.png?psid=1&amp;width=1278&amp;height=852" alt=""></p><p>bt, how to define the night, In my view 22-4 is night, I want to filter the hours:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ri[(ri.stop_datetime.dt.hour &gt; 4) &amp; (ri.stop_datetime.dt.hour &lt; 22)].shape</span><br></pre></td></tr></table></figure><p>if you have a category, want to apply the hours, you can define a method and map to the hours.</p><h2 id="9-Find-the-bad-data-in-the-stop-duration-column-and-fix-it"><a href="#9-Find-the-bad-data-in-the-stop-duration-column-and-fix-it" class="headerlink" title="9. Find the bad data in the stop_duration column and fix it"></a>9. Find the bad data in the stop_duration column and fix it</h2><p>Check this value counts:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_duration.value_counts()</span><br></pre></td></tr></table></figure><p>output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0-15 Min     69543</span><br><span class="line">16-30 Min    13635</span><br><span class="line">30+ Min       3228</span><br><span class="line">2                1</span><br><span class="line">1                1</span><br><span class="line">Name: stop_duration, dtype: int64</span><br></pre></td></tr></table></figure><p>We want to turn the stop_duration value equals â€˜1â€™ to â€˜NANâ€™, how?</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri[(ri.stop_duration == &apos;1&apos;) | (ri.stop_duration == &apos;2&apos;)].stop_duration == &apos;NAN&apos;</span><br></pre></td></tr></table></figure><p>that looks make sense,but check the value counts, it doesâ€™nt work.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0-15 Min     69543</span><br><span class="line">16-30 Min    13635</span><br><span class="line">30+ Min       3228</span><br><span class="line">2                1</span><br><span class="line">1                1</span><br><span class="line">Name: stop_duration, dtype: int64</span><br></pre></td></tr></table></figure><p>why? acturlly, you may get a warnning,</p><blockquote><p><em>A value is trying to be set on a copy of a slice from a DataFrame.</em></p></blockquote><p>You should use loc.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ri.loc[(ri.stop_duration == &apos;1&apos;) | (ri.stop_duration == &apos;2&apos;),&apos;stop_duration&apos;] = &apos;NAN&apos;</span><br></pre></td></tr></table></figure><p>check again:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0-15 Min     69543</span><br><span class="line">16-30 Min    13635</span><br><span class="line">30+ Min       3228</span><br><span class="line">NAN              2</span><br><span class="line">Name: stop_duration, dtype: int64</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ¯”è¾ƒä¸€ä¸‹è¿™ä¸¤è€…ç”¨æ³•ä¸Šçš„åŒºåˆ«ï¼Œå¦‚æœæƒ³è¦äº†è§£æ›´å¤šlocçš„ç”¨æ³•ï¼Œå¯ä»¥å…³æ³¨è¯¥ä½œè€…çš„å¦ä¸€ä¸ªå•ç‹¬ä»‹ç»çš„è§†é¢‘ï¼Œ<a href="https://www.youtube.com/watch?v=xvpNA7bC8cs" target="_blank" rel="noopener">æ²¹ç®¡é“¾æ¥</a>ã€‚</p><p>but you get two string format â€˜NANâ€™, you want get a really NAN value, okay, let fix it:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">ri.loc[ri.stop_duration == &apos;NAN&apos;,&apos;stop_duration&apos;] = np.nan</span><br></pre></td></tr></table></figure><p>there you go!</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> 0-15 Min     69543</span><br><span class="line">16-30 Min    13635</span><br><span class="line">30+ Min       3228</span><br><span class="line">Name: stop_duration, dtype: int64</span><br></pre></td></tr></table></figure><h1 id="Ploting"><a href="#Ploting" class="headerlink" title="Ploting"></a>Ploting</h1><h2 id="å¯¼å…¥ç›¸å…³åŒ…"><a href="#å¯¼å…¥ç›¸å…³åŒ…" class="headerlink" title="å¯¼å…¥ç›¸å…³åŒ…"></a>å¯¼å…¥ç›¸å…³åŒ…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">from datetime import datetime</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br></pre></td></tr></table></figure><h2 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ri = pd.read_csv(&quot;C:/Users/Fan.ZhangFZ/Desktop/police.csv&quot;)</span><br><span class="line">ri.drop(&apos;county_name&apos;,axis=&apos;columns&apos;,inplace=True)</span><br><span class="line">ri.dtypes</span><br></pre></td></tr></table></figure><h2 id="å¹´é¾„åˆ†å¸ƒçŠ¶å†µ"><a href="#å¹´é¾„åˆ†å¸ƒçŠ¶å†µ" class="headerlink" title="å¹´é¾„åˆ†å¸ƒçŠ¶å†µ"></a>å¹´é¾„åˆ†å¸ƒçŠ¶å†µ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ageinfo = ri.driver_age.value_counts()</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(12,8))</span><br><span class="line">ax = fig.add_subplot(1,1,1)</span><br><span class="line">ax.bar(ageinfo.index,ageinfo.values,color=&apos;g&apos;)</span><br><span class="line">ax.set_xlabel(&apos;Driver age&apos;)</span><br><span class="line">ax.set_ylabel(&apos;Number of driver&apos;)</span><br><span class="line">xticks = ax.set_xticks(np.arange(15,100,5))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="æœæŸ¥æ—¶é—´"><a href="#æœæŸ¥æ—¶é—´" class="headerlink" title="æœæŸ¥æ—¶é—´"></a>æœæŸ¥æ—¶é—´</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">stoped_datetime = ri.stop_date.str.cat(ri.stop_time,sep=&apos; &apos;)</span><br><span class="line">ri[&apos;stoped_datetime&apos;] = pd.to_datetime(stoped_datetime)</span><br><span class="line">year_counts = ri.stoped_datetime.dt.year.value_counts().sort_index()</span><br><span class="line">hour_counts = ri.stoped_datetime.dt.hour.value_counts().sort_index()</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(12,14))</span><br><span class="line">ax1 = fig.add_subplot(2,1,1)</span><br><span class="line">ax1.plot(year_counts.index,year_counts.values,marker=&apos;o&apos;,color=&apos;y&apos;,linestyle=&apos;--&apos;)</span><br><span class="line">ax1.set_xlabel(&apos;Years&apos;)</span><br><span class="line">ax1.set_ylabel(&apos;Search Count&apos;)</span><br><span class="line">ax1.set_title(&quot;Search rate in diffrent years&quot;)</span><br><span class="line"></span><br><span class="line">ax2 = fig.add_subplot(2,1,2)</span><br><span class="line">ax2.set_xlabel(&apos;Hours&apos;)</span><br><span class="line">ax2.set_ylabel(&apos;Search Count&apos;)</span><br><span class="line">ax2.plot(hour_counts.index,hour_counts.values,marker=&apos;o&apos;,color=&apos;b&apos;,linestyle=&apos;--&apos;)</span><br><span class="line">ax2.set_title(&quot;Search rate in diffrent hours&quot;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="ç§æ—æƒ…å†µ"><a href="#ç§æ—æƒ…å†µ" class="headerlink" title="ç§æ—æƒ…å†µ"></a>ç§æ—æƒ…å†µ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">driver_race = ri.driver_race.value_counts()</span><br><span class="line">fig = plt.figure(figsize=(12,8))</span><br><span class="line">ax = fig.add_subplot(1,1,1)</span><br><span class="line">ax.bar(driver_race.index,driver_race.values)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="ç”·å¥³è¶…é€Ÿçš„æ¯”ä¾‹"><a href="#ç”·å¥³è¶…é€Ÿçš„æ¯”ä¾‹" class="headerlink" title="ç”·å¥³è¶…é€Ÿçš„æ¯”ä¾‹"></a>ç”·å¥³è¶…é€Ÿçš„æ¯”ä¾‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.violation == &quot;Speeding&quot;].driver_gender.value_counts().plot.pie(figsize=(8, 8),labels=[&apos;Men&apos;, &apos;Female&apos;],autopct=&apos;%.2f&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="ç”·æ€§è¿ç« ç±»å‹å æ¯”"><a href="#ç”·æ€§è¿ç« ç±»å‹å æ¯”" class="headerlink" title="ç”·æ€§è¿ç« ç±»å‹å æ¯”"></a>ç”·æ€§è¿ç« ç±»å‹å æ¯”</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ri[ri.driver_gender == &apos;M&apos;].violation.value_counts(normalize=True).plot.pie(figsize=(8, 8),autopct=&apos;%.2f&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="å¥³æ€§è¿ç« å æ¯”"><a href="#å¥³æ€§è¿ç« å æ¯”" class="headerlink" title="å¥³æ€§è¿ç« å æ¯”"></a>å¥³æ€§è¿ç« å æ¯”</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri[ri.driver_gender == &apos;F&apos;].violation.value_counts(normalize=True).plot.pie(figsize=(8, 8),autopct=&apos;%.2f&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="åˆå¹¶å±•ç¤º"><a href="#åˆå¹¶å±•ç¤º" class="headerlink" title="åˆå¹¶å±•ç¤º"></a>åˆå¹¶å±•ç¤º</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data = ri.groupby([&apos;driver_gender&apos;]).violation.value_counts(normalize=True)*100</span><br><span class="line">fig, ax = plt.subplots(figsize=(15,7))</span><br><span class="line"># use unstack()</span><br><span class="line">data.unstack().plot.bar(ax=ax,stacked=True)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="è¢«æœæŸ¥äººå‘˜ä¸ºç”·ã€å¥³çš„æ¦‚ç‡"><a href="#è¢«æœæŸ¥äººå‘˜ä¸ºç”·ã€å¥³çš„æ¦‚ç‡" class="headerlink" title="è¢«æœæŸ¥äººå‘˜ä¸ºç”·ã€å¥³çš„æ¦‚ç‡"></a>è¢«æœæŸ¥äººå‘˜ä¸ºç”·ã€å¥³çš„æ¦‚ç‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = ri.groupby(&apos;driver_gender&apos;).search_conducted.mean()</span><br><span class="line">fig,ax = plt.subplots(figsize=(5,7))</span><br><span class="line">data.plot.pie(ax=ax,autopct=&apos;%.2f&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="è¿ç« ç±»å‹å æ¯”"><a href="#è¿ç« ç±»å‹å æ¯”" class="headerlink" title="è¿ç« ç±»å‹å æ¯”"></a>è¿ç« ç±»å‹å æ¯”</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search_type = ri.search_type.value_counts()</span><br><span class="line">fig,ax = plt.subplots(figsize=(6,10))</span><br><span class="line">search_type.plot.barh(color=&apos;r&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="å“ªä¸€å¹´è¿ç« æœ€å¤š"><a href="#å“ªä¸€å¹´è¿ç« æœ€å¤š" class="headerlink" title="å“ªä¸€å¹´è¿ç« æœ€å¤š"></a>å“ªä¸€å¹´è¿ç« æœ€å¤š</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ri.stop_date.str.slice(0,4).value_counts().sort_index().plot.barh(figsize=(12,8),color=&apos;y&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="ä¸€å¤©ä¸­ä»€ä¹ˆæ—¶å€™æ¯’é©¾ç‡æœ€é«˜ï¼Ÿ"><a href="#ä¸€å¤©ä¸­ä»€ä¹ˆæ—¶å€™æ¯’é©¾ç‡æœ€é«˜ï¼Ÿ" class="headerlink" title="ä¸€å¤©ä¸­ä»€ä¹ˆæ—¶å€™æ¯’é©¾ç‡æœ€é«˜ï¼Ÿ"></a>ä¸€å¤©ä¸­ä»€ä¹ˆæ—¶å€™æ¯’é©¾ç‡æœ€é«˜ï¼Ÿ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">drug_hour_rate = ri.groupby(ri.stoped_datetime.dt.hour).drugs_related_stop.mean() * 100</span><br><span class="line">fig,ax = plt.subplots(figsize=(15,7))</span><br><span class="line">xticks = ax.set_xticks(np.arange(0,24,1))</span><br><span class="line">ax.set_title(&apos;Rate for drugs related stop in a day&apos;)</span><br><span class="line">ax.set_ylabel(&apos;Rate,%&apos;)</span><br><span class="line">ax.set_xlabel(&apos;Hours&apos;)</span><br><span class="line">drug_hour_rate.plot(ax=ax)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="ç”Ÿè¯"><a href="#ç”Ÿè¯" class="headerlink" title="ç”Ÿè¯"></a>ç”Ÿè¯</h1><ul><li>searchï¼šè¿™é‡Œåº”è¯¥ç†è§£ä¸ºè­¦å¯Ÿçš„æœæŸ¥</li><li>hypothetical: å‡è®¾</li><li>slick way,ç²¾æ˜çš„å°æŠ€å·§</li><li>registration searched: è½¦ç‰Œé€ å‡è¿ç« </li><li>conducted: å¤„ç†ã€è¡Œä¸º</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸€æ¬¡å¶ç„¶çš„æœºä¼šçœ‹åˆ°&lt;a href=&quot;&quot;&gt;ç‹æ ‘ä¹‰&lt;/a&gt;è€å¸ˆçš„æ¨èYouTubeä¸Šçš„è¿™ä¸ªpandasè§†é¢‘æ•™ç¨‹ï¼Œäºæ˜¯èŠ±äº†ç‚¹æ—¶é—´å­¦ä¹ äº†ä¸€ä¸‹ï¼Œä¹Ÿå°±æœ‰äº†è¿™ç¯‡ç¬”è®°ï¼Œå› ä¸ºè¯¾ç¨‹æ˜¯è‹±æ–‡çš„ï¼Œä¹Ÿæ²¡æœ‰æä¾›&lt;br&gt;ä¸­æ–‡å­—å¹•ï¼Œæ‰€ä»¥æˆ‘çš„ç¬”è®°ä¹Ÿå°±æ‡’å¾—å†ç”¨ä¸­æ–‡å†™äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="Data Science" scheme="http://wittyfans.com/tags/Data-Science/"/>
    
      <category term="Pandas" scheme="http://wittyfans.com/tags/Pandas/"/>
    
      <category term="Big Data" scheme="http://wittyfans.com/tags/Big-Data/"/>
    
  </entry>
  
  <entry>
    <title>Pandaså¸¸ç”¨æ“ä½œ</title>
    <link href="http://wittyfans.com/coding/Pandas%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C.html"/>
    <id>http://wittyfans.com/coding/Pandaså¸¸ç”¨æ“ä½œ.html</id>
    <published>2018-12-29T04:16:02.000Z</published>
    <updated>2018-12-31T03:38:10.182Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¸¸ç”¨çš„æ“ä½œä¸å‘½ä»¤ï¼Œè®°å½•ä¸€ä¸‹</p></blockquote><a id="more"></a><h1 id="Pandas-å¸¸ç”¨æ“ä½œ"><a href="#Pandas-å¸¸ç”¨æ“ä½œ" class="headerlink" title="Pandas å¸¸ç”¨æ“ä½œ"></a>Pandas å¸¸ç”¨æ“ä½œ</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1. æ›´æ”¹åˆ—çš„é¡ºåº</span><br><span class="line">pdusersInfo = pdusersInfo[[&apos;username&apos;,&apos;sex&apos;,&apos;platform&apos;]]</span><br><span class="line"></span><br><span class="line">2. ä»å­—å…¸æ„é€ DataFrame</span><br><span class="line">usersInfo = &#123;&apos;username&apos;:username,&apos;sex&apos;:usersex,&apos;platform&apos;:platform&#125;</span><br><span class="line">pdusersInfo = pd.DataFrame.from_dict(usersInfo)</span><br><span class="line"></span><br><span class="line">3. æœ¬åœ°jsonè½¬æ¢æˆpdæ•°æ®</span><br><span class="line">import json</span><br><span class="line">with open(&quot;path/filename.json&quot;,encoding=&quot;utf-8&quot;) as jsonFile:</span><br><span class="line">    data = json.load(jsonFile)</span><br><span class="line">pdJson = pd.DataFrame(data)</span><br><span class="line"></span><br><span class="line">4.æ•°æ®åˆ†æ®µç»Ÿè®¡ï¼Œbinsæ˜¯åˆ†æ®µçš„æ ‡è®°ï¼Œagesä¸ºæ•°æ®ï¼Œæ•°æ®å°†ä¼šæŒ‰ç…§18-25,25-35ç­‰åˆ†æ®µç»Ÿè®¡ï¼Œrightä¸ºæ§åˆ¶æ•°æ®åå‘å“ªä¸€è¾¹</span><br><span class="line">ages = [20,22,21,27,47,33,67,42,100,60,60]</span><br><span class="line">bins = [18,25,35,60,100]</span><br><span class="line"></span><br><span class="line">cats = pd.cut(ages,bins,right=False)</span><br><span class="line">pd.value_counts(cats)</span><br><span class="line"></span><br><span class="line">5. å»é‡å¤</span><br><span class="line">data.drop_duplicates() -&gt; å»æ‰æ‰€æœ‰åˆ—çš„æ•°æ®éƒ½ä¸€æ ·çš„</span><br><span class="line">data.drop_duplicates([&quot;name&quot;,&quot;age&quot;]) -&gt; å»é™¤åå­—å’Œå¹´é¾„ä¸€æ ·çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">6. åˆå¹¶ä¸¤ä¸ªè¡¨</span><br><span class="line">c = a.append(b)</span><br><span class="line">c.data.drop_duplicates()</span><br><span class="line"></span><br><span class="line">7. ç»Ÿè®¡åˆ—ä¸­æŸä¸ªå€¼å‡ºç°çš„æ¬¡æ•°</span><br><span class="line">pd.value_counts(colname.value)</span><br><span class="line"></span><br><span class="line">8. Exceläº¤äº’</span><br><span class="line">&gt; è¿™ä¸‰æ¡ä»£ç çš„æ„æ€æ˜¯ï¼Œå¯¼å…¥pandasï¼Œè¯»å–æ–‡ä»¶ï¼Œå¹¶ç®€è¦æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ã€‚</span><br><span class="line">import pandas as pd</span><br><span class="line">data = pd.read_excel(&quot;C://Users/username/path/filename.xlsx&quot;)</span><br><span class="line">data.tail</span><br><span class="line">data.dtypes</span><br><span class="line"></span><br><span class="line">&gt; å¯¼å‡º</span><br><span class="line">out_path = &quot;/Users/wittyfans/Desktop/4F/PhoneData.xlsx&quot;</span><br><span class="line">writer = pd.ExcelWriter(out_path , engine=&apos;xlsxwriter&apos;)</span><br><span class="line">data.to_excel(writer, sheet_name=&apos;Sheet1&apos;)</span><br><span class="line">writer.save()</span><br><span class="line"></span><br><span class="line">9. è¿‡æ»¤</span><br><span class="line">&gt; è¿‡æ»¤å‰äº”æ¡æ•°æ®ï¼š</span><br><span class="line">data.ID[:5]</span><br><span class="line"></span><br><span class="line">10. ä¸¢å¼ƒç©ºå€¼</span><br><span class="line"> data.dropna()</span><br><span class="line"></span><br><span class="line">11. ç±»å‹è½¬æ¢</span><br><span class="line">int = double.astype(int)</span><br><span class="line"></span><br><span class="line">13. ä»htmlè¯·æ±‚è¡¨</span><br><span class="line">url = &apos;/Users/wittyfans/Desktop/a.html&apos;</span><br><span class="line">dfs = pd.read_html(url,header=0)</span><br><span class="line"></span><br><span class="line">14. ä»å­—å…¸æ„é€ DataFrame</span><br><span class="line">users = &#123;&apos;names&apos;:usernames,&apos;sex&apos;:usersexs,&apos;platform&apos;:userplatform&#125;</span><br><span class="line">users = pd.DataFrame(users)</span><br><span class="line"></span><br><span class="line">15. æ ¹æ®æŒ‡å®šå€¼åˆ†ç»„</span><br><span class="line">data.groupby(&apos;platform&apos;)</span><br><span class="line"></span><br><span class="line">16. æ ¹æ®æŒ‡å®šåˆ—æ’åº</span><br><span class="line">data.sort_values(&apos;names&apos;,ascending=False)</span><br><span class="line"></span><br><span class="line">17. csväº¤äº’</span><br><span class="line">pd.read_csv(&quot;/Users/wittyfans/Desktop/example.csv&quot;)</span><br><span class="line"></span><br><span class="line">18. é€‰æ‹©æ•°æ®</span><br><span class="line">- [å‚è€ƒ](https://morvanzhou.github.io/tutorials/data-manipulation/np-pd/3-2-pd-indexing/)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¸¸ç”¨çš„æ“ä½œä¸å‘½ä»¤ï¼Œè®°å½•ä¸€ä¸‹&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="Data" scheme="http://wittyfans.com/tags/Data/"/>
    
  </entry>
  
  <entry>
    <title>V2ray Quick Start</title>
    <link href="http://wittyfans.com/coding/V2ray-Quick-Start.html"/>
    <id>http://wittyfans.com/coding/V2ray-Quick-Start.html</id>
    <published>2018-10-20T09:47:39.000Z</published>
    <updated>2018-12-29T04:20:15.207Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Deploy v2ray is so simple, but speed is not fast in my server.</p></blockquote><a id="more"></a><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><p>In Debian , Just input the command in below:</p><blockquote><p>bash &lt;(curl -L -s <a href="https://install.direct/go.sh" target="_blank" rel="noopener">https://install.direct/go.sh</a>)</p></blockquote><p>And you just need to wait, all things will get done automatically.</p><h1 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h1><p>First, Find the config fileâ€™s location:</p><blockquote><p>vi /etc/v2ray/config.json</p></blockquote><p>you will see this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;inbound&quot;: &#123;</span><br><span class="line">    &quot;port&quot;: you_port_nums,</span><br><span class="line">    &quot;protocol&quot;: &quot;vmess&quot;,</span><br><span class="line">    &quot;settings&quot;: &#123;</span><br><span class="line">      &quot;clients&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;id&quot;: &quot;the_id_that_generate_for_you&quot;,</span><br><span class="line">          &quot;level&quot;: 1,</span><br><span class="line">          &quot;alterId&quot;: 64</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  and more code</span><br></pre></td></tr></table></figure><p>Change the port if you need, copy the id in clients.</p><p>Itâ€™s time to start the v2ray, just type:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service v2ray start</span><br></pre></td></tr></table></figure><p>to start the v2ray. Alse you can type:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service v2ray start|stop|status|reload|restart|force-reload</span><br></pre></td></tr></table></figure><p>to get more control of the  v2ray service.</p><p>Untill now, Itâ€™s ok In server side, Letâ€™s go to the client side.</p><h1 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h1><p>In your application, Click add button, input the port and id that I requires you to copy. Save and you can connect to the server now. </p><p>Enjoy it.</p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>The script installs the following files.</p><ul><li>/usr/bin/v2ray/v2ray: V2Ray executable</li><li>/usr/bin/v2ray/v2ctl: Utility</li><li>/etc/v2ray/config.json: Config file</li><li>/usr/bin/v2ray/geoip.dat: IP data file</li><li>/usr/bin/v2ray/geosite.dat: domain data file</li></ul><p>go.sh supports the following parameters.</p><ul><li>-p or â€“proxy: Use a proxy to download V2Ray packages. Same as curl format, such as â€œsocks5://127.0.0.1:1080â€ or â€œ<a href="http://127.0.0.1:3128&quot;" target="_blank" rel="noopener">http://127.0.0.1:3128&quot;</a>.</li><li>-f or â€“force: Force installation. The script will assume V2Ray was not installed at all.</li><li>â€“version: The version to be installed, such as â€œv1.13â€. Default value is the latest stable release.</li><li>â€“local: Use a local package for installation.</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://www.v2ray.com/index.html" target="_blank" rel="noopener">Official site</a></li><li><a href="https://toutyrater.github.io/" target="_blank" rel="noopener">Easy version of official tutorial</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Deploy v2ray is so simple, but speed is not fast in my server.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="linux" scheme="http://wittyfans.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Windows CMDå‘½ä»¤è®°å½•</title>
    <link href="http://wittyfans.com/coding/Windows-CMD%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95.html"/>
    <id>http://wittyfans.com/coding/Windows-CMDå‘½ä»¤è®°å½•.html</id>
    <published>2018-10-08T08:11:12.000Z</published>
    <updated>2018-10-08T08:25:33.994Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ•´ç†äº†ä¸€ä¸‹å¸¸ç”¨çš„CMDå‘½ä»¤ ğŸ“‡</p></blockquote><a id="more"></a><h1 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">D: è¿›å…¥dç›˜</span><br><span class="line">dir åˆ—ä¸¾å½“å‰ç›®å½•çš„æ–‡ä»¶ï¼Œç±»ä¼¼linuxçš„ls</span><br><span class="line">md åˆ›å»ºç›®å½•</span><br><span class="line">rd åˆ é™¤ç›®å½•</span><br><span class="line">echo %PROCESSOR_ARCHITECTURE%æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ä½æ•°</span><br><span class="line">setæŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒå˜é‡</span><br><span class="line">netstat -anoæŸ¥çœ‹å¼€æ”¾çš„ç«¯å£</span><br><span class="line">netstat -an | find &quot;3389&quot;æŸ¥çœ‹3389å¼€æ”¾æƒ…å†µ</span><br><span class="line">ipconfig /allæŸ¥è¯¢æœ¬æœºIPæ®µï¼Œæ‰€åœ¨åŸŸç­‰</span><br><span class="line">net config Workstationå½“å‰è®¡ç®—æœºåï¼Œå…¨åï¼Œç”¨æˆ·åï¼Œç³»ç»Ÿç‰ˆæœ¬ï¼Œå·¥ä½œç«™åŸŸï¼Œç™»é™†åŸŸ</span><br><span class="line">net useræœ¬æœºç”¨æˆ·åˆ—è¡¨</span><br><span class="line">net localhroup administratorsæœ¬æœºç®¡ç†å‘˜[é€šå¸¸å«æœ‰åŸŸç”¨æˆ·]</span><br><span class="line">net user /domainæŸ¥è¯¢åŸŸç”¨æˆ·</span><br><span class="line">net user ç”¨æˆ·å /domainè·å–æŒ‡å®šç”¨æˆ·çš„è´¦æˆ·ä¿¡æ¯</span><br><span class="line">net user /domain b404 passä¿®æ”¹åŸŸå†…ç”¨æˆ·å¯†ç ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™</span><br><span class="line">net group /domainæŸ¥è¯¢åŸŸé‡Œé¢çš„å·¥ä½œç»„</span><br><span class="line">net group ç»„å /domainæŸ¥è¯¢åŸŸä¸­çš„æŸå·¥ä½œç»„</span><br><span class="line">net group &quot;domain admins&quot; /domainæŸ¥è¯¢åŸŸç®¡ç†å‘˜åˆ—è¡¨</span><br><span class="line">net group &quot;enterprise admins&quot; /domainè·å¾—ä¼ä¸šç®¡ç†å‘˜åˆ—è¡¨</span><br><span class="line">net group ç»„å /del /domainåˆ é™¤åŸŸä¸­çš„æŸç»„</span><br><span class="line">net group ç»„å ç»„æˆå‘˜å /del /domainåˆ é™¤åŸŸä¸­çš„æŸç»„çš„ç»„æˆå‘˜</span><br><span class="line">net localgroup administrators /domainç™»å½•æœ¬æœºçš„åŸŸç®¡ç†å‘˜</span><br><span class="line">net group ç»„å /addå¢åŠ åŸŸä¸­çš„ç»„</span><br><span class="line">net localgroup administrators workgroup\user001 /addåŸŸç”¨æˆ·æ·»åŠ åˆ°æœ¬æœº</span><br><span class="line">net group &quot;domain controllers&quot; /domainæŸ¥çœ‹åŸŸæ§åˆ¶å™¨(å¦‚æœæœ‰å¤šå°)</span><br><span class="line">net time /domainåˆ¤æ–­ä¸»åŸŸï¼Œä¸»åŸŸæœåŠ¡å™¨éƒ½åšæ—¶é—´æœåŠ¡å™¨</span><br><span class="line">net config workstationå½“å‰ç™»å½•åŸŸ</span><br><span class="line">net sessionæŸ¥çœ‹å½“å‰ä¼šè¯</span><br><span class="line">net use \\ip\ipc$ pawword /user:username@domainå»ºç«‹IPCä¼šè¯[ç©ºè¿æ¥-***]</span><br><span class="line">net view \\ipæŸ¥è¯¢æŸIPå…±äº«</span><br><span class="line">net use z: \\192.168.200.21\æ–‡ä»¶å¤¹åå»ºç«‹æ˜ å°„åˆ°æœ¬æœºZç›˜</span><br><span class="line">net shareæŸ¥çœ‹SMBæŒ‡å‘çš„è·¯å¾„[å³å…±äº«]</span><br><span class="line">at \\192.168.200.21:50 c:\windows\fuxk.exeåœ¨å…±äº«ä¸»æœºä¸Šæ‰§è¡Œ</span><br><span class="line">net viewæŸ¥è¯¢åŒä¸€åŸŸå†…æœºå™¨åˆ—è¡¨</span><br><span class="line">net view /domainæŸ¥è¯¢åŸŸåˆ—è¡¨</span><br><span class="line">net view /domain:testæŸ¥çœ‹teståŸŸä¸­è®¡ç®—æœºåˆ—è¡¨</span><br><span class="line">net view \\DCçš„æœºå™¨åå­—æŸ¥çœ‹åŸŸæ§å…±äº«æƒ…å†µ</span><br><span class="line">nltest /domain_trustsè·å–åŸŸä¿¡ä»»ä¿¡æ¯</span><br><span class="line">net sessionæŸ¥çœ‹å½“å‰ä¼šè¯</span><br><span class="line">net startæŸ¥çœ‹å½“å‰è¿è¡Œçš„æœåŠ¡</span><br><span class="line">net time /domainæŸ¥è¯¢ä¸»åŸŸæœåŠ¡å™¨çš„æ—¶é—´</span><br><span class="line">net time \\192.168.200.21æŸ¥çœ‹192.168.200.21æœºå™¨çš„æ—¶é—´</span><br><span class="line">echo %logonserver%æŸ¥çœ‹ç™»é™†åˆ°è¿™å°æœåŠ¡å™¨çš„è®¡ç®—æœº</span><br><span class="line">net accountsæŸ¥çœ‹æœ¬åœ°å¯†ç ç­–ç•¥</span><br><span class="line">net accounts /domainæŸ¥çœ‹åŸŸå¯†ç ç­–ç•¥</span><br><span class="line">nbtstat â€“A ipnetbios æŸ¥è¯¢</span><br><span class="line">netstat â€“an/ano/anbç½‘ç»œè¿æ¥æŸ¥è¯¢</span><br><span class="line">netsh firewall show configæŸ¥çœ‹é˜²ç«å¢™ç­–ç•¥</span><br><span class="line">netsh firewall show stateæŸ¥çœ‹é˜²ç«å¢™ç­–ç•¥</span><br><span class="line">route printè·¯ç”±è¡¨</span><br><span class="line">tracert IPè·¯ç”±è·Ÿè¸ª</span><br><span class="line">arp -aåˆ—å‡ºæœ¬ç½‘æ®µå†…æ‰€æœ‰æ´»è·ƒçš„IPåœ°å€</span><br><span class="line">arp -s (ip + mac)ç»‘å®šmacå’ŒIP</span><br><span class="line">arp -d (iP + mac)è§£ç»‘IPå’ŒMac</span><br><span class="line">tasklist /VæŸ¥çœ‹è¿›ç¨‹[æ˜¾ç¤ºå¯¹åº”ç”¨æˆ·]</span><br><span class="line">tasklist /S ip /U domain\username /P /VæŸ¥çœ‹è¿œç¨‹è®¡ç®—æœºè¿›ç¨‹åˆ—è¡¨</span><br><span class="line">psexec \\192.168.200.21 -u administrator -p b404pass -c gsecdump.exe -uä»åŸŸæœåŠ¡å™¨å¯†ç å­˜å‚¨æ–‡ä»¶windows/ntds/ntds.ditå¯¼å‡ºhashå€¼å‡ºæ¥</span><br><span class="line">gsecdump -aè·å–åŸŸç™»ç®¡ç†å‘˜ç™»å½•è¿‡å¾—hashå€¼ï¼Œè¿™é‡Œgescdumpä¸ºç¬¬ä¸‰æ–¹å¯¼å‡ºADåŸŸçš„hashå€¼</span><br><span class="line">tasklist /S IPåœ°å€ /U åŸŸå\ç”¨æˆ·å /P /VæŸ¥çœ‹è¿œç¨‹è®¡ç®—æœºè¿›ç¨‹</span><br><span class="line">tasklist /svcæŸ¥çœ‹è¿›ç¨‹</span><br><span class="line">taskkill /im è¿›ç¨‹åç§°(cmd.exe)ç»“æŸè¿›ç¨‹</span><br><span class="line">taskkill /pid[è¿›ç¨‹ç ]-t(ç»“æŸè¯¥è¿›ç¨‹) -f(å¼ºåˆ¶ç»“æŸè¯¥è¿›ç¨‹ä»¥åŠæ‰€æœ‰å­è¿›ç¨‹)</span><br><span class="line">ping ä¸»æœºåæ˜¾ç¤ºIP</span><br><span class="line">qprocess *ç±»ä¼¼tasklist</span><br><span class="line">qprocess /SERVER:IPè¿œç¨‹æŸ¥çœ‹è®¡ç®—æœºè¿›ç¨‹åˆ—è¡¨</span><br><span class="line">nslookup â€“qt-MX Yahoo.comæŸ¥çœ‹é‚®ä»¶æœåŠ¡å™¨</span><br><span class="line">whoami /allæŸ¥è¯¢å½“å‰ç”¨æˆ·æƒé™ç­‰</span><br><span class="line">setæŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒå˜é‡</span><br><span class="line">systeminfoæŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</span><br><span class="line">qwinstaæŸ¥çœ‹ç™»å½•æƒ…å†µ</span><br><span class="line">qwinsta /SERVER:IPæŸ¥çœ‹è¿œç¨‹ç™»å½•æƒ…å†µ</span><br><span class="line">fsutil fsinfo drivesæŸ¥çœ‹æ‰€æœ‰ç›˜ç¬¦</span><br><span class="line">gpupdate /forceæ›´æ–°åŸŸç­–ç•¥</span><br><span class="line">whoamiæŸ¥è¯¢è´¦å·æ‰€å±æƒé™</span><br><span class="line">whoami /allæŸ¥çœ‹sidå·</span><br><span class="line">wmic biosæŸ¥çœ‹biosä¿¡æ¯</span><br><span class="line">wmic qfeæŸ¥çœ‹è¡¥ä¸ä¿¡æ¯</span><br><span class="line">wmic qfe get hotfixidæŸ¥çœ‹è¡¥ä¸-Patchå·ï¼Œå¾ˆå®ç”¨</span><br><span class="line">wmic qfe list full /format:htable &gt; hotfixes.htmè¯¦ç»†çš„è¡¥ä¸å®‰è£…</span><br><span class="line">wmic share get name,pathæŸ¥çœ‹SMBæŒ‡å‘è·¯å¾„</span><br><span class="line">wmic startupæŸ¥çœ‹å¯åŠ¨é¡¹</span><br><span class="line">wmic serviceæŸ¥çœ‹æœåŠ¡</span><br><span class="line">wmic osæŸ¥çœ‹OSä¿¡æ¯</span><br><span class="line">wmic service list briefæŸ¥çœ‹è¿›ç¨‹æœåŠ¡</span><br><span class="line">wmic process list briefæŸ¥çœ‹è¿›ç¨‹</span><br><span class="line">wmic startup list briefå¯åŠ¨ç¨‹åºä¿¡æ¯</span><br><span class="line">wmic product list briefæŸ¥çœ‹å®‰è£…ç¨‹åºå’Œç‰ˆæœ¬ä¿¡æ¯ï¼ˆæ¼æ´åˆ©ç”¨çº¿ç´¢ï¼‰</span><br><span class="line">wmic startup list fullè¯†åˆ«å¼€æœºå¯åŠ¨çš„ç¨‹åº</span><br><span class="line">wmic process where(description=&quot;mysqld.exe&quot;)&gt;&gt;mysql.logè·å–è½¯ä»¶å®‰è£…è·¯å¾„</span><br><span class="line">dir \\DC\SYSVOL /s /a &gt; sysvol.txtåˆ—å‡ºsysvolæ—¥å¿—è®°å½•</span><br><span class="line">xcopy \\dc2.backlion.com\sysvol.txt sysvol.txt /i /e /cæ‹·è´sysvol.txtåˆ°æœ¬åœ°</span><br><span class="line">REG query HKCU /v &quot;pwd&quot; /sè·å–åˆ°å­˜åˆ°æ³¨å†Œè¡¨ä¸­çš„å¯†ç </span><br><span class="line">dir /b/s config.*æŸ¥çœ‹æ‰€åœ¨ç›®å½•æ‰€æœ‰å‰ç¼€ä¸ºconfigçš„æ–‡ä»¶</span><br><span class="line">findstr /si password *.xml *.ini *.txtæŸ¥çœ‹åç¼€åæ–‡ä»¶ä¸­å«æœ‰passwordå…³é”®å­—çš„æ–‡ä»¶</span><br><span class="line">findstr /si login *.xml *.ini *.txtæŸ¥çœ‹åç¼€åæ–‡ä»¶ä¸­å«æœ‰loginå…³é”®å­—çš„æ–‡ä»¶</span><br><span class="line">copy con ftp.batåˆ›å»ºftp.batæ‰¹å¤„ç†ï¼Œç„¶åè¾“å…¥ifconfigç­‰å‘½ä»¤ï¼ŒæŒ‰ctr+zé€€å‡ºï¼Œå¹¶åˆ›å»ºæˆåŠŸ</span><br><span class="line">copy con test.vbsåˆ›å»ºtest.vbsè„šæœ¬ï¼Œè¾“å…¥è„šæœ¬åï¼ŒæŒ‰ctr+zé€€å‡ºï¼Œå¹¶åˆ›å»ºæˆåŠŸ</span><br><span class="line">ASSOC æ˜¾ç¤ºæ–‡ä»¶æ‰©å±•å¯¹åº”çš„ç¨‹åº</span><br><span class="line">cipher åˆ é™¤æ–‡ä»¶ï¼Œä½†å¹¶ä¸ç«‹å³åˆ é™¤</span><br><span class="line">driverquery -v æ˜¾ç¤ºæ‰€æœ‰è£…äº†çš„é©±åŠ¨</span><br><span class="line">fc å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶</span><br><span class="line">netstat -an æ˜¾ç¤ºIPä¸å¼€æ”¾çš„ç«¯å£</span><br><span class="line">Tracertã€pathping çœ‹è·¯ç”±è¡¨</span><br><span class="line">tasklist æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="http://xstarcd.github.io/wiki/windows/windows_cmd_summary_commands.html" target="_blank" rel="noopener">windows_cmd_summary</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ•´ç†äº†ä¸€ä¸‹å¸¸ç”¨çš„CMDå‘½ä»¤ ğŸ“‡&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="shell" scheme="http://wittyfans.com/tags/shell/"/>
    
      <category term="windows" scheme="http://wittyfans.com/tags/windows/"/>
    
      <category term="cmd" scheme="http://wittyfans.com/tags/cmd/"/>
    
  </entry>
  
  <entry>
    <title>Auto assign ticket with Jira python api</title>
    <link href="http://wittyfans.com/coding/Auto-assign-ticket-with-Jira-python-api.html"/>
    <id>http://wittyfans.com/coding/Auto-assign-ticket-with-Jira-python-api.html</id>
    <published>2018-10-05T14:40:07.000Z</published>
    <updated>2018-10-08T08:23:28.011Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å†ä¹Ÿä¸ç”¨æ‹…å¿ƒjiraå·¥å•è¶…æ—¶äº† ğŸ¤Ÿ</p></blockquote><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import time</span><br><span class="line">import os</span><br><span class="line">from collections import Counter</span><br><span class="line">from jira import JIRA</span><br><span class="line">from datetime import datetime</span><br><span class="line"></span><br><span class="line"># The notifier function</span><br><span class="line">def run_once(f):</span><br><span class="line">    def wrapper(*args, **kwargs):</span><br><span class="line">        if not wrapper.has_run:</span><br><span class="line">            wrapper.has_run = True</span><br><span class="line">            return f(*args, **kwargs)</span><br><span class="line">    wrapper.has_run = False</span><br><span class="line">    return wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def notify(title, subtitle, message):</span><br><span class="line">    t = &apos;-title &#123;!r&#125;&apos;.format(title)</span><br><span class="line">    s = &apos;-subtitle &#123;!r&#125;&apos;.format(subtitle)</span><br><span class="line">    m = &apos;-message &#123;!r&#125;&apos;.format(message)</span><br><span class="line">    v = &apos;-sound glass&apos;</span><br><span class="line">    os.system(&apos;terminal-notifier &#123;&#125;&apos;.format(&apos; &apos;.join([m, t, s, v])))</span><br><span class="line"></span><br><span class="line">def timer(n):</span><br><span class="line">    print(&quot;åˆå§‹åŒ–&quot;)</span><br><span class="line">    print(&quot;å¼€å§‹ç›‘æµ‹å·¥å•...&quot;)</span><br><span class="line">    jira = JIRA(&apos;ä½ çš„jiraæœåŠ¡å™¨åœ°å€&apos;,basic_auth=(&apos;ç”¨æˆ·å&apos;, &apos;å¯†ç &apos;))</span><br><span class="line">    while True:</span><br><span class="line">        tickets = jira.search_issues(&apos;The JQL for search jira ticketï¼Œæœç´¢å·¥å•çš„jql&apos;)</span><br><span class="line">        for issue in tickets:</span><br><span class="line">            # jira.assign_issue(issue, &apos;éœ€è¦assignçš„ç”¨æˆ·å&apos;)</span><br><span class="line">            print(&apos;&#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;,&#123;&#125;&apos;.format(issue.key,issue.fields.creator,issue.fields.summary,str(issue.fields.customfield_10208),issue.fields.priority.name))</span><br><span class="line">            notify(title    = &apos;JIRA&apos;,</span><br><span class="line">                   subtitle = issue.key,</span><br><span class="line">                   message  = issue.fields.summary)</span><br><span class="line">            jira.assign_issue(issue, &apos;éœ€è¦assignçš„ç”¨æˆ·å&apos;)</span><br><span class="line">        time.sleep(n)</span><br><span class="line">timer(120)</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…ç›¸å…³çš„åŒ…ï¼ˆä¸»è¦æ˜¯jiraï¼‰ï¼Œä½¿ç”¨pipå®‰è£…å³å¯</li><li>åœ¨Mac OSä¸Šè¿è¡Œï¼Œå°†ä¼šæœ‰é€šçŸ¥æç¤ºï¼Œæç¤ºéŸ³éƒ½å¯ä»¥è‡ªå®šä¹‰ï¼Œå¦‚æœåœ¨windowsä¸Šè¿è¡Œï¼Œå°†<em> The notifier function</em>å‡½æ•°å’Œç›¸å…³è¯­å¥åˆ é™¤å³å¯</li><li>timerï¼ˆ120ï¼‰ï¼Œæ¯éš”120Sè¯·æ±‚ä¸€æ¬¡æ•°æ®ï¼Œå¯ä»¥è‡ªå®šä¹‰</li><li>å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªuserlistï¼Œå®ç°å¤šä¸ªassignerè‡ªåŠ¨ã€éšæœºåˆ†é…</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å†ä¹Ÿä¸ç”¨æ‹…å¿ƒjiraå·¥å•è¶…æ—¶äº† ğŸ¤Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="jira" scheme="http://wittyfans.com/tags/jira/"/>
    
      <category term="HelpDesk" scheme="http://wittyfans.com/tags/HelpDesk/"/>
    
  </entry>
  
  <entry>
    <title>PowerShell Encrypting Credentials Generator</title>
    <link href="http://wittyfans.com/coding/PowerShell-Encrypting-Credentials-Generator.html"/>
    <id>http://wittyfans.com/coding/PowerShell-Encrypting-Credentials-Generator.html</id>
    <published>2018-10-05T14:11:51.000Z</published>
    <updated>2018-10-08T15:02:58.950Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä½¿ç”¨PowerShellè¿è¡Œï¼Œè¾“å…¥å¯†ç ï¼Œç”Ÿå­˜çš„Stringä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç›´æ¥å»éœ€è¦çš„åœ°æ–¹ç²˜è´´å³å¯ã€‚</p></blockquote><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Add-Type -AssemblyName System.Windows.Forms</span><br><span class="line"></span><br><span class="line">function Read-MessageBoxDialog</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    param ([string]$Message,</span><br><span class="line"></span><br><span class="line">        [string]$WindowTitle,</span><br><span class="line"></span><br><span class="line">        [System.Windows.Forms.MessageBoxButtons]$Buttons = [System.Windows.Forms.MessageBoxButtons]::OK,</span><br><span class="line"></span><br><span class="line">        [System.Windows.Forms.MessageBoxIcon]$Icon = [System.Windows.Forms.MessageBoxIcon]::None)</span><br><span class="line"></span><br><span class="line">    Add-Type -AssemblyName System.Windows.Forms</span><br><span class="line"></span><br><span class="line">    return [System.Windows.Forms.MessageBox]::Show($Message, $WindowTitle, $Buttons, $Icon)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">write-host &quot;è¯·è¾“å…¥åŸå§‹å¯†ç ï¼šâ†“â†“â†“â†“&quot;</span><br><span class="line">$inputPWD = Read-Host | ConvertTo-SecureString -AsPlainText -Force</span><br><span class="line">$encryptedPWD = $inputPWD | ConvertFrom-SecureString</span><br><span class="line">[Windows.Forms.Clipboard]::SetText($encryptedPWD)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Read-MessageBoxDialog -Message &quot;å·²æ‹·è´åˆ°å‰ªè´´æ¿&quot; -WindowTitle &quot;å®‰å…¨å¯†ç åˆ¶ä½œå·¥å…·&quot; -Buttons OK -Icon Information</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨PowerShellè¿è¡Œï¼Œè¾“å…¥å¯†ç ï¼Œç”Ÿå­˜çš„Stringä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç›´æ¥å»éœ€è¦çš„åœ°æ–¹ç²˜è´´å³å¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="HelpDesk" scheme="http://wittyfans.com/tags/HelpDesk/"/>
    
      <category term="PowerShell" scheme="http://wittyfans.com/tags/PowerShell/"/>
    
  </entry>
  
</feed>
