<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>wittyfans</title>
  
  <subtitle>å­¦åˆ™ä¸å›º,çŸ¥åˆ™ä¸æƒ‘</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wittyfans.com/"/>
  <updated>2019-12-06T07:23:04.569Z</updated>
  <id>http://wittyfans.com/</id>
  
  <author>
    <name>wittyfans</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åŠ å¯†è´§å¸å¸‚å€¼åˆ†æ</title>
    <link href="http://wittyfans.com/coding/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81%E5%B8%82%E5%80%BC%E5%88%86%E6%9E%90.html"/>
    <id>http://wittyfans.com/coding/åŠ å¯†è´§å¸å¸‚å€¼åˆ†æ.html</id>
    <published>2019-12-06T07:22:17.000Z</published>
    <updated>2019-12-06T07:23:04.569Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/12/06/UD9XlmW3fxoSIa5.png" alt=""></p><blockquote><p>è‡ªä»08å¹´æ¯”ç‰¹å¸å‘å¸ƒä»¥æ¥ï¼Œæ•°ä»¥ç™¾è®¡ç±»ä¼¼çš„åŸºäºåŒºå—é“¾æŠ€æœ¯çš„äº§å“å±‚å‡ºä¸ç©·ã€‚æˆ‘ä»¬ç§°è¿™äº›ä¸ºåŠ å¯†è´§å¸ï¼Œæ—¶è‡³ä»Šæ—¥ï¼ŒæŸäº›åŠ å¯†è´§å¸å·²ç»å¤§å¹…ä¸Šæ¶¨ï¼ŒæŸäº›åœ¨æœªæ¥å¯èƒ½ä¹Ÿæå…·ä¸Šæ¶¨ç©ºé—´ã€‚å®é™…ä¸Šï¼Œåœ¨2017å¹´12æœˆ6æ—¥ï¼Œæ¯”ç‰¹å¸çš„å¸‚å€¼è¶…è¿‡2000äº¿ç¾å…ƒã€‚</p></blockquote><a id="more"></a><p>åŠ å¯†è´§å¸å¸‚å€¼åˆ†æ</p><h1 id="å¸­å·å…¨çƒçš„åŠ å¯†è´§å¸"><a href="#å¸­å·å…¨çƒçš„åŠ å¯†è´§å¸" class="headerlink" title="å¸­å·å…¨çƒçš„åŠ å¯†è´§å¸"></a>å¸­å·å…¨çƒçš„åŠ å¯†è´§å¸</h1><p><img src="https://i.loli.net/2019/12/06/UD9XlmW3fxoSIa5.png" alt=""></p><p>è®©æˆ‘ä»¬æ¥ç ”ç©¶ç ”ç©¶åŠ å¯†è´§å¸ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬å°†ä»coinmarketcap APIåŠ è½½å½“å‰æ•°æ®ï¼Œå¹¶å°†å…¶æ˜¾ç¤ºåœ¨è¾“å‡ºä¸­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Importing pandas</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line"># Importing matplotlib and setting aesthetics for plotting later.</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">%matplotlib inline</span><br><span class="line">%config InlineBackend.figure_format = &apos;svg&apos; </span><br><span class="line">plt.style.use(&apos;fivethirtyeight&apos;)</span><br><span class="line"></span><br><span class="line"># Reading in current data from coinmarketcap.com</span><br><span class="line">current = pd.read_json(&quot;https://api.coinmarketcap.com/v1/ticker/&quot;)</span><br><span class="line"></span><br><span class="line"># Printing out the first few lines</span><br><span class="line">print(current.head())</span><br></pre></td></tr></table></figure><p>ä»apiè¿”å›çš„ç»“æœåªåŒ…å«äº†100æ¡æ•°æ®ï¼Œåƒè¿™ç§å¼€æ”¾çš„apiåŸºæœ¬ä¸Šéƒ½æ˜¯åªæä¾›è¯•ç”¨ï¼Œå¦‚æœæƒ³è¦æ›´å¤šæ›´å…¨çš„æ•°æ®ä¸€èˆ¬éœ€è¦ä»˜è´¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä»½æˆ‘ä»ç½‘ç«™é‡Œä¸‹è½½çš„csvæ•°æ®ï¼ŒåŒ…æ‹¬äº†17å¹´6æœˆçš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®é›†ä¿å­˜åœ¨æœ¬åœ°ï¼Œå«åš<code>datasets/coinmarketcap_06122017.csv.</code></p><h1 id="åŠ è½½æ•°æ®"><a href="#åŠ è½½æ•°æ®" class="headerlink" title="åŠ è½½æ•°æ®"></a>åŠ è½½æ•°æ®</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Reading datasets/coinmarketcap_06122017.csv into pandas</span><br><span class="line">dec6 = pd.read_csv(&apos;datasets/coinmarketcap_06122017.csv&apos;)</span><br><span class="line"></span><br><span class="line"># Selecting the &apos;id&apos; and the &apos;market_cap_usd&apos; columns</span><br><span class="line">market_cap_raw = dec6[[&apos;id&apos;,&apos;market_cap_usd&apos;]]</span><br><span class="line"></span><br><span class="line"># Counting the number of values</span><br><span class="line">market_cap_raw.count()</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id                1326</span><br><span class="line">market_cap_usd    1031</span><br><span class="line">dtype: int64</span><br></pre></td></tr></table></figure><p>ä»è¾“å‡ºç§ï¼Œæˆ‘ä»¬çœ‹åˆ°è¿™ä¸¤ä¸ªæ•°æ®çš„æ¡ç›®æ•°ä¸ä¸€æ ·ï¼Œè¿™æ˜¯å› ä¸ºåœ¨åˆ— <code>market_cap_usd</code> ç§ï¼Œå­˜åœ¨ä¸€äº›ç©ºå€¼ï¼ˆnaå€¼ï¼‰ï¼Œè€Œcountå‡½æ•°æ˜¯ä¸å°†ç©ºå€¼è®¡ç®—å…¥å†…çš„ï¼Œæˆ‘ä»¬å°†å®ƒå»æ‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Filtering out rows without a market capitalization</span><br><span class="line">cap = market_cap_raw.query(&apos;market_cap_usd &gt; 0&apos;)</span><br><span class="line"></span><br><span class="line"># Counting the number of values again</span><br><span class="line">cap.count()</span><br></pre></td></tr></table></figure><h1 id="æ¯”è¾ƒæ¯”ç‰¹å¸ä¸å…¶ä»–åŠ å¯†è´§å¸"><a href="#æ¯”è¾ƒæ¯”ç‰¹å¸ä¸å…¶ä»–åŠ å¯†è´§å¸" class="headerlink" title="æ¯”è¾ƒæ¯”ç‰¹å¸ä¸å…¶ä»–åŠ å¯†è´§å¸"></a>æ¯”è¾ƒæ¯”ç‰¹å¸ä¸å…¶ä»–åŠ å¯†è´§å¸</h1><p>ç°åœ¨æ¯”ç‰¹å¸æ­£å¤„äºä¸å…¶ä»–åŠ å¯†è´§å¸çš„æ¿€çƒˆç«äº‰ä¸­ï¼Œä½†å®ƒä»ç„¶åœ¨å¸‚å€¼ä¸­å ä¸»å¯¼åœ°ä½ï¼Œæˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#Declaring these now for later use in the plots</span><br><span class="line">TOP_CAP_TITLE = &apos;Top 10 market capitalization&apos;</span><br><span class="line">TOP_CAP_YLABEL = &apos;% of total cap&apos;</span><br><span class="line"></span><br><span class="line"># Selecting the first 10 rows and setting the index</span><br><span class="line">cap10 = cap.head(10).set_index(&apos;id&apos;)</span><br><span class="line"></span><br><span class="line"># Calculating market_cap_perc</span><br><span class="line">cap10 = cap10.assign(market_cap_perc =</span><br><span class="line">    lambda x: (x.market_cap_usd / cap.market_cap_usd.sum()) * 100)</span><br><span class="line"></span><br><span class="line"># Plotting the barplot with the title defined above </span><br><span class="line">ax = cap10.market_cap_perc.plot.bar(title=&apos;Top 10 market capitalization&apos;)</span><br><span class="line"></span><br><span class="line"># Annotating the y axis with the label defined above</span><br><span class="line">ax.set_ylabel(&apos;% of total cap&apos;)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p><img src="https://i.loli.net/2019/12/06/XFakbKp1f4ML5ul.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æ¯”ç‰¹å¸åœ¨æ•´ä¸ªåŠ å¯†è´§å¸ä¸­æ‰€å çš„ä»½é¢å¤šå¤§ï¼Œä½†æ˜¯è¿™ä¸ªå›¾è¿˜å­˜åœ¨ä¸€ä¸ªä¿¡æ¯ï¼Œå¯ä»¥å¯¹å…¶è¿›è¡Œæ”¹è¿›ï¼Œé‚£å°±æ˜¯æ¯”ç‰¹å¸æ‰€å ä»½é¢å¤ªå¤§äº†ï¼Œå…¶ä»–çš„åŠ å¯†è´§å¸ä¹‹é—´å°±å¾ˆéš¾åŒºåˆ†ã€‚</p><h1 id="å¯è§†åŒ–ä¼˜åŒ–"><a href="#å¯è§†åŒ–ä¼˜åŒ–" class="headerlink" title="å¯è§†åŒ–ä¼˜åŒ–"></a>å¯è§†åŒ–ä¼˜åŒ–</h1><p>è§£å†³ä¸Šé¢çš„åŠæ³•æ˜¯æˆ‘ä»¬éœ€è¦æ›´æ”¹åæ ‡è½´çš„å•ä½ï¼Œæˆ‘ä»¬ä»ç™¾åˆ†æ¯”æ¢æˆ log^10,å¦‚æœä½ ä¸çŸ¥é“å¦‚ä½•ä¼˜åŒ–ä½ çš„æ•°æ®å¯è§†åŒ–æ­¥éª¤ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„<a href="http://wittyfans.com/coding/æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯.html">å¦ä¸€ç¯‡æ–‡ç« </a></p><p>å¦å¤–ï¼Œæˆ‘ä»¬æŠŠç±»ä¼¼çš„åŠ å¯†è´§å¸åˆå¹¶æˆåŒä¸€ä¸ªé¢œè‰²,æŠŠxè½´ä¸Šçš„ä¿¡æ¯éšè—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Colors for the bar plot</span><br><span class="line">COLORS = [&apos;orange&apos;, &apos;green&apos;, &apos;orange&apos;, &apos;cyan&apos;, &apos;cyan&apos;, &apos;blue&apos;, &apos;silver&apos;, &apos;orange&apos;, &apos;red&apos;, &apos;green&apos;]</span><br><span class="line"></span><br><span class="line"># Plotting market_cap_usd as before but adding the colors and scaling the y-axis  </span><br><span class="line">ax = cap10.market_cap_perc.plot.bar(title=&apos;Top 10 market capitalization&apos;,color=COLORS)</span><br><span class="line"></span><br><span class="line"># Annotating the y axis with &apos;USD&apos;</span><br><span class="line">ax.set_ylabel(&apos;USD&apos;)</span><br><span class="line"></span><br><span class="line"># Final touch! Removing the xlabel as it is not very informative</span><br><span class="line">ax.set_xlabel(&apos;&apos;)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/12/06/QJCehqgOsF6EdZT.png" alt=""></p><p><strong>éšè—Xè½´ä¸Šçš„å­—çš„å¦ä¸€ç§æ–¹å¼ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x_axis = ax.xaxis</span><br><span class="line">x_axis.label.set_visible(False)</span><br></pre></td></tr></table></figure><h1 id="ææ€–çš„æ³¢åŠ¨æ€§"><a href="#ææ€–çš„æ³¢åŠ¨æ€§" class="headerlink" title="ææ€–çš„æ³¢åŠ¨æ€§"></a>ææ€–çš„æ³¢åŠ¨æ€§</h1><p>åŠ å¯†è´§å¸å‘å¸ƒä»¥æ¥å°±ä»¥å…¶æƒŠäººçš„æ³¢åŠ¨æ€§è‘—ç§°ï¼Œè®©æˆ‘ä»¬æ¥æ¢ç´¢ä¸€ä¸‹è¿™ç§æ³¢åŠ¨æ€§ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©24å°æ—¶å’Œä¸€å‘¨çš„æ—¶é—´çŸ­æ¥ç»Ÿè®¡æ³¢åŠ¨æ€§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Selecting the id, percent_change_24h and percent_change_7d columns</span><br><span class="line">volatility = dec6[[&apos;id&apos;,&apos;percent_change_24h&apos;,&apos;percent_change_7d&apos;]]</span><br><span class="line"></span><br><span class="line"># Setting the index to &apos;id&apos; and dropping all NaN rows</span><br><span class="line">volatility = volatility.set_index(&apos;id&apos;).dropna()</span><br><span class="line"></span><br><span class="line"># Sorting the DataFrame by percent_change_24h in ascending order</span><br><span class="line">volatility = volatility.sort_values(by=&apos;percent_change_24h&apos;)</span><br><span class="line"></span><br><span class="line"># Checking the first few rows</span><br><span class="line">print(volatility.head())</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">               percent_change_24h  percent_change_7d</span><br><span class="line">id                                                  </span><br><span class="line">flappycoin                 -95.85             -96.61</span><br><span class="line">credence-coin              -94.22             -95.31</span><br><span class="line">coupecoin                  -93.93             -61.24</span><br><span class="line">tyrocoin                   -79.02             -87.43</span><br><span class="line">petrodollar                -76.55             542.96</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€åflappycoinï¼Œ24å°æ—¶å†…çš„æ³¢åŠ¨ä¸º95%ï¼Œè¿™æ„å‘³ç€1ä¸‡å—é’±çš„æŠ•å…¥24å°æ—¶ååªå‰©500.</p><p>çš„ç¡®ï¼Œæ³¢åŠ¨æ€§å¦‚æ­¤ä¹‹å¤§çš„äº§å“äºæŸèµ·æ¥æ˜¯å¾ˆå¿«çš„ï¼Œä½†é«˜é£é™©ä¹Ÿæ„å‘³ç€é«˜æ”¶ç›Šï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹24å°æ—¶å†…æœ€å¤§çš„èµ¢å®¶ä¸è¾“å®¶çš„å¯¹æ¯”ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#Defining a function with 2 parameters, the series to plot and the title</span><br><span class="line">def top10_subplot(volatility_series, title):</span><br><span class="line">    # Making the subplot and the figure for two side by side plots</span><br><span class="line">    fig, axes = plt.subplots(nrows=1, ncols=2, figsize=(10, 6))</span><br><span class="line">    </span><br><span class="line">    # Plotting with pandas the barchart for the top 10 losers</span><br><span class="line">    ax = volatility_series[:10].plot.bar(color=&apos;darkred&apos;,ax=axes[0])</span><br><span class="line">    </span><br><span class="line">    # Setting the figure&apos;s main title to the text passed as parameter</span><br><span class="line">    fig.suptitle(title)</span><br><span class="line">    </span><br><span class="line">    # Setting the ylabel to &apos;% change&apos;</span><br><span class="line">    ax.set_ylabel(&apos;% change&apos;)</span><br><span class="line">    </span><br><span class="line">    # Same as above, but for the top 10 winners</span><br><span class="line">    ax = volatility_series[-10:].plot.bar(color=&apos;darkblue&apos;,ax=axes[1])</span><br><span class="line">    </span><br><span class="line">    # Returning this for good practice, might use later</span><br><span class="line">    return fig, ax</span><br><span class="line"></span><br><span class="line">DTITLE = &quot;24 hours top losers and winners&quot;</span><br><span class="line"></span><br><span class="line"># Calling the function above with the 24 hours period series and title DTITLE  </span><br><span class="line">fig, ax = top10_subplot(volatility.percent_change_24h,&apos;24 hours top losers and winners&apos;)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><p><img src="https://i.loli.net/2019/12/06/6JMto7jFVD5gknu.png" alt=""></p><p>24å°æ—¶ç™¾åˆ†ä¹‹800çš„æ”¶ç›Šï¼Ÿä¸ºä»€ä¹ˆä½ è¿˜åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¸èµ¶å¿«å»ä¹°æ¯”ç‰¹å¸ï¼ï¼ˆå¼€ç©ç¬‘ğŸ˜ï¼‰</p><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹å‘¨æ”¶ç›Šå§ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Sorting in ascending order</span><br><span class="line">volatility7d = volatility.sort_values(by=&apos;percent_change_7d&apos;)</span><br><span class="line"></span><br><span class="line">WTITLE = &quot;Weekly top losers and winners&quot;</span><br><span class="line"></span><br><span class="line"># Calling the top10_subplot function</span><br><span class="line">fig, ax = top10_subplot(volatility7d.percent_change_7d,WTITLE)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/12/06/tyx5TMCD8J3Hszh.png" alt=""></p><p>3500çš„æ”¶ç›Šï¼Œå¥½äº†æˆ‘ä¸è¯´ä»€ä¹ˆäº†ã€‚</p><h1 id="å…³æ³¨ä½å¸‚å€¼åŠ å¯†è´§å¸"><a href="#å…³æ³¨ä½å¸‚å€¼åŠ å¯†è´§å¸" class="headerlink" title="å…³æ³¨ä½å¸‚å€¼åŠ å¯†è´§å¸"></a>å…³æ³¨ä½å¸‚å€¼åŠ å¯†è´§å¸</h1><p>ä¸Šé¢çš„è¿™äº›åŠ å¯†è´§å¸æ„Ÿè§‰éƒ½æ²¡è§è¿‡ï¼Œäº‹å®ä¸Šè¿™äº›åŠ å¯†è´§å¸çš„å¸‚å€¼éƒ½å¾ˆå°,è€ŒæŠ•èµ„ä½å¸‚å€¼çš„åŠ å¯†è´§å¸é£é™©ä¹Ÿæ˜¯å¾ˆé«˜çš„ï¼Œè¿™ä¹Ÿå°è¯äº†ä¹‹å‰è¯´çš„é«˜é£é™©é«˜æ”¶ç›Šã€‚</p><p>å¯¹äºå¸‚å€¼è¦æ€ä¹ˆåˆ’åˆ†å‘¢ï¼Ÿå¤šå°‘å¯ä»¥åˆ’åˆ†æˆé«˜å¸‚å€¼ï¼Œå¤šå°‘åˆæ˜¯ä½å¸‚å€¼å‘¢ï¼Ÿæˆ‘ä»¬ä¸€èˆ¬æŒ‰ä¸‹è¡¨æ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Large cap: +10 billion</span><br><span class="line">Mid cap: 2 billion - 10 billion</span><br><span class="line">Small cap: 300 million - 2 billion</span><br><span class="line">Micro cap: 50 million - 300 million</span><br><span class="line">Nano cap: Below 50 million</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¤§äºä¸€ç™¾äº¿å¸‚å€¼çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Selecting everything bigger than 10 billion </span><br><span class="line">largecaps = cap.query(&apos;market_cap_usd&gt;10000000000&apos;)</span><br><span class="line"></span><br><span class="line"># Printing out largecaps</span><br><span class="line">print(largecaps)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">             id  market_cap_usd</span><br><span class="line">0       bitcoin    2.130493e+11</span><br><span class="line">1      ethereum    4.352945e+10</span><br><span class="line">2  bitcoin-cash    2.529585e+10</span><br><span class="line">3          iota    1.475225e+10</span><br></pre></td></tr></table></figure><h1 id="å¤§å¤šæ•°åŠ å¯†è´§å¸å¸‚å€¼å¾ˆä½"><a href="#å¤§å¤šæ•°åŠ å¯†è´§å¸å¸‚å€¼å¾ˆä½" class="headerlink" title="å¤§å¤šæ•°åŠ å¯†è´§å¸å¸‚å€¼å¾ˆä½"></a>å¤§å¤šæ•°åŠ å¯†è´§å¸å¸‚å€¼å¾ˆä½</h1><p>é€šè¿‡å°†åŠ å¯†è´§å¸æŒ‰ç…§å¸‚å€¼åˆ†ç±»ï¼Œè¿›è€Œå¯¹å…¶æŒ‰åŒºé—´ç»Ÿè®¡ä¸ªæ•°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ğŸ§â€â™‚ï¸å¸‚å€¼åŒºé—´åŠ å¯†è´§å¸çš„ä¸ªæ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># Making a nice function for counting different marketcaps from the</span><br><span class="line"># &quot;cap&quot; DataFrame. Returns an int.</span><br><span class="line"># INSTRUCTORS NOTE: Since you made it to the end, consider it a gift :D</span><br><span class="line">def capcount(query_string):</span><br><span class="line">    return cap.query(query_string).count().id</span><br><span class="line"></span><br><span class="line"># Labels for the plot</span><br><span class="line">LABELS = [&quot;biggish&quot;, &quot;micro&quot;, &quot;nano&quot;]</span><br><span class="line"></span><br><span class="line"># Using capcount count the biggish cryptos</span><br><span class="line">biggish = capcount(&apos;market_cap_usd&gt;3000000000&apos;)</span><br><span class="line"></span><br><span class="line"># Same as above for micro ...</span><br><span class="line">micro = capcount(&apos;market_cap_usd&gt;50000000 and market_cap_usd&lt;300000000&apos;)</span><br><span class="line"></span><br><span class="line"># ... and for nano</span><br><span class="line">nano =  capcount(&apos;market_cap_usd&lt;50000000&apos;)</span><br><span class="line"></span><br><span class="line"># Making a list with the 3 counts</span><br><span class="line">values = [biggish,micro,nano]</span><br><span class="line"></span><br><span class="line"># Plotting them with matplotlib </span><br><span class="line">plt.bar(range(len(values)),values,label=LABELS)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/12/06/arEDO1QFAGVwqCB.png" alt=""></p><p>å¯ä»¥å‘ç°ï¼Œå¤§éƒ¨åˆ†çš„åŠ å¯†è´§å¸å¸‚å€¼éƒ½å¾ˆå°ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/12/06/UD9XlmW3fxoSIa5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è‡ªä»08å¹´æ¯”ç‰¹å¸å‘å¸ƒä»¥æ¥ï¼Œæ•°ä»¥ç™¾è®¡ç±»ä¼¼çš„åŸºäºåŒºå—é“¾æŠ€æœ¯çš„äº§å“å±‚å‡ºä¸ç©·ã€‚æˆ‘ä»¬ç§°è¿™äº›ä¸ºåŠ å¯†è´§å¸ï¼Œæ—¶è‡³ä»Šæ—¥ï¼ŒæŸäº›åŠ å¯†è´§å¸å·²ç»å¤§å¹…ä¸Šæ¶¨ï¼ŒæŸäº›åœ¨æœªæ¥å¯èƒ½ä¹Ÿæå…·ä¸Šæ¶¨ç©ºé—´ã€‚å®é™…ä¸Šï¼Œåœ¨2017å¹´12æœˆ6æ—¥ï¼Œæ¯”ç‰¹å¸çš„å¸‚å€¼è¶…è¿‡2000äº¿ç¾å…ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="pandas" scheme="http://wittyfans.com/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®åˆ†æä¹‹æ¯äº²ä»¬çš„æ•‘æ˜Ÿï¼šå› å€¡å¯¼æ´—æ‰‹è€Œè¢«é€å»ç²¾ç¥ç—…é™¢</title>
    <link href="http://wittyfans.com/coding/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B9%8B%E6%AF%8D%E4%BA%B2%E4%BB%AC%E7%9A%84%E6%95%91%E6%98%9F%EF%BC%9A%E5%9B%A0%E5%80%A1%E5%AF%BC%E6%B4%97%E6%89%8B%E8%80%8C%E8%A2%AB%E9%80%81%E5%8E%BB%E7%B2%BE%E7%A5%9E%E7%97%85%E9%99%A2.html"/>
    <id>http://wittyfans.com/coding/æ•°æ®åˆ†æä¹‹æ¯äº²ä»¬çš„æ•‘æ˜Ÿï¼šå› å€¡å¯¼æ´—æ‰‹è€Œè¢«é€å»ç²¾ç¥ç—…é™¢.html</id>
    <published>2019-12-06T04:53:06.000Z</published>
    <updated>2019-12-06T04:55:44.126Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»–è¢«ç§°ä¸ºæ¯äº²ä»¬çš„æ•‘æ˜Ÿï¼Œå´å› å€¡å¯¼æ´—æ‰‹è€Œè¢«é€å¾€ç²¾ç¥ç—…é™¢ã€‚</p></blockquote><a id="more"></a><h1 id="èƒŒæ™¯ä»‹ç»"><a href="#èƒŒæ™¯ä»‹ç»" class="headerlink" title="èƒŒæ™¯ä»‹ç»"></a>èƒŒæ™¯ä»‹ç»</h1><p>ä¼Šæ ¼çº³å…¹Â·è²åˆ©æ™®Â·å¡éº¦å°”ç»´æ–¯ï¼ˆIgnatius Philipp Semmelweisï¼Œ1818å¹´7æœˆ1æ—¥ï¼1865å¹´8æœˆ13æ—¥ï¼‰ï¼ŒåŒˆç‰™åˆ©äº§ç§‘åŒ»å¸ˆï¼Œç°ä»£äº§ç§‘æ¶ˆæ¯’æ³•å€¡å¯¼è€…ä¹‹ä¸€ï¼Œè¢«å°Šç§°ä¸ºâ€œæ¯äº²ä»¬çš„æ•‘æ˜Ÿâ€ã€‚</p><p>ä»–åœ¨ç»´ä¹Ÿçº³ï¼ˆ1847-1849å¹´ï¼‰å’Œå¸ƒè¾¾ä½©æ–¯ï¼ˆ1850å¹´ï¼‰åŒ»é™¢äº§ç§‘å·¥ä½œæ—¶ï¼Œç»è¿‡ç»†è‡´è§‚å¯Ÿï¼Œè¯å®äº†äº§è¤¥çƒ­æ˜¯ç”±äºæ¥ç”Ÿäººå‘˜çš„æ‰‹æˆ–å™¨æ¢°å—åˆ°æ±¡æŸ“ä¼ æŸ“äº§å¦‡å¼•èµ·çš„è´¥è¡€ç—‡ï¼›äºæ˜¯ä»–æå€¡ä½¿ç”¨æ¼‚ç™½ç²‰æº¶æ¶²æ¶ˆæ¯’æ¥ç”Ÿäººå‘˜çš„æ‰‹å’Œå™¨æ¢°ï¼›åæ¥é‡‡ç”¨è¿™ç§æ–¹æ³•çš„åŒ»é™¢äº§è¤¥çƒ­æ­»äº¡ç‡æ˜¾è‘—å‡å°‘ã€‚å½“ä»–æå‡ºåŒ»ç”Ÿæ¥ç”Ÿå‰è¦æ´—æ‰‹æ—¶ï¼Œå†’çŠ¯äº†æ‰€æœ‰æ¥ç”Ÿä¸æ´—æ‰‹çš„åŒè¡Œï¼Œæ— æ³•åœ¨åŒ»å­¦ç•Œç«‹è¶³ã€‚æœ€ç»ˆè¢«é€å»ç²¾ç¥ç—…é™¢ç›´åˆ°æ­»äº¡ã€‚æ®éªŒå°¸è®°å½•ï¼Œä»–åº”ä¸ºä¼¤å£æ„ŸæŸ“è´¥è¡€ç—‡è€Œæ­»ï¼ˆæœ‰è¯´æ³•æŒ‡ï¼Œä»–æ˜¯é­ç—…é™¢èŒå‘˜æ¯’æ‰“çš„ä¼¤å£æ„ŸæŸ“è€Œæ­»ï¼›ä¹Ÿæœ‰è¯´æ³•æŒ‡å‡ºä»–æ˜¯åœ¨ç»™äº§è¤¥çƒ­çš„ç—…äººåšå°¸ä½“è§£å‰–æ—¶åˆ’ä¼¤äº†è‡ªå·±çš„æ‰‹æŒ‡ï¼Œæ„ŸæŸ“äº†äº§è¤¥çƒ­ç—…èŒè€Œå¼•å‘çš„è´¥è¡€ç—‡ã€‚ï¼‰ã€‚</p><p>å¡éº¦å°”ç»´æ–¯å½“æ—¶ç•™ä¸‹äº†ä»–è®°å½•ä¸‹æ¥çš„æ•°æ®ï¼Œæˆ‘ä»¬ä»Šå¤©æ¥åˆ†æä¸€ä¸‹ä»–çš„æ•°æ®ï¼š</p><h1 id="æ•°æ®æ¢ç´¢"><a href="#æ•°æ®æ¢ç´¢" class="headerlink" title="æ•°æ®æ¢ç´¢"></a>æ•°æ®æ¢ç´¢</h1><p>æˆ‘ä»¬å…ˆå¯¼å…¥ç›¸å…³æ¨¡å—ï¼Œå¹¶è¯»å–æ•°æ®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># importing modules</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line"># Read datasets/yearly_deaths_by_clinic.csv into yearly</span><br><span class="line">yearly = pd.read_csv(&apos;datasets/yearly_deaths_by_clinic.csv&apos;)</span><br><span class="line"></span><br><span class="line"># Print out yearly</span><br><span class="line">print(yearly)</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ•°æ®ï¼Œyearæ˜¯è®°å½•çš„æ—¶é—´ï¼›birthså‡ºç°äº§è¤¥çƒ­çš„äººæ•°ï¼Œdeathsæ˜¯æ­»äº¡äººæ•°ï¼Œclinicæœ‰ä¸¤ç§ç±»å‹è®°å½•ï¼Œ1å’Œ2ï¼Œè¯´çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„è¯Šæ‰€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    year  births  deaths    clinic</span><br><span class="line">0   1841    3036     237  clinic 1</span><br><span class="line">1   1842    3287     518  clinic 1</span><br><span class="line">2   1843    3060     274  clinic 1</span><br><span class="line">3   1844    3157     260  clinic 1</span><br><span class="line">4   1845    3492     241  clinic 1</span><br><span class="line">5   1846    4010     459  clinic 1</span><br><span class="line">6   1841    2442      86  clinic 2</span><br><span class="line">7   1842    2659     202  clinic 2</span><br><span class="line">8   1843    2739     164  clinic 2</span><br><span class="line">9   1844    2956      68  clinic 2</span><br><span class="line">10  1845    3241      66  clinic 2</span><br><span class="line">11  1846    3754     105  clinic 2</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°1841å¹´åˆ°1846å¹´äº§è¤¥çƒ­çš„å‘ç—…æƒ…å†µï¼Œè¿™ç§ç–¾ç—…åœ¨å½“æ—¶æ˜¯å¾ˆå±é™©çš„ï¼Œæ­»äº¡ç‡éå¸¸é«˜ï¼Œå¤§éƒ¨åˆ†å‘ç”Ÿåœ¨å¦‡å¥³ç”Ÿå®Œå°å­©ä¹‹åã€‚</p><h1 id="æŸ¥çœ‹æ­»äº¡ç‡"><a href="#æŸ¥çœ‹æ­»äº¡ç‡" class="headerlink" title="æŸ¥çœ‹æ­»äº¡ç‡"></a>æŸ¥çœ‹æ­»äº¡ç‡</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yearly[&apos;proportion_deaths&apos;] = yearly.deaths/yearly.births</span><br><span class="line">yearly1 = yearly[yearly.clinic==&apos;clinic 2&apos;]</span><br><span class="line">yearly2 = yearly[yearly.clinic==&apos;clinic 2&apos;]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨æ•°æ®ä¸­æ–°å¢ä¸€åˆ—ï¼Œä¿å­˜æ­»äº¡ç‡ï¼Œéšåå°†ä¸¤ä¸ªè¯Šæ‰€çš„æ•°æ®åˆ†å¼€ã€‚</p><p>å…ˆæ¥çœ‹ä¸€ä¸‹è¯Šæ‰€1çš„æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Print out yearly2</span><br><span class="line">print(yearly2)</span><br><span class="line"></span><br><span class="line">  year  births  deaths    clinic  proportion_deaths</span><br><span class="line">0  1841    3036     237  clinic 1           0.078063</span><br><span class="line">1  1842    3287     518  clinic 1           0.157591</span><br><span class="line">2  1843    3060     274  clinic 1           0.089542</span><br><span class="line">3  1844    3157     260  clinic 1           0.082357</span><br><span class="line">4  1845    3492     241  clinic 1           0.069015</span><br><span class="line">5  1846    4010     459  clinic 1           0.114464</span><br></pre></td></tr></table></figure><p>æ³¨æ„åˆ°1846å¹´ï¼Œæ­»äº¡ç‡å±…ç„¶æœ‰ç™¾åˆ†ä¹‹11.</p><h1 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h1><p>æˆ‘ä»¬æ¥å¯¹æ¯”çœ‹çœ‹ä¸¤ä¸ªè¯Šæ‰€æ•°æ®ï¼Œä¸ºäº†æ›´ç›´è§‚çš„å±•ç¤ºï¼Œæˆ‘ä»¬å°†è¿™äº›æ•°æ®æŒ‰çº¿å›¾ç»˜åˆ¶å‡ºæ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># This makes plots appear in the notebook</span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"># Plot yearly proportion of deaths at the two clinics</span><br><span class="line">ax = yearly1.plot(x=&apos;year&apos;,y=&apos;proportion_deaths&apos;,label=&apos;clinic 1&apos;)</span><br><span class="line">yearly2.plot(x=&apos;year&apos;,y=&apos;proportion_deaths&apos;,label=&apos;clinic 2&apos;,ax=ax)</span><br><span class="line">ax.set_ylabel(&quot;Proportion deaths&quot;)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å›¾åƒï¼š</p><p><img src="https://i.loli.net/2019/12/06/vuSKmM9Vor4LxkF.png" alt=""></p><p>è¯Šæ‰€1ç«Ÿç„¶æ¯”è¯Šæ‰€2çš„æ•°æ®é«˜é‚£ä¹ˆå¤šï¼è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿå¡éº¦å°”ç»´æ–¯å†³å¿ƒè¦æ­å¼€è¿™ä¸ªè°œï¼Œä»–é€šè¿‡å¹³æ—¶çš„è§‚å¯Ÿå‘ç°ï¼Œè¿™ä¸¤ä¸ªè¯Šæ‰€ä¹‹é—´å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯åŒ»æŠ¤äººå‘˜ï¼Œè¯Šæ‰€1çš„åŒ»æŠ¤äººå‘˜åŒæ—¶ä¹Ÿåœ¨éªŒå°¸æˆ¿å·¥ä½œï¼Œè€Œè¯Šæ‰€2çš„åŒ»æŠ¤äººå‘˜ä»…ä»…æ˜¯æ¥ç”Ÿã€‚</p><p>å½“æ—¶è¿˜æ²¡æœ‰å‘ç°ç»†èŒï¼Œå¯¹äºå½“æ—¶çš„äººæ¥è¯´ï¼Œæ ¹æœ¬ä¸è§‰å¾—ä»éªŒå°¸æˆ¿å‡ºæ¥å†æ¥ç”Ÿéœ€è¦æ´—æ‰‹ï¼Œæ ¹æ®è¿™ä¸ªå‘ç°ï¼Œå¡éº¦å°”ç»´æ–¯å¼€å§‹è®©åŒ»æŠ¤äººå‘˜æ´—æ‰‹ï¼Œå¹¶è®°å½•äº†æŒ‰æœˆçš„å‘ç—…ä¸æ­»äº¡ç›¸å…³æ•°æ®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Read datasets/monthly_deaths.csv into monthly</span><br><span class="line">monthly = pd.read_csv(&apos;datasets/monthly_deaths.csv&apos;,parse_dates=[&apos;date&apos;])</span><br><span class="line"></span><br><span class="line"># Calculate proportion of deaths per no. births</span><br><span class="line">monthly[&quot;proportion_deaths&quot;] = monthly.deaths/monthly.births</span><br><span class="line"></span><br><span class="line"># Print out the first rows in monthly</span><br><span class="line">print(monthly.head())</span><br></pre></td></tr></table></figure><h1 id="å¼€å§‹æ´—æ‰‹"><a href="#å¼€å§‹æ´—æ‰‹" class="headerlink" title="å¼€å§‹æ´—æ‰‹"></a>å¼€å§‹æ´—æ‰‹</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Plot monthly proportion of deaths</span><br><span class="line">ax = monthly.plot(x=&apos;date&apos;,y=&apos;proportion_deaths&apos;)</span><br><span class="line">ax.set_ylabel(&apos;Proportion deaths&apos;)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/12/06/rEW7sSuoAwdIxqm.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŒ»æŠ¤äººå‘˜å¼€å§‹æ´—æ‰‹åï¼Œæ˜æ˜¾çš„é™ä½äº†æ­»äº¡ç‡ã€‚æˆ‘ä»¬å°†å¼€å§‹æ´—æ‰‹å‰ï¼Œå¼€å§‹æ´—æ‰‹åçš„æ•°æ®åˆ†å¼€ç»˜åˆ¶ï¼Œè¿™æ ·çœ‹çš„æ›´æ˜æ˜¾:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Date when handwashing was made mandatory</span><br><span class="line">import pandas as pd</span><br><span class="line">handwashing_start = pd.to_datetime(&apos;1847-06-01&apos;)</span><br><span class="line"></span><br><span class="line"># Split monthly into before and after handwashing_start</span><br><span class="line">before_washing = monthly[monthly[&apos;date&apos;]&lt;handwashing_start]</span><br><span class="line">after_washing = monthly[monthly[&apos;date&apos;]&gt;=handwashing_start]</span><br><span class="line"></span><br><span class="line"># Plot monthly proportion of deaths before and after handwashing</span><br><span class="line">ax = before_washing.plot(x=&apos;date&apos;,y=&apos;proportion_deaths&apos;,label=&apos;before_washing&apos;)</span><br><span class="line">after_washing.plot(x=&apos;date&apos;,y=&apos;proportion_deaths&apos;,label=&apos;after_washing&apos;,ax=ax)</span><br><span class="line">ax.set_ylabel(&apos;Proportion deaths&apos;)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/12/06/EIRXBY7AMlvmQ9z.png" alt=""></p><p>æˆ‘ä»¬å†æ¥çœ‹ä¸‹ï¼Œæ€»ä½“ä¸Šæ´—æ‰‹é™ä½äº†å¤šå°‘çš„æ­»äº¡ç‡å‘¢ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Difference in mean monthly proportion of deaths due to handwashing</span><br><span class="line">before_proportion = before_washing[&apos;proportion_deaths&apos;]</span><br><span class="line">after_proportion = after_washing[&apos;proportion_deaths&apos;]</span><br><span class="line">mean_diff = after_proportion.mean()-before_proportion.mean()</span><br><span class="line">mean_diff</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output: -0.08395660751183336</span><br></pre></td></tr></table></figure><h1 id="Bootstrapåˆ†æ"><a href="#Bootstrapåˆ†æ" class="headerlink" title="Bootstrapåˆ†æ"></a>Bootstrapåˆ†æ</h1><p>é€šè¿‡ç®€å•çš„æ´—æ‰‹ï¼Œç«Ÿç„¶é™ä½äº§è¤¥çƒ­8%çš„æ­»äº¡ç‡ï¼æœ‰äººä¼šè¯´ï¼Œæ´—æ‰‹é™ä½æ­»äº¡ç‡æ˜¯ä¸æ˜¯åªæ˜¯ä¸€ä¸ªéšæœºå‡ºç°çš„æƒ…å†µå‘¢ï¼Ÿä¸ºäº†å»å¤„ä¸ç¡®å®šæ€§çš„å½±å“ï¼Œäº†è§£æ´—æ‰‹èƒ½å‡å°‘å¤šå°‘æ­»äº¡ç‡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ç½®ä¿¡åŒºé—´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># A bootstrap analysis of the reduction of deaths due to handwashing</span><br><span class="line">boot_mean_diff = []</span><br><span class="line">for i in range(3000):</span><br><span class="line">    boot_before = before_proportion.sample(frac=1,replace=True)</span><br><span class="line">    boot_after = after_proportion.sample(frac=1,replace=True)</span><br><span class="line">    boot_mean_diff.append(boot_after.mean()-boot_before.mean())</span><br><span class="line"></span><br><span class="line"># Calculating a 95% confidence interval from boot_mean_diff </span><br><span class="line">confidence_interval = pd.Series(boot_mean_diff).quantile([0.025, 0.975])</span><br><span class="line">confidence_interval</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">output:</span><br><span class="line">0.025   -0.100879</span><br><span class="line">0.975   -0.066952</span><br><span class="line">dtype: float64</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥çœ‹å‡ºæ ¹æ®95%çš„ç½®ä¿¡åŒºé—´ï¼Œ<strong>é€šè¿‡æ´—æ‰‹ï¼Œå¤§çº¦é™ä½äº†6.7 åˆ° 10æ­»äº¡ç‡</strong>ã€‚</p><p>å¯¹äº<code>pandas</code>çš„<code>sample</code>æ–¹æ³•ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼š</p><p>sampleä¼šè¿”å›éšæœºé€‰æ‹©æ•°æ®ä¸­ä¸€ä¸ªå­é›†ï¼Œfracå¯ä»¥æŒ‡å®šå­é›†çš„å¤§å°ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤è¿”å›ä¸€æ¡è®°å½•ï¼Œå¦‚æœæŒ‡å®šä¸º1ï¼Œåˆ™è¿”å›æ‰€æœ‰çš„ç»“æœã€‚</p><p>æˆ‘ä»¬æŠŠè¿™ä¸ªæ¯”å–»ä¸ºä»ä¸€ä¸ªç›’å­é‡Œæ‹¿1000ä¸ªçƒï¼Œé‚£ä¹ˆå°±æ˜¯ä¸æ”¾å›çš„ä¸€ä¸ªä¸€ä¸ªä»ç›’å­é‡Œå–ï¼Œç›´åˆ°å–å®Œ1000ä¸ªä¸ºæ­¢ï¼Œçœ‹ä¸€ä¸ªä¸‹é¢çš„ä¾‹å­ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame([x for x in range(1000)])</span><br><span class="line">dff = df.sample(frac=1)</span><br><span class="line">dff.columns=[&apos;values&apos;]</span><br><span class="line">dff[&apos;values&apos;].value_counts()</span><br></pre></td></tr></table></figure><p>è¾“å‡º:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">999    1</span><br><span class="line">328    1</span><br><span class="line">341    1</span><br><span class="line">340    1</span><br><span class="line">339    1</span><br><span class="line">      ..</span><br><span class="line">661    1</span><br><span class="line">660    1</span><br><span class="line">659    1</span><br><span class="line">658    1</span><br><span class="line">0      1</span><br><span class="line">Name: values, Length: 1000, dtype: int64</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¾“å‡ºå°±æ˜¯æˆ‘ä»¬æ‹¿å‡ºæ¥çš„çƒï¼Œæ¯æ ·ä¸€ä¸ªã€‚å¦‚æœåƒä¸Šé¢äº§è¤¥çƒ­çš„æ•°æ®ä¸­ä¸€æ ·æŒ‡å®š<code>replace=True</code>,é‚£å°±å˜æˆäº†æœ‰æ”¾å›çš„æ‹¿äº†ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ‹¿ä¸€ä¸ªçƒï¼Œè®°å½•å®ƒæ˜¯å¤šå°‘å·ï¼Œå†æ”¾å›å»ï¼Œè¿™æ ·é‡å¤ä¸€åƒæ¬¡ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame([x for x in range(1000)])</span><br><span class="line">dff = df.sample(frac=1,replace=True)</span><br><span class="line">dff.columns=[&apos;values&apos;]</span><br><span class="line">dff[&apos;values&apos;].value_counts()</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ˜¯æœ‰æ”¾å›çš„æ‹¿ï¼Œæ‰€ä»¥è‚¯å®šä¼šæœ‰é‡å¤çš„å€¼å‡ºç°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">48     5</span><br><span class="line">553    4</span><br><span class="line">479    4</span><br><span class="line">89     4</span><br><span class="line">852    4</span><br><span class="line">      ..</span><br><span class="line">435    1</span><br><span class="line">436    1</span><br><span class="line">784    1</span><br><span class="line">439    1</span><br><span class="line">338    1</span><br><span class="line">Name: values, Length: 630, dtype: int64</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ48å·çƒå‡ºç°äº†5æ¬¡ï¼Œå…¶ä½™çš„çƒä¹Ÿå‡ºç°äº†é‡å¤çš„è®°å½•,åœ¨è¿™é‡Œæˆ‘ä»¬æ˜¯éœ€è¦æœ‰æ”¾å›çš„,æœ‰æ”¾å›çš„æŠ½æ ·ç¬¬ä¸€æ¬¡æŠ½å–çš„ç»“æœä¸å½±å“ç¬¬äºŒæ¬¡çš„ç»“æœï¼Œå®ƒä»¬å½¼æ­¤æ˜¯ç‹¬ç«‹çš„ï¼Œä»æ•°å­¦ä¸Šæ¥è¯´ï¼Œå®ƒä»¬ä¹‹é—´æ²¡æœ‰ç›¸å…³æ€§ã€‚</p><blockquote><p>By default, pandasâ€™ sample randomly selects rows without replacement. Sampling with replacement is very useful for statistical techniques like bootstrapping</p></blockquote><h1 id="æ‚²å‰§"><a href="#æ‚²å‰§" class="headerlink" title="æ‚²å‰§"></a>æ‚²å‰§</h1><p>æ‚²å‰§çš„æ˜¯ï¼Œå°½ç®¡æœ‰è¯æ®æ˜¾ç¤ºå¡æ¢…å°”ç»´æ–¯çš„ç†è®ºæ˜¯æ­£ç¡®çš„ï¼Œå³äº§è¤¥çƒ­æ˜¯ç”±å°¸æ£€å®¤å°¸ä½“ä¸­çš„æŸç§â€œç‰©è´¨â€ï¼ˆä»Šå¤©æˆ‘ä»¬ç§°ä¸ºç»†èŒï¼‰å¼•èµ·çš„ã€‚å½“è¿™å´è¢«å½“æ—¶çš„ç§‘å­¦å®¶å˜²ç¬‘ã€‚</p><p>åŒ»å­¦ç•Œåœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ‹’ç»äº†ä»–çš„å‘ç°ï¼Œ1849å¹´ä»–è¢«è¿«æ°¸ä¹…ç¦»å¼€ç»´ä¹Ÿçº³ç»¼åˆåŒ»é™¢ã€‚</p><p>åŸå› ä¹‹ä¸€æ˜¯ç»Ÿè®¡å’Œç»Ÿè®¡æ€ç»´åœ¨1800å¹´ä»£åŒ»å­¦ç•Œå¹¶ä¸å¸¸è§ã€‚ å¡æ¢…å°”ç»´æ–¯ä»…å°†å…¶æ•°æ®å‘å¸ƒä¸ºåŸå§‹æ•°æ®ï¼Œä½†ä»–æœªæ˜¾ç¤ºä»»ä½•å›¾å½¢æˆ–ç½®ä¿¡åŒºé—´ã€‚ å¦‚æœä»–èƒ½å¤Ÿè·å¾—æˆ‘ä»¬åˆšåˆšæ±‡æ€»çš„åˆ†æç»“æœï¼Œé‚£ä¹ˆä»–å¯èƒ½ä¼šæ›´æˆåŠŸåœ°è®©ç»´ä¹Ÿçº³çš„åŒ»ç”Ÿæ´—æ‰‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä»–è¢«ç§°ä¸ºæ¯äº²ä»¬çš„æ•‘æ˜Ÿï¼Œå´å› å€¡å¯¼æ´—æ‰‹è€Œè¢«é€å¾€ç²¾ç¥ç—…é™¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
  </entry>
  
  <entry>
    <title>Pythonç¥ç»ç½‘ç»œåˆ†æåŸºç¡€</title>
    <link href="http://wittyfans.com/coding/Python%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90%E5%9F%BA%E7%A1%80.html"/>
    <id>http://wittyfans.com/coding/Pythonç¥ç»ç½‘ç»œåˆ†æåŸºç¡€.html</id>
    <published>2019-12-04T08:30:41.000Z</published>
    <updated>2019-12-04T08:37:19.708Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/12/04/b8mhdtkcqeSiwEg.png" alt=""></p><blockquote><p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ ç¥ç»ç½‘ç»œä¸nexworkX.</p></blockquote><a id="more"></a><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><h1 id="ç½‘ç»œåŸºç¡€"><a href="#ç½‘ç»œåŸºç¡€" class="headerlink" title="ç½‘ç»œåŸºç¡€"></a>ç½‘ç»œåŸºç¡€</h1><p>ä»€ä¹ˆæ˜¯ç¥ç»ç½‘ç»œå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æƒ³è±¡å®ƒæ˜¯æˆ‘ä»¬çš„ç¤¾äº¤ç½‘ç»œï¼Œæˆ–è€…æ˜¯æˆ‘ä»¬çš„é«˜é“è¿è¾“ç½‘ç»œï¼Œç¥ç»ç½‘ç»œå¯¹äºæ¨¡æ‹Ÿ <em>å®ä½“ä¹‹é—´çš„å…³ç³»</em> éå¸¸æœ‰ç”¨ï¼Œé€šè¿‡è¿™ç§æ¨¡æ‹Ÿï¼Œä½ å¯ä»¥äº†è§£åˆ°ï¼Œåœ¨æ•´ä¸ªç½‘ç»œä¸­ï¼Œå“ªä¸€ä¸ªå®ä½“ï¼ˆæˆ–è€…è¯´èŠ‚ç‚¹nodeï¼‰æ˜¯æ¯”è¾ƒé‡è¦çš„,å„ä¸ªå®ä½“ä¹‹é—´çš„è”ç³»ï¼Œå®ä½“ä¹‹é—´çš„è·ç¦»æ€ä¹ˆèµ°æœ€çŸ­ã€‚</p><p>å¯¹äºç½‘ç»œ <em>graph</em>ï¼Œæ˜¯ç”±èŠ‚ç‚¹ä¸å…³ç³»ç»„æˆçš„ï¼ŒèŠ‚ç‚¹å«åš <em>node</em>,å…³ç³»å«åš <em>edge</em>.</p><p>ç½‘ç»œä¸­çš„<em>node</em>ä¸<em>edge</em>éƒ½å¯ä»¥æœ‰è‡ªå·±çš„å±æ€§ã€‚æ¥çœ‹ä¸‹é¢è¿™å¼ ç¤¾äº¤å…³ç³»çš„å›¾ï¼š</p><p><img src="https://i.loli.net/2019/12/01/dlXxE2yc73U8Lez.png" alt=""></p><p>å›¾ä¸­Hugoå’ŒEricæ˜¯æœ‹å‹ï¼Œä»–ä»¬å„è‡ªéƒ½æœ‰å„è‡ªçš„å±æ€§</p><ul><li>id</li><li>age</li></ul><p>ä»–ä»¬æ˜¯æœ‹å‹ï¼Œæ‰€ä»¥å…³ç³»edgeå³ Friendshipï¼Œå…³ç³»ä¹Ÿæœ‰å±æ€§ï¼Œæ ‡æ³¨äº†ä»–ä»¬ç¬¬ä¸€æ¬¡æˆä¸ºæœ‹å‹çš„æ—¶é—´ã€‚</p><h1 id="NetworkXåŸºç¡€"><a href="#NetworkXåŸºç¡€" class="headerlink" title="NetworkXåŸºç¡€"></a>NetworkXåŸºç¡€</h1><p>åœ¨pythonä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºç½‘ç»œä¸ç½‘ç»œèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»å‘¢ï¼Ÿåœ¨pythonä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨networkXè¿™ä¸ªåŒ…ã€‚ä¸‹é¢å»ºç«‹ä¸€ä¸ªç½‘ç»œçš„åŸºæœ¬ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import networkx as nx</span><br><span class="line">G = nx.Graph()</span><br></pre></td></tr></table></figure><p>Gå³ä¸ºä¸€ä¸ªç½‘ç»œï¼Œå¯ä»¥é€šè¿‡ <code>â€ŒG.add_nodes_from([1, 2, 3])</code>å¾€å…¶ä¸­æ·»åŠ èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ·»åŠ è¿›å»ä»¥åï¼Œå°±å¯ä»¥ä½¿ç”¨<code>G.nodes()</code>æ¥æŸ¥çœ‹èŠ‚ç‚¹ï¼Œæ­¤å¤„ä¼šè¿”å›è¿™ä¸ªç½‘ç»œçš„æ‰€æœ‰èŠ‚ç‚¹ã€‚</p><p>é‚£å…³ç³»åˆè¦æ€ä¹ˆå®šä¹‰å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨G.add_edge(1, 2) æ–¹æ³•å°†ä¸¤ä¸ªå®ä½“è¿æ¥èµ·æ¥ï¼Œè¿™ä¼šåœ¨èŠ‚ç‚¹1ä¸2ä¹‹é—´åˆ›å»ºå…³ç³»ã€‚</p><p>å‰é¢æåˆ°äº†ï¼Œæˆ‘ä»¬çš„èŠ‚ç‚¹å¯ä»¥æœ‰å±æ€§ï¼Œç»™èŠ‚ç‚¹çš„å±æ€§èµ‹å€¼å¾ˆç®€å•ï¼Œç›´æ¥èµ‹å€¼å³å¯ï¼š<code>G.node[1][&#39;label&#39;] = &#39;blue&#39;</code>.</p><p>å¦‚æœä½ æƒ³çŸ¥é“ç½‘ç»œçš„èŠ‚ç‚¹æœ‰å“ªäº›å±æ€§ï¼Œé€šè¿‡<code>G.nodes(data=True)</code>å³å¯æŸ¥çœ‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Out: [(1, &#123;&apos;label&apos;: &apos;blue&apos;&#125;), (2, &#123;&#125;), (3, &#123;&#125;)]</span><br></pre></td></tr></table></figure><h1 id="å›¾çš„ç±»å‹"><a href="#å›¾çš„ç±»å‹" class="headerlink" title="å›¾çš„ç±»å‹"></a>å›¾çš„ç±»å‹</h1><p>å›¾çš„ç±»å‹ç®€å•å°±æ˜¯è¯´èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œä¸¾ä¾‹æ¥è¯´ï¼ŒFacebookæ˜¯undirected graphs,å½“ä¸€ä¸ªäººä¸å¦ä¸€ä¸ªäººæˆä¸ºæœ‹å‹ä¹‹åï¼Œè¿™ä¸¤ä¸ªäººè‡ªåŠ¨å°±è¿æ¥åˆ°äº†ä¸€èµ·ï¼Œåœ¨è¿™ç§å…³ç³»ä¸­ï¼Œä¸¤ä¸ªèŠ‚ç‚¹çŸ¥è¯†è¿æ¥åˆ°äº†ä¸€èµ·ï¼Œæ²¡æœ‰æ–¹å‘æ€§ã€‚undirected graphsç±»å‹çš„å›¾åœ¨networkxä¸­çš„ç±»å‹å°±æ˜¯graphï¼Œå½“ä½ ç”¨<code>type</code>å‘½ä»¤æ£€æµ‹å®ƒçš„ç±»å‹æ—¶,ä¼šæ˜¾ç¤º<code>networkx.classes.graph.Graph</code>.</p><p>å¦å¤–ç¬¬ä¸€ç§æ˜¯Directed grarphs,è¿™ç§å›¾é‡Œçš„èŠ‚ç‚¹å°±å¥½åƒtwitterä¸­çš„ç”¨æˆ·ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚ä¸€ä¸ªç”¨æˆ·ä¹Ÿè®¸å…³æ³¨äº†ä¸€ä¸ªäººï¼Œä½†æ˜¯å¦å¤–ä¸€ä¸ªäººå¯èƒ½å´æ²¡æœ‰å…³æ³¨å®ƒï¼Œè¿™æ—¶å€™ä¸¤è€…çš„å…³ç³»å°±æ˜¯å•å‘çš„å…³ç³»ï¼Œè¿™ä¸¤ä¸ªnodeä¹‹é—´çš„å…³ç³»æˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªç®­å¤´è¡¨ç¤ºï¼Œè¿™ç§ç±»å‹çš„å›¾åœ¨networkxä¸­ç”¨<code>networkx.classes.graph.Digraph</code>è¡¨ç¤ºã€‚</p><p>ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ä¹Ÿä¼šæœ‰å¤šæ¡edgeå­˜åœ¨çš„æƒ…å†µ,æ¯”å¦‚ä¸¤ä¸ªç«™ç‚¹ä¹‹é—´æ‰€æœ‰çš„è·¯çº¿ï¼Œè¿™ç§å›¾å«åšMutilDIGraphã€‚</p><p>å¯¹äºä¸¤ä¸ªä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªedgeï¼Œè¿™ä¼šå¯¼è‡´è®¡ç®—é‡å˜å¾—å¾ˆå¤§ï¼Œè¿™æ—¶å€™æˆ‘ä»¬ä¼šå°†å®ƒä»¬ä¹‹é—´edgeçš„ç®¡å®¶ä¿¡æ¯ä¿å­˜æˆedgeçš„å±æ€§ï¼Œæ–¹ä¾¿è®¡ç®—ï¼Œæ¯”å¦‚å°†3æ¡edgeåˆå¹¶æˆ1æ¡ï¼ŒåŒæ—¶æŒ‡å®šè¿™æ¡edgeçš„metadataä¸º3.</p><p>éœ€è¦æ³¨æ„ï¼Œåœ¨æˆ‘ä»¬çš„è½¦ç«™çš„ä¾‹å­ä¸­ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯æˆ‘ä»¬çš„èµ·ç‚¹ä¸ç»ˆç‚¹æ˜¯åŒä¸€ä¸ªç«™ï¼Œè¿™ç§ç‰¹æ®Šçš„æƒ…å†µå«åšself-loops.</p><h1 id="ç»˜åˆ¶å›¾"><a href="#ç»˜åˆ¶å›¾" class="headerlink" title="ç»˜åˆ¶å›¾"></a>ç»˜åˆ¶å›¾</h1><p>æˆ‘ä»¬ä½¿ç”¨ nxviz è¿™ä¸ªåŒ…æ¥ç»˜åˆ¶æ¥ä¸‹æ¥ä»‹ç»çš„ä¸‰ç§å›¾ï¼ŒMatrixã€arcå’ŒCircoså›¾ï¼Œå¼ºçƒˆæ¨èä½ å®‰è£…ï¼Œä½ å¯ä»¥é€šè¿‡pip<br><code>pip install nxviz</code> æˆ–è€…condaå‘½ä»¤<code>conda install -c conda-forge nxviz</code>å®‰è£…ï¼Œ<a href="https://pypi.org/project/nxviz/" target="_blank" rel="noopener">æ›´å¤š</a>å…³äºnxvizçš„èµ„æ–™.</p><h2 id="Matrix-plots"><a href="#Matrix-plots" class="headerlink" title="Matrix plots"></a>Matrix plots</h2><p>Matrix plotså›¾æ˜¯ä¸€ç§ç”¨çŸ©é˜µæ–¹æ ¼æ¥è¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´å…³ç³»çš„å›¾ï¼Œå·¦è¾¹æ˜¯Matrixå›¾ï¼Œå³è¾¹æ˜¯æˆ‘ä»¬çš„èŠ‚ç‚¹å…³ç³»ã€‚</p><p><img src="https://i.loli.net/2019/12/02/d78ojGXvCaFiJTE.png" alt=""></p><ul><li>A-Aæ˜¯ç™½çš„ï¼Œè¡¨ç¤ºå®ƒä¸å®ƒè‡ªå·±æ²¡æœ‰è”ç³»</li><li>A-Bæ˜¯é»‘è‰²çš„ï¼Œè¡¨ç¤ºAæŒ‡å‘Bä¹‹é—´å­˜åœ¨è”ç³»</li><li>B-Aæ˜¯ç™½è‰²çš„ï¼Œè¡¨ç¤ºBæŒ‡å‘Aæ— è”ç³»</li></ul><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”ä¸€åˆ—ä¸ä¸€è¡Œï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è¾¹ç”±å€¼1è¡¨ç¤ºã€‚ä½†æ˜¯ï¼Œè¿™æ ·åšä»…ä¿ç•™äº†weightå…ƒæ•°æ®ï¼ˆedgeä¸Šçš„å±æ€§ï¼‰ï¼›</p><p>ä¸‹é¢æ˜¯ä½¿ç”¨nxvizç»˜åˆ¶graphå¯¹è±¡Tçš„ä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Import nxviz</span><br><span class="line">import nxviz as nv</span><br><span class="line"></span><br><span class="line"># Create the MatrixPlot object: m</span><br><span class="line">m = nv.MatrixPlot(T)</span><br><span class="line"></span><br><span class="line"># Draw m to the screen</span><br><span class="line">m.draw()</span><br><span class="line"></span><br><span class="line"># Display the plot</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"># Convert T to a matrix format: A</span><br><span class="line">A = nx.to_numpy_matrix(T)</span><br><span class="line"></span><br><span class="line"># Convert A back to the NetworkX form as a directed graph: T_conv</span><br><span class="line">T_conv = nx.from_numpy_matrix(A, create_using=nx.DiGraph())</span><br><span class="line"></span><br><span class="line"># Check that the `category` metadata field is lost from each node</span><br><span class="line">for n, d in T_conv.nodes(data=True):</span><br><span class="line">    assert &apos;category&apos; not in d.keys()</span><br></pre></td></tr></table></figure><p>å›¾åƒå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2019/12/02/5VGJYM3B8kzFA2q.png" alt="Matrix plots with nxviz"></p><h2 id="Circos-plots"><a href="#Circos-plots" class="headerlink" title="Circos plots"></a>Circos plots</h2><p>Circos plotsæ˜¯ä¸€ç§å›´ç»•ç€åœ†å¿ƒç»˜åˆ¶çš„å›¾ï¼Œçœ‹èµ·æ¥éå¸¸ç¾è§‚ã€‚</p><p><img src="https://i.loli.net/2019/12/02/iPw4r5xAB6lYds8.png" alt=""></p><p>ç»˜åˆ¶ä¸Šå›¾çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Import necessary modules</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from nxviz import CircosPlot</span><br><span class="line"></span><br><span class="line"># Create the CircosPlot object: c</span><br><span class="line">c = CircosPlot(T)</span><br><span class="line"></span><br><span class="line"># Draw c to the screen</span><br><span class="line">c.draw()</span><br><span class="line"></span><br><span class="line"># Display the plot</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="Arc-plots"><a href="#Arc-plots" class="headerlink" title="Arc plots"></a>Arc plots</h2><p>Arc plotså³å¼§å½¢å›¾ï¼Œå®ƒå°±å¥½åƒæŠŠCircos plotså±•å¼€æˆä¸€æ¡çº¿ï¼Œæ­£å› å¦‚æ­¤å®ƒéœ€è¦æˆ‘ä»¬æŒ‡å®šæ’åºã€‚</p><p><img src="https://i.loli.net/2019/12/02/qe7yQNREpa5KzhT.png" alt=""></p><p>ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Import necessary modules</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from nxviz import ArcPlot</span><br><span class="line"></span><br><span class="line"># Create the un-customized ArcPlot object: a</span><br><span class="line">a = ArcPlot(T)</span><br><span class="line"></span><br><span class="line"># Draw a to the screen</span><br><span class="line">a.draw()</span><br><span class="line"></span><br><span class="line"># Display the plot</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"># Create the customized ArcPlot object: a2</span><br><span class="line">a2 = ArcPlot(T,node_order=&apos;category&apos;,node_color=&apos;category&apos;)</span><br><span class="line"></span><br><span class="line"># Draw a2 to the screen</span><br><span class="line">a2.draw()</span><br><span class="line"></span><br><span class="line"># Display the plot</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><code>node_order=&#39;keyX&#39;</code> ä¸ <code>node_color=&#39;keyX&#39;</code> å³æŒ‡å®šè¿™ä¸ªå›¾çš„æ’åºæ–¹å¼ä¸é¢œè‰²åŒºåˆ†å‚è€ƒé€‰é¡¹ã€‚</p><h1 id="é‡è¦çš„èŠ‚ç‚¹"><a href="#é‡è¦çš„èŠ‚ç‚¹" class="headerlink" title="é‡è¦çš„èŠ‚ç‚¹"></a>é‡è¦çš„èŠ‚ç‚¹</h1><p>å¦‚æœæˆ‘ä»¬éœ€è¦åˆ†æå›¾ï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹å›¾çš„èŠ‚ç‚¹æœ‰æ‰€äº†è§£ï¼Œå¯¹äºä¸€å¼ å›¾æ¥è¯´ï¼Œå…¶ä¸­æœ‰é‡è¦çš„èŠ‚ç‚¹ï¼Œä¹Ÿæœ‰ä¸é‚£ä¹ˆé‡è¦çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚å¯¹äºåœ°é“æ¥è¯´ï¼Œé‚£äº›å¸‚ä¸­å¿ƒçš„æ¢ä¹˜ç«™æ¯”å…¶ä»–çº¿è·¯çš„ç»ˆç‚¹ç«™è¦é‡è¦ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»å‡ ä¸ªä¸èŠ‚ç‚¹æœ‰å…³çš„æ¦‚å¿µã€‚</p><h2 id="Degree-Centrality"><a href="#Degree-Centrality" class="headerlink" title="Degree Centrality"></a>Degree Centrality</h2><p>Degreeå³ä¸€ä¸ªnodeæ‹¥æœ‰å¤šå°‘ä¸ªé‚»å±…ï¼ŒDegree Centralityå³æ ¹æ®å›¾ä¸­èŠ‚ç‚¹é‚»å±…çš„ä¸ªæ•°æ¥ç»™æ¯ä¸ªèŠ‚ç‚¹æ‰“åˆ†ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹è¿æ¥çš„é‚»å±…æ›´å¤šï¼Œé‚£å®ƒå°±æ›´é‡è¦ï¼Œåˆ†æ•°ä¹Ÿæ›´é«˜ï¼ŒDegree Centralityçš„å®šä¹‰ä¸º:</p><p>$$\frac{Neighbors\ I\ Have}{Neighbors\ I\ Could\ Possible\ Have}$$</p><p>è¿™é‡Œçš„ <em>Neighbors I could possible have</em> å°±æ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬çš„è®¨è®ºæ°›å›´å…è®¸self-loopså­˜åœ¨ï¼Œåˆ™å®ƒä¹ŸåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±ï¼Œå¦‚æœä¸å…è®¸ï¼Œåˆ™åªç®—æ‰€æœ‰é™¤æˆ‘ä¹‹å¤–çš„èŠ‚ç‚¹ã€‚</p><p>åœ¨networkxä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>G.neighbors(node_name)</code> æ¥æŸ¥çœ‹ä¸€ä¸ªèŠ‚ç‚¹æ‹¥æœ‰å¤šå°‘ä¸ªé‚»å±…ï¼Œå¦‚æœä½ ä¼ è¿›ä¸€ä¸ªæ²¡æœ‰çš„èŠ‚ç‚¹ï¼Œnetworkxåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><p>å½“æˆ‘ä»¬æœ‰äº†æ‰€æœ‰èŠ‚ç‚¹çš„é‚»å±…æ•°ï¼Œå°±å¯ä»¥æ ¹æ®å®ƒæ¥è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹åœ¨å›¾ä¸­çš„é‡è¦æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨ <em>nx.degree_centrality(G)</em> æ¥æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹çš„Degree Centralityåˆ†æ•°ï¼Œæ³¨æ„è¿™é‡Œåˆ†æ•°çš„è®¡ç®—ä¸­ï¼Œä¸åŒ…å«self-loopsçš„æƒ…å†µã€‚</p><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šæ‰¾åˆ°æˆ‘ä»¬ç½‘ç»œä¸­é‚»å±…æ•°æœ€é«˜çš„èŠ‚ç‚¹,æœ‰äº†å®ƒæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†ä¸€äº›é—®é¢˜ï¼Œå¦‚æ‰¾åˆ°Twitterç”¨æˆ·ä¸­ï¼Œé‚£äº›æœ€æœ‰å½±å“åŠ›çš„ç”¨æˆ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># Define find_nodes_with_highest_deg_cent()</span><br><span class="line">def find_nodes_with_highest_deg_cent(G):</span><br><span class="line"></span><br><span class="line">    # Compute the degree centrality of G: deg_cent</span><br><span class="line">    deg_cent = nx.degree_centrality(G)</span><br><span class="line"></span><br><span class="line">    # Compute the maximum degree centrality: max_dc</span><br><span class="line">    max_dc = max(list(deg_cent.values()))</span><br><span class="line"></span><br><span class="line">    nodes = set()</span><br><span class="line"></span><br><span class="line">    # Iterate over the degree centrality dictionary</span><br><span class="line">    for k, v in deg_cent.items():</span><br><span class="line"></span><br><span class="line">        # Check if the current value has the maximum degree centrality</span><br><span class="line">        if v == max_dc:</span><br><span class="line"></span><br><span class="line">            # Add the current node to the set of nodes</span><br><span class="line">            nodes.add(k)</span><br><span class="line"></span><br><span class="line">    return nodes</span><br><span class="line"></span><br><span class="line"># Find the node(s) that has the highest degree centrality in T: top_dc</span><br><span class="line">top_dc = find_nodes_with_highest_deg_cent(T)</span><br><span class="line">print(top_dc)</span><br><span class="line"></span><br><span class="line"># Write the assertion statement</span><br><span class="line">for node in top_dc:</span><br><span class="line">    assert nx.degree_centrality(T)[node] == max(nx.degree_centrality(T).values())</span><br></pre></td></tr></table></figure><h2 id="Path-finding"><a href="#Path-finding" class="headerlink" title="Path finding"></a>Path finding</h2><p>path findingæœ‰å¾ˆå¤šçš„åº”ç”¨èŒƒå›´ï¼Œæ¯”å¦‚ä¸¤ä¸ªè½¦ç«™ä¹‹é—´æœ€çŸ­è·¯çº¿çš„å¯»æ‰¾ï¼Œæ¶ˆæ¯ã€ç—…æ¯’çš„ä¼ æ’­ï¼Œæˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æœ‰å¾ˆå¤šç§è·¯çº¿å¯ä»¥é€‰æ‹©ï¼Œé‚£ä¹ˆè¦å¦‚ä½•æ‰¾åˆ°æœ€çŸ­çš„è¿™æ¡è·¯çº¿å‘¢ï¼Ÿ</p><p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œä½¿ç”¨Bread-first searchç®—æ³•ï¼Œå®ƒçš„åŸç†å¦‚ä¸‹å›¾ï¼š</p><p>æˆ‘ä»¬ä»é»„è‰²çš„èŠ‚ç‚¹å¼€å§‹ï¼Œç¬¬ä¸€æ¬¡æ‰¾é»„è‰²èŠ‚ç‚¹çš„é‚»å±…ï¼Œå¹¶æ£€æŸ¥ç›®æ ‡èŠ‚ç‚¹æ˜¯å¦åœ¨å½“å‰èŠ‚ç‚¹çš„é‚»å±…ä¸­ï¼Œå¦‚æœä¸å­˜åœ¨å°±ç»§ç»­æœå¯»ä¸‹ä¸€å±‚èŠ‚ç‚¹ï¼Œæ‰¾åˆ°ä¸ºæ­¢ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆå®šä¸€ä¸ªå¯»æ‰¾èŠ‚ç‚¹ä¹‹é—´è·¯å¾„çš„ç®—æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Define path_exists()</span><br><span class="line">def path_exists(G, node1, node2):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    This function checks whether a path exists between two nodes (node1, node2) in graph G.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    visited_nodes = set()</span><br><span class="line"></span><br><span class="line">    # Initialize the queue of nodes to visit with the first node: queue</span><br><span class="line">    queue = [node1]</span><br><span class="line"></span><br><span class="line">    # Iterate over the nodes in the queue</span><br><span class="line">    for node in queue:</span><br><span class="line"></span><br><span class="line">        # Get neighbors of the node</span><br><span class="line">        neighbors = G.neighbors(node)</span><br><span class="line"></span><br><span class="line">        # Check to see if the destination node is in the set of neighbors</span><br><span class="line">        if node2 in neighbors:</span><br><span class="line">            print(&apos;Path exists between nodes &#123;0&#125; and &#123;1&#125;&apos;.format(node1, node2))</span><br><span class="line">            return True</span><br><span class="line">            break</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç®—æ³•ä¼šç¡®å®šä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯å¦å­˜åœ¨è·¯å¾„ï¼Œä»”ç»†æŸ¥çœ‹ä¸Šé¢çš„ä»£ç ï¼Œå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ç›´æ¥å­˜åœ¨è·¯å¾„ï¼Œè¯¥å‡½æ•°å°±è¿”å›trueï¼Œå¦‚æœä¸å­˜åœ¨å‘¢ï¼Ÿä¸å­˜åœ¨æˆ‘ä»¬åˆ™éœ€è¦å¯¹å‰©ä¸‹çš„èŠ‚ç‚¹è¿›ä¸€æ­¥çš„æœå¯»ï¼Œè®©æˆ‘ä»¬æŠŠå‰©ä¸‹çš„ä»£ç è¡¥å…¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def path_exists(G, node1, node2):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    This function checks whether a path exists between two nodes (node1, node2) in graph G.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    visited_nodes = set()</span><br><span class="line">    queue = [node1]</span><br><span class="line"></span><br><span class="line">    for node in queue:</span><br><span class="line">        neighbors = G.neighbors(node)</span><br><span class="line">        if node2 in neighbors:</span><br><span class="line">            print(&apos;Path exists between nodes &#123;0&#125; and &#123;1&#125;&apos;.format(node1, node2))</span><br><span class="line">            return True</span><br><span class="line">          </span><br><span class="line">        else:</span><br><span class="line">            # Add current node to visited nodes</span><br><span class="line">            visited_nodes.add(node)</span><br><span class="line"></span><br><span class="line">            # Add neighbors of current node that have not yet been visited</span><br><span class="line">            queue.extend([n for n in neighbors if n not in visited_nodes])</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡½æ•°ä¸­çš„queueå·²ç»ç©ºäº†ï¼Œä¹Ÿå°±æ˜¯æ‰¾å®Œäº†äº†éƒ½æ²¡æ‰¾åˆ°è·¯å¾„ï¼Œé‚£æˆ‘ä»¬ä¹Ÿè¦è¿”å›ç»“æœï¼šå³è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰è·¯å¾„å­˜åœ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">def path_exists(G, node1, node2):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    This function checks whether a path exists between two nodes (node1, node2) in graph G.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    visited_nodes = set()</span><br><span class="line">    queue = [node1]</span><br><span class="line"></span><br><span class="line">    for node in queue:</span><br><span class="line">        neighbors = G.neighbors(node)</span><br><span class="line">        if node2 in neighbors:</span><br><span class="line">            print(&apos;Path exists between nodes &#123;0&#125; and &#123;1&#125;&apos;.format(node1, node2))</span><br><span class="line">            return True</span><br><span class="line">            break</span><br><span class="line"></span><br><span class="line">        else:</span><br><span class="line">            visited_nodes.add(node)</span><br><span class="line">            queue.extend([n for n in neighbors if n not in visited_nodes])</span><br><span class="line"></span><br><span class="line">        # Check to see if the final element of the queue has been reached</span><br><span class="line">        if node == queue[-1]:</span><br><span class="line">            print(&apos;Path does not exist between nodes &#123;0&#125; and &#123;1&#125;&apos;.format(node1, node2))</span><br><span class="line"></span><br><span class="line">            # Place the appropriate return statement</span><br><span class="line">            return False</span><br></pre></td></tr></table></figure><h2 id="Betweenness-centrality"><a href="#Betweenness-centrality" class="headerlink" title="Betweenness centrality"></a>Betweenness centrality</h2><p>Betweenness centralityè¿™ä¸ªæ¦‚å¿µä¸æœ€çŸ­è·¯å¾„æ¯æ¯ç›¸å…³ï¼Œä¸Šé¢æˆ‘ä»¬å·²ç»å®šä¹‰äº†å¦‚ä½•æ‰¾åˆ°æœ€çŸ­è·¯å¾„çš„ç®—æ³•ï¼Œé‚£ä¹ˆå¯¹äºæˆ‘ä»¬å›¾ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹å¯¹ï¼ˆä¸¤ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œéƒ½æœ‰å®ƒä»¬çš„æœ€çŸ­è·¯å¾„ï¼Œè¿™äº›æœ€çŸ­è·¯å¾„é€šè¿‡çš„èŠ‚ç‚¹ä¸­ï¼Œå“ªäº›èŠ‚ç‚¹çš„é€šè¿‡æ•°æ˜¯æœ€é«˜çš„ï¼Œåˆ™å®ƒçš„é‡è¦æ€§å°±æ›´é«˜ï¼Œè¿™å°±æ˜¯Betweenness centralityçš„æ„æ€ï¼Œå®ƒçš„å®šä¹‰ä¸ºï¼š</p><p>$$\frac{num.\ shortest\ paths\ through\ node}{all\ possible\ shortest\ paths}$$</p><p>Betweenness centralityå¯¹äºæ‰¾åˆ°ä¸¤ä¸ªç¾¤ä½“ä¹‹é—´è”ç³»å¿…é¡»é€šè¿‡çš„é‚£äº›å®ä½“å¾ˆæœ‰å¸®åŠ©ï¼Œæ¯”å¦‚é‚£äº›å¸®åŠ©ä¸¤ä¸ªå…šæ´¾ä¹‹é—´çš„è”ç³»çš„ï¼Œå……å½“æ¡¥æ¢ä½œç”¨çš„äººï¼Œäº’è”ç½‘ä¸­ä¸¤ä¸ªåœ°åŒºä¹‹é—´çš„ç½‘ç»œæµé‡äº¤æµï¼Œç¡®å®šé‚£äº›å¾ˆé‡è¦çš„èŠ‚ç‚¹ã€‚</p><p>Betweenness centralityå¯ä»¥ç›´æ¥é€šè¿‡nxçš„æ–¹æ³•è®¡ç®—å¾—åˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bet_cen = nx.betweenness_centrality(T)</span><br></pre></td></tr></table></figure><h1 id="Communities-amp-cliques"><a href="#Communities-amp-cliques" class="headerlink" title="Communities &amp; cliques"></a>Communities &amp; cliques</h1><p>cliqueså³æˆ‘ä»¬æ‰€è¯´çš„å°å›¢ä½“ã€å°é›†å›¢ï¼Œäº‹å®ä¸Šè¿™ä¸ªè¯´æ³•å°±æ¥æºäºæˆ‘ä»¬çš„ç¤¾äº¤ç”Ÿæ´»ï¼Œåœ¨æˆ‘ä»¬æ‰€è¯´çš„å°å›¢ä½“ä¸­ï¼Œæˆ‘ä»¬è®¤è¯†å…¶ä»–æ‰€æœ‰äººï¼Œè€Œcliquesä¹Ÿæ˜¯è¿™æ ·ï¼Œæ¯ä¸ªä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¸å…¶ä»–çš„èŠ‚ç‚¹éƒ½æœ‰è¿æ¥ã€‚</p><p>ä¸¾ä¾‹ï¼Œä¸€ä¸ªæœ€ç®€å•çš„cliqueså°±æ˜¯ä¸€ä¸ªä¸‰è§’å½¢ï¼Œåœ¨Facebookçš„ç¤¾äº¤ç½‘ç»œä¸­ï¼Œå¦‚æœaè®¤è¯†bï¼Œbè®¤è¯†cï¼Œå¦‚æœcä¹Ÿè®¤è¯†aï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªä¸‰è§’å½¢ï¼Œä½†æ˜¯å¦‚æœä¸è®¤è¯†ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¨èä»–ä»¬è®¤è¯†ï¼Œå¦‚ä½•æ‰¾åˆ°è¿™äº›ç¼ºäº†ä¸€æ¡è”ç³»å°±å¯ä»¥ç»„æˆä¸‰è§’å½¢çš„å…³ç³»å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼ŒGï¼šä¸€ä¸ªç½‘ç»œï¼Œnä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™ä¸ªå‡½æ•°ä¼šç¡®å®šnèŠ‚ç‚¹åœ¨Gç½‘ç»œä¸­ï¼Œæ˜¯å¦å­˜åœ¨<strong>ä¸‰è§’å…³ç³»</strong>,å³: node <code>n</code> in graph <code>G</code> is in a triangle relationship or not.</p><p>åœ¨æˆ‘ä»¬çš„ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®ä¼ å…¥çš„ç½‘ç»œï¼Œæ‰¾åˆ°nçš„æ‰€æœ‰é‚»å±…ï¼Œç„¶åéå†å…¶æ‰€æœ‰é‚»å±…å¯¹ï¼Œå¦‚æœå…¶ä¸­æœ‰æŸä¸€å¯¹å­˜åœ¨edgeå…³ç³»ï¼Œé‚£ä¹ˆè¿™å°±ç»„æˆäº†ä¸€ä¸ªä¸‰è§’å…³ç³»ï¼ˆå› ä¸ºè¿™ä¸¤è€…å·²ç»æ˜¯nçš„é‚»å±…ï¼Œè€Œè¿™ä¸¤è€…ä¹‹é—´åˆæœ‰å…³ç³»ï¼‰</p><p>ç®—æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">from itertools import combinations</span><br><span class="line"></span><br><span class="line"># Define is_in_triangle()</span><br><span class="line">def is_in_triangle(G, n):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Checks whether a node `n` in graph `G` is in a triangle relationship or not.</span><br><span class="line"></span><br><span class="line">    Returns a boolean.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    in_triangle = False</span><br><span class="line"></span><br><span class="line">    # Iterate over all possible triangle relationship combinations</span><br><span class="line">    for n1, n2 in combinations(G.neighbors(n),2):</span><br><span class="line"></span><br><span class="line">        # Check if an edge exists between n1 and n2</span><br><span class="line">        if G.has_edge(n1,n2):</span><br><span class="line">            in_triangle = True</span><br><span class="line">            break</span><br><span class="line">    return in_triangle</span><br></pre></td></tr></table></figure><blockquote><p>combinationsæ˜¯ä¸€ä¸ªéå†å·¥å…·ï¼Œç”¨äºç»„åˆèŠ‚ç‚¹çš„æ‰€æœ‰é‚»å±…å¯¹ã€‚</p></blockquote><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ï¼Œæ‰¾å‡ºæ‰€æœ‰çš„ä¸‰è§’å…³ç³»:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">from itertools import combinations</span><br><span class="line"></span><br><span class="line"># Write a function that identifies all nodes in a triangle relationship with a given node.</span><br><span class="line">def nodes_in_triangle(G, n):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Returns the nodes in a graph `G` that are involved in a triangle relationship with the node `n`.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    triangle_nodes = set([n])</span><br><span class="line"></span><br><span class="line">    # Iterate over all possible triangle relationship combinations</span><br><span class="line">    for n1, n2 in combinations(G.neighbors(n),2):</span><br><span class="line"></span><br><span class="line">        # Check if n1 and n2 have an edge between them</span><br><span class="line">        if G.has_edge(n1,n2):</span><br><span class="line"></span><br><span class="line">            # Add n1 to triangle_nodes</span><br><span class="line">            triangle_nodes.add(n1)</span><br><span class="line"></span><br><span class="line">            # Add n2 to triangle_nodes</span><br><span class="line">            triangle_nodes.add(n2)</span><br><span class="line"></span><br><span class="line">    return triangle_nodes</span><br><span class="line"></span><br><span class="line"># Write the assertion statement</span><br><span class="line">assert len(nodes_in_triangle(T, 1)) == 35</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦åšä¸€ä¸ªå¥½å‹æ¨èç³»ç»Ÿï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦æ‰¾å‡ºé‚£äº›open triangleå…³ç³»ï¼Œå³æˆ‘ä»¬åˆšæ‰æåˆ°çš„ï¼Œaè®¤è¯†bï¼Œbè®¤è¯†cï¼Œè€Œaå¹¶ä¸è®¤è¯†cï¼Œè®©æˆ‘ä»¬å†™ä¸€ä¸ªæ‰¾è¿™ç§open triangleå…³ç³»çš„å‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">from itertools import combinations</span><br><span class="line"></span><br><span class="line"># Define node_in_open_triangle()</span><br><span class="line">def node_in_open_triangle(G, n):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Checks whether pairs of neighbors of node `n` in graph `G` are in an &apos;open triangle&apos; relationship with node `n`.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    in_open_triangle = False</span><br><span class="line"></span><br><span class="line">    # Iterate over all possible triangle relationship combinations</span><br><span class="line">    for n1, n2 in combinations(G.neighbors(n),2):</span><br><span class="line"></span><br><span class="line">        # Check if n1 and n2 do NOT have an edge between them</span><br><span class="line">        if not G.has_edge(n1,n2):</span><br><span class="line"></span><br><span class="line">            in_open_triangle = True</span><br><span class="line"></span><br><span class="line">            break</span><br><span class="line"></span><br><span class="line">    return True</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªå‡½æ•°æ¥æŸ¥çœ‹ä¸€ä¸ªå›¾ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªopen triangle:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Compute the number of open triangles in T</span><br><span class="line">num_open_triangles = 0</span><br><span class="line"></span><br><span class="line"># Iterate over all the nodes in T</span><br><span class="line">for n in T.nodes():</span><br><span class="line"></span><br><span class="line">    # Check if the current node is in an open triangle</span><br><span class="line">    if node_in_open_triangle(T,n):</span><br><span class="line"></span><br><span class="line">        # Increment num_open_triangles</span><br><span class="line">        num_open_triangles += 1</span><br><span class="line"></span><br><span class="line">print(num_open_triangles)</span><br></pre></td></tr></table></figure><h2 id="Maximal-cliques"><a href="#Maximal-cliques" class="headerlink" title="Maximal cliques"></a>Maximal cliques</h2><p>æˆ‘ä»¬å·²ç»æœ‰äº†cliquesçš„æ¦‚å¿µï¼Œmaximal cliquesçš„æ„æ€æ˜¯ï¼Œåœ¨ä¸€ä¸ªå›¢ä½“ä¸­ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªnodeï¼Œå¦‚æœæ•´ä¸ªå›¾åƒä¸­çš„èŠ‚ç‚¹è¿˜æ˜¯å½¼æ­¤äº’ç›¸è¿æ¥ç€çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªcliquesè¿˜æ˜¯ä¸€ä¸ªcliquesï¼Œä½†å¦‚æœæˆ‘ä»¬å¢åŠ nodeåï¼Œæ•´ä¸ªå›¾åƒçš„èŠ‚ç‚¹ä¸å†æ˜¯å½¼æ­¤è¿æ¥ç€ï¼Œé‚£å¢åŠ å‰çš„å›¾åƒå°±æ˜¯æˆ‘ä»¬çš„maximal cliques.</p><p>nexworkxæä¾›äº†ä¸€ä¸ª<code>find_cliques</code>æ–¹æ³•æ¥å¯»æ‰¾æ‰€æœ‰çš„cliquesä¸Maximal cliquesã€‚</p><p>ä¸‹é¢æ˜¯å¯¹<code>find_cliques</code>æ–¹æ³•çš„ä¸€ä¸ªå®è·µï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ç”¨æ¥å¯»æ‰¾ä¸€ä¸ªå›¾ä¸­æ‹¥æœ‰sizeæ•°çš„max_cliquesçš„ä¸ªæ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># Define maximal_cliques()</span><br><span class="line">def maximal_cliques(G, size):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Finds all maximal cliques in graph `G` that are of size `size`.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    mcs = []</span><br><span class="line">    for clique in nx.find_cliques(G):</span><br><span class="line">        if len(clique) == size:</span><br><span class="line">            mcs.append(clique)</span><br><span class="line">    return mcs</span><br><span class="line"></span><br><span class="line"># Check that there are 33 maximal cliques of size 3 in the graph T</span><br><span class="line">assert len(maximal_cliques(T, 3)) == 33</span><br></pre></td></tr></table></figure><h2 id="Subgraphs"><a href="#Subgraphs" class="headerlink" title="Subgraphs"></a>Subgraphs</h2><p>Subgraphså³å­å›¾çš„æ„æ€ï¼Œå¯¹äºä¸€ä¸ªå›¾ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸€äº›æ„Ÿå…´è¶£çš„ä¿¡æ¯çªå‡ºå±•ç¤ºï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°å­å›¾ã€‚</p><p>ä¸‹é¢æ˜¯ç»˜åˆ¶å­å›¾çš„ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># å¯¼å…¥åŒ…</span><br><span class="line">In [1]: import networkx as nx</span><br><span class="line"># åˆ›å»ºå›¾</span><br><span class="line">In [2]: G = nx.erdos_renyi_graph(n=20, p=0.2)</span><br><span class="line"># æŸ¥çœ‹èŠ‚ç‚¹</span><br><span class="line">In [3]: G.nodes()</span><br><span class="line">Out[3]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,</span><br><span class="line">17, 18, 19]</span><br><span class="line"></span><br><span class="line"># å°†ä¸Šé¢å›¾ä¸­çš„èŠ‚ç‚¹8å¤åˆ¶ç»™nodes</span><br><span class="line">In [4]: nodes = G.neighbors(8)</span><br><span class="line">In [5]: nodes</span><br><span class="line">Out[5]: [2, 3, 4, 10]</span><br><span class="line">In [6]: nodes.append(8)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># å°†å­å›¾æ·»åŠ åˆ°G</span><br><span class="line">In [7]: G_eight = G.subgraph(nodes)</span><br><span class="line"></span><br><span class="line"># æŸ¥çœ‹G_eightçš„edges</span><br><span class="line">In [8]: G_eight.edges()</span><br><span class="line">Out[8]: [(8, 2), (8, 3), (8, 4), (8, 10), (2, 10)]</span><br><span class="line">In [9]: G_eight</span><br><span class="line">Out[9]: &lt;networkx.classes.graph.Graph at 0x10cae39e8&gt;</span><br><span class="line">In [10]: G</span><br><span class="line">Out[10]: &lt;networkx.classes.graph.Graph at 0x10cad1f60&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœ:</p><p><img src="https://i.loli.net/2019/12/04/JzZorRNK7sd95X1.png" alt=""></p><p>å› ä¸ºç»˜åˆ¶å­å›¾çš„æ“ä½œç»å¸¸è¦ç”¨åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°æ¥ç®€åŒ–è¿™ä¸ªæ­¥éª¤ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªå›¾ä¸èŠ‚ç‚¹æ•°ç»„ï¼ˆå³æ„Ÿå…´è¶£çš„èŠ‚ç‚¹ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Define get_nodes_and_nbrs()</span><br><span class="line">def get_nodes_and_nbrs(G, nodes_of_interest):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    Returns a subgraph of the graph `G` with only the `nodes_of_interest` and their neighbors.</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    nodes_to_draw = []</span><br><span class="line"></span><br><span class="line">    # Iterate over the nodes of interest</span><br><span class="line">    for n in nodes_of_interest:</span><br><span class="line"></span><br><span class="line">        # Append the nodes of interest to nodes_to_draw</span><br><span class="line">        nodes_to_draw.append(n)</span><br><span class="line"></span><br><span class="line">        # Iterate over all the neighbors of node n</span><br><span class="line">        for nbr in G.neighbors(n):</span><br><span class="line"></span><br><span class="line">            # Append the neighbors of n to nodes_to_draw</span><br><span class="line">            nodes_to_draw.append(nbr)</span><br><span class="line"></span><br><span class="line">    return G.subgraph(nodes_to_draw)</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nodes_of_interest = [29, 38, 42]</span><br><span class="line"></span><br><span class="line"># Extract the subgraph with the nodes of interest: T_draw</span><br><span class="line">T_draw = get_nodes_and_nbrs(T,nodes_of_interest)</span><br><span class="line"></span><br><span class="line"># Draw the subgraph to the screen</span><br><span class="line">nx.draw(T_draw)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/12/04/JqXiLphy4bBcFaZ.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/12/04/b8mhdtkcqeSiwEg.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»Šå¤©æˆ‘ä»¬å­¦ä¹ ç¥ç»ç½‘ç»œä¸nexworkX.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="nexworkX" scheme="http://wittyfans.com/tags/nexworkX/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ï¼šæ³›åŒ–è¯¯å·®ä¸éšæœºæ£®æ—</title>
    <link href="http://wittyfans.com/coding/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E6%B3%9B%E5%8C%96%E8%AF%AF%E5%B7%AE%E4%B8%8E%E9%9A%8F%E6%9C%BA%E6%A3%AE%E6%9E%97.html"/>
    <id>http://wittyfans.com/coding/æœºå™¨å­¦ä¹ ï¼šæ³›åŒ–è¯¯å·®ä¸éšæœºæ£®æ—.html</id>
    <published>2019-11-24T13:03:54.000Z</published>
    <updated>2019-11-24T13:07:18.541Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/24/xpv9ZiqB734oNAO.png" alt=""></p><blockquote><p>è¿™ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æ¥äº†è§£è¯¯å·®ï¼Œå¦‚ä½•å¤„ç†è¯¯å·®ï¼Œä»¥åŠå­¦ä¹ éšæœºæ£®æ—çš„åŸºç¡€çŸ¥è¯†ã€‚</p></blockquote><a id="more"></a><p>æœºå™¨å­¦ä¹ ï¼šæ³›åŒ–è¯¯å·®ä¸éšæœºæ£®æ—</p><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><h1 id="æ³›åŒ–è¯¯å·®-Generalization-Error"><a href="#æ³›åŒ–è¯¯å·®-Generalization-Error" class="headerlink" title="æ³›åŒ–è¯¯å·® (Generalization Error)"></a>æ³›åŒ–è¯¯å·® (Generalization Error)</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>æˆ‘ä»¬çŸ¥é“åœ¨ç›‘ç£å­¦ä¹ çš„çº¿æ€§æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬æ•°æ®åˆ†å¸ƒç¬¦åˆä¸‹é¢çš„å‡½æ•°ï¼Œå³:</p><p>$$y=f(x)$$</p><p>å…¶ä¸­ï¼Œyå’Œxæ˜¯å·²çŸ¥çš„ï¼Œè€Œ <em>f</em> æ˜¯æœªçŸ¥çš„ã€‚</p><p>åŒæ—¶åœ¨æˆ‘ä»¬çš„æ•°æ®åˆ†å¸ƒä¸­ï¼Œæ•°æ®é›†ä¸å¯èƒ½å®Œå…¨æŒ‰ç…§æˆ‘ä»¬çš„å‡½æ•°åˆ†å¸ƒï¼Œæ€»æ˜¯æœ‰äº›ç‚¹ï¼ˆå™ªéŸ³ï¼‰äº‹è¦†ç›–åœ¨æˆ‘ä»¬çš„å‡½æ•°å‘¨è¾¹ï¼š</p><p><img src="https://i.loli.net/2019/11/22/V1xpq4uPFtJl6XM.png" alt=""></p><p>å½“ä½ è®­ç»ƒä½ çš„æ¨¡å‹çš„æ—¶å€™ï¼Œä½ å¸Œæœ›è¿™äº›å™ªéŸ³å°½å¯èƒ½çš„å»é™¤ï¼ŒåŒæ—¶é¢„æµ‹çš„ç»“æœå°½å¯èƒ½å°‘å‡ºé”™ã€‚</p><p>ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œä½ ä¼šé‡åˆ°ä¸¤ä¸ªéš¾é¢˜ï¼Œå³è¿‡åº¦æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆã€‚</p><p>è¿‡åº¦æ‹Ÿåˆå³æˆ‘ä»¬çš„æ¨¡å‹è¿‡äºæ•æ„Ÿï¼Œæ¬ æ‹Ÿåˆå³æ¨¡å‹è¿‡äºè¿Ÿé’ï¼Œå¦‚ä¸‹é¢ä¸¤å¼ å›¾å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2019/11/22/JzMd6FZbENkY23s.png" alt="è¿‡åº¦æ‹Ÿåˆ-Overfitting"></p><p><img src="https://i.loli.net/2019/11/22/1mp6JLoCWhESyKG.png" alt="æ¬ æ‹Ÿåˆ-Underfitting"></p><p>ä»€ä¹ˆæ˜¯æ³›åŒ–è¯¯å·®å‘¢ï¼Ÿè¿™æ˜¯ä¸€ç§è¡¡é‡æˆ‘ä»¬æ¨¡å‹ä¸æ•°æ®åˆ†å¸ƒä¹‹é—´è¯¯å·®ï¼Œå¯¹äºä¸€ä¸ªæ¨¡å‹çš„æ³›åŒ–è¯¯å·®ï¼Œå³å®ƒå¯¹äºæ–°çš„æ•°æ®çš„é¢„æµ‹ä¸­çš„è¯¯å·®ï¼Œç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><p>$$\hat{f}=bias^2+variance+irreducible\ error$$</p><p>å…ˆçœ‹ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œbiasã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ç»„è€é¼ çš„ä½“é‡ä¸ä½“é•¿çš„åˆ†å¸ƒæ•°æ®ï¼Œæˆ‘ä»¬æŠŠå®ƒåˆ†å‰²æˆtrainç»„ä¸testç»„ï¼Œæˆ‘ä»¬åœ¨trainç»„ä¸­è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹å¾—åˆ°ä¸€æ¡ç›´çº¿ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®é›†çš„åˆ†å¸ƒæ˜¯ä¸€æ¡æ›²çº¿ï¼Œè€Œå½“æˆ‘ä»¬çš„æ•°æ®é›†åˆ†å¸ƒæ˜¯ä¸€ä¸ªæ›²çº¿çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç”¨ä¸€æ¡ç›´çº¿æ˜¯æ— æ³•å®Œæ•´çš„æè¿°æ•°æ®é›†çš„åˆ†å¸ƒçš„ï¼Œæ— è®ºæˆ‘ä»¬æ€ä¹ˆè°ƒæ•´è¿™æ ¹ç›´çº¿ï¼Œè¿™ç§æƒ…å†µå°±å«åšbias:</p><p><img src="https://i.loli.net/2019/11/24/VocITXg4FG23kWY.png" alt=""></p><p>å¦å¤–ï¼Œæˆ‘ä»¬æ¨¡å‹ä¹Ÿå¯èƒ½æ˜¯ç”Ÿæˆä¸€æ¡æ›²çº¿ï¼Œè€Œè¿™æ¡æ›²çº¿å®Œç¾çš„ç©¿è¿‡äº†æˆ‘ä»¬çš„trainæ•°æ®é›†ï¼š</p><p><img src="https://i.loli.net/2019/11/24/TvAPh3HNk2uOE1o.png" alt=""></p><p>å½“æˆ‘ä»¬ç”¨æœ€å°äºŒä¹˜æ³•å»è¡¡é‡æ¨¡å‹çš„å¥½åæ—¶ï¼Œæ— ç–‘ç¬¬äºŒä¸ªæ¨¡å‹æ˜¯æœ€å®Œç¾çš„ï¼Œå®ƒä¸æ¯ä¸ªç‚¹çš„çš„è·ç¦»éƒ½æ˜¯0ã€‚</p><p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬è¯¥æ›²çº¿ä¸testç»„çš„æ•°æ®æ”¾åˆ°ä¸€èµ·æ—¶ï¼Œæƒ…å†µå¯èƒ½å°±ä¸ä¸€æ ·äº†ï¼Œè¿™å°±å¼•å‡ºäº†varianceçš„å®šä¹‰ï¼š</p><p><img src="https://i.loli.net/2019/11/24/1qIShcuvRgAj5zr.png" alt=""></p><p><img src="https://i.loli.net/2019/11/24/AF2SmliXMGOZtHo.png" alt=""></p><p><img src="https://i.loli.net/2019/11/24/eKsd9pgExNOlLmB.png" alt=""></p><p>ç°åœ¨çŸ¥é“äº†biasä»¥åŠvarianceï¼Œæˆ‘ä»¬å°±çŸ¥é“å¦‚ä½•å»ä¼˜åŒ–æ¨¡å‹äº†ï¼Œ<br>æˆ‘ä»¬éœ€è¦å‡è¡¡è®¾ç½®è¿™ä¸‰ä¸ªå‚æ•°ï¼Œè®©ä»–ä»¬å„è‡ªéƒ½åœ¨ä¸€ä¸ªæœ€åˆé€‚çš„ä½ç½®ï¼š</p><p><img src="https://i.loli.net/2019/11/22/JTEIruvo58VG6Mn.png" alt=""></p><h2 id="å¤„ç†è¯¯å·®"><a href="#å¤„ç†è¯¯å·®" class="headerlink" title="å¤„ç†è¯¯å·®"></a>å¤„ç†è¯¯å·®</h2><p>æˆ‘ä»¬å°½å¯èƒ½çš„ä½¿è¿™äº›è¯¯å·®æœ€å°ï¼Œä½†è¿™å¹¶ä¸å®¹æ˜“ï¼Œé¦–å…ˆ <em>f</em> å‡½æ•°æˆ‘ä»¬ä¸çŸ¥é“ï¼Œä½ åªæœ‰ä¸€å¯¹æ•°æ®ï¼Œå¹¶ä¸”å™ªå£°äº‹æ— æ³•é¿å…çš„ã€‚</p><p>æ€ä¹ˆåŠå‘¢ï¼Ÿè¿˜æ˜¯æŒ‰ç…§ä»¥å‰çš„æ–¹æ³•ï¼Œå°†æ•°æ®åˆ†ä¸ºtrainç»„å’Œtestç»„ï¼Œè€Œä¸”æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¹‹å‰ä»‹ç»è¿‡çš„ <em>cross-validation</em> æŠ€æœ¯ï¼ŒCVã€‚</p><p>CVæœ‰ä¸¤ç§ï¼š</p><ul><li>K-Fold CV</li><li>Hold-Out CV</li></ul><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªä»‹ç»K-Fold CV, Cross-validationæŠ€æœ¯æˆ‘ä»¬ä¹‹å‰å·²ç»æœ‰è¿‡ä»‹ç»ï¼Œå¯ä»¥æŸ¥çœ‹ä¹‹å‰çš„æ–‡ç« äº†è§£è¯¦æƒ…ã€‚</p><p>åœ¨æˆ‘ä»¬å¯¹æ•°æ®è¿›è¡Œfoldçš„æ—¶ï¼Œæ¯ä¸€æ¬¡foldéƒ½å¯ä»¥ç®—å‡ºä¸€æ¬¡errorï¼Œéšåå†ç®—æ€»çš„fold errorå¹³å‡ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª10foldçš„å…¬å¼ï¼Œå…¶ä¸­Eä¸ºæ¯ä¸€æ¬¡foldçš„errorï¼š</p><p>$$CV_{error}=\frac{E_1+â€¦+E_{10}}{10}$$</p><p><img src="https://i.loli.net/2019/11/24/J1u4OSiMqdWrwIa.png" alt=""></p><p>å¦‚æœæˆ‘ä»¬CVåçš„æ–¹å·®æ¯”trainç»„çš„å€¼è¦é«˜ï¼Œé‚£å°±è¯´æ˜æˆ‘ä»¬æˆ‘ä»¬è¿‡åº¦æ‹Ÿåˆäº†ï¼Œåœ¨tree modelä¸Šæ¥çœ‹å°±æ˜¯è¯´æˆ‘ä»¬æ— è§†äº†é‚£äº›åº”è¯¥è§†ä¸ºleafçš„èŠ‚ç‚¹ï¼Œè€Œå°†å…¶ç»§ç»­æ‹†åˆ†äº†ã€‚å¦‚æœä½ å‘ç°è¿‡åº¦æ‹Ÿåˆçš„æƒ…å†µï¼Œåº”è¯¥é™ä½ä½ çš„æ¨¡å‹çš„å¤æ‚æ€§ï¼Œæ¯”å¦‚å°†æ¨¡å‹çš„ <em>Max depth</em> é™ä½ï¼Œæ”¶é›†æ›´å¤šçš„æ•°æ®ã€‚</p><p>å¦‚æœæˆ‘ä»¬çš„biasè¿‡é«˜ï¼Œå³CVåçš„biaså€¼ä¸trainç»„çš„å€¼è¿‘ä¼¼æˆ–è€…å¤§äºå®ƒï¼Œè¿™æ„å‘³ç€æ¬ æ‹Ÿåˆï¼Œåˆ™éœ€è¦å¢åŠ æ¨¡å‹çš„å¤æ‚æ€§ï¼Œå¢åŠ æ¨¡å‹çš„ <em>Max depth</em>,å¢åŠ æ›´å¤šçš„featuresã€‚</p><h2 id="Ensemble-Learning"><a href="#Ensemble-Learning" class="headerlink" title="Ensemble Learning"></a>Ensemble Learning</h2><p>å›å½’ä¸€ä¸‹CARTsçš„ä¼˜ç‚¹ï¼š</p><ol><li>æ˜“äºç†è§£</li><li>å®¹æ˜“ä½¿ç”¨</li><li>å¯ä»¥æè¿°çº¿æ€§å›å½’æ— æ³•æè¿°çš„æƒ…å†µ</li><li>ä¸éœ€è¦æ ‡å‡†åŒ–æ•°æ®</li></ol><p>ä½†CARTsä¹Ÿæœ‰ç¼ºç‚¹ï¼Œé‚£å°±æ˜¯å®¹æ˜“é«˜æ–¹å·®ï¼Œè¿‡åº¦æ‹Ÿåˆï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡ ensemble learning è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>ç®€å•æè¿°ä¸€ä¸‹Ensemble Learningçš„æ­¥éª¤ï¼š</p><ol><li>ç”¨ä¸åŒçš„æ¨¡å‹trainingåŒä¸€ä»½æ•°æ®</li><li>æ¯ä¸ªæ¨¡å‹é¢„æµ‹å…¶è‡ªå·±çš„ç»“æœ</li><li>èšåˆæ‰€æœ‰æ¨¡å‹çš„ç»“æœ</li><li>æœ€ç»ˆçš„é¢„æµ‹ï¼šæ›´å¯é çš„æ•°æ®</li></ol><p><strong>Ensemble prediction:</strong></p><p><img src="https://i.loli.net/2019/11/24/UxRoDOCBf3ZsvKP.png" alt=""></p><p>æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªEnsemble predictionçš„ä¾‹å­ï¼Œå«åšvoting classifierï¼Œå‡è®¾æˆ‘ä»¬æœ‰iä¸ªé¢„æµ‹å™¨å¯¹åŒä¸€ç»„æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œäº§ç”Ÿiä¸ªç»“æœå«åšp1,p2,piï¼Œç»“æœåªæœ‰ä¸¤ç§ï¼Œ0æˆ–è€…1ï¼Œiä¸ªç»“æœéƒ½é¢„æµ‹å‡ºæ¥ä¹‹åï¼Œæˆ‘ç”¨æŠ•ç¥¨çš„æ–¹å¼æ¥è§‰å¾—ä½¿ç”¨å“ªä¸ªç»“æœï¼Œæ¯”å¦‚ä¸‹é¢çš„å›¾ä¸­ï¼Œæœ‰ä¸¤ä¸ªé¢„æµ‹å™¨çš„ç»“æœæ˜¯1ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ç»“æœå°±æ˜¯1.</p><p><img src="https://i.loli.net/2019/11/24/aZ1oXrnkP39HphQ.png" alt=""></p><p><strong>Ensemble Learning code:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># Set seed for reproducibility</span><br><span class="line">SEED=1</span><br><span class="line"></span><br><span class="line"># Instantiate lr</span><br><span class="line">lr = LogisticRegression(random_state=SEED)</span><br><span class="line"></span><br><span class="line"># Instantiate knn</span><br><span class="line">knn = KNN(n_neighbors=27)</span><br><span class="line"></span><br><span class="line"># Instantiate dt</span><br><span class="line">dt = DecisionTreeClassifier(min_samples_leaf=0.13, random_state=SEED)</span><br><span class="line"></span><br><span class="line"># Define the list classifiers</span><br><span class="line">classifiers = [(&apos;Logistic Regression&apos;, lr), (&apos;K Nearest Neighbours&apos;, knn), (&apos;Classification Tree&apos;, dt)]</span><br><span class="line"></span><br><span class="line"># Iterate over the pre-defined list of classifiers</span><br><span class="line">for clf_name, clf in classifiers:    </span><br><span class="line"> </span><br><span class="line">    # Fit clf to the training set</span><br><span class="line">    clf.fit(X_train, y_train)    </span><br><span class="line">   </span><br><span class="line">    # Predict y_pred</span><br><span class="line">    y_pred = clf.predict(X_test)</span><br><span class="line">    </span><br><span class="line">    # Calculate accuracy</span><br><span class="line">    accuracy = accuracy_score(y_test,y_pred) </span><br><span class="line">   </span><br><span class="line">    # Evaluate clf&apos;s accuracy on the test set</span><br><span class="line">    print(&apos;&#123;:s&#125; : &#123;:.3f&#125;&apos;.format(clf_name, accuracy))</span><br></pre></td></tr></table></figure><p><strong>Voting:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Import VotingClassifier from sklearn.ensemble</span><br><span class="line">from sklearn.ensemble import VotingClassifier</span><br><span class="line"></span><br><span class="line"># Instantiate a VotingClassifier vc</span><br><span class="line">vc = VotingClassifier(estimators=classifiers)     </span><br><span class="line"></span><br><span class="line"># Fit vc to the training set</span><br><span class="line">vc.fit(X_train, y_train)   </span><br><span class="line"></span><br><span class="line"># Evaluate the test set predictions</span><br><span class="line">y_pred = vc.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Calculate accuracy score</span><br><span class="line">accuracy = accuracy_score(y_test, y_pred)</span><br><span class="line">print(&apos;Voting Classifier: &#123;:.3f&#125;&apos;.format(accuracy))</span><br></pre></td></tr></table></figure><h1 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a>Bagging</h1><p><em>â€ŒEnsemble Learning</em> ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„ç®—æ³•å¯¹åŒä¸€ç»„æ•°æ®è¿›è¡Œå¤„ç†å†æŠ•ç¥¨å‡ºç»“æœï¼Œè€Œ <em>Bagging</em> æ­£å¥½ç›¸åï¼Œå®ƒç”¨åŒä¸€ä¸ªç®—æ³•ï¼Œé€‰å–æ•°æ®é›†ä¸­çš„ä¸åŒç»„æ•°æ®ï¼Œè®¡ç®—ç»“æœï¼ŒBaggingå¯ä»¥å‡å°‘Varianceã€‚å®ƒå’Œæˆ‘ä»¬ä¹‹å‰æåŠçš„ <em>Bootstrap</em> æ–¹æ³•ç±»ä¼¼ã€‚</p><p><img src="https://i.loli.net/2019/11/24/F2YAbs6IBEJQmik.png" alt="Bootstrap"></p><p><img src="https://i.loli.net/2019/11/24/4wjQF79uSWYsxUg.png" alt=""></p><p>baggingä¸åŒmodelçš„ç»“æœï¼Œä¹Ÿæ˜¯é€šè¿‡votingçš„å‡ºæ¥çš„ï¼š</p><p><img src="https://i.loli.net/2019/11/24/DIGNp2niJ9xFjwa.png" alt=""></p><p>å¯¹äºåˆ†ç±»é—®é¢˜ï¼Œç»“æœé€šè¿‡major voting è·å¾—ï¼Œå¯¹äºregressioné—®é¢˜ï¼Œç»“æœé€šè¿‡å¹³å‡ç»“æœè·å¾—ã€‚</p><p><strong>Bagging python code:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Import DecisionTreeClassifier</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier</span><br><span class="line"></span><br><span class="line"># Import BaggingClassifier</span><br><span class="line">from sklearn.ensemble import BaggingClassifier</span><br><span class="line"></span><br><span class="line"># Instantiate dt</span><br><span class="line">dt = DecisionTreeClassifier(random_state=1)</span><br><span class="line"></span><br><span class="line"># Instantiate bc</span><br><span class="line">bc = BaggingClassifier(base_estimator=dt, n_estimators=50,random_state=1)</span><br></pre></td></tr></table></figure><p><strong>Bagging performance:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Fit bc to the training set</span><br><span class="line">bc.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Predict test set labels</span><br><span class="line">y_pred = bc.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Evaluate acc_test</span><br><span class="line">acc_test = accuracy_score(y_test,y_pred)</span><br><span class="line">print(&apos;Test set accuracy of bc: &#123;:.2f&#125;&apos;.format(acc_test))</span><br></pre></td></tr></table></figure><p>åœ¨ <strong>bagging</strong> ä¸­ï¼Œé‚£äº›æˆ‘ä»¬åˆ†å‰²å‡ºæ¥çš„testæ•°æ®æ²¡æœ‰å‚ä¸æ¨¡å‹è®­ç»ƒï¼Œè¿™äº›æ¨¡å‹æ²¡æœ‰è§è¿‡çš„æ•°æ®å«åš <em>out of bag</em>(OOB)ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸€æ¬¡æ¨¡å‹sampleæ•°æ®çš„æ—¶å€™ï¼Œå°†è¿™äº›æ•°æ®åˆ†å‰²ä¸ºtrainå’Œtestæ•°æ®ç»„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2019/11/24/jcvZGonAzmar6yt.png" alt=""></p><h1 id="éšæœºæ£®æ—"><a href="#éšæœºæ£®æ—" class="headerlink" title="éšæœºæ£®æ—"></a>éšæœºæ£®æ—</h1><p>éšæœºæ£®æ—ä¹Ÿæ˜¯ä¸€ç§åŸºäºå†³ç­–æ ‘çš„ç®—æ³•ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„å¿ƒè„ç—…æ•°æ®ï¼Œæ ¹æ®å®ƒæ¥åˆ›å»ºéšæœºæ£®æ—ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ ¹æ®åŸå§‹æ•°æ®åˆ›å»ºbootstrap dataset,å³éšæœºçš„ï¼ˆå¯é‡å¤ï¼‰ä»åŸæ•°æ®é€‰æ‹©ï¼š</p><p><img src="https://i.loli.net/2019/11/24/j3YVgtX1v45TnGu.png" alt=""></p><p>æ‹¿åˆ°éšæœºåˆ›å»ºçš„æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬éšæœºçš„é€‰æ‹©nä¸ªï¼ˆè¿™é‡Œæš‚æ—¶å®šä¸º2ä¸ªï¼‰featureï¼Œå»ºç«‹å†³ç­–æ ‘ï¼Œå¦‚ä½•ç¡®å®šç¬¬ä¸€ä¸ªæ ‘å‘¢ï¼Ÿå¯ä»¥æ ¹æ®giniç®—æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾Good Bloodæœ€é€‚åˆä½œä¸ºrootèŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ ‘ç¡®å®šä»¥åï¼Œæˆ‘ä»¬å¯ä»¥å†ä»å‰©ä¸‹çš„æ ‘ä¸­éšæœºçš„é€‰æ‹©ä¸¤æ£µæ ‘ä½œä¸ºå…¶ä»–èŠ‚ç‚¹ï¼Œç¤ºä¾‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2019/11/24/B7c4ygI2wZ8UHWe.png" alt=""></p><p><img src="https://i.loli.net/2019/11/24/ChGPzE321nA5BdR.png" alt=""></p><blockquote><p>ä»å‰©ä¸‹çš„æ ‘ä¸­é€‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®featureæ¥é€‰ï¼Œæ ¹æ®å“ªäº›featuresæ¥é€‰ï¼Œ ä»¥åŠå¤šå°‘featuresï¼Œéƒ½æ˜¯éœ€è¦æå‰å®šå¥½çš„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å®šä¸º2ã€‚åœ¨sklearnä¸­ï¼Œæ˜¯featuresçš„å¹³æ–¹æ ¹ï¼Œå³å¦‚æœæˆ‘ä»¬æœ‰100ä¸ªfeaturesï¼Œåˆ™æ¯æ¬¡ç”¨10ä¸ªã€‚</p></blockquote><p>äºæ˜¯æˆ‘ä»¬å¾—åˆ°äº†ä¸€é¢—æ ‘ï¼Œç°åœ¨é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œåˆ›å»ºbootstrapæ•°æ®ï¼Œå†å»ºç«‹æ ‘ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é‡å¤å¾ˆå¤šæ¬¡ï¼Œäºæ˜¯éšæœºæ£®æ—å°±å»ºç«‹èµ·æ¥äº†ã€‚</p><p><img src="https://i.loli.net/2019/11/24/xpv9ZiqB734oNAO.png" alt=""></p><p>éšæœºæ£®æ—å»ºç«‹å¥½åï¼Œå°±å¯ä»¥å¼€å§‹é¢„æµ‹ï¼Œå¯¹äºåˆ†ç±»é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨æŠ•ç¥¨æœºåˆ¶å†³å®šè¾“å‡ºï¼Œå¯¹äºregresioné—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸€æ ·é‡‡ç”¨å¹³å‡å€¼ã€‚</p><p><strong>éšæœºæ£®æ—python codeï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Import RandomForestRegressor</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor</span><br><span class="line"></span><br><span class="line"># Instantiate rf</span><br><span class="line">rf = RandomForestRegressor(n_estimators=25,</span><br><span class="line">            random_state=2)</span><br><span class="line">            </span><br><span class="line"># Fit rf to the training set    </span><br><span class="line">rf.fit(X_train, y_train) </span><br><span class="line"></span><br><span class="line"># Import mean_squared_error as MSE</span><br><span class="line">from sklearn.metrics import mean_squared_error as MSE</span><br><span class="line"></span><br><span class="line"># Predict the test set labels</span><br><span class="line">y_pred = rf.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Evaluate the test set RMSE</span><br><span class="line">rmse_test = MSE(y_test, y_pred)**(1/2)</span><br><span class="line"></span><br><span class="line"># Print rmse_test</span><br><span class="line">print(&apos;Test set RMSE of rf: &#123;:.2f&#125;&apos;.format(rmse_test))</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹featureæƒé‡ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Create a pd.Series of features importances</span><br><span class="line">importances = pd.Series(data=rf.feature_importances_,</span><br><span class="line">                        index= X_train.columns)</span><br><span class="line"></span><br><span class="line"># Sort importances</span><br><span class="line">importances_sorted = importances.sort_values()</span><br><span class="line"></span><br><span class="line"># Draw a horizontal barplot of importances_sorted</span><br><span class="line">importances_sorted.plot(kind=&apos;barh&apos;, color=&apos;lightgreen&apos;)</span><br><span class="line">plt.title(&apos;Features Importances&apos;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/24/xpv9ZiqB734oNAO.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æ¥äº†è§£è¯¯å·®ï¼Œå¦‚ä½•å¤„ç†è¯¯å·®ï¼Œä»¥åŠå­¦ä¹ éšæœºæ£®æ—çš„åŸºç¡€çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="sklearn" scheme="http://wittyfans.com/tags/sklearn/"/>
    
      <category term="data science" scheme="http://wittyfans.com/tags/data-science/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ï¼šClassification and Regression Trees</title>
    <link href="http://wittyfans.com/coding/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9AClassification-and-Regression-Trees.html"/>
    <id>http://wittyfans.com/coding/æœºå™¨å­¦ä¹ ï¼šClassification-and-Regression-Trees.html</id>
    <published>2019-11-22T08:06:42.000Z</published>
    <updated>2019-11-22T08:15:21.097Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/22/poSKWwveBCuU16n.png" alt=""></p><blockquote><p>æœºå™¨å­¦ä¹ å†³ç­–æ ‘çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œåˆ†ç±»ä¸å›å½’æ ‘ï¼ˆCARTï¼‰çš„åŸç†ï¼ˆå¤šå›¾)ã€‚</p></blockquote><a id="more"></a><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>ä¸ºä»€ä¹ˆä½¿ç”¨å†³ç­–æ ‘å‘¢ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåŸå› ï¼Œä¸€æ˜¯å†³ç­–æ ‘é€šå¸¸æ¨¡ä»¿äººç±»çš„æ€ç»´ï¼Œå› æ­¤å®ƒå¾ˆå®¹æ˜“ç†è§£æ•°æ®å¹¶åšå‡ºä¸€äº›å¾ˆå¥½çš„è§£é‡Šã€‚äºŒæ˜¯å†³ç­–æ ‘å¯ä»¥è®©ä½ çœ‹åˆ°æ•°æ®çš„é€»è¾‘ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªé‡‘èæœºæ„å†³å®šæ˜¯å¦æŠ•èµ„ä¸€å®¶å…¬å¸å†³ç­–æ ‘ï¼š</p><p><img src="https://i.loli.net/2019/11/22/xqRKiL3Qa2Cr4UI.png" alt=""></p><p>ä»å†³ç­–æ ‘çš„ç»„æˆæ¥çœ‹ï¼Œå®ƒæ˜¯ç”±ä¸€ç³»åˆ—èŠ‚ç‚¹ï¼ˆnodesï¼‰çš„ç»§æ‰¿å…³ç³»ç»„æˆçš„ï¼ŒèŠ‚ç‚¹å¯ä»¥çœ‹ä½œæ˜¯å¯¹é—®é¢˜åšå‡ºå›ç­”ï¼Œä¹Ÿå¯ä»¥æ˜¯é—®é¢˜çš„ç­”æ¡ˆã€‚è¿™äº›é—®é¢˜æœ‰äº›ä¾æ®æ•°æ®çš„åˆ†ç±»ï¼Œå¦‚ä½ æ˜¯å¦å¸çƒŸï¼Œæœ‰çš„æ˜¯æ•°æ®æœ¬èº«ä½ ä¸€å¤©å¸å‡ æ ¹ï¼Œï¼ˆæ•°å€¼å‹ï¼‰ï¼Œå†³ç­–æ ‘ä¸­ä¸»è¦æœ‰ä¸‰ç±»èŠ‚ç‚¹ï¼š</p><ol><li>Root, rootèŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</li><li>Internal root, ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œä¸¤ä¸ªå­èŠ‚ç‚¹</li><li>Leaf, ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œæ²¡æœ‰å­èŠ‚ç‚¹</li></ol><p>æ¯ä¸€ä¸ªinternal rootä»£è¡¨ä¸€ä¸ªâ€œtestâ€ on an attributeï¼Œå³åœ¨è¿™ä¸ªèŠ‚ç‚¹æ ¹æ®è¿™ä¸ªå±æ€§åšå‡ºçš„åˆ¤æ–­ï¼Œæ¯ä¸€ä¸ªåˆ†æ”¯åˆ™ä»£è¡¨äº†åˆ¤æ–­çš„è¾“å‡ºï¼Œæ¯ä¸€ä¸ªleafä»£è¡¨äº†ä¸€ä¸ªclass labelï¼Œå³æœ€åçš„å†³å®šã€‚</p><p>ä¸‹é¢æ˜¯ä¸€äº›å†³ç­–æ ‘ä¸­çš„å¸¸è§åè¯ï¼š</p><ol><li>Root Node: It represents entire population or sample and this further gets divided into two or more homogeneous sets.</li><li>Splitting: It is a process of dividing a node into two or more sub-nodes.</li><li>Decision Node: When a sub-node splits into further sub-nodes, then it is called decision node.</li><li>Leaf/ Terminal Node: Nodes do not split is called Leaf or Terminal node.</li><li>Pruning: When we remove sub-nodes of a decision node, this process is called pruning. You can say opposite process of splitting.</li><li>Branch / Sub-Tree: A sub section of entire tree is called branch or sub-tree.</li><li>Parent and Child Node: A node, which is divided into sub-nodes is called parent node of sub-nodes whereas sub-nodes are the child of parent node.</li></ol><h1 id="å†³ç­–æ ‘å¦‚ä½•å­¦ä¹ "><a href="#å†³ç­–æ ‘å¦‚ä½•å­¦ä¹ " class="headerlink" title="å†³ç­–æ ‘å¦‚ä½•å­¦ä¹ "></a>å†³ç­–æ ‘å¦‚ä½•å­¦ä¹ </h1><p>è¦å»ºç«‹å†³ç­–æ ‘ï¼Œå°±å¾—å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹å³æ ¹èŠ‚ç‚¹çš„åˆ†ç±»èŒƒå›´æ˜¯æœ€å¤§çš„ï¼Œå®ƒæŠŠæ‰€æœ‰çš„é—®é¢˜åˆ†æˆä¸¤ç±»ã€‚</p><p>å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªåˆ†ç±»å‘¢ï¼Ÿè¿™å–å†³äºé‚£äº›æœ€èƒ½å¯¹æ•°æ®é›†è¿›è¡Œåˆ†ç±»çš„å±æ€§ï¼Œæ€ä¹ˆç¡®å®šå“ªäº›åˆ†ç±»æœ€èƒ½å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»å‘¢ï¼Ÿ</p><p>çœ‹ä¸‹é¢ä¸€ä¸ªå¿ƒè„ç—…çš„ä¾‹å­ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªåˆ†ç±»çš„éƒ½å•ç‹¬æ‹¿å‡ºæ¥ï¼Œè®¡ç®—åˆ†åˆ«ç»Ÿè®¡å®ƒç›¸å¯¹ç»“æœçš„é¢„æµ‹é‡ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2019/11/22/XrWPkLu2aAMoGfT.png" alt=""></p><p>æœ‰æ²¡æœ‰å¿ƒè„ç—…æ˜¯æˆ‘ä»¬çš„leafï¼Œä¹Ÿå°±æ˜¯ç»“æœè¾“å‡ºï¼Œè€Œèƒ¸ç—›æ˜¯featureã€‚æˆ‘ä»¬ç»Ÿè®¡èƒ¸ç—›çš„å€¼ä¸ç°æœ‰çš„å¿ƒè„ç—…çš„å€¼çš„å¯¹åº”å…³ç³»ï¼Œå¦‚æœèƒ¸ç—›ï¼Œæ˜¯å¦æ˜¯å¿ƒè„ç—…ï¼Ÿå¦‚æœèƒ¸ä¸ç—›ï¼Œæ˜¯å¦æ˜¯å¿ƒè„ç—…ï¼Ÿè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°å››åˆ—æ•°æ®ï¼Œç»“æŸå¯¹èƒ¸ç—›è¿™ä¸ªfeatureçš„ç»Ÿè®¡åï¼Œç»§ç»­å¯¹Good Bloodè¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚</p><p><img src="https://i.loli.net/2019/11/22/cFErmQLRdjSGANk.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªç»“æœä¸­ï¼Œä¸ç®¡æ˜¯èƒ¸ç—›ï¼Œè¿˜æ˜¯è¡€æ¶²æƒ…å†µï¼Œéƒ½æ²¡åŠæ³•åœ¨yesä¸noåå°±å‡†ç¡®é¢„æµ‹å¿ƒè„ç—…ï¼Œæ‰€ä»¥ä¸Šé¢çš„è¿™äº›æ•°æ®éƒ½æ˜¯impurityçš„ï¼Œé‚£æˆ‘ä»¬å¦‚ä½•è¡¡é‡è¿™ç§impurityçš„ç¨‹åº¦å‘¢ï¼Ÿ</p><p>æœ‰å¾ˆå¤šè¡¡é‡ impurity çš„æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ç§å«åšGini, ä¸‹é¢æ˜¯Giniçš„è®¡ç®—æ–¹å¼ï¼š</p><p><img src="https://i.loli.net/2019/11/22/bNtKIPiq3QS7uXF.png" alt=""></p><p>åŒæ ·çš„æ–¹æ³•è®¡ç®—å³è¾¹çš„èŠ‚ç‚¹:</p><p><img src="https://i.loli.net/2019/11/22/VosX56SFIqnPd1k.png" alt=""></p><p>ä½†æ˜¯å·¦å³ä¸¤è¾¹çš„æ‚£è€…æ•°é‡æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸€ä¸ªæ˜¯144,ä¸€ä¸ªæ˜¯159:</p><p><img src="https://i.loli.net/2019/11/22/R8wpJ6X7HPgmrlI.png" alt=""></p><p>æˆ‘ä»¬éœ€è¦å¯¹å·¦å³èŠ‚ç‚¹éƒ½å¹³å‡ä¸€ä¸‹å†ç›¸åŠ ï¼š</p><p><img src="https://i.loli.net/2019/11/22/ujM8EtbcvxDTmK5.png" alt=""></p><p>å†æŠŠæ‰€æœ‰çš„featureéƒ½ç®—ä¸€éï¼Œ</p><p><img src="https://i.loli.net/2019/11/22/oKLqZMGXEfDTxd2.png" alt=""></p><p>æˆ‘ä»¬é€‰æ‹©giniæ•°æœ€ä½çš„é‚£ä¸ªä¸€ï¼Œä½œä¸ºroot node</p><p><img src="https://i.loli.net/2019/11/22/c29ySGZYRu3rdpT.png" alt=""><br><img src="https://i.loli.net/2019/11/22/LqWxzZajrP4QnDC.png" alt=""></p><p>root nodeç¡®å®šäº†ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¡®å®šåç»­çš„èŠ‚ç‚¹ä½¿ç”¨å“ªä¸ªfeatureï¼Œè¿™ä¸ªæ­¥éª¤å’Œå‰é¢ç¡®å®šroot nodeæ˜¯ä¸€æ ·çš„ï¼š</p><p><img src="https://i.loli.net/2019/11/22/Rg865Yih9Xo3BDE.png" alt=""></p><p>è¿›ä¸€æ­¥å¾€ä¸‹é¢ç¡®å®šå­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨åŠ¨è„‰é˜»å¡(blocked)çš„ä¸¤ä¸ªå­èŠ‚ç‚¹ä¸‹ï¼Œ æ²¡æœ‰å‘ç”ŸåŠ¨è„‰é˜»å¡è¿™ä¸ªèŠ‚ç‚¹ä¸­ï¼Œåªæœ‰13ä¸ªæ‚£æœ‰å¿ƒè„ç—…ï¼Œä¹Ÿå°±æ˜¯è¯´89%çš„æ‚£è€…éƒ½æ²¡æœ‰å¿ƒè„ç—…ï¼</p><p><img src="https://i.loli.net/2019/11/22/poSKWwveBCuU16n.png" alt=""></p><p>æˆ‘ä»¬æ¥ç®—ä¸€ä¸‹è¿™ä¸ªèŠ‚ç‚¹çš„giniå€¼ä¸è¿›ä¸€æ­¥æŒ‰ç…§èƒ¸ç—›å¾€ä¸‹é¢ç»†åˆ†åçš„giniå€¼ï¼š</p><p><img src="https://i.loli.net/2019/11/22/6cGaSCwIEmQPXsq.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æŒ‰ç…§èƒ¸ç—›ç»†åˆ†åçš„giniå€¼ä¸º0.29ï¼Œè€Œä¸ç»†åˆ†çš„å€¼åˆ™ä¸º0.2ï¼Œæ‰€ä»¥å¯¹äºè¿™ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œå°±æ²¡æœ‰å¿…è¦å†å¾€ä¸‹é¢ç»†åˆ†èŠ‚ç‚¹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸å¤„ç† <code>13/102</code> è¿™ä¸ªèŠ‚ç‚¹äº†ï¼Œå®ƒä¹Ÿå°±æˆäº†æˆ‘ä»¬è¯´çš„ leaf èŠ‚ç‚¹ã€‚</p><p>å°†å‰©ä¸‹çš„éƒ¨åˆ†ä»¥åŠå³è¾¹çš„å­èŠ‚ç‚¹è¡¥ä¸Šï¼Œæˆ‘ä»¬çš„å†³ç­–æ ‘å°±å»ºå¥½äº†:</p><p><img src="https://i.loli.net/2019/11/22/EP5aXncFzWkSysY.png" alt=""></p><p>ä¸è¿‡è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å‰é¢éƒ½æ˜¯åŸºäºyes or noçš„é—®é¢˜ï¼Œé‚£å¦‚æœé‡åˆ°æ•°å€¼å‹çš„æ•°æ®æ€ä¹ˆåŠï¼Ÿ</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ•°å€¼æ•°æ®ä»å°åˆ°å¤§æ’åˆ—ï¼š</p><p><img src="https://i.loli.net/2019/11/22/XP1On7DCsAFzxya.png" alt=""></p><p>ä¸¤ä¸¤å–æ•°å€¼ä¸­é—´çš„å¹³å‡å€¼ï¼Œè®¡ç®—giniå€¼ï¼š</p><p><img src="https://i.loli.net/2019/11/22/CJgeWPEai8zuvdt.png" alt=""></p><p><img src="https://i.loli.net/2019/11/22/fDPcg3Ts2WjLrAR.png" alt=""></p><p><img src="https://i.loli.net/2019/11/22/pfD1JGA5UICPlhb.png" alt=""></p><p>é‡å¤è®¡ç®—æ‰€æœ‰å…¶ä»–çš„giniå€¼ï¼Œæœ€åé€‰å‡ºæœ€å°çš„é‚£ä¸ªã€‚</p><p><img src="https://i.loli.net/2019/11/22/Nowl8QfDPbpWRZO.png" alt=""></p><p>è¿™å°±æ˜¯æ•°å€¼å‹æ•°æ®çš„è®¡ç®—äº†ã€‚ä¸è¿‡è¿˜æœ‰ä¸€äº›æ•°æ®å®ƒæ˜¯é€‰æ‹©å‹çš„ï¼Œå¦‚é¢œè‰²çš„é€‰æ‹©ï¼Œå¯¹äºé¢œè‰²çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé€‰æ‹©åˆ†å¼€æ¥è®¡ç®—ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2019/11/22/UJevq6O9CKyR1wk.png" alt=""></p><blockquote><p>å…³äºå†³ç­–æ•°çš„<a href="https://www.youtube.com/watch?v=7VeUPuFGJHk" target="_blank" rel="noopener">è§†é¢‘</a></p></blockquote><p>ä¸Šé¢çš„è¿™ä¸ªginiå€¼ï¼Œæˆ‘ä»¬åˆå«åšIG(Information Gain)å€¼ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœIGå€¼ä¸º0ï¼Œæˆ–è€…æˆ‘ä»¬å‘ç°è¯¥nodeåˆ†å‰²åginiå€¼æ›´é«˜ï¼Œæˆ‘ä»¬å°±ä¸ç»§ç»­åˆ†å‰²ï¼Œè¯¥nodeå°±å«åšleafã€‚å¦‚æœæˆ‘ä»¬å›ºå®šäº†ä¸€é¢—æ•°çš„æ·±åº¦ï¼Œé‚£ä¹ˆå½“åˆ†å‰²nodeçš„æ—¶å€™ï¼Œè¶…è¿‡äº†è§„å®šçš„æ·±åº¦ï¼Œæˆ‘ä»¬ä¹Ÿä¼šåœæ­¢åˆ†å‰²å­èŠ‚ç‚¹ã€‚</p><p>å¦å¤–ï¼Œæ‹†åˆ†å†…éƒ¨èŠ‚ç‚¹æ€»æ˜¯æ¶‰åŠæœ€å¤§åŒ–ä¿¡æ¯å¢ç›Šï¼</p><h1 id="ä½¿ç”¨å†³ç­–æ ‘"><a href="#ä½¿ç”¨å†³ç­–æ ‘" class="headerlink" title="ä½¿ç”¨å†³ç­–æ ‘"></a>ä½¿ç”¨å†³ç­–æ ‘</h1><p>å†³ç­–æ ‘å¯ä»¥è§£å†³classficationé—®é¢˜ï¼Œä¹Ÿå¯ä»¥è§£å†³regressioné—®é¢˜ï¼Œæˆ‘ä»¬å…ˆè®¨è®ºåˆ†ç±»æ ‘ã€‚</p><p>è®­ç»ƒå†³ç­–æ ‘ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Import DecisionTreeClassifier from sklearn.tree</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier</span><br><span class="line"></span><br><span class="line"># Instantiate a DecisionTreeClassifier &apos;dt&apos; with a maximum depth of 6</span><br><span class="line">dt = DecisionTreeClassifier(max_depth=6,random_state=SEED)</span><br><span class="line"></span><br><span class="line"># Fit dt to the training set</span><br><span class="line">dt.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Predict test set labels</span><br><span class="line">y_pred = dt.predict(X_test)</span><br><span class="line">print(y_pred[0:5])</span><br></pre></td></tr></table></figure><p>å†³ç­–æ ‘è¯„åˆ†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Import accuracy_score</span><br><span class="line">from sklearn.metrics import accuracy_score</span><br><span class="line"></span><br><span class="line"># Predict test set labels</span><br><span class="line">y_pred = dt.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Compute test set accuracy  </span><br><span class="line">acc = accuracy_score(y_pred, y_test)</span><br><span class="line">print(&quot;Test set accuracy: &#123;:.2f&#125;&quot;.format(acc))</span><br></pre></td></tr></table></figure><p>é€»è¾‘å›å½’ä¸åˆ†ç±»æ ‘:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Import LogisticRegression from sklearn.linear_model</span><br><span class="line">from sklearn.linear_model import  LogisticRegression</span><br><span class="line"></span><br><span class="line"># Instatiate logreg</span><br><span class="line">logreg = LogisticRegression(random_state=1)</span><br><span class="line"></span><br><span class="line"># Fit logreg to the training set</span><br><span class="line">logreg.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Define a list called clfs containing the two classifiers logreg and dt</span><br><span class="line">clfs = [logreg, dt]</span><br><span class="line"></span><br><span class="line"># Review the decision regions of the two classifiers</span><br><span class="line">plot_labeled_decision_regions(X_test, y_test, clfs)</span><br></pre></td></tr></table></figure><h2 id="åˆ†ç±»æ ‘"><a href="#åˆ†ç±»æ ‘" class="headerlink" title="åˆ†ç±»æ ‘"></a>åˆ†ç±»æ ‘</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># Import DecisionTreeClassifier from sklearn.tree</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier</span><br><span class="line"></span><br><span class="line"># Instantiate dt_entropy, set &apos;entropy&apos; as the information criterion</span><br><span class="line">dt_entropy = DecisionTreeClassifier(max_depth=8, criterion=&apos;entropy&apos;, random_state=1)</span><br><span class="line"></span><br><span class="line"># Fit dt_entropy to the training set</span><br><span class="line">dt_entropy.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Import accuracy_score from sklearn.metrics</span><br><span class="line">from sklearn.metrics import accuracy_score</span><br><span class="line"></span><br><span class="line"># Use dt_entropy to predict test set labels</span><br><span class="line">y_pred = dt_entropy.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Evaluate accuracy_entropy</span><br><span class="line">accuracy_entropy = accuracy_score(y_test, y_pred)</span><br><span class="line"></span><br><span class="line"># Print accuracy_entropy</span><br><span class="line">print(&apos;Accuracy achieved by using entropy: &apos;, accuracy_entropy)</span><br><span class="line"></span><br><span class="line"># Print accuracy_gini</span><br><span class="line">print(&apos;Accuracy achieved by using the gini index: &apos;, accuracy_gini)</span><br></pre></td></tr></table></figure><h2 id="å›å½’æ ‘"><a href="#å›å½’æ ‘" class="headerlink" title="å›å½’æ ‘"></a>å›å½’æ ‘</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Import DecisionTreeRegressor from sklearn.tree</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor</span><br><span class="line"></span><br><span class="line"># Instantiate dt</span><br><span class="line">dt = DecisionTreeRegressor(max_depth=8,</span><br><span class="line">             min_samples_leaf=0.13,</span><br><span class="line">            random_state=3)</span><br><span class="line"></span><br><span class="line"># Fit dt to the training set</span><br><span class="line">dt.fit(X_train, y_train)</span><br></pre></td></tr></table></figure><h3 id="è¡¡é‡å›å½’æ ‘"><a href="#è¡¡é‡å›å½’æ ‘" class="headerlink" title="è¡¡é‡å›å½’æ ‘"></a>è¡¡é‡å›å½’æ ‘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Import mean_squared_error from sklearn.metrics as MSE</span><br><span class="line">from sklearn.metrics import mean_squared_error as MSE</span><br><span class="line"></span><br><span class="line"># Compute y_pred</span><br><span class="line">y_pred = dt.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Compute mse_dt</span><br><span class="line">mse_dt = MSE(y_test, y_pred)</span><br><span class="line"></span><br><span class="line"># Compute rmse_dt</span><br><span class="line">rmse_dt = mse_dt**(1/2)</span><br><span class="line"></span><br><span class="line"># Print rmse_dt</span><br><span class="line">print(&quot;Test set RMSE of dt: &#123;:.2f&#125;&quot;.format(rmse_dt))</span><br></pre></td></tr></table></figure><h2 id="Linear-regression-vs-regression-tree"><a href="#Linear-regression-vs-regression-tree" class="headerlink" title="Linear regression vs regression tree"></a>Linear regression vs regression tree</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Predict test set labels </span><br><span class="line">y_pred_lr = lr.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Compute mse_lr</span><br><span class="line">mse_lr = MSE(y_test, y_pred_lr)</span><br><span class="line"></span><br><span class="line"># Compute rmse_lr</span><br><span class="line">rmse_lr = mse_lr**(1/2)</span><br><span class="line"></span><br><span class="line"># Print rmse_lr</span><br><span class="line">print(&apos;Linear Regression test set RMSE: &#123;:.2f&#125;&apos;.format(rmse_lr))</span><br><span class="line"></span><br><span class="line"># Print rmse_dt</span><br><span class="line">print(&apos;Regression Tree test set RMSE: &#123;:.2f&#125;&apos;.format(rmse_dt))</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/22/poSKWwveBCuU16n.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœºå™¨å­¦ä¹ å†³ç­–æ ‘çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œåˆ†ç±»ä¸å›å½’æ ‘ï¼ˆCARTï¼‰çš„åŸç†ï¼ˆå¤šå›¾)ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="sklearn" scheme="http://wittyfans.com/tags/sklearn/"/>
    
  </entry>
  
  <entry>
    <title>éç›‘ç£å­¦ä¹ ï¼šPCA and NMF</title>
    <link href="http://wittyfans.com/coding/%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%EF%BC%9APCA-and-NMF.html"/>
    <id>http://wittyfans.com/coding/éç›‘ç£å­¦ä¹ ï¼šPCA-and-NMF.html</id>
    <published>2019-11-21T08:20:37.000Z</published>
    <updated>2019-11-21T08:24:31.315Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/21/I34aLMFuywnHqzA.png" alt=""></p><blockquote><p>éç›‘ç£å­¦ä¹ çš„æœ€åä¸¤ç« ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹  Dimension reduction, Dimension reductionå°±æ˜¯ä»æ•°æ®ä¸­å‘ç°ä¸€å®šçš„æ¨¡å¼ï¼Œé€šè¿‡è¿™ç§æ¨¡å¼æˆ‘ä»¬å°±å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œè¿™å¯¹äºè®¡ç®—å’Œå­˜å‚¨æ¥è¯´éƒ½æ˜¯éå¸¸æœ‰åˆ©çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§æ•°æ®æ—¶ä»£ã€‚</p></blockquote><a id="more"></a><p>dimension reductionæ ¸å¿ƒçš„åŠŸèƒ½æ˜¯å»é™¤æ•°æ®ä¸­çš„å™ªéŸ³ï¼Œä¿ç•™é‚£äº›æœ€åŸºæœ¬çš„ä¸œè¥¿ï¼Œå™ªéŸ³å»é™¤ä¹‹åï¼Œæœ‰åŠ©äºå‡å°‘æˆ‘ä»¬å¤„ç† classfication ä¸ regression ä¸­ç¢°åˆ°çš„é—®é¢˜ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»æœ€åŸºæœ¬çš„ dimension reduction ç®—æ³•ï¼Œ<em>Principal Component Analysis</em> (PCA).</p><h1 id="PCA"><a href="#PCA" class="headerlink" title="PCA"></a>PCA</h1><p>PCA ä¸»è¦æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ol><li>decorrlation</li><li>dimension reduction</li></ol><p>æˆ‘ä»¬å…ˆè®²ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œdecorrlation, decorrlationä¼šå°†æ•°æ®æ—‹è½¬åˆ°ä¸åæ ‡è½´å¯¹é½ï¼Œå¹¶å°†å…¶å‡å€¼ç§»åŠ¨åˆ°0é™„è¿‘ï¼Œæ‰€ä»¥PCAå¹¶ä¸ä¼šæ”¹å˜åŸå§‹æ•°æ®ã€‚</p><p><img src="https://i.loli.net/2019/11/20/qolJbVCpOUg5PBY.png" alt=""></p><p>PCAå’Œ StandardScaler ä¸€æ ·ï¼Œæœ‰fitå’Œtransformæ–¹æ³•ï¼Œfitæ–¹æ³•ä¼šå­¦ä¹ å¦‚ä½•å»shiftä¸rotateæ•°æ®ï¼Œä½†å¹¶ä¸ä¼šåšå‡ºä»»ä½•æ“ä½œã€‚</p><p>transformæ–¹æ³•ï¼Œåˆ™ä¼šåº”ç”¨fitå­¦ä¹ åˆ°çš„ä¸œè¥¿ã€‚</p><p>åœ¨PCAå¯¹æ•°æ®transformåï¼ŒåŸæ¥æ•°æ®çš„columnså¯¹åº”æ•°æ®çš„featuresï¼Œè½¬æ¢åçš„æ•°æ®åˆ—åˆ™å¯¹åº”pcaçš„featuresã€‚</p><p>æˆ‘ä»¬ç”¨çš®å°”é€Šç³»æ•°æ¥è¡¡é‡ç›¸å…³æ€§ï¼Œå¦‚æœåŸæ¥çš„æ•°æ®æ˜¯æœ‰ç›¸å…³æ€§çš„ï¼Œåˆ™è½¬åŒ–åçš„æ•°æ®ä¸ä¼šå†å…·å¤‡è¿™ç§ç‰¹æ€§ã€‚</p><p>ä»¥æˆ‘ä»¬çš„è°·ç‰©çš„é•¿ã€å®½æ•°æ®ä¸ºä¾‹ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Perform the necessary imports</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from scipy.stats import pearsonr</span><br><span class="line"></span><br><span class="line"># Assign the 0th column of grains: width</span><br><span class="line">width = grains[:,0]</span><br><span class="line"></span><br><span class="line"># Assign the 1st column of grains: length</span><br><span class="line">length = grains[:,1]</span><br><span class="line"></span><br><span class="line"># Scatter plot width vs length</span><br><span class="line">plt.scatter(width, length)</span><br><span class="line">plt.axis(&apos;equal&apos;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"># Calculate the Pearson correlation</span><br><span class="line">correlation, pvalue = pearsonr(width,length)</span><br><span class="line"></span><br><span class="line"># Display the correlation</span><br><span class="line">print(correlation)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/20/XuxqSG6vWB7Ddlf.png" alt="transformå‰"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># Import PCA</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line"></span><br><span class="line"># Create PCA instance: model</span><br><span class="line">model = PCA()</span><br><span class="line"></span><br><span class="line"># Apply the fit_transform method of model to grains: pca_features</span><br><span class="line">pca_features = model.fit_transform(grains)</span><br><span class="line"></span><br><span class="line"># Assign 0th column of pca_features: xs</span><br><span class="line">xs = pca_features[:,0]</span><br><span class="line"></span><br><span class="line"># Assign 1st column of pca_features: ys</span><br><span class="line">ys = pca_features[:,1]</span><br><span class="line"></span><br><span class="line"># Scatter plot xs vs ys</span><br><span class="line">plt.scatter(xs, ys)</span><br><span class="line">plt.axis(&apos;equal&apos;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"># Calculate the Pearson correlation of xs and ys</span><br><span class="line">correlation, pvalue = pearsonr(xs, ys)</span><br><span class="line"></span><br><span class="line"># Display the correlation</span><br><span class="line">print(correlation)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/20/kPyiZ9QhEKxY58S.png" alt="transformå"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè°·ç‰©çš„é•¿ä¸å®½æ˜¯æœ‰ç›¸å…³æ€§çš„ï¼Œå³å®ƒçš„å¶ç‰‡è¶Šé•¿ï¼Œå®½åº¦ä¹Ÿè¶Šå®½ã€‚ä½†åœ¨transoforåï¼Œæ•°æ®å°±ä¸åæ ‡ç³»å¯¹é½äº†ã€‚</p><h2 id="Intrinsic-dimension"><a href="#Intrinsic-dimension" class="headerlink" title="Intrinsic dimension"></a>Intrinsic dimension</h2><p>Intrinsic dimension å³åœ¨é™ç»´æˆ–è€…å‹ç¼©æ•°æ®è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†è®©ä½ çš„æ•°æ®ç‰¹å¾æœ€å¤§ç¨‹åº¦çš„ä¿æŒï¼Œä½ æœ€ä½é™åº¦éœ€è¦ä¿ç•™å“ªäº›featuresã€‚</p><p>å®ƒåŒæ—¶ä¹Ÿå‘Šè¯‰äº†æˆ‘ä»¬å¯ä»¥æŠŠæ•°æ®å‹ç¼©åˆ°ä»€ä¹ˆæ ·çš„ç¨‹åº¦ï¼Œæ‰€ä»¥ä½ éœ€è¦äº†è§£å“ªäº› feature å¯¹ä½ çš„æ•°æ®é›†å½±å“æ˜¯æœ€å¤§çš„ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è¡¡é‡ç”µè„‘æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé”®ç›˜é¼ æ ‡è¿™äº›featureå»æ‰ï¼Œä½†æ˜¯cpuã€gpuã€å†…å­˜æ€§èƒ½è¿™äº›ä½ è‚¯å®šè¦ä¿ç•™å¯¹ä¸å¯¹ï¼Ÿcpuã€gpuã€å†…å­˜æ€§èƒ½ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¯´çš„ features required to approximate itã€‚</p><p>ä½†æœ‰çš„äººè¯´ï¼Œæˆ‘è§‰å¾—ç¡¬ç›˜ä¹Ÿå¾—åŠ ä¸Šå»ï¼Œè¿™æ ·æˆ‘ä»¬çš„ intrinsic dimension å°±ä» 3 å¢åŠ åˆ°4äº†ã€‚</p><p>æ‰€ä»¥ä½ çœ‹ï¼Œintrinsic dimension æ•°é‡æ˜¯ä¸€ä¸ªè§†ä¸åŒæƒ…å†µè€Œå®šçš„å€¼ã€‚</p><p>é‚£æˆ‘ä»¬å°†è®¾ä¸ºå¤šå°‘æ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿè€ƒè™‘æˆ‘ä»¬çš„irisæ•°æ®ï¼Œæˆ‘ä»¬é€‰æ‹©</p><ul><li>sepal width</li><li>sepal length</li><li>petal width</li></ul><p>è¿™3ä¸ªå˜é‡ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†å®ƒç»˜åˆ¶åˆ°3ç»´ç©ºé—´ï¼Œä½†æˆ‘ä»¬å‘ç°å®ƒçš„å›¾åƒåœ¨3ç»´ç©ºé—´æ˜¯å¾ˆå¹³çš„ï¼Œè¿™æ„å‘³ç€æŸä¸ªå˜é‡çš„å€¼çš„æ–¹å·®å¾ˆå°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯¹æ•´ä¸ªå›¾åƒçš„å½±å“ä¸å¤§ï¼Œæˆ‘ä»¬åªé€‰æ‹©å¦å¤–2ä¸ªå˜é‡ï¼Œä¹Ÿå¯ä»¥ä¸æŸå¤±å¤ªå¤šçš„ç»†èŠ‚ã€‚</p><p><img src="https://i.loli.net/2019/11/20/iUkctja8u2RovbA.png" alt=""></p><p>ä½†scatterå›¾åªèƒ½è¡¨ç¤º3ç»´ä»¥ä¸‹çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬çš„ features æœ‰å¾ˆå¤šä¸ªï¼Œæˆ‘ä»¬è¦å¦‚ä½•æ‰¾åˆ°é‚£äº›å½±å“ç¨‹åº¦å¤§çš„ features å‘¢ï¼Ÿ</p><p>è¿™å°±æ˜¯ PCA æ“…é•¿çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿè®¡ PCA ä¸­é‚£äº›æ–¹å·®æ˜¾è‘—çš„featuresã€‚</p><p>ä¸‹é¢æ˜¯irisæ•°æ®é›†å„ä¸ªfeaturesçš„æ–¹å·®æ’åºå›¾ï¼š</p><p><img src="https://i.loli.net/2019/11/20/qDPFfX7E8xjMwAu.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°æœ€åçš„é‚£ä¸ªæ•°æ®æ–¹å·®éå¸¸å°ï¼Œæ‰€ä»¥å®ƒå¯¹æˆ‘ä»¬æ•°æ®é›†çš„å½±å“å®Œå…¨å¯ä»¥å»é™¤æ‰ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•ç»˜åˆ¶æ•°æ®é›†çš„ variances å‘¢ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># Perform the necessary imports</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.pipeline import make_pipeline</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"># Create scaler: scaler</span><br><span class="line">scaler = StandardScaler()</span><br><span class="line"></span><br><span class="line"># Create a PCA instance: pca</span><br><span class="line">pca = PCA()</span><br><span class="line"></span><br><span class="line"># Create pipeline: pipeline</span><br><span class="line">pipeline = make_pipeline(scaler,pca)</span><br><span class="line"></span><br><span class="line"># Fit the pipeline to &apos;samples&apos;</span><br><span class="line">pipeline.fit(samples)</span><br><span class="line"></span><br><span class="line"># Plot the explained variances</span><br><span class="line">features = range(pca.n_components_)</span><br><span class="line">plt.bar(features,pca.explained_variance_)</span><br><span class="line">plt.xlabel(&apos;PCA feature&apos;)</span><br><span class="line">plt.ylabel(&apos;variance&apos;)</span><br><span class="line">plt.xticks(features)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="PCAé™ç»´"><a href="#PCAé™ç»´" class="headerlink" title="PCAé™ç»´"></a>PCAé™ç»´</h2><p>æˆ‘ä»¬åœ¨åšæ•°æ®é™ç»´çš„æ—¶å€™ï¼Œå¾—æŒ‡å®šéœ€è¦ä¿ç•™çš„featuresï¼Œå³é€šè¿‡æŒ‡å®špcaçš„å‚æ•°<code>n_components=2</code>, æˆ‘ä»¬ä¿ç•™å¤šå°‘ä¸ªfeaturesï¼Œè¿™å¯ä»¥é€šè¿‡Intrinsic dimensionæ¥è®¡ç®—ã€‚</p><p>æˆ‘ä»¬ä»¥irisæ•°æ®ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ç”¨PCAæŠŠæ•°æ®ä»å››ç»´ï¼ˆpetal width,lengthå’Œsepal length,widthï¼‰é™åˆ°2ç»´åï¼Œæˆ‘ä»¬å†ç»˜åˆ¶å®ƒçš„scatterå›¾ï¼Œä¼šå‘ç°å®ƒä»¬è¿˜æ˜¯åˆ†ä¸ºä¸‰éƒ¨åˆ†ã€‚</p><p>ä½†æ˜¯å¯¹äºå¦‚å­—è¯ç»Ÿè®¡çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨å…¶ä»–çš„ç®—æ³•æ¥ä»£æ›¿ï¼Œåœ¨è¿™ç§æ•°æ®ä¸­ï¼Œæ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ–‡æ¡£ï¼Œæ¯ä¸€åˆ—ä»£è¡¨æŸä¸ªå›ºå®šè¯ç»„ï¼ˆfixed vocabularyï¼‰ä¸­çš„è¯è¯­.</p><p>æˆ‘ä»¬ä¼šç»Ÿè®¡ï¼Œæ¯ä¸ªè¯è¯­åœ¨æ¯ä¸ªæ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°arrayã€‚ä¸è¿‡ï¼Œåªæœ‰å°‘æ•°çš„è¯è¯­ä¼šå‡ºç°å¾ˆå¤šçš„æ–‡æ¡£ä¹‹ä¸­ï¼Œå¤§éƒ¨åˆ†è¯è¯­åœ¨æŸäº›æ–‡æ¡£ä¸­çš„å‡ºç°æ¬¡æ•°éƒ½æ˜¯0ï¼Œè¿™æ ·çš„arrayå«åšsparse(ç¨€ç–çš„ï¼‰ï¼Œsparse arrayä¸­å¤§éƒ¨åˆ†çš„å€¼éƒ½æ˜¯0.</p><p>æˆ‘ä»¬ä½¿ç”¨ <em>csr_matrix</em> æ¥ä»£æ›¿ <em>numpy array</em> å»å¤„ç†è¿™æ ·çš„æ•°æ®ã€‚</p><p><em>csr_matrix</em> åªä¼šä¿å­˜é‚£äº›é0å€¼ï¼Œè¿™æ ·å°±æ›´æ–¹ä¾¿ï¼Œä½†æ˜¯PCAä¸æ”¯æŒ <em>csr_matrix</em>ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ <em>TruncatedSVD</em> æ¥ä»£æ›¿ PCAã€‚</p><p><em>â€ŒTruncatedSVD</em> çš„æ•ˆæœä¸ PCA æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡å®ƒæ¥å— <em>csr_matrix</em> æ•°ç»„ï¼Œé™¤æ­¤ä¹‹å¤–ä½¿ç”¨æ–¹æ³•éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ¥å¯¹ä¸€ç»„è¯è¯­è¿›è¡Œåˆ†è¯æ“ä½œï¼Œæˆ‘ä»¬çš„è¯ç»„å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># data</span><br><span class="line">documents=[&apos;cats say meow&apos;, &apos;dogs say woof&apos;, &apos;dogs chase cats&apos;]</span><br><span class="line"></span><br><span class="line"># Import TfidfVectorizer</span><br><span class="line">from sklearn.feature_extraction.text import TfidfVectorizer</span><br><span class="line"></span><br><span class="line"># Create a TfidfVectorizer: tfidf</span><br><span class="line">tfidf = TfidfVectorizer() </span><br><span class="line"></span><br><span class="line"># Apply fit_transform to document: csr_mat</span><br><span class="line">csr_mat = tfidf.fit_transform(documents)</span><br><span class="line"></span><br><span class="line"># Print result of toarray() method</span><br><span class="line">print(csr_mat.toarray())</span><br><span class="line"></span><br><span class="line"># Get the words: words</span><br><span class="line">words = tfidf.get_feature_names()</span><br><span class="line"></span><br><span class="line"># Print words</span><br><span class="line">print(words)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: [[0.51785612 0.         0.         0.68091856 0.51785612 0.        ]</span><br><span class="line"> [0.         0.         0.51785612 0.         0.51785612 0.68091856]</span><br><span class="line"> [0.51785612 0.68091856 0.51785612 0.         0.         0.        ]]</span><br><span class="line"> </span><br><span class="line"> [&apos;cats&apos;, &apos;chase&apos;, &apos;dogs&apos;, &apos;meow&apos;, &apos;say&apos;, &apos;woof&apos;]</span><br></pre></td></tr></table></figure><h1 id="NMF"><a href="#NMF" class="headerlink" title="NMF"></a>NMF</h1><p>NMFä¸PCAä¸€æ ·ï¼Œéƒ½æ˜¯é™ç»´ç®—æ³•ã€‚ä¸è¿‡NMFä¸èƒ½ç”¨äºæ‰€æœ‰çš„é¢„æµ‹ï¼Œåªèƒ½ç”¨äºéè´Ÿå€¼ã€‚</p><p>NMFä¼šå°†æ•°æ®é›†ä¸­çš„æ¯ç»„æ•°æ®åˆ†è§£å¹¶åˆ†åˆ«è®¡ç®—å…¶å’Œã€‚</p><p>è€ƒè™‘å­—è¯ç»Ÿè®¡çš„ä¾‹å­ï¼ŒNMFä½¿ç”¨tf-idfæ¥è®¡ç®—å­—è¯å‡ºç°çš„é¢‘ç‡ã€‚<br>tfæ˜¯è¯è¯­å‡ºç°çš„é¢‘ç‡ï¼Œåœ¨æ¯ä¸€ä¸ªdocumentä¸­ï¼Œå¦‚æœä¸€ä¸ªè¯å æ•´ä¸ªdocumentä¸­æ–‡å­—çš„ç™¾åˆ†ä¹‹10ï¼Œé‚£ä¹ˆNMFçš„è¾“å‡ºçš„tfå°±æ˜¯0.1.</p><p>è€Œidfç”¨æ¥é™ä½é‚£äº›å¸¸ç”¨è¯çš„å½±å“ï¼Œå¦‚,<code>çš„,é‚£ä¸ªï¼Œè¿™ä¸ª</code>ç­‰ç­‰ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨PCAä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†å¤šå°‘ä¸ª<code>n_components</code>,å°±ç›¸å½“äºæ˜¯ä¿ç•™äº†å¤šå°‘ä¸ªfeaturesã€‚</p><p>åœ¨NMFä¸­ï¼Œå®ƒä¹Ÿä¼šå»å­¦ä¹ æ•°æ®é›†çš„ <em>component dimension</em>ã€‚</p><p>éœ€æ³¨æ„ï¼ŒNMFçš„æ¡ç›®ï¼Œä»¥åŠfeaturesçš„å€¼ï¼Œæ€»æ˜¯æ­£æ•°ã€‚</p><h2 id="NMFç®—æ³•ä½¿ç”¨"><a href="#NMFç®—æ³•ä½¿ç”¨" class="headerlink" title="NMFç®—æ³•ä½¿ç”¨"></a>NMFç®—æ³•ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Import NMF</span><br><span class="line">from sklearn.decomposition import NMF</span><br><span class="line"></span><br><span class="line"># Create an NMF instance: model</span><br><span class="line">model = NMF(n_components=6)</span><br><span class="line"></span><br><span class="line"># Fit the model to articles</span><br><span class="line">model.fit(articles)</span><br><span class="line"></span><br><span class="line"># Transform the articles: nmf_features</span><br><span class="line">nmf_features = model.transform(articles)</span><br><span class="line"></span><br><span class="line"># Print the NMF features</span><br><span class="line">print(nmf_features)</span><br></pre></td></tr></table></figure><h2 id="è®ºæ–‡å­—è¯ç»Ÿè®¡"><a href="#è®ºæ–‡å­—è¯ç»Ÿè®¡" class="headerlink" title="è®ºæ–‡å­—è¯ç»Ÿè®¡"></a>è®ºæ–‡å­—è¯ç»Ÿè®¡</h2><blockquote><p>Components correspond to topics of documents, and the NMF features reconstruct the documents from the topics</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Import pandas</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line"># Create a DataFrame: components_df</span><br><span class="line">components_df = pd.DataFrame(model.components_,columns=words)</span><br><span class="line"></span><br><span class="line"># Print the shape of the DataFrame</span><br><span class="line">print(components_df.shape)</span><br><span class="line"></span><br><span class="line"># Select row 3: component</span><br><span class="line">component = components_df.iloc[3]</span><br><span class="line"></span><br><span class="line"># Print result of nlargest</span><br><span class="line">print(component.nlargest())</span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·å–œå¥½é¢„æµ‹"><a href="#ç”¨æˆ·å–œå¥½é¢„æµ‹" class="headerlink" title="ç”¨æˆ·å–œå¥½é¢„æµ‹"></a>ç”¨æˆ·å–œå¥½é¢„æµ‹</h2><p>NMFæœ‰ä¸€ä¸ªé‡è¦çš„åº”ç”¨æ˜¯ä½œä¸ºå†…å®¹æ¨èï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·å’Œä¸€éƒ¨ç”µå½±ï¼Œæˆ‘ä»¬æƒ³è¦æ ¹æ®ç”µå½±çš„å†…å®¹åšå‡ºé¢„æµ‹ï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">å–œå‰§ç‰‡</th><th style="text-align:left">åŠ¨ä½œç‰‡</th></tr></thead><tbody><tr><td style="text-align:left">å°é›…</td><td style="text-align:left">å–œæ¬¢</td><td style="text-align:left">ä¸å–œæ¬¢</td></tr><tr><td style="text-align:left">ç™¾è´§æˆ˜è­¦</td><td style="text-align:left">3</td><td style="text-align:left">1</td></tr></tbody></table><blockquote><p>çº¢ç•ªåŒºæ˜¯åŠ¨ä½œå–œå‰§ç‰‡ã€‚</p></blockquote><p>ç°åœ¨å‡è®¾å°é›…å–œæ¬¢å–œå‰§ç‰‡ï¼Œä¸å–œæ¬¢åŠ¨ä½œç‰‡ï¼ŒåŒæ—¶å‡è®¾æˆ‘ä»¬ç°åœ¨åªæ ¹æ®ä¸€éƒ¨ç”µå½±æ‹¥æœ‰å¤šå°‘å–œå‰§æˆåˆ†ä¸åŠ¨ä½œç‰‡æˆåˆ†æ¥è¯„ä»·å®ƒã€‚</p><p>ç°åœ¨å› ä¸ºå°é›…å–œæ¬¢å–œå‰§ç‰‡<code>+3</code>ï¼Œä¸å–œæ¬¢åŠ¨ä½œç‰‡<code>+0</code>ï¼Œæ‰€ä»¥å®ƒå¯èƒ½ç»™å‡ºçš„è¯„ä»·æ˜¯ 3åˆ† ã€‚</p><p>æˆ‘ä»¬å†æ¥è€ƒè™‘å°æ˜çš„æƒ…å†µï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">å–œå‰§ç‰‡</th><th style="text-align:left">åŠ¨ä½œç‰‡</th></tr></thead><tbody><tr><td style="text-align:left">å°æ˜</td><td style="text-align:left">ä¸å–œæ¬¢</td><td style="text-align:left">å–œæ¬¢</td></tr><tr><td style="text-align:left">çº¢ç•ªåŒº</td><td style="text-align:left">3</td><td style="text-align:left">1</td></tr></tbody></table><p>å°æ˜å–œæ¬¢åŠ¨ä½œç‰‡ï¼Œä¸å–œæ¬¢å–œå‰§ç‰‡ï¼Œæ‰€ä»¥å–œå‰§ç‰‡çš„3åˆ†ä¸è®¡ï¼ŒåŠ¨ä½œç‰‡1åˆ†è®¡å…¥ï¼Œå³å°æ˜åªç»™å‡ºäº†1åˆ†çš„è¯„ä»·ã€‚</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">å–œå‰§ç‰‡</th><th style="text-align:left">åŠ¨ä½œç‰‡</th></tr></thead><tbody><tr><td style="text-align:left">å°é›…</td><td style="text-align:left">å–œæ¬¢</td><td style="text-align:left">å–œæ¬¢</td></tr><tr><td style="text-align:left">çº¢ç•ªåŒº</td><td style="text-align:left">3</td><td style="text-align:left">1</td></tr></tbody></table><p>å†è€ƒè™‘ä¸€ä¸ªä¾‹å­ï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">å–œå‰§ç‰‡</th><th style="text-align:left">åŠ¨ä½œç‰‡</th></tr></thead><tbody><tr><td style="text-align:left">å°åˆ˜</td><td style="text-align:left">å–œæ¬¢</td><td style="text-align:left">å–œæ¬¢</td></tr><tr><td style="text-align:left">è®©å­å¼¹é£</td><td style="text-align:left">1</td><td style="text-align:left">3</td></tr></tbody></table><p>å°åˆ˜å–œæ¬¢å–œå‰§ä¹Ÿå–œæ¬¢åŠ¨ä½œï¼Œæ‰€ä»¥è¿™éƒ¨ç”µå½±ä»–å¯èƒ½ä¼šç»™å‡º1+3ï¼Œå››åˆ†çš„è¯„ä»·ã€‚</p><p>æˆ‘ä»¬æŠŠä¸€æ‰¹ç”µå½±ç¼–å·ä¸ºM1-M5,åˆ—è¡¨ç¤ºåˆ†åˆ«å å–œå‰§ä¸åŠ¨ä½œçš„æˆåˆ†ï¼ŒåŒæ—¶æŠŠä¸€æ‰¹ç”¨æˆ·åˆ†ç±»ä¸ºä»–ä»¬æ˜¯å¦å–œæ¬¢å–œå‰§æˆ–åŠ¨ä½œç‰‡ã€‚</p><p><img src="https://i.loli.net/2019/11/21/1RKTpP4MFcVuyfS.png" alt=""></p><p>å½“æˆ‘ä»¬æŠŠå·¦è¾¹çš„ä¸¤ä¸ªè¡¨ç»“åˆï¼Œå°±å¯ä»¥å¾—åˆ°åé¢çš„è¿™ä¸ªè¡¨ï¼š</p><p><img src="https://i.loli.net/2019/11/21/PTgzFwfcnsX5uQp.png" alt=""></p><p>è¿™æ˜¯é€šè¿‡ç®—ç‚¹ç§¯ç®—å‡ºæ¥çš„ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼š</p><p><img src="https://i.loli.net/2019/11/21/Astuv1eTKCGHDyP.png" alt=""></p><ul><li>æœ‰äº›äººçš„å–œå¥½ä¸€æ ·ï¼Œåˆ™ä»–ä»¬ç»™å‡ºçš„ç”µå½±è¯„åˆ†ä¹Ÿæ˜¯ä¸€æ ·çš„</li><li>å¦‚æœä¸¤ä¸ªç”µå½±æ‰€å çš„æˆåˆ†å·®ä¸å¤šï¼Œåˆ™ä¹Ÿä¼šå¾—åˆ°ä¸€æ ·çš„è¯„åˆ†</li><li>B+C=D,è¿™æ˜¯å› ä¸ºBçš„å–œæ¬¢ä¸Cçš„å–œå¥½ç›¸åï¼Œè€ŒDå¯¹ä¸è¿™ä¸¤è€…éƒ½å–œæ¬¢</li><li>M2ä¸M3çš„å¹³å‡å€¼æ˜¯M5ï¼Œå³M5çš„å–œå‰§ä¸åŠ¨ä½œæˆåˆ†æ˜¯M2ä¸M3çš„å¹³å‡å€¼ï¼Œæ‰€ä»¥M5çš„è¯„åˆ†ä¹Ÿæ˜¯M2ä¸M3çš„å¹³å‡å€¼</li></ul><p>ä¸Šé¢çš„è¿™ä¸ªè¡¨å«åšMatrix Factorization, æˆ‘ä»¬è¦å­˜å‚¨è¿™ä¸ªè¡¨æ˜¯éå¸¸è´¹å­˜å‚¨çš„ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å¾ˆå¤šçš„ç”µå½±ä¸ç”¨æˆ·ï¼Œç®—ä¸€ä¸‹æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤šå¤§çš„Matrix.</p><p><img src="https://i.loli.net/2019/11/21/SnX2JGWdIgsM6oL.png" alt=""></p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œåªå­˜å‚¨ç”¨æˆ·çš„å–œå¥½ä¸ç”µå½±çš„ä¿¡æ¯,å†é€šè¿‡å›¾è¡¨æ¼”ç¤ºä¸€ä¸‹ï¼š</p><p><img src="https://i.loli.net/2019/11/21/TqmufiSXRHQchPZ.png" alt=""></p><p>ç¬¬ä¸€ç§æ–¹æ¡ˆæ˜¯æˆ‘ä»¬ç›´æ¥å­˜å‚¨ç”¨æˆ·å¯¹æ‰€æœ‰ç”µå½±è¯„åˆ†ä¸å¯èƒ½çš„è¯„åˆ†ï¼Œå‡è®¾æœ‰2000ä¸ªç”¨æˆ·ï¼Œ1000éƒ¨ç”µå½±ï¼Œè¿™æ„å‘³ç€200ä¸‡ä»½æ•°æ®ã€‚</p><p><img src="https://i.loli.net/2019/11/21/8fwGTU7L96uIc5e.png" alt=""></p><p>å¦‚æœæˆ‘ä»¬é€šè¿‡featureè®¡ç®—ï¼Œåˆ™åªéœ€è¦30ä¸‡ä»½æ•°æ®</p><p><img src="https://i.loli.net/2019/11/21/k9Ml5mUPoBg4SZC.png" alt=""></p><p>ç°åœ¨æˆ‘ä»¬å›åˆ°ä»¥å‰ï¼Œå¯¹ä¸NMPç®—æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œ</p><p><img src="https://i.loli.net/2019/11/21/Astuv1eTKCGHDyP.png" alt=""></p><p>å¦‚ä½•é€šè¿‡ä¸­é—´çš„ç‚¹ç§¯ï¼Œå¾—åˆ°ä¸¤è¾¹çš„æ•°æ®ï¼Ÿå°±åƒ24å¯ä»¥æ˜¯2x12,ä¹Ÿå¯ä»¥æ˜¯4x6.</p><p>æœ€å¼€å§‹æˆ‘ä»¬å¯ä»¥éšæœºçš„å°†ä¸¤è¾¹çš„æ•°æ®åˆ—å‡ºæ¥ï¼Œç®—å‡ºç‚¹ç§¯å¹¶ä¸æ‰‹ä¸Šçš„ç‚¹ç§¯æ¯”å¯¹ï¼Œå¦‚æœè¿‡ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ç›¸åº”çš„ç”¨æˆ·å–œå¥½ä¸ç”µå½±è¯„åˆ†åšå‡ºè°ƒæ•´ï¼Œç›´åˆ°æ‰€æœ‰çš„å€¼æ¥è¿‘æˆ‘ä»¬å·²æœ‰çš„ç‚¹ç§¯ä¸­çš„å€¼ã€‚</p><p><img src="https://i.loli.net/2019/11/21/c9QkmIZ5TbEUFMY.png" alt=""></p><p>æˆ‘ä»¬ç®—åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œæ‰åœæ­¢å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªerror function,å®ƒå°±æ˜¯å‘Šè¯‰æœºå™¨ï¼Œä½ å“ªé‡Œé”™äº†ï¼Œåšçš„è¿˜ä¸å¤Ÿï¼Œå¾—ç»§ç»­ç®—ã€‚</p><p><img src="https://i.loli.net/2019/11/21/I34aLMFuywnHqzA.png" alt=""></p><p>è¿™é‡Œçš„errorå°±æ˜¯æˆ‘ä»¬æ‰‹ä¸Šçš„æ•°æ®ä¸æœºå™¨ç®—å‡ºæ¥çš„æ•°æ®çš„å·®çš„å¹³æ–¹ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªç”¨æˆ·æˆ–è€…æ¯ä¸ªç”µå½±çš„erroråŠ èµ·æ¥ï¼Œerror functionçš„ä½œç”¨å°±æ˜¯å°½é‡è®©errorçš„å’Œæœ€å°ã€‚</p><p>åœ¨ç°å®çš„æƒ…å†µä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ¯ä¸ªç”¨æˆ·å¯¹æ¯ä¸ªç”µå½±éƒ½æœ‰è¯„åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿åˆ°çš„ç‚¹ç§¯å›¾ä¸­é—´å¯èƒ½æœ‰å¾ˆå¤šç©ºç™½:</p><p><img src="https://i.loli.net/2019/11/21/q865U2sbpad9x3l.png" alt=""></p><p>ä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™äº›å€¼ç®—å‡ºæ¥ç”¨æˆ·ä¸ç”µå½±çš„å±æ€§,è¿›è€Œç»™ç”¨æˆ·æ¨èç”µå½±:</p><p><img src="https://i.loli.net/2019/11/21/qUIHQT75DZ6Rhdk.png" alt=""></p><blockquote><p><a href="https://www.youtube.com/watch?v=ZspR5PZemcs&amp;t=693s" target="_blank" rel="noopener">å‚è€ƒ:How does Netflix recommend movies? Matrix Factorization</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/21/I34aLMFuywnHqzA.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éç›‘ç£å­¦ä¹ çš„æœ€åä¸¤ç« ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹  Dimension reduction, Dimension reductionå°±æ˜¯ä»æ•°æ®ä¸­å‘ç°ä¸€å®šçš„æ¨¡å¼ï¼Œé€šè¿‡è¿™ç§æ¨¡å¼æˆ‘ä»¬å°±å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œè¿™å¯¹äºè®¡ç®—å’Œå­˜å‚¨æ¥è¯´éƒ½æ˜¯éå¸¸æœ‰åˆ©çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§æ•°æ®æ—¶ä»£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="sklearn" scheme="http://wittyfans.com/tags/sklearn/"/>
    
  </entry>
  
  <entry>
    <title>éç›‘ç£å­¦ä¹ ï¼šClustering and Visualization</title>
    <link href="http://wittyfans.com/coding/%E9%9D%9E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%EF%BC%9AClustering-and-Visualization.html"/>
    <id>http://wittyfans.com/coding/éç›‘ç£å­¦ä¹ ï¼šClustering-and-Visualization.html</id>
    <published>2019-11-19T15:02:57.000Z</published>
    <updated>2019-11-20T03:14:45.440Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/19/GIND7pRkxahrXBu.png" alt=""></p><blockquote><p>éç›‘ç£å­¦ä¹ ï¼šå³æ ¹æ®ç°æœ‰çš„æ•°æ®å»å‘æ˜å­˜åœ¨æ•°æ®ä¸­çš„ä¸€äº›æ¨¡å¼,æ¯”å¦‚æ ¹æ®ç”¨æˆ·çš„è´­ä¹°è®°å½•ï¼Œ(<em>clustering</em>) å®šä¹‰ç”¨æˆ·ç”»åƒ, æˆ–æ ¹æ®æ•°æ®çš„æ¨¡å¼æ¥å‹ç¼©æ•°æ®ï¼ˆ<em>dimension reduction</em>.</p></blockquote><a id="more"></a><h1 id="éç›‘ç£å­¦ä¹ "><a href="#éç›‘ç£å­¦ä¹ " class="headerlink" title="éç›‘ç£å­¦ä¹ "></a>éç›‘ç£å­¦ä¹ </h1><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><h2 id="éç›‘ç£å­¦ä¹ ä»‹ç»"><a href="#éç›‘ç£å­¦ä¹ ä»‹ç»" class="headerlink" title="éç›‘ç£å­¦ä¹ ä»‹ç»"></a>éç›‘ç£å­¦ä¹ ä»‹ç»</h2><p>ç›¸æ¯”è¾ƒç›‘ç£å­¦ä¹ ï¼Œå¦‚å¯¹ç™Œç—‡è‰¯æ€§ï¼ˆ<em>benign</em>ï¼‰ä¸æ¶æ€§ï¼ˆ<em>cancerous</em>ï¼‰çš„åˆ†ç±»ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘ç°çš„æ¨¡å¼æ˜¯: <em>guided</em>,æˆ–è€…è¯´æ˜¯: <em>supervised</em>ï¼Œè¿™ä¸€è¿‡ç¨‹ä¾èµ–æˆ‘ä»¬æ ‡è®°è¿‡çš„æ•°æ®ï¼Œè€Œéç›‘ç£å­¦ä¹ ä¸éœ€è¦æˆ‘ä»¬ä½¿ç”¨æ ‡è®°è¿‡çš„æ•°æ®å»å‘ç°è¿™äº›æ¨¡å¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦å»guide the machineã€‚</p><h1 id="èšç±»ä¸æ•°æ®æ¢ç´¢"><a href="#èšç±»ä¸æ•°æ®æ¢ç´¢" class="headerlink" title="èšç±»ä¸æ•°æ®æ¢ç´¢"></a>èšç±»ä¸æ•°æ®æ¢ç´¢</h1><h2 id="iris-æ•°æ®é›†"><a href="#iris-æ•°æ®é›†" class="headerlink" title="iris æ•°æ®é›†"></a>iris æ•°æ®é›†</h2><p>irisæ•°æ®é›†åŒ…æ‹¬äº†ä¸‰ç§æ¤ç‰©ï¼Œå®ƒä»¬æœ‰å››ç§è¡¡é‡æ–¹å¼ï¼š</p><ul><li>petal width</li><li>petal length</li><li>sepal width</li><li>sepql length</li></ul><p>è¿™äº›å«åšæ•°æ®çš„ <em>features</em> ,åœ¨è¿™é—¨è¯¾ç¨‹ä¸­ï¼Œåƒè¿™æ ·çš„è¯¾ç¨‹å°†ä¼šå°†æ•°æ®é›†å®šä¹‰ä¸º2ç»´æ•°ç»„,åˆ—å®šä¹‰è¡¡é‡æ ‡å‡†( <em>the features</em> )ï¼Œè¡Œä»£è¡¨ä¸€ä¸ªæ ·ä¾‹( <em>a sample</em> ).</p><p>æˆ‘ä»¬çš„æ•°æ®é›†æœ‰<strong>å››ä¸ªè¡¡é‡æ–¹å¼ï¼Œå¯¹åº”ä¸€ä¸ªå››ç»´æ•°ç»„</strong>ï¼Œäº‹å®ä¸Šä½ å¯ä»¥æ¨ç®—å‡ºæ¥ï¼š</p><p>$$Dimension=number\ of\ features$$</p><p>æˆ‘ä»¬æ— æ³•ç›´æ¥å¯¹å››ç»´æ•°æ®å¯è§†åŒ–ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éç›‘ç£å­¦ä¹ æŠ€æœ¯æ¥ä»å…¶ä¸­è·å–æƒ³è¦çš„ä¿¡æ¯ã€‚</p><p>è¿™ä¸€ç« ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ k-means èšç±»ç®—æ³•å°†æ‰€æœ‰çš„æ ·ä¾‹æ•°æ®åˆ†ç±»ã€‚</p><p>k-meansç®—æ³•ä¼šä»æ•°æ®é›†ä¸­å‘ç°ç‰¹å®šçš„åˆ†ç±»ï¼Œå³æŠŠnä¸ªç‚¹ï¼ˆå¯ä»¥æ˜¯æ ·æœ¬çš„ä¸€æ¬¡è§‚å¯Ÿæˆ–ä¸€ä¸ªå®ä¾‹ï¼‰åˆ’åˆ†åˆ°kä¸ªèšç±»ä¸­ï¼Œä½¿å¾—æ¯ä¸ªç‚¹éƒ½å±äºç¦»å®ƒæœ€è¿‘çš„å‡å€¼ï¼ˆæ­¤å³èšç±»ä¸­å¿ƒï¼‰å¯¹åº”çš„èšç±»ï¼Œä»¥ä¹‹ä½œä¸ºèšç±»çš„æ ‡å‡†ã€‚</p><p>k-meansç®—æ³•åœ¨sklearnä¸­æœ‰å®ç°ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.cluster import KMeans</span><br><span class="line">modal = KMeans(n_clusters=3)</span><br><span class="line"></span><br><span class="line">modal.fit(samples)</span><br><span class="line"></span><br><span class="line">labels = model.predit(samples)</span><br></pre></td></tr></table></figure><ol><li>å¯¼å…¥kmeansåŒ…</li><li>å®ä¾‹åŒ–ï¼Œå¹¶æŒ‡å®šä½ æƒ³è¦ä»æ•°æ®ä¸­å‘ç°çš„èšç±»æ•°é‡(n_clusters)</li><li>fit sampleæ•°æ®</li><li>ç”¨åŒæ ·çš„æ•°æ®åšé¢„æµ‹ï¼ˆæ¼”ç¤ºéœ€è¦ï¼‰ï¼Œè¿™ä¼šè¿”å›æ‰€æœ‰çš„sampleï¼ŒåŒæ—¶å…¶ä¸­åŒ…å«å®ƒæ‰€å±çš„èšç±»ã€‚</li></ol><blockquote><p><a href="http://shabal.in/visuals/kmeans/4.html" target="_blank" rel="noopener">è¿™é‡Œ</a>æœ‰k-meansç®—æ³•çš„åŠ¨ç”»æ¼”ç¤º,çœ‹ä¸€ä¸‹ä½ å°±æ˜ç™½å•¦ï¼Œå¦å¤–ä¸€ä¸ªæ²¹ç®¡çš„<a href="http://shabal.in/visuals/kmeans/4.html" target="_blank" rel="noopener">è§†é¢‘ç‰ˆ</a></p></blockquote><h2 id="ä¸€ä¸ªç®€å•çš„ä¾‹å­"><a href="#ä¸€ä¸ªç®€å•çš„ä¾‹å­" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ä¾‹å­"></a>ä¸€ä¸ªç®€å•çš„ä¾‹å­</h2><p><strong>æˆ‘ä»¬çš„æ•°æ®ï¼š</strong></p><p>æˆ‘ä»¬çš„æ•°æ® <em>points</em> æ˜¯ä¸€ä¸ª300è¡Œï¼Œ2åˆ—çš„æ•°æ®é›†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0.06544649, -0.76866376],</span><br><span class="line">       [-1.52901547, -0.42953079],</span><br><span class="line">       [ 1.70993371,  0.69885253],</span><br><span class="line">       [ 1.16779145,  1.01262638],</span><br><span class="line">       [-1.80110088, -0.31861296],</span><br><span class="line">       [-1.63567888, -0.02859535])</span><br></pre></td></tr></table></figure><p><strong>æ•°æ®é›†çš„åˆ†å¸ƒ</strong>:</p><p><img src="https://i.loli.net/2019/11/19/9ALwWz1bRlOBCor.png" alt=""></p><p>æˆ‘ä»¬ä¼šæŠŠæ•°æ®é›†ä¸­çš„ç¬¬ä¸€åˆ—ä½œä¸º x,ç¬¬äºŒåˆ—ä½œä¸º yï¼Œä½¿ç”¨æ•°ç»„çš„åˆ‡ç‰‡åˆ†åˆ«å°† x,y éƒ¨åˆ†çš„å€¼èµ‹ç»™xs,ys.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xs = points[:,0]</span><br><span class="line">ys = points[:1]</span><br></pre></td></tr></table></figure><p>æœ‰äº†æ•°æ®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹æ¨¡å‹è¿›è¡Œåˆå§‹åŒ–ä¸è®­ç»ƒäº†ï¼Œæˆ‘ä»¬åˆå§‹åŒ–Kmeanså®ä¾‹ï¼Œå¹¶å°†æ•°æ®æ•´ä¸ªä¼ ç»™å®ƒè¿›è¡Œè®­ç»ƒï¼Œè®­ç»ƒä¹‹åæˆ‘ä»¬ç”¨æ–°å‡†å¤‡çš„æ•°æ®new_pointsæ¥é¢„æµ‹å®ƒçš„æ€§èƒ½ã€‚</p><p>modelé¢„æµ‹åçš„ç»“æœä¿å­˜åœ¨labelsä¸­ï¼Œè¿™æ˜¯å¯¹new_pointsæ•°æ®çš„é¢„æµ‹ï¼Œlabelsçš„æ•°æ®åªæœ‰ä¸€åˆ—ï¼Œä¿å­˜ç€åˆ†ç±»çš„æƒ…å†µï¼Œå®ƒè·Ÿæˆ‘ä»¬çš„æ•°ç»„new_pointså¯¹åº”çš„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Import KMeans</span><br><span class="line">from sklearn.cluster import KMeans</span><br><span class="line"></span><br><span class="line"># Create a KMeans instance with 3 clusters: model</span><br><span class="line">model = KMeans(n_clusters=3)</span><br><span class="line"></span><br><span class="line"># Fit model to points</span><br><span class="line">model.fit(points)</span><br><span class="line"></span><br><span class="line"># Determine the cluster labels of new_points: labels</span><br><span class="line">labels = model.predict(new_points)</span><br><span class="line"></span><br><span class="line"># Print cluster labels of new_points</span><br><span class="line">print(labels)</span><br></pre></td></tr></table></figure><p>å› ä¸ºé¢„æµ‹çš„æ•°æ®è·ŸåŸå§‹æ•°æ®æ˜¯å¯¹åº”çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»¥æ•°æ®ä¸­çš„ç¬¬ä¸€åˆ—ä½œä¸ºxï¼Œç¬¬äºŒåˆ—ä½œä¸ºyï¼Œç»˜åˆ¶scatterå›¾ï¼Œç„¶åæŒ‡å®šscatterçš„é¢œè‰²å‚æ•°cä¸ºlabelsï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ•°æ®å¯è§†åŒ–çš„æ—¶å€™å°†ä¸åŒèšç±»çš„æ•°æ®åˆ†å¼€è¡¨ç¤ºã€‚</p><p><strong>èšç±»çš„ä¸­å¿ƒï¼šcentroids</strong></p><p>ä¸åŒçš„èšç±»ï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±çš„ä¸­å¿ƒç‚¹ï¼Œè¿™ä¸ªä¸­å¿ƒç‚¹å¯ä»¥ç›´æ¥é€šè¿‡æ¨¡å‹çš„å±æ€§ <code>model.cluster_centers_</code> æ‰¾åˆ°ã€‚æˆ‘ä»¬çš„æ¨¡å‹æ‰¾åˆ°äº†å‡ ä¸ªèšç±»ï¼Œcluster_centers_å°±æœ‰å‡ ç»„æ•°æ®ï¼Œä¸‹é¢æ˜¯3ä¸ª<code>n_clusters</code>çš„ä¾‹å­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[-1.57568905, -0.22531944],</span><br><span class="line">       [ 0.18034887, -0.81701955],</span><br><span class="line">       [ 1.01378685,  0.98288627]])</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†èšç±»åçš„æ•°æ®ä¸centroidséƒ½ç»˜å‡ºæ¥çš„æ•ˆæœï¼š</p><p><img src="https://i.loli.net/2019/11/19/Q4gzo9pkG7vr1PI.png" alt=""></p><h2 id="é€‰æ‹©-n-clustersï¼ˆinertiaï¼‰"><a href="#é€‰æ‹©-n-clustersï¼ˆinertiaï¼‰" class="headerlink" title="é€‰æ‹© n_clustersï¼ˆinertiaï¼‰"></a>é€‰æ‹© n_clustersï¼ˆinertiaï¼‰</h2><p>å¦‚ä½•é€‰æ‹©n_clusters,ä¸€ä¸ªå¥½çš„èšåˆå™¨ï¼Œéœ€è¦å°½å¯èƒ½çš„ä½¿ä¸åŒèšç±»çš„æ•°é‡å°‘ï¼ŒåŒæ—¶èšç±»ä¸­çš„æ•°æ®é›†ä¸centroidsçš„è·ç¦»æœ€è¿‘ã€‚</p><p>èšç±»å™¨æœ‰ä¸€ä¸ªå‚æ•°ä¸“é—¨æ¥æè¿°è¿™ç§å…³ç³»ï¼Œå³ <em>â€Œinertia_</em>ï¼Œ æˆ‘ä»¬å¯ä»¥å¯¹åŒä¸€ä¸ªæ•°æ®å˜åŒ–ä¸åŒçš„n_clustersæ¥æŸ¥çœ‹å®ƒçš„inertia_çš„å˜åŒ–:</p><p><img src="https://i.loli.net/2019/11/19/IPUG5LMecSDAxoy.png" alt=""></p><p>åœ¨è¿™é‡Œä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ°kä»1-3ä¸€ç›´æ˜¯æ€¥å‰§ä¸‹é™çš„ï¼Œéšåå¼€å§‹å˜å¾—å¹³ç¼“ï¼Œæˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©å›¾åƒä»æ€¥å‰§ä¸‹é™åˆ°å˜çš„å¹³ç¼“ä¹‹é—´çš„è¿™ä¸ªå€¼ï¼Œè¿™ä¸ªä¾‹å­ä¸­ï¼Œ3æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p><h2 id="ç¼©æ”¾æ•°æ®ä¸pipline"><a href="#ç¼©æ”¾æ•°æ®ä¸pipline" class="headerlink" title="ç¼©æ”¾æ•°æ®ä¸pipline"></a>ç¼©æ”¾æ•°æ®ä¸pipline</h2><p>æˆ‘ä»¬æœ‰ä¸€ç»„è¿™æ ·çš„æ•°æ®:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[242.0, 23.2, 25.4, 30.0, 38.4, 13.4]</span><br></pre></td></tr></table></figure><p>æ¯ä¸€åˆ—æ˜¯featuresï¼Œå¯¹æ•°æ®é›†è¿›è¡Œèšç±»ï¼Œä½†æ˜¯å‘ç°æ•ˆæœå¹¶ä¸ç†æƒ³ï¼ŒåŸå› æ˜¯è¿™äº›åˆ—ä¹‹é—´çš„æ–¹å·®å¾ˆå¤§ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ ‡å‡†åŒ–åˆ°åŒä¸€ä¸ªç»´åº¦ï¼Œå¦‚0ï¼Œ1æˆ–è€…-1ï¼Œ1,è¿™ä¸ªæ­¥éª¤å« <em>â€ŒScaling</em>ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨ <em>â€ŒStandardScaler</em> æ¥ç¼©æ”¾æ•°æ®ï¼Œå¦å¤–è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç®¡é“æ¥å°†ç¼©æ”¾ä¸kmeansçš„æ­¥éª¤ç»“åˆåˆ°ä¸€èµ·ï¼Œå…³äºpiplineçš„ä»‹ç»ï¼Œè¯·å‚è€ƒä¹‹å‰çš„æ–‡ç« ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># å¯¼å…¥æ•°æ®</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.pipeline import make_pipeline</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.cluster import KMeans</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºscaler</span><br><span class="line">scaler = StandardScaler()</span><br><span class="line"></span><br><span class="line"># åˆ›å»º kmeans å®ä¾‹</span><br><span class="line">kmeans = KMeans(n_clusters=4)</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºç®¡é“ pipeline</span><br><span class="line">pipeline = make_pipeline(scaler,kmeans)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># å¯¹ç®¡é“fitæ•°æ®</span><br><span class="line">pipeline.fit(samples)</span><br><span class="line"></span><br><span class="line"># è®¡ç®— labels</span><br><span class="line">labels = pipeline.predict(samples)</span><br><span class="line"></span><br><span class="line"># æ ¹æ® labels å’Œ species ç»„åˆæˆdataframe</span><br><span class="line">df = pd.DataFrame(&#123;&apos;labels&apos;:labels,&apos;species&apos;:species&#125;)</span><br><span class="line"></span><br><span class="line"># è®¡ç®— crosstab</span><br><span class="line">ct = pd.crosstab(df[&apos;labels&apos;],df[&apos;species&apos;])</span><br><span class="line"></span><br><span class="line"># æ‰“å° ct</span><br><span class="line">print(ct)</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ å¯¹ <em>crosstab</em> å‡½æ•°ä¸æ˜¯å¾ˆäº†è§£ï¼Œ<a href="https://medium.com/@yangdustin5/quick-guide-to-pandas-pivot-table-crosstab-40798b33e367" target="_blank" rel="noopener">è¿™é‡Œ</a>æœ‰ <em>pandas</em> ä¸­å…³äº<em>crosstab</em> å‡½æ•°ä¸ <em>pivot_table</em> å‡½æ•°çš„å¯¹æ¯”ã€‚</p></blockquote><h2 id="æ ¹æ®è‚¡ä»·å˜åŠ¨èšç±»è‚¡ç¥¨"><a href="#æ ¹æ®è‚¡ä»·å˜åŠ¨èšç±»è‚¡ç¥¨" class="headerlink" title="æ ¹æ®è‚¡ä»·å˜åŠ¨èšç±»è‚¡ç¥¨"></a>æ ¹æ®è‚¡ä»·å˜åŠ¨èšç±»è‚¡ç¥¨</h2><p>æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä»½è‚¡ä»·æ•°æ®ï¼Œå®ƒçš„shapeä¸º:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [2]: movements.shape</span><br><span class="line">Out[2]: (60, 963)</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªå…¬å¸çš„æ•°æ®ï¼Œå¯¹äº movements å…¶ä¸­çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œé•¿åº¦ä¸º963:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [5]: len(movements[0])</span><br><span class="line">Out[5]: 963</span><br></pre></td></tr></table></figure><p>å…¶è®°å½•çš„æ˜¯è¿™ä¸ªå…¬å¸æ¯å¤©çš„è‚¡ä»·æ³¢åŠ¨æƒ…å†µã€‚</p><p>æˆ‘ä»¬å‰é¢å¤„ç†çš„æ•°æ®ï¼Œåœ¨ç¼©æ”¾çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <em>â€ŒStandardScaler</em>, standardscalerç¼©æ”¾çš„æ–¹å¼æ˜¯ç§»é™¤æ‰€æœ‰æ•°æ®çš„å¹³å‡å€¼ç„¶åç¼©æ”¾åˆ°ä¸€ä¸ªç»´åº¦ï¼Œä½†å¯¹äºè‚¡ä»·æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ <em>â€ŒNormalizer</em>ï¼Œå®ƒä¼šé’ˆå¯¹æ¯ä¸ªå…¬å¸çš„è‚¡ä»·åˆ†åˆ«ç¼©æ”¾ï¼Œå½¼æ­¤ç‹¬ç«‹ã€‚</p><p><strong>ç¼©æ”¾æ•°æ®å¹¶åˆ›å»ºç®¡é“</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Import Normalizer</span><br><span class="line">from sklearn.preprocessing import Normalizer</span><br><span class="line"></span><br><span class="line"># Create a normalizer: normalizer</span><br><span class="line">normalizer = Normalizer()</span><br><span class="line"></span><br><span class="line"># Create a KMeans model with 10 clusters: kmeans</span><br><span class="line">kmeans = KMeans(n_clusters=10)</span><br><span class="line"></span><br><span class="line"># Make a pipeline chaining normalizer and kmeans: pipeline</span><br><span class="line">pipeline = make_pipeline(normalizer,kmeans)</span><br><span class="line"></span><br><span class="line"># Fit pipeline to the daily price movements</span><br><span class="line">pipeline.fit(movements)</span><br></pre></td></tr></table></figure><p><strong>èšç±»è‚¡ç¥¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Import pandas</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line"># Predict the cluster labels: labels</span><br><span class="line">labels = pipeline.predict(movements)</span><br><span class="line"></span><br><span class="line"># Create a DataFrame aligning labels and companies: df</span><br><span class="line">df = pd.DataFrame(&#123;&apos;labels&apos;: labels, &apos;companies&apos;: companies&#125;)</span><br><span class="line"></span><br><span class="line"># Display df sorted by cluster label</span><br><span class="line">print(df.sort_values(by=&apos;labels&apos;))</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„companiesæ•°æ®ï¼Œæ˜¯åœ¨å¯¼å…¥æ•°æ®ä¹‹å‰å°±å‰”å‡ºæ¥äº†çš„ã€‚</p><h1 id="å¯è§†åŒ–å±‚æ¬¡ç»“æ„"><a href="#å¯è§†åŒ–å±‚æ¬¡ç»“æ„" class="headerlink" title="å¯è§†åŒ–å±‚æ¬¡ç»“æ„"></a>å¯è§†åŒ–å±‚æ¬¡ç»“æ„</h1><p>å¯¹äºé‚£äº›æ²¡æœ‰æŠ€æœ¯èƒŒæ™¯çš„äººæ¥è¯´ï¼Œæœ€å¥½ä½¿ç”¨å›¾è¡¨è¡¨è¾¾ä½ çš„å‘ç°ã€‚å¯¹äºéç›‘ç£å­¦ä¹ è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸¤ç§å¯è§†åŒ–æŠ€æœ¯ï¼š</p><ul><li>t-SNE</li><li>Hierarchical clustring</li></ul><p>æˆ‘ä»¬å…ˆä»‹ç» <em>Hierarchical clustring</em>ã€‚</p><h2 id="Hierarchical-clustring"><a href="#Hierarchical-clustring" class="headerlink" title="Hierarchical clustring"></a>Hierarchical clustring</h2><p>Hierarchical clustring çš„åŸç†æ˜¯ï¼Œæˆ‘ä»¬å¤„ç†æ•°æ®æ—¶ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ¯”è¾ƒå¤§çš„ <em>â€Œn_clusters</em>ï¼Œéšåæ…¢æ…¢ç¼©å°ï¼Œåˆ°æœ€ååªå‰©ä¸€ä¸ª <em>â€Œn_clusters</em>ã€‚</p><p>ä¸ºäº†ç»˜åˆ¶Hierarchical clustringï¼Œæˆ‘ä»¬éœ€è¦çš„åŒ…ä¸»è¦æ˜¯ linkage,dendrogram.</p><ul><li>linkage: è´Ÿè´£è®¡ç®—å±‚æ¬¡èšç±»ä¿¡æ¯</li><li>dendrogram: è´Ÿè´£å¯è§†åŒ–</li></ul><p>ä¸‹é¢æˆ‘ä»¬ä»¥ä¸€ä»½è°·ç‰©æ•°æ®ä¸¾ä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># Perform the necessary imports</span><br><span class="line">from scipy.cluster.hierarchy import linkage, dendrogram</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line"></span><br><span class="line"># Calculate the linkage: mergings</span><br><span class="line">mergings = linkage(samples,method=&apos;complete&apos;)</span><br><span class="line"></span><br><span class="line"># Plot the dendrogram, using varieties as labels</span><br><span class="line">dendrogram(mergings,</span><br><span class="line">           labels=varieties,</span><br><span class="line">           leaf_rotation=90,</span><br><span class="line">           leaf_font_size=6,</span><br><span class="line">)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/19/kaw1DUq2AYxlEfi.png" alt=""></p><h2 id="è‚¡ç¥¨çš„å±‚æ¬¡åŒ–ç¤ºä¾‹"><a href="#è‚¡ç¥¨çš„å±‚æ¬¡åŒ–ç¤ºä¾‹" class="headerlink" title="è‚¡ç¥¨çš„å±‚æ¬¡åŒ–ç¤ºä¾‹"></a>è‚¡ç¥¨çš„å±‚æ¬¡åŒ–ç¤ºä¾‹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Import normalize</span><br><span class="line">from sklearn.preprocessing import normalize</span><br><span class="line"></span><br><span class="line"># Normalize the movements: normalized_movements</span><br><span class="line">normalized_movements = normalize(movements)</span><br><span class="line"></span><br><span class="line"># Calculate the linkage: mergings</span><br><span class="line">mergings = linkage(normalized_movements,method=&apos;complete&apos;)</span><br><span class="line"></span><br><span class="line"># Plot the dendrogram</span><br><span class="line">dendrogram(mergings,labels=companies,leaf_rotation=90,leaf_font_size=6)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹æ ‡å‡†åŒ–ä¸æ— æ ‡å‡†åŒ–çš„ç»“æœ,å³<code>linkage(normalized_movements,method=&#39;complete&#39;)</code>ä¸<code>linkage(movements,method=&#39;complete&#39;)</code>çš„åŒºåˆ«ï¼š</p><p><img src="https://i.loli.net/2019/11/19/Ns8USVibcFehlxw.png" alt="not normalized"></p><p><img src="https://i.loli.net/2019/11/19/QtBcrdTgPMA6U73.png" alt="normalized"></p><h2 id="intermediate-clustering"><a href="#intermediate-clustering" class="headerlink" title="intermediate clustering"></a>intermediate clustering</h2><p>dendrogramçš„å›¾æ˜¯æœ‰é«˜åº¦çš„ï¼Œå®ƒçš„é«˜åº¦å€¼æè¿°çš„æ˜¯ä¸¤ä¸ªfeaturesä¹‹é—´çš„è·ç¦»ï¼Œchevronä¸exxonçš„è·ç¦»æ˜¯å®ƒä»¬ä¸¤è€…mergeçš„æ—¶å€™é‚£ä¸ªæŸ±å­çš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸¤è€…ä¹‹é—´çš„è·ç¦»ï¼Œåœ¨è¿™ä¸ªå±‚é¢ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»æ˜¯æœ€çŸ­çš„ã€‚</p><p>è€Œçœ‹æ•´ä¸ªå›¾åƒçš„è¯ï¼Œå›¾åƒæœ€é«˜çš„éƒ¨åˆ†å‘ç”Ÿçš„åˆå¹¶ï¼Œåˆ™è¯´æ˜å®ƒä»¬ä¹‹é—´çš„è·ç¦»æ˜¯æœ€è¿œçš„ã€‚</p><p>å½“æˆ‘ä»¬åœ¨è®¡ç®—å±‚æ¬¡èšç±»ä¿¡æ¯çš„æ—¶å€™ï¼Œlinkageæ–¹æ³•ä¸­æœ‰ä¸€ä¸ªmethodï¼Œæˆ‘ä»¬æŠŠå®ƒæŒ‡å®šä¸º <em>complete</em>,å®ƒçš„æ„æ€æ˜¯æˆ‘ä»¬ä¸ä¼šé™å®š featuresä¹‹é—´çš„è·ç¦»ï¼Œæˆ‘éœ€è¦è®¡ç®—æ‰€æœ‰featuresä¹‹é—´çš„è·ç¦»ï¼Œä¸ç®¡ä»–ä»¬å¤šè¿œï¼›å¦‚æœæˆ‘åœ¨è¿™é‡Œä½œå‡ºé™åˆ¶ï¼Œæ¯”å¦‚15ï¼Œé‚£ä¹ˆä¸¤ä¸ªfeaturesä¹‹é—´è·ç¦»è¶…è¿‡15çš„éƒ¨åˆ†æˆ‘å°±å¿½ç•¥äº†ã€‚</p><p>æ€ä¹ˆä»ä¸€å †æ•°æ®é›†ä¸­ï¼Œæ ¹æ® featuresä¹‹é—´çš„è·ç¦» æ¥ç­›é€‰æ•°æ®å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ fcluster æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹è®¾å®šé«˜åº¦ä¸º 15 çš„æƒ…å†µ: </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Perform the necessary imports</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from scipy.cluster.hierarchy import linkage, dendrogram</span><br><span class="line"></span><br><span class="line"># Calculate the linkage: mergings</span><br><span class="line">mergings = linkage(samples,method=&apos;single&apos;)</span><br><span class="line"></span><br><span class="line"># Plot the dendrogram</span><br><span class="line">dendrogram(mergings,labels=country_names,leaf_rotation=90,leaf_font_size=6)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/19/FoWTypesfNmHgtI.png" alt=""></p><p>ä¸‹é¢æ˜¯fclusteræ–¹æ³•ä½¿ç”¨ç¤ºä¾‹,ç­›é€‰é«˜åº¦ä¸º6ä»¥å†…çš„æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Perform the necessary imports</span><br><span class="line">import pandas as pd</span><br><span class="line">from scipy.cluster.hierarchy import fcluster</span><br><span class="line"></span><br><span class="line"># Use fcluster to extract labels: labels</span><br><span class="line">labels = fcluster(mergings,6,criterion=&apos;distance&apos;)</span><br><span class="line"></span><br><span class="line"># Create a DataFrame with labels and varieties as columns: df</span><br><span class="line">df = pd.DataFrame(&#123;&apos;labels&apos;: labels, &apos;varieties&apos;: varieties&#125;)</span><br><span class="line"></span><br><span class="line"># Create crosstab: ct</span><br><span class="line">ct = pd.crosstab(df[&apos;labels&apos;],df[&apos;varieties&apos;])</span><br><span class="line"></span><br><span class="line"># Display ct</span><br><span class="line">print(ct)</span><br></pre></td></tr></table></figure><h1 id="t-SNE"><a href="#t-SNE" class="headerlink" title="t-SNE"></a>t-SNE</h1><p>t-sneç®—æ³•çš„åŸç†å°±æ˜¯æŠŠé«˜ç»´åº¦çš„æ•°æ®è½¬åŒ–æˆ2ç»´æˆ–è€…3ç»´çš„ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ç§ç”¨äºé™ç»´çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚å½“æˆ‘ä»¬æƒ³è¦å¯¹é«˜ç»´æ•°æ®è¿›è¡Œåˆ†ç±»ï¼Œåˆä¸æ¸…æ¥šè¿™ä¸ªæ•°æ®é›†æœ‰æ²¡æœ‰å¾ˆå¥½çš„å¯åˆ†æ€§ï¼ˆå³åŒç±»ä¹‹é—´é—´éš”å°ï¼Œå¼‚ç±»ä¹‹é—´é—´éš”å¤§ï¼‰ï¼Œå¯ä»¥é€šè¿‡t-SNEæŠ•å½±åˆ°2ç»´æˆ–è€…3ç»´çš„ç©ºé—´ä¸­è§‚å¯Ÿä¸€ä¸‹ã€‚</p><ul><li>SNEæ„å»ºä¸€ä¸ªé«˜ç»´å¯¹è±¡ä¹‹é—´çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä½¿å¾—ç›¸ä¼¼çš„å¯¹è±¡æœ‰æ›´é«˜çš„æ¦‚ç‡è¢«é€‰æ‹©ï¼Œè€Œä¸ç›¸ä¼¼çš„å¯¹è±¡æœ‰è¾ƒä½çš„æ¦‚ç‡è¢«é€‰æ‹©ã€‚</li><li>SNEåœ¨ä½ç»´ç©ºé—´é‡Œåœ¨æ„å»ºè¿™äº›ç‚¹çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä½¿å¾—è¿™ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´å°½å¯èƒ½çš„ç›¸ä¼¼ã€‚</li></ul><p>æˆ‘ä»¬çœ‹åˆ°t-SNEæ¨¡å‹æ˜¯éç›‘ç£çš„é™ç»´ï¼Œä»–è·Ÿkmeansç­‰ä¸åŒï¼Œä»–ä¸èƒ½é€šè¿‡è®­ç»ƒå¾—åˆ°ä¸€äº›ä¸œè¥¿ä¹‹åå†ç”¨äºå…¶å®ƒæ•°æ®ï¼ˆæ¯”å¦‚kmeanså¯ä»¥é€šè¿‡è®­ç»ƒå¾—åˆ°kä¸ªç‚¹ï¼Œå†ç”¨äºå…¶å®ƒæ•°æ®é›†ï¼Œè€Œt-SNEåªèƒ½å•ç‹¬çš„å¯¹æ•°æ®åšæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´ä»–åªæœ‰fit_transformï¼Œè€Œæ²¡æœ‰fitæ“ä½œï¼‰</p><blockquote><p>å‚è€ƒ <a href="https://blog.csdn.net/hustqb/article/details/78144384" target="_blank" rel="noopener">æ•°æ®é™ç»´ä¸å¯è§†åŒ–â€”â€”t-SNE</a> ä»¥åŠ <a href="http://www.datakit.cn/blog/2017/02/05/t_sne_full.html" target="_blank" rel="noopener">t-SNEå®Œæ•´ç¬”è®°</a></p></blockquote><p>t-sneä¸­æœ‰ä¸¤ä¸ªåœ°æ–¹å€¼å¾—æ³¨æ„çš„ï¼Œä¸€ä¸ªæ˜¯fit_transformæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†XæŠ•å½±åˆ°ä¸€ä¸ªåµŒå…¥ç©ºé—´å¹¶è¿”å›è½¬æ¢ç»“æœï¼Œå¦ä¸€ä¸ªæ˜¯learning_rate,å®ƒæ˜¯å­¦ä¹ ç‡ï¼Œå»ºè®®å–å€¼ä¸º10.0-1000.0ã€‚</p><p>t-sneç”Ÿæˆçš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„ï¼Œå°½ç®¡ä½ ç»˜å›¾çš„ä»£ç æ˜¯ä¸€æ ·çš„ã€‚</p><p><strong>TSNEå¯¹äºè°·ç‰©æ•°æ®çš„å¯è§†åŒ–</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Import TSNE</span><br><span class="line">from sklearn.manifold import TSNE</span><br><span class="line"></span><br><span class="line"># Create a TSNE instance: model</span><br><span class="line">model = TSNE(learning_rate=200)</span><br><span class="line"></span><br><span class="line"># Apply fit_transform to samples: tsne_features</span><br><span class="line">tsne_features = model.fit_transform(samples)</span><br><span class="line"></span><br><span class="line"># Select the 0th feature: xs</span><br><span class="line">xs = tsne_features[:,0]</span><br><span class="line"></span><br><span class="line"># Select the 1st feature: ys</span><br><span class="line">ys = tsne_features[:,1]</span><br><span class="line"></span><br><span class="line"># Scatter plot, coloring by variety_numbers</span><br><span class="line">plt.scatter(xs,ys,c=variety_numbers)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/19/kj4BNZbtY1l7Qzx.png" alt=""></p><p><strong>TSNEå¯¹äºè‚¡ç¥¨æ•°æ®çš„å¯è§†åŒ–</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># Import TSNE</span><br><span class="line">from sklearn.manifold import TSNE</span><br><span class="line"></span><br><span class="line"># Create a TSNE instance: model</span><br><span class="line">model = TSNE(learning_rate=50)</span><br><span class="line"></span><br><span class="line"># Apply fit_transform to normalized_movements: tsne_features</span><br><span class="line">tsne_features = model.fit_transform(normalized_movements)</span><br><span class="line"></span><br><span class="line"># Select the 0th feature: xs</span><br><span class="line">xs = tsne_features[:,0]</span><br><span class="line"></span><br><span class="line"># Select the 1th feature: ys</span><br><span class="line">ys = tsne_features[:,1]</span><br><span class="line"></span><br><span class="line"># Scatter plot</span><br><span class="line">plt.scatter(xs,ys,alpha=0.5)</span><br><span class="line"></span><br><span class="line"># Annotate the points</span><br><span class="line">for x, y, company in zip(xs, ys, companies):</span><br><span class="line">    plt.annotate(company, (x, y), fontsize=5, alpha=0.75)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/19/ONSqKFLUwQ7EDBJ.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/19/GIND7pRkxahrXBu.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;éç›‘ç£å­¦ä¹ ï¼šå³æ ¹æ®ç°æœ‰çš„æ•°æ®å»å‘æ˜å­˜åœ¨æ•°æ®ä¸­çš„ä¸€äº›æ¨¡å¼,æ¯”å¦‚æ ¹æ®ç”¨æˆ·çš„è´­ä¹°è®°å½•ï¼Œ(&lt;em&gt;clustering&lt;/em&gt;) å®šä¹‰ç”¨æˆ·ç”»åƒ, æˆ–æ ¹æ®æ•°æ®çš„æ¨¡å¼æ¥å‹ç¼©æ•°æ®ï¼ˆ&lt;em&gt;dimension reduction&lt;/em&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="sklearn" scheme="http://wittyfans.com/tags/sklearn/"/>
    
      <category term="data science" scheme="http://wittyfans.com/tags/data-science/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ï¼šå¤„ç†jiraå·¥å•çš„åˆ†ç±»é—®é¢˜</title>
    <link href="http://wittyfans.com/coding/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%9A%E5%A4%84%E7%90%86jira%E5%B7%A5%E5%8D%95%E7%9A%84%E5%88%86%E7%B1%BB%E9%97%AE%E9%A2%98.html"/>
    <id>http://wittyfans.com/coding/æœºå™¨å­¦ä¹ ï¼šå¤„ç†jiraå·¥å•çš„åˆ†ç±»é—®é¢˜.html</id>
    <published>2019-11-18T12:10:20.000Z</published>
    <updated>2019-11-18T12:12:17.045Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¦‚ä½•æ ¹æ®jiraå·¥å•çš„categoryè‡ªåŠ¨æ‰¾åˆ°å¤„ç†å®ƒçš„ç»„å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåˆ©ç”¨æœºå™¨å­¦ä¹ ä¸­knnç®—æ³•çš„å°å®è·µ.</p></blockquote><a id="more"></a><h1 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h1><p>æˆ‘ä»¬ä½¿ç”¨knnåˆ†ç±»ç®—æ³•ï¼Œknnæ˜¯å¹¿ä¸ºä½¿ç”¨çš„ä¸€ç§æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œåº”ç”¨äºå„ç§åº”ç”¨ï¼Œå¦‚é‡‘èã€åŒ»ç–—ä¿å¥ã€æ”¿æ²»å­¦ã€æ‰‹å†™å­—è¯†åˆ«ã€å›¾åƒè¯†åˆ«ä¸è§†é¢‘è¯†åˆ«ã€‚</p><p>åœ¨ä¿¡ç”¨è¯„çº§ä¸­ï¼Œé‡‘èæœºæ„ç”¨æ¥é¢„æµ‹å®¢æˆ·çš„ä¿¡ç”¨è¯„çº§ã€‚åœ¨è´·æ¬¾æ”¯ä»˜æœºæ„ä¸­ï¼Œé“¶è¡Œæ¥é¢„æµ‹è´·æ¬¾æ˜¯å¦å®‰å…¨ã€‚åœ¨æ”¿æ²»ä¸­ï¼Œå®ƒè¢«ç”¨æ¥é¢„æµ‹æ½œåœ¨é€‰åæ˜¯å¦ä¼šæŠ•ç¥¨ã€‚</p><p>ç®€å•ä»‹ç»ä¸‹knn:</p><p>knnæ˜¯non-parametricç®—æ³•ï¼Œå³æ— å‡è®¾çš„æ„æ€ï¼Œå®ƒä¸ä¼šå¯¹åŸºç¡€æ•°æ®çš„åˆ†å¸ƒåšä»»ä½•å‡è®¾ï¼Œå³ä¸ä¼šæ ¹æ®æ•°æ®é›†æ¥ç¡®å®šæ¨¡å‹ç»“æ„ã€‚</p><p>è¿™å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œå¾ˆå¤šçš„æ•°æ®é›†æ˜¯ä¸éµä»æ•°å­¦ç†è®ºçš„å‡è®¾çš„ã€‚</p><p>åŒæ—¶knnæ˜¯lazy algorithmç®—æ³•ï¼Œå³å®ƒä¸éœ€è¦åœ¨æ¨¡å‹å»ºç«‹å‰åšå¤§é‡çš„æ•°æ®è®­ç»ƒå·¥ä½œã€‚</p><h1 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h1><p>æˆ‘ä»¬å·²ç»æŠŠä¸€äº›æ•°æ®ä¿å­˜åˆ°äº†jiraæ•°æ®åº“ï¼Œç°åœ¨å°†å®ƒä»¬çš„åˆ†ç±»ä¸æ‰€å±ç»„æ‹¿å‡ºæ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sql = select category,assign_group from issues limit 10000</span><br><span class="line">db = pymysql.connect(&apos;db_host&apos;,&apos;db_username&apos;,&apos;db_pwd&apos;,&apos;db&apos;)</span><br><span class="line">df = pd.read_sql(sql,con=db)</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ•°æ®å·²ç»ä¿å­˜åˆ°äº†dfä¸­ã€‚</p><h1 id="A-basic-Exapple"><a href="#A-basic-Exapple" class="headerlink" title="A basic Exapple"></a>A basic Exapple</h1><h2 id="å•ä¸ªfeatures"><a href="#å•ä¸ªfeatures" class="headerlink" title="å•ä¸ªfeatures"></a>å•ä¸ªfeatures</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from sklearn import preprocessing</span><br><span class="line">le = preprocessing.LabelEncoder()</span><br><span class="line">category_encoded = le.fit_transform(df.category)</span><br><span class="line">reporter_encoded = le.fit_transform(reporter)</span><br><span class="line">features = list(zip(category_encoded,reporter_encoded))</span><br><span class="line">label = le.fit(df.assign_group)</span><br><span class="line"></span><br><span class="line">knn = KNeighborsClassifier(n_neighbors=3)</span><br><span class="line">knn.fit(features,label)</span><br><span class="line">knn.predict([[0,2]])</span><br></pre></td></tr></table></figure><h2 id="å¤šä¸ªfeatures"><a href="#å¤šä¸ªfeatures" class="headerlink" title="å¤šä¸ªfeatures"></a>å¤šä¸ªfeatures</h2><p>å¦å¤–ä¸€ç§æ–¹å¼ï¼Œxæ˜¯æˆ‘ä»¬çš„categoryï¼Œyåˆ™æ˜¯æ‰€å±ç»„ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.neighbors import KNeighborsClassifier </span><br><span class="line"></span><br><span class="line">x_df = df.category</span><br><span class="line">x_train = pd.get_dummies(x_df)</span><br><span class="line"></span><br><span class="line">y_df = df.assign_group</span><br><span class="line">y_train = y_df.values</span><br><span class="line"></span><br><span class="line">knn = KNeighborsClassifier(n_neighbors=6)</span><br><span class="line">knn.fit(x_train,y_train)</span><br></pre></td></tr></table></figure><p>éšåä½ å¯ä»¥ç›´æ¥å°†x_trainä¼ ç»™knnåšä¸ªé¢„æµ‹ï¼Œç„¶åè·ŸçœŸå®çš„æ•°æ®åšä¸ªå¯¹æ¯”ã€‚</p><blockquote><p>æ‹¿è®­ç»ƒçš„æ•°æ®æ¥åšé¢„æµ‹æ˜¯ä¸å¯å–çš„ï¼Œä½ å¿…é¡»ç»™æ¨¡å‹ä¸€äº›å®ƒä»æ¥æ²¡æœ‰çœ‹è§è¿‡çš„æ•°æ®é¢„æµ‹ï¼Œè¿™æ ·æ‰èƒ½å‡†ç¡®çš„æµ‹è¯•æ¨¡å‹çš„æ€§èƒ½</p></blockquote><p>ä½ ä¹Ÿå¯ä»¥è‡ªå·±ç”Ÿæˆä¸€äº›æ•°æ®æ¥æŸ¥çœ‹ï¼Œå¦‚ä½ å·²ç»çŸ¥é“get_dummiesåçš„dfæœ‰144åˆ—ï¼Œé‚£ä¹ˆä½ å¯ä»¥è‡ªè¡Œç”Ÿæˆä¸€ä¸ª2dçš„dummieæ•°ç»„ä¼ ç»™knn.predit.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr_list = np.concatenate(np.zeros((1,143)))</span><br><span class="line">temp_arr = arr_list.tolist()</span><br><span class="line">temp_arr.insert(44,1)</span><br><span class="line">new_x = [temp_arr.insert]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output: array([&apos;Helpdesk CN&apos;])</span><br></pre></td></tr></table></figure><h2 id="åˆ†å‰²æ•°æ®å¹¶æŸ¥çœ‹å¾—åˆ†"><a href="#åˆ†å‰²æ•°æ®å¹¶æŸ¥çœ‹å¾—åˆ†" class="headerlink" title="åˆ†å‰²æ•°æ®å¹¶æŸ¥çœ‹å¾—åˆ†"></a>åˆ†å‰²æ•°æ®å¹¶æŸ¥çœ‹å¾—åˆ†</h2><p>ä¸‹é¢æ¼”ç¤ºäº†å°†æ•°æ®æ‹†åˆ†æˆtrain,å’Œteståçš„é¢„æµ‹åˆ†æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">X_train,X_test,y_train,y_test = train_test_split(X,y,test_size=0.2,random_state=42)</span><br><span class="line"></span><br><span class="line">knn= KNeighborsClassifier(n_neighbors=6)</span><br><span class="line">knn.fit(X_train,y_train)</span><br><span class="line"></span><br><span class="line">knn.score(X_test,y_test)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output:0.781</span><br></pre></td></tr></table></figure><p>78%ï¼Œè¿™ä¸ªæ¨¡å‹æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼</p><h2 id="é€‰æ‹©Neighbors"><a href="#é€‰æ‹©Neighbors" class="headerlink" title="é€‰æ‹©Neighbors"></a>é€‰æ‹©Neighbors</h2><p>æˆ‘ä»¬çŸ¥é“å¯¹äºknnç®—æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªå…³é”®çš„å‚æ•°æ˜¯neighbors,é‚£ä¹ˆå¯¹äºä¸åŒçš„neighborsï¼Œæˆ‘ä»¬çš„accuracyçš„åˆ†æ•°æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ¥ç”»ä¸ªå›¾æ£€æµ‹ä¸€ä¸‹ï¼š</p><p><img src="https://i.loli.net/2019/11/18/Qzlb7BVyCJT3X6F.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°neighborsåœ¨6-7ä¹‹é—´ï¼Œaccuracyæ˜¯æœ€é«˜çš„ï¼Œåœ¨2-5ä¹‹é—´ï¼Œtestçš„å¾—åˆ†ç«Ÿç„¶æ¯”è®­ç»ƒæ•°æ®éƒ½è¦é«˜ã€‚</p><h2 id="ä½¿ç”¨knnçš„ä¼˜ç¼ºç‚¹"><a href="#ä½¿ç”¨knnçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="ä½¿ç”¨knnçš„ä¼˜ç¼ºç‚¹"></a>ä½¿ç”¨knnçš„ä¼˜ç¼ºç‚¹</h2><ul><li>knnç®—æ³•å¯¹äºå¤„ç†éçº¿æ€§æ•°æ®å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥ç”¨å®ƒä¸€èµ·å¤„ç†å›å½’é—®é¢˜</li><li>knnçš„æµ‹è¯•é˜¶æ®µè¾ƒæ…¢ä¸”è€—èµ„æºï¼Œéœ€è¦å¾ˆå¤šçš„å†…å­˜æ¥ä¿å­˜æ¥é¢„æµ‹çš„æ•´ä¸ªæ•°æ®é›†</li><li>å¼ºçƒˆå»ºè®®å°†æ•°æ®è¿›è¡ŒåŒæ¯”ä¾‹çš„æ ‡å‡†åŒ–ï¼Œæ¯”å¦‚å°†æ‰€æœ‰æ•°æ®ç¼©æ”¾åˆ°0,1çš„åŒºé—´å†…</li><li>knnä¸é€‚åˆå¤ªé«˜ç»´åº¦çš„æ•°æ®ï¼Œåœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œéœ€è¦å°†ç»´åº¦é™ä½</li><li>å¤„ç†ç¼ºå¤±å€¼æœ‰åŠ©äºæ”¹å–„æ¨¡å‹çš„å‡†ç¡®åº¦</li></ul><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p><strong>1. knn fitå…¶ä¸­çš„x,xä¸€å®šåªèƒ½æ˜¯get_dummiesç®—å‡ºæ¥çš„æ•°æ®å—ï¼Ÿ</strong></p><p>ä¸æ˜¯ï¼Œæ¯”å¦‚ iris çš„æ•°æ®æ‘˜è¦ï¼ŒXçš„æ•°æ®æ˜¯å„ä¸ªéƒ¨åˆ†çš„é•¿ã€å®½:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[5.1,3.5,1.4,0.2],</span><br><span class="line">[4.9,3,1.4,0.2]]</span><br></pre></td></tr></table></figure><p><strong>2. knn fitå…¶ä¸­çš„yï¼Œyå¯ä»¥æ˜¯åŸå§‹æ•°æ®ç±»å‹å—ï¼Ÿå¦‚a,b,a,c</strong></p><p>å¯ä»¥ï¼Œå¦‚ datacamp é¢˜ç›®ä¸­çš„æ”¿å…šæ•°æ®ï¼Œy=df[â€˜partyâ€™]:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Out[8]: </span><br><span class="line">0      republican</span><br><span class="line">1      republican</span><br><span class="line">2        democrat</span><br><span class="line">3        democrat</span><br><span class="line">4        democrat</span><br><span class="line">5        democrat</span><br><span class="line">6        democrat</span><br><span class="line">7      republican</span><br><span class="line">8      republican</span><br><span class="line">9        democrat</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¦‚ä½•æ ¹æ®jiraå·¥å•çš„categoryè‡ªåŠ¨æ‰¾åˆ°å¤„ç†å®ƒçš„ç»„å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåˆ©ç”¨æœºå™¨å­¦ä¹ ä¸­knnç®—æ³•çš„å°å®è·µ.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="jira" scheme="http://wittyfans.com/tags/jira/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="machine learning" scheme="http://wittyfans.com/tags/machine-learning/"/>
    
  </entry>
  
  <entry>
    <title>æ•°å­¦å¤ä¹ ï¼šæ±‚å’Œç¬¦å·</title>
    <link href="http://wittyfans.com/math/%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0%EF%BC%9A%E6%B1%82%E5%92%8C%E7%AC%A6%E5%8F%B7.html"/>
    <id>http://wittyfans.com/math/æ•°å­¦å¤ä¹ ï¼šæ±‚å’Œç¬¦å·.html</id>
    <published>2019-11-16T08:00:56.000Z</published>
    <updated>2019-11-16T08:09:59.554Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç®€å•ä»‹ç»ä¸€ä¸‹äº†æ±‚å’Œç¬¦å·çš„å®šä¹‰ä¸è¿ç®—è§„åˆ™.</p></blockquote><a id="more"></a><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><h1 id="æ±‚å’Œç¬¦å·"><a href="#æ±‚å’Œç¬¦å·" class="headerlink" title="æ±‚å’Œç¬¦å·"></a>æ±‚å’Œç¬¦å·</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>$$\sum$$</p><p>å«åšæ±‚å’Œç¬¦å·ï¼Œè¯»ä½œ<em>sigma</em>,å®ƒçš„æ„æ€å°±æ˜¯è¿ç»­çš„åŠ æ³•ï¼Œæ¯”å¦‚:</p><p>$$\sum_{k=1}^{n}ak=a_1+a_2+a_3+..a_n$$</p><p>kæ˜¯ä¸‹æ ‡ï¼Œå®ƒä¼šä»kå˜åŒ–åˆ°nï¼Œå½“k=1çš„æ—¶å€™ï¼Œakå°±æ˜¯a1ï¼Œå½“k=2çš„æ—¶å€™ï¼Œakå°±æ˜¯a2ï¼Œæœ€åä¸€é¡¹å°±æ˜¯k=n,segimaçš„æ„æ€å‘¢å°±æ˜¯æŠŠè¿™äº›é¡¹å…¨éƒ½åŠ èµ·æ¥ã€‚</p><p>è¿™é‡Œå†å¤šæä¸€ç‚¹åˆå­¦è€…å®¹æ˜“çŠ¯çš„é”™è¯¯,è¯·çœ‹ä¸‹é¢çš„å…¬å¼,å…¶ä¸­cä¸ºå¸¸æ•°ï¼š</p><p>$$\sum_{k=1}^{n}C=nc$$</p><p>è¿™é‡Œçš„ç»“æœç­‰äº<em>nä¹˜c</em>,è€Œä¸æ˜¯<em>c</em>ã€‚</p><h2 id="åˆ†æ‹†æ±‚å’Œç¬¦å·"><a href="#åˆ†æ‹†æ±‚å’Œç¬¦å·" class="headerlink" title="åˆ†æ‹†æ±‚å’Œç¬¦å·"></a>åˆ†æ‹†æ±‚å’Œç¬¦å·</h2><p><em>segima</em>å¯ä»¥åˆ†æ‹†ï¼Œè¯·çœ‹ä¸‹é¢çš„å…¬å¼:</p><p>$$\sum_{k=1}^{n}(a_k+b_k)=\sum_{k=1}^{n}a_k+\sum_{k=1}^{n}b_k$$</p><p>æˆ‘ä»¬å…ˆæ¥åˆ†æç¬¬ä¸€éƒ¨åˆ†:<br>$$\sum_{k=1}^{n}(a_k+b_k)$$</p><p>å®ƒçš„æ„æ€å‘¢å°±æ˜¯ï¼š<br>$$(a_1+b_1)+(a_2+b_2)+â€¦+(a_n+b_n)$$</p><p>æˆ‘ä»¬æŠŠ ai ä¸ b_i å•ç‹¬æ‹¿å‡ºæ¥æ’åˆ—ï¼Œå¾—åˆ°:</p><p>$$(a_1+a_2+a_3+a_i)+(b_1+b_2+b_3+b_n)$$</p><p>é‚£ä¹ˆæ ¹æ®sigmaçš„æ€§è´¨ï¼Œå³å¾—åˆ°:</p><p>$$\sum_{k=1}^{n}a_k+\sum_{k=1}^{n}b_k$$</p><h2 id="å¸¸æ•°å¯è„±ç¦»"><a href="#å¸¸æ•°å¯è„±ç¦»" class="headerlink" title="å¸¸æ•°å¯è„±ç¦»"></a>å¸¸æ•°å¯è„±ç¦»</h2><p>$$\sum_{k=1}^{n}Cak=C\sum_{k=1}^{n}ak$$</p><p>é¦–å…ˆçœ‹å·¦è¾¹ï¼Œç­‰äº:</p><p>$$Ca_1+Ca_2+Ca_n$$</p><p>é‚£ä¹ˆæŠŠCæå‡ºæ¥ï¼Œåˆ™å¾—ï¼š</p><p>$$C(a_1+a_2+a_n)$$</p><p>å³ï¼š</p><p>$$C\sum_{k=1}^{n}a_k$$</p><h2 id="ä¹˜é™¤ä¸ç­‰"><a href="#ä¹˜é™¤ä¸ç­‰" class="headerlink" title="ä¹˜é™¤ä¸ç­‰"></a>ä¹˜é™¤ä¸ç­‰</h2><p>$$\sum_{k=1}^{n}(a_k*b_k)â‰ \sum_{k=1}^{n}(a_k)\sum_{k=1}^{n}(b_k)$$</p><p>è¯æ˜å¾ˆç®€å•,è®© $$n=2$$ æ˜¾ç„¶ä¸‹åˆ—ä¸¤é¡¹ä¸ç›¸ç­‰ï¼š</p><p>$$(a_1b_1)+(a_2b_2)â‰ (a_1+a_2)(b_1+b_2)$$</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ç®€å•ä»‹ç»ä¸€ä¸‹äº†æ±‚å’Œç¬¦å·çš„å®šä¹‰ä¸è¿ç®—è§„åˆ™.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="math" scheme="http://wittyfans.com/categories/math/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="math" scheme="http://wittyfans.com/tags/math/"/>
    
  </entry>
  
  <entry>
    <title>æ•°å­¦å¤ä¹ ï¼šæŒ‡æ•°ä¸å¯¹æ•°</title>
    <link href="http://wittyfans.com/math/%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0%EF%BC%9A%E6%8C%87%E6%95%B0%E5%AF%B9%E6%95%B0.html"/>
    <id>http://wittyfans.com/math/æ•°å­¦å¤ä¹ ï¼šæŒ‡æ•°å¯¹æ•°.html</id>
    <published>2019-11-16T07:57:44.000Z</published>
    <updated>2019-11-16T08:00:43.911Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿™ç¯‡æ–‡ç« åŒ…æ‹¬æŒ‡æ•°ä¸å¯¹æ•°çš„æ€§è´¨ï¼Œå‡½æ•°å›¾åƒç­‰åŸºæœ¬çŸ¥è¯†ã€‚</p></blockquote><a id="more"></a><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><h1 id="æŒ‡æ•°"><a href="#æŒ‡æ•°" class="headerlink" title="æŒ‡æ•°"></a>æŒ‡æ•°</h1><h2 id="æŒ‡æ•°çš„æ€§è´¨"><a href="#æŒ‡æ•°çš„æ€§è´¨" class="headerlink" title="æŒ‡æ•°çš„æ€§è´¨"></a>æŒ‡æ•°çš„æ€§è´¨</h2><p>$$a^{mn}=(a^m)^n$$<br>$$a^\frac{m}{n}=\sqrt[^n!]{(a^m)}$$<br>$$a^{m+n}=a^ma^n$$<br>$$a^{m-n}=\frac{a^m}{a^n}$$<br>$$a^{-m}=\frac{1}{a^m}$$</p><h2 id="æŒ‡æ•°å‡½æ•°çš„å›¾åƒä¸æ€§è´¨"><a href="#æŒ‡æ•°å‡½æ•°çš„å›¾åƒä¸æ€§è´¨" class="headerlink" title="æŒ‡æ•°å‡½æ•°çš„å›¾åƒä¸æ€§è´¨"></a>æŒ‡æ•°å‡½æ•°çš„å›¾åƒä¸æ€§è´¨</h2><p>$$y= a^x(a&gt;0,aâ‰ 1)$$</p><ul><li>xå¯å–å…¨ä½“å®æ•°</li><li>ç»“æœy&gt;0</li><li>å›¾åƒæ°¸è¿œç»è¿‡(0,1)ç‚¹</li><li>a&gt;1,xå˜å¤§ï¼Œyä¹Ÿå˜å¤§</li><li>0&lt;a&lt;1,xå˜å¤§ï¼Œyå˜å°</li><li>ç¬¬ä¸€è±¡é™å†…ï¼ˆå³ä¸Šï¼‰ï¼Œå›¾åƒå¿˜å·¦ä¸Šæ–¹å‘ï¼Œaå˜å¤§</li></ul><h2 id="æŒ‡æ•°å‡½æ•°ä¸¾ä¾‹"><a href="#æŒ‡æ•°å‡½æ•°ä¸¾ä¾‹" class="headerlink" title="æŒ‡æ•°å‡½æ•°ä¸¾ä¾‹"></a>æŒ‡æ•°å‡½æ•°ä¸¾ä¾‹</h2><p>æ±‚ï¼š</p><p>$$2^{-\frac{2}{3}}$$</p><p>å¾—<br>$$\frac{1}{\sqrt[^3]{2^2}}$$</p><blockquote><p>æç¤º:ä¸€ä¸ªæ•°çš„è´Ÿæ¬¡æ–¹å³ä¸ºè¿™ä¸ªæ•°çš„æ­£æ¬¡æ–¹çš„å€’æ•°</p></blockquote><h1 id="å¯¹æ•°"><a href="#å¯¹æ•°" class="headerlink" title="å¯¹æ•°"></a>å¯¹æ•°</h1><p>å¦‚æœ:<br>$$a^b = N$$</p><p>é‚£ä¹ˆ<code>bå«åšä»¥aä¸ºåº•Nçš„å¯¹æ•°</code>,è®°ä¸ºï¼š</p><p>$$\log_a^N$$</p><h2 id="å¯¹æ•°çš„æ€§è´¨"><a href="#å¯¹æ•°çš„æ€§è´¨" class="headerlink" title="å¯¹æ•°çš„æ€§è´¨"></a>å¯¹æ•°çš„æ€§è´¨</h2><p>$$a^b=N \Longleftrightarrow b=\log_a^N$$<br>å°†<em>b</em>ä»£å…¥å·¦è¾¹açš„ä¸Šé¢ï¼Œå¯ä»¥æ¨å‡ºæ¥,<br>$$a^{log_a^N}=N$$</p><p>å…¶å®è¿™é‡Œçš„æ„æ€å°±æ˜¯<code>å¯¹nå–å¯¹æ•°å†å–æŒ‡æ•°</code></p><p>æ¢åº•å…¬å¼ï¼š</p><p>$$\log_a^b=\frac{log_c^b}{log_c^a}$$</p><p>å’Œã€å·®å…¬å¼ï¼š</p><p>$$\log_a^{mn}=\log_a^m+\log_a^n$$<br>$$\log_a^{\frac{m}{n}}=\log_a^m-\log_a^n$$<br>å¹‚å…¬å¼ï¼Œ<br>$$\log_a^{(n^k)}=k\log_a^n$$<br>$$\log_{(a^k)}^n=\frac{1}{k}\log_a^n$$<br>å€’æ•°ï¼Œ<br>$$\log_a^b=\frac{1}{log_b^a}$$</p><h2 id="å¯¹æ•°å‡½æ•°"><a href="#å¯¹æ•°å‡½æ•°" class="headerlink" title="å¯¹æ•°å‡½æ•°"></a>å¯¹æ•°å‡½æ•°</h2><p>$$y=\log_{a}x(a&gt;0,aâ‰ 1)$$</p><ul><li>å¯¹æ•°å‡½æ•°æ˜¯æŒ‡æ•°å‡½æ•°çš„åå‡½æ•°ï¼Œå•è°ƒæ€§ç›¸åŒ</li><li>xå¯å–å…¨ä½“æ­£æ•°</li><li>yå¯ä¸ºæ‰€æœ‰å€¼</li><li>æ°¸è¿œç»è¿‡(1,0)ç‚¹</li><li>a&gt;1,xå˜å¤§ï¼Œyä¹Ÿå˜å¤§ï¼Œa&lt;1ï¼Œxå˜å¤§ï¼Œyå˜å°</li><li>åœ¨ç¬¬ä¸€è±¡é™ï¼Œå›¾åƒå¾€å³ä¸‹ï¼Œaå˜å¤§</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« åŒ…æ‹¬æŒ‡æ•°ä¸å¯¹æ•°çš„æ€§è´¨ï¼Œå‡½æ•°å›¾åƒç­‰åŸºæœ¬çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="math" scheme="http://wittyfans.com/categories/math/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="math" scheme="http://wittyfans.com/tags/math/"/>
    
  </entry>
  
  <entry>
    <title>æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯</title>
    <link href="http://wittyfans.com/coding/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9F%BA%E7%A1%80%E4%B8%8E%E6%8A%80%E6%9C%AF.html"/>
    <id>http://wittyfans.com/coding/æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯.html</id>
    <published>2019-11-15T09:26:51.000Z</published>
    <updated>2019-11-15T14:24:41.818Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/15/kIahY4xBReDAVob.png" alt=""></p><blockquote><p>æ•°æ®å¯è§†åŒ–çš„ç›®çš„æ˜¯å‡†ç¡®è€Œå®¢è§‚çš„è®²è¿°æ•…äº‹ä¸å±•ç¤ºæ•°æ®ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¯¹ä½ çš„å¯è§†åŒ–å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚</p></blockquote><a id="more"></a><h1 id="æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯"><a href="#æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯" class="headerlink" title="æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯"></a>æ•°æ®å¯è§†åŒ–åŸºç¡€ä¸æŠ€æœ¯</h1><h1 id="åè¯"><a href="#åè¯" class="headerlink" title="åè¯"></a>åè¯</h1><ul><li>æ ‡åº¦(scale)</li><li>åæ ‡ç³»(coord)</li><li>ç¾å­¦ï¼ˆaestheticï¼‰</li><li>ç¦»æ•£çš„ï¼ˆdiscreteï¼‰</li><li>å°†ä»€ä¹ˆä»€ä¹ˆä½œä¸ºyè½´ï¼Œæˆ‘ä»¬è¯´, <em>mapping xx onto the y axis</em></li><li>æˆ‘ä»¬æ„Ÿå…´è¶£çš„å…³é”®å˜é‡ï¼Œæ˜¯key variable of interest</li><li>ç›´è§’åæ ‡ç³» Cartesian coordinate system</li><li>è¿ç»­çš„ä½ç½®æ ‡åº¦ï¼šcontinuous position scales</li></ul><h1 id="æ¦‚è¦"><a href="#æ¦‚è¦" class="headerlink" title="æ¦‚è¦"></a>æ¦‚è¦</h1><p>aestheticçš„ä¸€ä¸ªå…³é”®çš„è¦ç´ ï¼ˆcritical componentï¼‰æ˜¯ï¼Œå…ƒç´ çš„ä½ç½®ã€‚</p><p>å…¶æ¬¡æ˜¯ï¼Œå…ƒç´ ä¹‹é—´çš„é¢œè‰²ï¼Œå­—ä½“ï¼ŒèƒŒæ™¯ç­‰ç­‰ã€‚</p><p>éœ€è¦äº†è§£æ•°æ®æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯è¿ç»­å‹æ•°æ®ï¼ˆcontinuous dataï¼‰ï¼Œå¦ä¸€ç±»æ˜¯éè¿ç»­å‹ï¼ˆdiscrete numerical valuesï¼‰ã€‚</p><p>æ¯”å¦‚æ—¶é—´é—´éš”ï¼ˆtime durationï¼‰ï¼Œæ˜¯è¿ç»­å‹çš„ã€‚<br>è€Œä¸€ä¸ªæˆ¿é—´é‡Œäººå‘˜çš„æ•°é‡åˆ™æ˜¯éè¿ç»­çš„ï¼Œç¦»æ•£çš„ã€‚</p><p><strong>ä¸€èˆ¬æ¥è¯´ï¼Œä½ç½®ã€å¤§å°ã€é¢œè‰²å’Œçº¿å®½å¯ä»¥è¡¨ç¤ºè¿ç»­æ•°æ®ï¼Œä½†æ˜¯å½¢çŠ¶å’Œçº¿å‹é€šå¸¸åªèƒ½è¡¨ç¤ºç¦»æ•£æ•°æ®ã€‚</strong></p><p>æ•°æ®æ˜¯æ•°å­—ï¼Œæˆ‘ä»¬ç§°ä¸ºå®šé‡ã€‚<br>æ•°æ®æ˜¯åˆ†ç±»ï¼Œæˆ‘ä»¬ç§°ä¸ºå®šæ€§ã€‚</p><p>å¸¸è§çš„å›¾éƒ½æ˜¯ä¸‰å¥—scales,ä½†ä½ ä¹Ÿå¯ä»¥å®šä¹‰æ›´å¤šçš„scale.</p><h1 id="åæ ‡ç³»å’Œè½´"><a href="#åæ ‡ç³»å’Œè½´" class="headerlink" title="åæ ‡ç³»å’Œè½´"></a>åæ ‡ç³»å’Œè½´</h1><p>åæ ‡ç³»å’Œè½´å°±ä¸å¤šä»‹ç»äº†ã€‚<br>åœ¨åæ ‡ç³»å’Œè½´ä¸Šçš„æ•°æ®ï¼Œä¸ä»…ä»…æ˜¯æ•°å­—ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»ä½•å•ä½ï¼Œæ¯”å¦‚æ¸©åº¦ï¼Œè·ç¦»ã€‚</p><h2 id="éçº¿æ€§è½´"><a href="#éçº¿æ€§è½´" class="headerlink" title="éçº¿æ€§è½´"></a>éçº¿æ€§è½´</h2><p>åœ¨è½´ä¸Šï¼Œå‡åŒ€çš„é—´è·ä¸å€¼çš„å¯¹åº”å…³ç³»æ˜¯æœ‰è®²ç©¶çš„ã€‚ç‰¹åˆ«æ˜¯å½“ä½ çš„å€¼ä¹‹é—´çš„é—´è·æ˜¯ä¸ä¸€æ ·è€Œè½´çš„æ ‡å°ºæ˜¯ä¸€æ ·çš„ï¼Œæˆ–è€…ç›¸åçš„æƒ…å†µå‡ºç°çš„æ—¶å€™ã€‚</p><p>ä½ çš„è½´å’Œä½ çš„å€¼ä¹‹é—´çš„é—´è·ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªæ˜¯å›ºå®šçš„ã€‚</p><blockquote><p>When plotting log-transformed data, always specify the base in the labeling of the axis.</p></blockquote><p>å¦‚ä½•è®©ä½ çš„åæ ‡æ˜¯ä»¥å€æ•°ä¸ºè½´æ¥å‘ˆç°ï¼Ÿ</p><h3 id="å¯¹æ•°åˆ»åº¦"><a href="#å¯¹æ•°åˆ»åº¦" class="headerlink" title="å¯¹æ•°åˆ»åº¦"></a>å¯¹æ•°åˆ»åº¦</h3><p>å¦‚æœæ•°æ®çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´çš„æ•°æ®å¾ˆå¤šä¸”éå¸¸è¿ç»­ï¼Œé‚£ä¹ˆä½¿ç”¨å¯¹æ•°åˆ»åº¦æ¯”è¾ƒåˆé€‚ã€‚</p><h3 id="å¹³æ–¹æ ¹åˆ»åº¦"><a href="#å¹³æ–¹æ ¹åˆ»åº¦" class="headerlink" title="å¹³æ–¹æ ¹åˆ»åº¦"></a>å¹³æ–¹æ ¹åˆ»åº¦</h3><p>å¯¹äºå¯¹æ•°åˆ»åº¦ï¼Œå¦‚æœæœ‰0æ€ä¹ˆåŠï¼Ÿè¿™æ—¶å€™å¯ä»¥è€ƒè™‘å¹³æ–¹æ ¹åˆ»åº¦ï¼Œå®ƒå…è®¸0çš„å­˜åœ¨ã€‚åœ¨çº¿æ€§æ ‡åº¦ä¸Šï¼Œä¸€ä¸ªå•ä½æ­¥é•¿å¯¹åº”äºä¸€ä¸ªå¸¸æ•°å€¼çš„åŠ æ³•æˆ–å‡æ³•ï¼›åœ¨å¯¹æ•°æ ‡åº¦ä¸Šï¼Œå®ƒå¯¹åº”äºä¸€ä¸ªå¸¸æ•°å€¼çš„ä¹˜ç§¯æˆ–é™¤ï¼Œè€Œå¹³æ–¹æ ¹åˆ»åº¦åˆ™æ²¡æœ‰è¿™ç§è¦æ±‚ã€‚</p><h3 id="æåæ ‡è½´"><a href="#æåæ ‡è½´" class="headerlink" title="æåæ ‡è½´"></a>æåæ ‡è½´</h3><p>æåæ ‡ç±»ä¼¼å¤ªé˜³ç³»çš„è¡Œæ˜Ÿè½¨é“ã€‚å®ƒå¯¹äºä¸€äº›é‡å¤çš„å‘¨æœŸæ€§æ•°æ®å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚ä¸€å¹´çš„æœ€åä¸€å¤©ï¼Œä¹Ÿæ˜¯ç¬¬äºŒå¹´çš„ç¬¬ä¸€å¤©ã€‚</p><p>å†æ¯”å¦‚ï¼Œå¯¹äºä¸åŒåŸå¸‚å¹³å‡æ¸©åº¦çš„ç»˜åˆ¶ï¼Œä½¿ç”¨æåæ ‡çš„æ•ˆæœæ›´å¥½ã€‚</p><h1 id="é¢œè‰²"><a href="#é¢œè‰²" class="headerlink" title="é¢œè‰²"></a>é¢œè‰²</h1><p>é¢œè‰²çš„ç”¨é€”ä¸»è¦æ˜¯å‡ ç§ï¼š</p><ul><li>åŒºåˆ†æ•°æ®ç»„</li><li>å±•ç¤ºæ•°æ®</li><li>é«˜äº®ç‰¹å®šçš„å€¼</li></ul><h2 id="åŒºåˆ†"><a href="#åŒºåˆ†" class="headerlink" title="åŒºåˆ†"></a>åŒºåˆ†</h2><p>å¯¹äºç¦»æ•£discreteæ•°æ®æˆ–è€…ä¸åŒç»„åˆ«çš„æ•°æ®ï¼Œä½¿ç”¨é¢œè‰²åŒºåˆ†æ˜¯å¾ˆå¸¸è§çš„ã€‚<br>è¿™é‡Œæœ‰ä¸ªå®šæ€§è‰²æ ‡çš„æ¦‚å¿µ(qualitative color scale)ï¼Œè¿™äº›è¢«é€‰å‡ºæ¥çš„é¢œè‰²ï¼Œå¯ä»¥æ¯”è¾ƒæ¸…æ™°çš„åŒºåˆ†å½¼æ­¤ï¼Œå¹¶ä¸”ä¸ä¼šè®©ä½ äº§ç”Ÿé¢œè‰²ä¹‹é—´æœ‰é¡ºåºçš„æ„Ÿè§‰ã€‚</p><h2 id="å±•ç¤º"><a href="#å±•ç¤º" class="headerlink" title="å±•ç¤º"></a>å±•ç¤º</h2><p>é¢œè‰²å¯ä»¥ç”¨æ¥å±•ç¤ºæ•°æ®ï¼ˆä¸»è¦æŒ‡è¿ç»­å‹çš„ï¼Œæ¯”å¦‚é€Ÿåº¦ï¼Œæ¸©åº¦ï¼Œæ”¶å…¥ç­‰ï¼‰ï¼Œè¿™æ ·çš„é¢œè‰²ç»„åˆæˆ‘ä»¬å«åšé¡ºåºè‰²æ ‡ï¼ˆsequential color scaleï¼‰ï¼Œä½†å¦‚æœä½ è¦å±•ç¤ºçš„å€¼å…¶ä¸­è¿˜åŒ…æ‹¬è´Ÿå€¼ï¼Œé‚£å°±éœ€è¦diverging color scaleäº†ï¼Œè¿™ç§é¢œè‰²çš„åˆ†å¸ƒåœ¨ä¸­é—´æ˜¯ç›¸å¯¹æ¯”è¾ƒç™½æˆ–è€…é€æ˜çš„ï¼Œä¸¤ç«¯åˆ™æ˜¯å¯¹æ¯”æ˜æ˜¾é¢œè‰²ã€‚</p><h2 id="æ ‡æ³¨"><a href="#æ ‡æ³¨" class="headerlink" title="æ ‡æ³¨"></a>æ ‡æ³¨</h2><p>å¯¹äºæŸäº›carry key informationçš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ ‡æ³¨å‡ºæ¥ï¼Œäºæ˜¯æˆ‘ä»¬æœ‰äº†accent color scalesï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©ä¸€ä¸ªæœ‰è¡¨ç°åŠ›çš„é¢œè‰²ï¼ŒåŒæ—¶ä¸€ä¸ªä¸äº‰å¤ºæˆ‘ä»¬æ³¨æ„åŠ›çš„é¢œè‰²ä½œä¸ºèƒŒæ™¯ã€‚</p><h1 id="é€‰æ‹©åˆé€‚çš„å›¾"><a href="#é€‰æ‹©åˆé€‚çš„å›¾" class="headerlink" title="é€‰æ‹©åˆé€‚çš„å›¾"></a>é€‰æ‹©åˆé€‚çš„å›¾</h1><h2 id="æ•°é‡"><a href="#æ•°é‡" class="headerlink" title="æ•°é‡"></a>æ•°é‡</h2><ul><li>bar(group,stack,vertically,horizontally)</li><li>dots</li><li>heatmap</li></ul><h2 id="åˆ†å¸ƒ"><a href="#åˆ†å¸ƒ" class="headerlink" title="åˆ†å¸ƒ"></a>åˆ†å¸ƒ</h2><ul><li>hist</li><li>density plots</li><li>cdf,ç´¯è®¡å¯†åº¦å›¾</li><li>qq plots</li><li>boxplots</li><li>violins</li><li>strip charts</li><li>sina plots</li><li>stacked hist</li><li>overlapping densities</li><li>ridgeline plot</li></ul><p>å¦‚æœæˆ‘ä»¬åªå¯¹åˆ†å¸ƒçš„ç§»åŠ¨è¶‹åŠ¿æœ‰å…´è¶£ï¼Œé‚£ä¹ˆBoxplots, violins, strip charts, and sina plotsæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚</p><p>å¦‚æœä½ æƒ³å¯¹æ•°æ®æœ‰æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼ŒåŒæ—¶ä½ çš„æ•°æ®é›†ä¹Ÿæ¯”è¾ƒå°ï¼Œå¯ä»¥ä½¿ç”¨stacked histã€‚</p><h2 id="æ¯”ä¾‹"><a href="#æ¯”ä¾‹" class="headerlink" title="æ¯”ä¾‹"></a>æ¯”ä¾‹</h2><ul><li>bar</li><li>pie</li><li>stacked bar</li><li>stacked densities</li><li>mosaic plot</li><li>treemap</li><li>parallel sets</li></ul><h1 id="å±•ç°æ•°é‡çš„å›¾"><a href="#å±•ç°æ•°é‡çš„å›¾" class="headerlink" title="å±•ç°æ•°é‡çš„å›¾"></a>å±•ç°æ•°é‡çš„å›¾</h1><h2 id="Bar-plots"><a href="#Bar-plots" class="headerlink" title="Bar plots"></a>Bar plots</h2><p>å¦‚æœä½ çš„å›¾ç«–ç€æ‘†æ”¾ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°labelçš„æ–‡å­—å¤ªé•¿è¢«é®æŒ¡çš„æƒ…å†µï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨æ°´å¹³çš„barå›¾ï¼Œä¸å»ºè®®ä½¿ç”¨æ—‹è½¬çš„labelã€‚</p><p>åº”è¯¥æ ¹æ®barçš„å¤§å°ï¼ˆå³æ•°å€¼çš„å¤§å°ï¼‰æ¥æ’åºï¼Œè€Œä¸æ˜¯lableçš„å­—æ¯ã€‚</p><h2 id="dot-plots"><a href="#dot-plots" class="headerlink" title="dot plots"></a>dot plots</h2><p>barå›¾çš„é•¿åº¦å–å†³äºæ•°å€¼çš„å¤§å°ï¼Œå¦å¤–barå›¾çš„å¼€å§‹éƒ½æ˜¯ä»0å¼€å§‹çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœæ•°å€¼å…¨éƒ¨åœ¨æŸä¸ªå¤§ä¸€ç‚¹çš„åŒºé—´ï¼Œå®ƒä»¬ä¹‹é—´çš„å¯¹æ¯”å¯èƒ½ä¼šçœ‹èµ·æ¥æ¯”è¾ƒå°ã€‚</p><p>æ‰€ä»¥dotå›¾æ˜¯ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œä½†ä¹Ÿè¦æ³¨æ„è¦æ ¹æ®æ•°å€¼æ¥æ’åˆ—ç‚¹ï¼Œè€Œä¸æ˜¯labelã€‚</p><h2 id="heatmaps"><a href="#heatmaps" class="headerlink" title="heatmaps"></a>heatmaps</h2><p>ä½¿ç”¨barå›¾é€‚ç”¨äºé‚£äº›æ•°æ®ç»„æ¯”è¾ƒå°‘çš„æƒ…å†µï¼Œä½ ä¼šå‘ç°å¦‚æœä½ çš„æ•°æ®æœ‰5ï¼Œ6ç»„ï¼Œæ•´ä¸ªå›¾å½¢å·²ç»æ˜¾å¾—æœ‰ç‚¹æ‹¥æŒ¤äº†ï¼Œå¦‚æœä½ æœ‰è¶…è¿‡20ç»„æ•°æ®éœ€è¦å±•ç¤ºï¼Œé‚£ä¹ˆä¸å¦¨é€‰æ‹©çƒ­åŠ›å›¾ã€‚</p><h1 id="å±•ç°åˆ†å¸ƒ"><a href="#å±•ç°åˆ†å¸ƒ" class="headerlink" title="å±•ç°åˆ†å¸ƒ"></a>å±•ç°åˆ†å¸ƒ</h1><h2 id="histä¸density"><a href="#histä¸density" class="headerlink" title="histä¸density"></a>histä¸density</h2><p>ä½¿ç”¨histï¼Œä¸€èˆ¬ç¨‹åºéƒ½ä¼šç»™å‡ºé»˜è®¤çš„binï¼Œä½†è¿™ä¹Ÿè®¸ä¸æ˜¯ä¸æ˜¯åˆé€‚çš„binï¼Œéœ€è¦ä½ å»è°ƒæ•´ä¸æ¢ç´¢ä»¥æ‰¾åˆ°æœ€é€‚åˆä½ çš„binå€¼ã€‚</p><p>ç›´æ–¹å›¾ä»18ä¸–çºªå¼€å§‹å°±å¾ˆæµè¡Œï¼Œå› ä¸ºå®ƒå¾ˆå®¹æ˜“ç»˜åˆ¶ï¼Œéšç€æ‰‹æœºä¸ç”µè„‘è®¡ç®—èƒ½åŠ›çš„æ”¹å–„ï¼Œç°åœ¨ç›´æ–¹å›¾å¼€å§‹è¢«å¯†åº¦å›¾æ‰€å–ä»£ï¼Œå¯†åº¦å›¾çš„æ›²çº¿æ›´å¹³æ»‘ï¼ŒåŒæ ·åœ¨densityå›¾ä¸­ï¼Œä¹Ÿæœ‰ç±»ä¼¼histçš„binå‚æ•°ï¼Œå«åšbandwidthã€‚</p><p>å¯†åº¦å›¾çš„é¦–å°¾éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå¤„ç†ä¸å¾—å½“ï¼Œå¯èƒ½ä¼šå‡ºç°è´Ÿå€¼ã€‚</p><p>å¦‚æœæœ‰å¤šä¸ªç»„çš„æ•°æ®éœ€è¦å±•ç¤ºåˆ†å¸ƒçŠ¶æ€ï¼Œä¸è¦ä½¿ç”¨stack histï¼Œè¿™æ ·å¾ˆä¸æ¸…æ™°ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¼€çš„densityï¼Œæˆ–è€…æ˜¯åˆ†å¼€çš„histã€‚</p><blockquote><p>è¿™ä¸¤è€…éƒ½éœ€è¦å»é€‰æ‹©åˆé€‚çš„binä¸bandwidth</p></blockquote><h2 id="ECDF"><a href="#ECDF" class="headerlink" title="ECDF"></a>ECDF</h2><p>åœ¨histä¸densitå›¾ä¸­ï¼Œå®ƒä»¬çš„å±€é™æ€§åœ¨äºå¿…é¡»é€‰æ‹©åˆé€‚çš„binså€¼ä¸å¸¦å®½å€¼ï¼Œæ‰€ä»¥ï¼Œbinsä¸å¸¦å®½å€¼çš„é€‰æ‹©ï¼Œæœ¬èº«æ˜¯ä¸€ç§ä¸»è§‚æ€§çš„è¡Œä¸ºï¼Œé‚£ä¹ˆè¿™åªèƒ½è¯´æ˜¯ä¸€ç§å¯¹æ•°æ®çš„è§£é‡Šï¼Œä¸æ˜¯å®¢è§‚çš„ï¼ˆé™¤éä½ é€‰æ‹©çš„æ˜¯å…¬è®¤çš„åˆé€‚çš„å€¼ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ä¸€ç§å®¢è§‚çš„å¯¹æ•°æ®è¿›è¡Œå±•ç¤ºçš„æ–¹æ³•ã€‚</p><p>å°†æ‰€æœ‰çš„æ•°æ®æç»˜æˆç‚¹å€¼ï¼Œå¯ä»¥çªå‡ºæ•´ä¸ªæ•°æ®çš„åˆ†å¸ƒï¼Œä½†æ˜¯æ²¡åŠæ³•çªå‡ºå…·ä½“æŸä¸€ä¸ªæ•°æ®ç‚¹çš„ä»·å€¼ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»Ÿè®¡å­¦å®¶å‘æ˜äº†ecdfä¸qqå›¾ã€‚</p><p>è¿™äº›å›¾ä¸éœ€è¦ä»»ä½•å‚æ•°é€‰æ‹©ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æ˜¾ç¤ºæ‰€æœ‰æ•°æ®ã€‚</p><p>ç»éªŒåˆ†å¸ƒå‡½æ•°çš„æ€æƒ³æ˜¯ï¼Œxå€¼ä¸ºæ‰€æœ‰æ ·æœ¬ä¸­æ’åºåçš„å€¼ï¼Œyä¸ºæ‰€æœ‰çš„æ ·æœ¬æ€»æ•°æŒ‰å‡ç­‰åˆ†ï¼ˆæ ¹æ®ä¸ªæ•°ï¼‰ï¼Œç„¶åç´¯åŠ åœ¨ä¸€èµ·çš„å€¼ã€‚</p><p>è¿™æ ·é€šè¿‡è§‚å¯Ÿï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„æ ·æœ¬ç‚¹çš„åˆ†å¸ƒï¼Œå¦‚æœæŸä¸ªå€¼å‡ºç°çš„æ¯”è¾ƒå¤šï¼Œå³xå¾€å³å˜åŒ–æ—¶å€¼æ²¡æœ‰å˜ï¼Œè€Œyåˆ™å¢åŠ äº†ä¸€ä¸ªå‡ç­‰åˆ†çš„å€¼ï¼Œæ­¤æ—¶å›¾åƒä¸Šçš„è¡¨ç°å°±æ˜¯åœ¨xå¤„ç½‘ä¸Šå¢åŠ ä¸€ä¸ªç‚¹ï¼Œä¹Ÿå°±æ˜¯æ–œç‡å˜å¾—æ›´ä¸ºé™¡å³­äº†ã€‚</p><h1 id="åº”ç”¨æŠ€å·§"><a href="#åº”ç”¨æŠ€å·§" class="headerlink" title="åº”ç”¨æŠ€å·§"></a>åº”ç”¨æŠ€å·§</h1><h2 id="ä¸åŒçš„å›¾è¡¨"><a href="#ä¸åŒçš„å›¾è¡¨" class="headerlink" title="ä¸åŒçš„å›¾è¡¨"></a>ä¸åŒçš„å›¾è¡¨</h2><p>you can do this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.plt.bar()</span><br></pre></td></tr></table></figure><p>and this is the diffrent types plot:</p><ul><li>â€˜barâ€™ or â€˜barhâ€™ for bar plots</li><li>â€˜histâ€™ for histogram</li><li>â€˜boxâ€™ for boxplot</li><li>â€˜kdeâ€™ or â€˜densityâ€™ for density plots</li><li>â€˜areaâ€™ for area plots</li><li>â€˜scatterâ€™ for scatter plots</li><li>â€˜hexbinâ€™ for hexagonal bin plots</li><li>â€˜pieâ€™ for pie plots</li></ul><p>and you can specific the kind in methond:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(kind=&apos;bar&apos;)</span><br></pre></td></tr></table></figure><p>Reference:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df.plot.area     df.plot.barh     df.plot.density  df.plot.hist     df.plot.line     df.plot.scatter</span><br><span class="line">df.plot.bar      df.plot.box      df.plot.hexbin   df.plot.kde      df.plot.pie</span><br></pre></td></tr></table></figure><h2 id="æŠŠåˆ—åˆå¹¶å±•ç¤º"><a href="#æŠŠåˆ—åˆå¹¶å±•ç¤º" class="headerlink" title="æŠŠåˆ—åˆå¹¶å±•ç¤º"></a>æŠŠåˆ—åˆå¹¶å±•ç¤º</h2><p>When you plotting, <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![](https://pandas.pydata.org/pandas-docs/stable/_images/bar_plot_multi_ex.png)</span><br><span class="line"></span><br><span class="line">to this:</span><br><span class="line"></span><br><span class="line">![](https://pandas.pydata.org/pandas-docs/stable/_images/bar_plot_stacked_ex.png)</span><br><span class="line"></span><br><span class="line">plot.bar(stacked=True);</span><br><span class="line"></span><br><span class="line">If you want thehorizontal bar plots, use the barh method:</span><br><span class="line"></span><br><span class="line"> ```df2.plot.barh(stacked=True)</span><br></pre></td></tr></table></figure></p><h1 id="ä½¿ç”¨ç»˜å›¾å¯¹è±¡"><a href="#ä½¿ç”¨ç»˜å›¾å¯¹è±¡" class="headerlink" title="ä½¿ç”¨ç»˜å›¾å¯¹è±¡"></a>ä½¿ç”¨ç»˜å›¾å¯¹è±¡</h1><p>Plots in matplotlib is a Figure object, you can new a plot window:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## å¤šä¸ªå›¾ä¸€èµ·ç»˜åˆ¶</span><br><span class="line">and you can add the sub plots to this object,</span><br></pre></td></tr></table></figure><p>fig = plt.figure()<br>ax1 = fig.add_subplot(2, 2, 1)<br>ax2 = fig.add_subplot(2, 2, 2)<br>ax3 = fig.add_subplot(2, 2, 3)<br>ax4 = fig.add_subplot(2, 2, 4)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">This will let you get four plot sub plots in one  window, and any command will show in the last plot.</span><br><span class="line"></span><br><span class="line">## å¿«é€Ÿåˆ›å»ºå¤šä¸ªå­å›¾</span><br><span class="line"></span><br><span class="line">and you create subplots fast like this:</span><br></pre></td></tr></table></figure></p><p>fig,axes = plt.subplots(3,3)<br>axes[0,0].hist(np.random.randn(100),bins=20,color=â€™kâ€™,alpha=0.3)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## æ§åˆ¶å­å›¾ä¹‹é—´çš„é—´éš™</span><br><span class="line">subplots spacing is under control by ```plt.subplots_adjust(wspace=0,hspace=0)</span><br></pre></td></tr></table></figure></p><h2 id="ä¸ªæ€§åŒ–"><a href="#ä¸ªæ€§åŒ–" class="headerlink" title="ä¸ªæ€§åŒ–"></a>ä¸ªæ€§åŒ–</h2><h3 id="çº¿çš„è™šå®ã€é¢œè‰²"><a href="#çº¿çš„è™šå®ã€é¢œè‰²" class="headerlink" title="çº¿çš„è™šå®ã€é¢œè‰²"></a>çº¿çš„è™šå®ã€é¢œè‰²</h3><p>In the plot() method, it can accept a string to stylying, to plot x verus y with green dashes , you would execute:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">of course, the color and dash can setting seperate:</span><br><span class="line"></span><br><span class="line">```ax.plot(x, y, linestyle=&apos;--&apos;, color=&apos;g&apos;)</span><br></pre></td></tr></table></figure><p>linestyle:</p><ul><li>-</li><li>--</li></ul><p>Line plots can additionally have <em>markers</em> to highlight the actual data points.</p><figure class="highlight plain"><figcaption><span>or ```plot(marker</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### ä¸€ä»½æ•°æ®ï¼Œå¤šç§å±•ç¤ºæ–¹å¼</span><br><span class="line">æˆ‘ä»¬å¯ä»¥å°†ä¸åŒçš„drawstyleç»“åˆåœ¨ä¸€èµ·ï¼Œæ”¾åœ¨åŒä¸€å¹…å›¾ä¸­æ˜¾ç¤ºï¼Œæ¯”å¦‚è¿™æ ·</span><br></pre></td></tr></table></figure><p>ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot(linestyle=â€™â€“â€™,color=â€™gâ€™,marker=â€™oâ€™,label=â€™Defaultâ€™)<br>ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean().plot(linestyle=â€™-â€˜,color=â€™râ€™,marker=â€™oâ€™,label=â€™steps-postâ€™,drawstyle=â€™steps-postâ€™)<br>plt.legend(loc=â€™bestâ€™)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![](https://xfjlcq.bn.files.1drv.com/y4mHSUL0Fe0J2icuEUtKoUHovl1jCzOHR3BSoy5LdPsDttVbG0OJYys58TNGyXOLLj0elzuvTe8dSPxanf28ZanIF5y-qdjw_BoG3hlVLh0HiLxXbQpTRX2Mdg_wqv7jHA-cWaQdKRwpT07LUWhQNNF97VE4rtUSwCGLslxsludS7d7FTp1X9_c9z1eMPE5Nj2-Z4FZYU6zSUZXSD_iLFspsw/legendPlot.png?psid=1)</span><br><span class="line"></span><br><span class="line">drawstyleçš„ç±»å‹ï¼š</span><br><span class="line"></span><br><span class="line">```&#123;&apos;default&apos;, &apos;steps&apos;, &apos;steps-pre&apos;, &apos;steps-mid&apos;, &apos;steps-post&apos;&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º"><a href="#å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º" class="headerlink" title="å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º"></a>å¤šä»½æ•°æ®åˆå¹¶å±•ç¤º</h3><p>An easy way to adding legends:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from numpy.random import randn</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(1, 1, 1)</span><br><span class="line">ax.plot(randn(1000).cumsum(), &apos;k&apos;, label=&apos;one&apos;) ax.plot(randn(1000).cumsum(), &apos;k--&apos;, label=&apos;two&apos;)</span><br><span class="line">ax.plot(randn(1000).cumsum(), &apos;k.&apos;, label=&apos;three&apos;)</span><br><span class="line">ax.legend(loc=&apos;best&apos;)</span><br></pre></td></tr></table></figure><blockquote><p>The loc tells matplotlib where to place the plot. If you arenâ€™t picky, â€˜bestâ€™ is a good option, as it will choose a location that is most out of the way. To exclude one or more elements from the legend, pass no label or label=â€™<em>nolegend</em>â€˜.</p></blockquote><h3 id="è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§"><a href="#è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§" class="headerlink" title="è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§"></a>è®¾ç½®å›¾çš„åŸºæœ¬å±æ€§</h3><p>è®¾ç½®plotçš„æ ‡é¢˜:</p><figure class="highlight plain"><figcaption><span>Releted Stop Search Rate')```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è®¾ç½®xè½´çš„æ ‡é¢˜ï¼š</span><br><span class="line"></span><br><span class="line">```ax.set_xlabel(&apos;hours&apos;)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„xè½´çš„å•ä½å’Œæ ‡ç­¾ä¹Ÿå¯ä»¥è®¾ç½®ï¼Œæ³¨æ„ä¸ªæ•°å¿…é¡»ç»Ÿä¸€:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">drm = ri.groupby(ri.stop_datetime.dt.hour).drugs_related_stop.mean()</span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(1,1,1)</span><br><span class="line">ax.plot(drm)</span><br><span class="line"></span><br><span class="line">ticks = ax.set_xticks([0,6,12,18])</span><br><span class="line">labels = ax.set_xticklabels([&apos;Mid Night&apos;,&apos;Morning&apos;,&apos;Moon&apos;,&apos;AftenNoon&apos;])</span><br></pre></td></tr></table></figure><blockquote><p>Y-axis is same, substituting y for x in above.</p></blockquote><h3 id="å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶"><a href="#å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶" class="headerlink" title="å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶"></a>å¦‚ä½•æ ¹æ®GroupByä¸­å¤šåˆ—çš„å€¼ç»˜åˆ¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig,ax = plt.subplots(figsize=(16,7))</span><br><span class="line">data.groupby(&apos;A&apos;,&apos;B&apos;).count().unstack().plot(ax=ax)</span><br></pre></td></tr></table></figure><p>Use the unstack method to plotting.</p><blockquote><p>To be contiunedâ€¦</p></blockquote><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://serialmentor.com/dataviz/" target="_blank" rel="noopener">Fundamentals of Data Visualization - Claus O. Wilke</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/15/kIahY4xBReDAVob.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ•°æ®å¯è§†åŒ–çš„ç›®çš„æ˜¯å‡†ç¡®è€Œå®¢è§‚çš„è®²è¿°æ•…äº‹ä¸å±•ç¤ºæ•°æ®ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¯¹ä½ çš„å¯è§†åŒ–å·¥ä½œæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="data visualizing" scheme="http://wittyfans.com/tags/data-visualizing/"/>
    
      <category term="matplotlib" scheme="http://wittyfans.com/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>ç›‘ç£å­¦ä¹ å®ä¾‹ï¼šå­¦æ ¡å›¾ä¹¦æ•°æ®åˆ†ç±»</title>
    <link href="http://wittyfans.com/coding/%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%AD%A6%E6%A0%A1%E5%9B%BE%E4%B9%A6%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB.html"/>
    <id>http://wittyfans.com/coding/ç›‘ç£å­¦ä¹ å®ä¾‹ï¼šå­¦æ ¡å›¾ä¹¦æ•°æ®åˆ†ç±».html</id>
    <published>2019-08-17T16:02:27.000Z</published>
    <updated>2019-11-18T03:11:14.378Z</updated>
    
    <content type="html"><![CDATA[<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script><p><img src="https://i.loli.net/2019/11/18/SbPAWvxuiRELnO6.png" alt=""></p><blockquote><p>æˆ‘ä»¬å­¦æ ¡æ¯”æ—è¾¹çš„å­¦æ ¡åœ¨æ•™ç§‘ä¹¦ä¸Šé¢èŠ±äº†æ›´å¤šçš„é’±å—ï¼Ÿè¿™æ˜¯å¦æœ‰ç”¨å‘¢ï¼Ÿ</p></blockquote><a id="more"></a><h1 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h1><p>å­¦æ ¡æƒ³çŸ¥é“ï¼Œæˆ‘ä»¬æ¯”æ—è¾¹çš„å­¦æ ¡åœ¨æ•™ç§‘ä¹¦ä¸Šé¢èŠ±äº†æ›´å¤šçš„é’±å—ï¼Ÿè¿™æ˜¯å¦æœ‰ç”¨ï¼Ÿ</p><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æœ‰æ•™ç§‘ä¹¦çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œåˆ†ç±»ã€‚ç„¶è€Œåˆ†ç±»æ˜¯ä¸€ä¸ªåŠå…¶å¤æ‚çš„æ“ä½œï¼Œå­¦æ ¡æ¯å¹´éƒ½ä¼šèŠ±å¾ˆå¤šçš„æ—¶é—´å»æ‰‹åŠ¨åˆ†ç±»ã€‚</p><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯ä»¥å»ºç«‹ä¸€ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹è‡ªåŠ¨å¤„ç†è¿™ä¸ªåˆ†ç±»æ­¥éª¤ã€‚</p><p>æ¯”å¦‚ã€Šçº¿æ€§ä»£æ•°ã€‹ï¼Œè¿™æœ¬ä¹¦æˆ‘ä»¬ä¼šç»™ä»–å‡ ä¸ªæ ‡ç­¾ï¼š</p><ul><li>æ•°å­¦</li><li>æ•™ç§‘ä¹¦</li><li>ä¸­å­¦</li></ul><p>è¿™äº›æ ‡ç­¾ï¼Œå°±æ˜¯æˆ‘ä»¬çš„target variableã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†ç±»é—®é¢˜ã€‚</p><p>ä¸è¿‡æˆ‘ä»¬çš„é¢„æµ‹åº”è¯¥ç”±æ¦‚ç‡æ¥å®šä¹‰ï¼Œæˆ‘ä»¬ä¸ä¼šé¢„æµ‹è¯´ï¼Œè¿™å°±æ˜¯æœ¬æ•°å­¦ä¹¦ï¼Œè€Œæ˜¯è¯´,æˆ‘æœ‰ç™¾åˆ†ä¹‹60çš„æŠŠæ¡è®¤ä¸ºè¿™æ˜¯ä¸€æœ¬æ•°å­¦ä¹¦ï¼Œå¦‚æœä¸å¯¹ï¼Œé‚£æˆ‘æœ‰ç™¾åˆ†ä¹‹70çš„æŠŠæ¡è®¤ä¸ºè¿™æ˜¯ä¸€æœ¬ç‰©ç†ä¹¦ã€‚</p><h1 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h1><p>æ•°æ®æ˜¯csvæ ¼å¼çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>df = pd.read_csv(&#39;TrainingData.csv&#39;)</code>å¯¼å…¥æ•°æ®å¹¶ä¿å­˜åˆ°åä¸º<code>df</code>çš„å˜é‡ã€‚</p><h2 id="æ¢ç´¢æ•°æ®"><a href="#æ¢ç´¢æ•°æ®" class="headerlink" title="æ¢ç´¢æ•°æ®"></a>æ¢ç´¢æ•°æ®</h2><p><strong>åŸºæœ¬ä¿¡æ¯</strong>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">In [6]: df.info()</span><br><span class="line">&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;</span><br><span class="line">RangeIndex: 1560 entries, 0 to 1559</span><br><span class="line">Data columns (total 26 columns):</span><br><span class="line">Unnamed: 0                1560 non-null int64</span><br><span class="line">Function                  1560 non-null object</span><br><span class="line">Use                       1560 non-null object</span><br><span class="line">Sharing                   1560 non-null object</span><br><span class="line">Reporting                 1560 non-null object</span><br><span class="line">Student_Type              1560 non-null object</span><br><span class="line">Position_Type             1560 non-null object</span><br><span class="line">Object_Type               1560 non-null object</span><br><span class="line">Pre_K                     1560 non-null object</span><br><span class="line">Operating_Status          1560 non-null object</span><br><span class="line">Object_Description        1461 non-null object</span><br><span class="line">Text_2                    382 non-null object</span><br><span class="line">SubFund_Description       1183 non-null object</span><br><span class="line">Job_Title_Description     1131 non-null object</span><br><span class="line">Text_3                    677 non-null object</span><br><span class="line">Text_4                    193 non-null object</span><br><span class="line">Sub_Object_Description    364 non-null object</span><br><span class="line">Location_Description      874 non-null object</span><br><span class="line">FTE                       449 non-null float64</span><br><span class="line">Function_Description      1340 non-null object</span><br><span class="line">Facility_or_Department    252 non-null object</span><br><span class="line">Position_Extra            1026 non-null object</span><br><span class="line">Total                     1542 non-null float64</span><br><span class="line">Program_Description       1192 non-null object</span><br><span class="line">Fund_Description          819 non-null object</span><br><span class="line">Text_1                    1132 non-null object</span><br><span class="line">dtypes: float64(2), int64(1), object(23)</span><br><span class="line">memory usage: 317.0+ KB</span><br></pre></td></tr></table></figure><p><strong>ç®€å•æè¿°:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [5]: df.describe()</span><br><span class="line">Out[5]:</span><br><span class="line">          Unnamed: 0         FTE         Total</span><br><span class="line">count    1560.000000  449.000000  1.542000e+03</span><br><span class="line">mean   227767.180128    0.493532  1.446867e+04</span><br><span class="line">std    130207.535688    0.452844  7.916752e+04</span><br><span class="line">min       198.000000   -0.002369 -1.044084e+06</span><br><span class="line">25%    113690.750000         NaN           NaN</span><br><span class="line">50%    226445.500000         NaN           NaN</span><br><span class="line">75%    340883.500000         NaN           NaN</span><br><span class="line">max    450277.000000    1.047222  1.367500e+06</span><br></pre></td></tr></table></figure><h2 id="FTE-å…¨èŒå‘˜å·¥æ•°"><a href="#FTE-å…¨èŒå‘˜å·¥æ•°" class="headerlink" title="FTE å…¨èŒå‘˜å·¥æ•°"></a>FTE å…¨èŒå‘˜å·¥æ•°</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [4]: df.FTE.head()</span><br><span class="line">Out[4]:</span><br><span class="line">198     NaN</span><br><span class="line">209     NaN</span><br><span class="line">750     1.0</span><br><span class="line">931     NaN</span><br><span class="line">1524    NaN</span><br><span class="line">Name: FTE, dtype: float64</span><br></pre></td></tr></table></figure><p>æ•°æ®é‡Œçš„FTEä¸º(Full Time equivalent)å…¨èŒå‘˜å·¥çš„æ„æ€,åœ¨æˆ‘ä»¬çš„æ•°æ®ä¸­ï¼Œå¦‚æœä¸€é¡¹é¢„ç®—ä¸ä¸€ä¸ªå‘˜å·¥æœ‰å…³ï¼Œè¿™ä¸ªå€¼å°±ååº”äº†è¿™ä¸ªå‘˜å·¥çš„å…¨èŒå·¥ä½œçš„ç™¾åˆ†æ¯”ã€‚</p><ul><li>1ï¼Œå…¨èŒå‘˜å·¥</li><li>0ï¼Œå…¼èŒæˆ–è€…åˆåŒåˆ¶å‘˜å·¥</li></ul><p>è¿™ä¸ªå€¼æœ¬èº«æ˜¯æœ‰è®¸å¤šçš„æ•°æ®ç¼ºå¤±çš„ï¼Œæ‰€ä»¥å¦‚æœè¦ä½¿ç”¨çš„è¯ï¼Œéœ€è¦å…ˆå°†naå€¼å»æ‰ã€‚</p><p>å°†FTEç»˜å›¾ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™æ‰€å­¦æ ¡çš„å…¼èŒå‘˜å·¥å’Œå…¨èŒå‘˜å·¥çš„æ”¯å‡ºå¾ˆé«˜ï¼Œè€Œä¸­é—´çš„æ•°æ®åˆ™æ¯”è¾ƒå°‘ã€‚</p><p><img src="https://i.loli.net/2019/11/15/2cYvGT3VPQhU5dE.png" alt=""></p><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>æˆ‘ä»¬çš„æ•°æ®ä¸­ï¼Œæœ‰äº›åˆ—åªæœ‰ç‰¹å®šçš„å€¼ï¼Œæ¯”å¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df.label.unique()</span><br><span class="line"></span><br><span class="line">[&apos;a&apos;,&apos;b&apos;]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦å°†å…¶å˜æˆæ•°å­—æ¥å¤„ç†ï¼Œä¸€æ˜¯æˆ‘ä»¬çš„æ¨¡å‹åªèƒ½è®¡ç®—æ•°å­—ï¼Œè€Œæ˜¯å¯ä»¥æå‡é€Ÿåº¦ã€‚</p><p>åœ¨pandasä¸­ï¼Œæœ‰ä¸€ç§ <code>category</code> ç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥å¹²è¿™ä»¶äº‹ã€‚</p><p>é€šè¿‡pandasçš„ <code>astype()</code>æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€åˆ—æ•°æ®è½¬åŒ–æˆ <code>category</code>ï¼Œè½¬åŒ–åï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>get_dummiesæ–¹æ³•</code>æ¥æŸ¥çœ‹ dummy variables,è¿™ä¼šè®©åŸæ¥çš„æ¯ä¸ªå€¼éƒ½ç”¨æ•°å­—æ¥æ›¿ä»£,å¦‚ï¼š</p><p><em>åŸå§‹æ•°æ®ï¼š</em></p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">origin</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">US</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Europe</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">Asia</td></tr></tbody></table><p><em>get_dummies()åï¼š</em></p><table><thead><tr><th style="text-align:left">origin_Asia</th><th style="text-align:left">origin_Europe</th><th style="text-align:left">origin_US</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">0</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">0</td><td style="text-align:left">1</td><td style="text-align:left">0</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">0</td><td style="text-align:left">0</td></tr></tbody></table><p>è¿™ä¸ªæ­¥éª¤åˆå«åš <code>binary indicator</code> representation.</p><p>å¦‚æœä½ æœ‰å¤šåˆ—æ•°æ®éœ€è¦è½¬åŒ–æˆ <code>category</code>ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ lambda å‡½æ•°åŠ dataframeçš„applyæ–¹æ³•ï¼Œè®°å¾—è®¾ç½®axis=0ï¼Œä¹Ÿå°±æ˜¯å¤„ç†æ–¹å¼æ˜¯æŒ‰åˆ—ï¼Œå¤„ç†å®Œæˆä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨<code>df.dtypes.value_counts()</code>æ¥æŸ¥çœ‹ä½ çš„æ•°æ®é‡Œæ•°æ®ç±»å‹çš„åˆ†å¸ƒæƒ…å†µã€‚</p><h1 id="å¦‚ä½•å®šä¹‰æˆåŠŸï¼Ÿ"><a href="#å¦‚ä½•å®šä¹‰æˆåŠŸï¼Ÿ" class="headerlink" title="å¦‚ä½•å®šä¹‰æˆåŠŸï¼Ÿ"></a>å¦‚ä½•å®šä¹‰æˆåŠŸï¼Ÿ</h1><p>ç”¨accuracyï¼Œæ²¡åŠæ³•è§£å†³åƒåœ¾é‚®ä»¶çš„é—®é¢˜ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨æœºå™¨å­¦ä¹ é‚£ä¸€ç« å·²ç»è®²è¿‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<code>log loss</code>ï¼Œç®€å•æ¥è¯´,accuracyæ˜¯å°½å¯èƒ½çš„æé«˜æ­£ç¡®ç‡ï¼Œè€Œ<code>log loss</code>åˆ™æ˜¯å°½å¯èƒ½çš„é™ä½é”™è¯¯ç‡ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„<code>loss function</code>çš„å®šä¹‰ï¼š</p><p>$$logloss=-\frac{1}{N}\sum_{i=1}^{N}(y_ilogs(p_i))+(1-y_i)log(1-p_i)$$</p><ul><li>yï¼šæ˜¯å¦åˆ†ç±»æ­£ç¡®ï¼Œ1=yes,0=no</li><li>pï¼šä¸º1çš„æ¦‚ç‡</li></ul><p>å¤ä¹ ä¸€ä¸‹ï¼Œ </p><p>$$\sum$$ </p><p>å«åšæ±‚å’Œç¬¦å·ï¼Œè¯»ä½œ<em>segema</em>,å®ƒçš„æ„æ€å°±æ˜¯è¿ç»­çš„åŠ æ³•ï¼Œæ¯”å¦‚:</p><p>$$\sum_{k=1}^{n}ak=a_1+a_2+a_3+..a_n$$</p><p>kæ˜¯ä¸‹æ ‡ï¼Œå®ƒä¼šä»kå˜åŒ–åˆ°nï¼Œå½“k=1çš„æ—¶å€™ï¼Œakå°±æ˜¯a1ï¼Œå½“k=2çš„æ—¶å€™ï¼Œakå°±æ˜¯a2ï¼Œæœ€åä¸€é¡¹å°±æ˜¯k=n,segimaçš„æ„æ€å‘¢å°±æ˜¯æŠŠè¿™äº›é¡¹å…¨éƒ½åŠ èµ·æ¥ã€‚</p><p>æ‰€ä»¥è¿™é‡Œçš„segemaçš„æ„æ€å°±æ˜¯æŠŠæ•°æ®ä¸­ï¼Œæ¯ä¸€è¡Œçš„æ•°æ®éƒ½åŠ èµ·æ¥ï¼Œå¦‚æœä½ ä¸äº†è§£æ±‚å’Œç¬¦å·ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡<a href="http://wittyfans.com/math/%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0%EF%BC%9A%E6%B1%82%E5%92%8C%E7%AC%A6%E5%8F%B7.html">æ–‡ç« </a></p><p>æŠŠä¸€è¡Œçš„æ•°æ®ä¹˜ä»¥ $$-\frac{1}{N}$$ï¼Œå¾—åˆ°è¿™ä¸€è¡Œçš„logloss.</p><h2 id="log-losså‡½æ•°ç¤ºä¾‹"><a href="#log-losså‡½æ•°ç¤ºä¾‹" class="headerlink" title="log losså‡½æ•°ç¤ºä¾‹"></a>log losså‡½æ•°ç¤ºä¾‹</h2><h3 id="å‡è®¾A"><a href="#å‡è®¾A" class="headerlink" title="å‡è®¾A"></a>å‡è®¾A</h3><ul><li>true label=0</li><li>é¢„æµ‹1çš„æ¦‚ç‡æ˜¯p=0.9ï¼š</li></ul><p>å¸¦å…¥å…¬å¼è®¡ç®—å¯å¾—ï¼š</p><p>$$log loss=(1-y)\log^{1-p}$$</p><p>$$=\log^{1-0.9}$$</p><p>$$=\log^{0.1}$$</p><p>$$=2.3$$</p><h3 id="å‡è®¾B"><a href="#å‡è®¾B" class="headerlink" title="å‡è®¾B"></a>å‡è®¾B</h3><ul><li>true label=1</li><li>é¢„æµ‹0çš„æ¦‚ç‡æ˜¯0.5</li></ul><p>åˆ™loså‡½æ•°è¡¨ç¤ºä¸ºï¼š</p><p>$$logloss=-\frac{1}{1}1\log^{0.5}+(1-1)\log^{1-0.5}$$</p><p>å¸¦å…¥å…¬å¼è®¡ç®—å¯å¾—ï¼š</p><p>$$=-\log^{0.5}$$</p><p>$$=0.69$$</p><h3 id="log-loss-pythonå®ç°"><a href="#log-loss-pythonå®ç°" class="headerlink" title="log loss pythonå®ç°"></a>log loss pythonå®ç°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def compute_log_loss(predicted, actual, eps=1e-14):</span><br><span class="line"> &quot;&quot;&quot; Computes the logarithmic loss between predicted and</span><br><span class="line"> actual when these are 1D arrays.</span><br><span class="line"></span><br><span class="line"> :param predicted: The predicted probabilities as floats between 0-1</span><br><span class="line"> :param actual: The actual binary labels. Either 0 or 1.</span><br><span class="line"> :param eps (optional): log(0) is inf, so we need to offset our</span><br><span class="line"> predicted values slightly by eps from 0 or 1.</span><br><span class="line"> &quot;&quot;&quot;</span><br><span class="line"> predicted = np.clip(predicted, eps, 1 - eps)</span><br><span class="line"> loss = -1 * np.mean(actual * np.log(predicted)</span><br><span class="line"> + (1 - actual)</span><br><span class="line"> * np.log(1 - predicted))</span><br><span class="line"></span><br><span class="line"> return loss</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå‡½æ•°å–è®¡ç®—ä¸€äº›æä¾›å¥½çš„å€¼çš„log losså€¼ï¼Œä¸‹é¢æ˜¯ç®—å¥½åçš„ç»“æœ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Log loss, correct and confident: 0.05129329438755058</span><br><span class="line">Log loss, correct and not confident: 0.4307829160924542</span><br><span class="line">Log loss, wrong and not confident: 1.049822124498678</span><br><span class="line">Log loss, wrong and confident: 2.9957322735539904</span><br><span class="line">Log loss, actual labels: 9.99200722162646e-15</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡å‹çš„é¢„æµ‹è¶Šå‡†ç¡®ï¼Œåˆ™loglosså€¼è¶Šä½ï¼ŒçœŸå®å€¼çš„loglossæ˜¯æä½çš„ã€‚</p><h1 id="å»ºç«‹æ¨¡å‹"><a href="#å»ºç«‹æ¨¡å‹" class="headerlink" title="å»ºç«‹æ¨¡å‹"></a>å»ºç«‹æ¨¡å‹</h1><p>æˆ‘ä»¬å»ºæ¨¡å¾€å¾€éƒ½æ˜¯ä¸€å¼€å§‹å»ºç«‹ç®€å•çš„æ¨¡å‹ï¼Œç„¶åå†æ…¢æ…¢çš„ä¼˜åŒ–ã€‚</p><p>æ‰€ä»¥å¿«é€Ÿçš„å»ºç«‹æ¨¡å‹ï¼Œå¾ˆæœ‰å¿…è¦ï¼Œæˆ‘ä»¬ä» <em>mutil-class logistic regression</em> å¼€å§‹ï¼Œç®€å•çš„æ¨¡å‹æˆ‘ä»¬å°±åªé€‰æ‹©æ•°å­—ç±»å‹çš„äº†ï¼Œå…¶ä»–çš„åˆ—éƒ½ä¸è¦ï¼Œç„¶åå°†åˆ—åˆ†å¼€å»ºæ¨¡ï¼Œç„¶åæŠŠæ•´ä¸ªæ•°æ®æŒ‰è¡Œæ‹¿è¿›æ¥é¢„æµ‹ï¼Œè§‚å¯Ÿåœ¨è¿™ä¸€åˆ—æ˜¯å¦æœ‰å‡ºç°ã€‚</p><p>ä½†è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ•°æ®åˆ†å‰²æˆtrainç»„ä¸testç»„ï¼Œä½†è¿™ä¸ªæ–¹æ¡ˆåœ¨è¿™é‡Œæ˜¯ä¸è¡Œçš„ï¼Œè€Œä¸”é‚£ä¸­æƒ…å†µåªé€‚åˆå•ä¸ª target çš„æƒ…å†µã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¼šä½¿ç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°æ¥åˆ†å‰²æ•°æ®ï¼Œå«åš <em>mutil_label_train_test_split</em></p><p>éšåæˆ‘ä»¬æ‰¾å‡ºæ‰€æœ‰æ•°å­—ç±»å‹çš„featuresä½œä¸ºtrains set, æŠŠæˆ‘ä»¬æ„Ÿå…´è¶£çš„ lebels ä¹Ÿæ‹¿å‡ºæ¥ï¼ˆä»¥get_dummiesçš„å½¢å¼ï¼‰ï¼Œå°±å¯ä»¥åˆ©ç”¨è¿™ä¸¤ç»„æ•°æ®ç”Ÿæˆtrainä¸testæ•°æ®äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Create the new DataFrame: numeric_data_only</span><br><span class="line">numeric_data_only = df[NUMERIC_COLUMNS].fillna(-1000)</span><br><span class="line"></span><br><span class="line"># Get labels and convert to dummy variables: label_dummies</span><br><span class="line">label_dummies = pd.get_dummies(df[LABELS])</span><br><span class="line"></span><br><span class="line"># Create training and test sets</span><br><span class="line">X_train, X_test, y_train, y_test = multilabel_train_test_split(numeric_data_only,label_dummies,size=0.2,seed=123)</span><br><span class="line"></span><br><span class="line"># Print the info</span><br><span class="line">print(&quot;X_train info:&quot;)</span><br><span class="line">print(X_train.info())</span><br><span class="line">print(&quot;\nX_test info:&quot;)  </span><br><span class="line">print(X_test.info())</span><br><span class="line">print(&quot;\ny_train info:&quot;)  </span><br><span class="line">print(y_train.info())</span><br><span class="line">print(&quot;\ny_test info:&quot;)  </span><br><span class="line">print(y_test.info())</span><br></pre></td></tr></table></figure><p>æœ‰äº†traningæ•°æ®ä¹‹åï¼Œå°±å¯ä»¥è®­ç»ƒæ¨¡å‹å¹¶è®¡ç®—æˆ‘ä»¬çš„æ¨¡å‹å¾—åˆ†äº†ï¼Œè¿™é‡Œä¸ºäº†å°†æˆ‘ä»¬çš„åˆ—åˆ†å¼€è®¡ç®—ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <em>â€ŒOneVsRestClassifier</em> åŒ…ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># Import classifiers</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">from sklearn.multiclass import OneVsRestClassifier</span><br><span class="line"></span><br><span class="line"># Create the DataFrame: numeric_data_only</span><br><span class="line">numeric_data_only = df[NUMERIC_COLUMNS].fillna(-1000)</span><br><span class="line"></span><br><span class="line"># Get labels and convert to dummy variables: label_dummies</span><br><span class="line">label_dummies = pd.get_dummies(df[LABELS])</span><br><span class="line"></span><br><span class="line"># Create training and test sets</span><br><span class="line">X_train, X_test, y_train, y_test = multilabel_train_test_split(numeric_data_only,label_dummies,size=0.2, seed=123)</span><br><span class="line"></span><br><span class="line"># Instantiate the classifier: clf</span><br><span class="line">clf = OneVsRestClassifier(LogisticRegression())</span><br><span class="line"></span><br><span class="line"># Fit the classifier to the training data</span><br><span class="line">clf.fit(X_train,y_train)</span><br><span class="line"></span><br><span class="line"># Print the accuracy</span><br><span class="line">print(&quot;Accuracy: &#123;&#125;&quot;.format(clf.score(X_test,y_test)))</span><br></pre></td></tr></table></figure><h2 id="é¢„æµ‹"><a href="#é¢„æµ‹" class="headerlink" title="é¢„æµ‹"></a>é¢„æµ‹</h2><p>è¿™ä¸€æ¬¡æˆ‘ä»¬åˆ©ç”¨çœŸå®çš„æ•°æ®æ¥é¢„æµ‹ï¼Œè¿™äº›æ•°æ®æ˜¯æ¨¡å‹ä»æœªè§è¿‡çš„ï¼Œæˆ‘ä»¬é€šè¿‡pd.read_csvå¯¼å…¥å®ƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Instantiate the classifier: clf</span><br><span class="line">clf = OneVsRestClassifier(LogisticRegression())</span><br><span class="line"></span><br><span class="line"># Fit it to the training data</span><br><span class="line">clf.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Load the holdout data: holdout</span><br><span class="line">holdout = pd.read_csv(&quot;HoldoutData.csv&quot;,index_col=0)</span><br><span class="line"></span><br><span class="line"># Generate predictions: predictions</span><br><span class="line">predictions = clf.predict_proba(holdout[NUMERIC_COLUMNS].fillna(-1000))</span><br></pre></td></tr></table></figure><h2 id="è‡ªç„¶è¯­è¨€å¤„ç†ç®€è¦æ¦‚è¿°ï¼ˆNLPï¼‰"><a href="#è‡ªç„¶è¯­è¨€å¤„ç†ç®€è¦æ¦‚è¿°ï¼ˆNLPï¼‰" class="headerlink" title="è‡ªç„¶è¯­è¨€å¤„ç†ç®€è¦æ¦‚è¿°ï¼ˆNLPï¼‰"></a>è‡ªç„¶è¯­è¨€å¤„ç†ç®€è¦æ¦‚è¿°ï¼ˆNLPï¼‰</h2><h3 id="Tokenizing-ä¸-gram"><a href="#Tokenizing-ä¸-gram" class="headerlink" title="Tokenizing ä¸ gram"></a>Tokenizing ä¸ gram</h3><p>Tokenizingå³å°†æ–‡æœ¬å˜æˆè¯è¯­ï¼Œç®€å•çš„ç›´æ¥æŒ‰ç…§ç©ºæ ¼æˆ–è€…æ˜¯æ ‡ç‚¹ç¬¦å·åˆ†å‰²ï¼Œå¤æ‚ä¸€ç‚¹ä¼šæœ‰è‡ªæ­¤è¯†åˆ«ï¼Œå¦‚ç»“å·´åˆ†è¯ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦</span><br></pre></td></tr></table></figure><p>å˜æˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…å/ æ¸…åå¤§å­¦/ åå¤§/ å¤§å­¦</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œgramçš„é€‰æ‹©ä¼šæœ‰ä¸ä¸€æ ·çš„æ•ˆæœ,å¦‚æœgram=1ï¼Œåˆ™ç»“æœå˜æˆ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘/ æ¥/åˆ°/ åŒ—/äº¬/ æ¸…/å/ å¤§/å­¦</span><br></pre></td></tr></table></figure><p>å¦‚æœgram=2,åˆ™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘æ¥/åˆ°åŒ—/äº¬æ¸…/åå¤§/å­¦</span><br></pre></td></tr></table></figure></p><h2 id="æ–‡æœ¬åˆ°æ•°å­—"><a href="#æ–‡æœ¬åˆ°æ•°å­—" class="headerlink" title="æ–‡æœ¬åˆ°æ•°å­—"></a>æ–‡æœ¬åˆ°æ•°å­—</h2><p>ä¸Šé¢çš„è¯­å¥å˜æˆè¯è¯­ç»„ï¼Œè¿™äº›è¯è¯­å°±å«åš <code>bag of words</code></p><p>åœ¨ sklearnä¸­ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥è®¡ç®—bag of wordsï¼Œ<em>CountVectorizer</em>ã€‚</p><p>ä½¿ç”¨ä¹‹å‰ï¼Œä½ éœ€è¦ç»™CountVectorizerä¼ å…¥ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ƒæ‰çŸ¥é“å¦‚ä½•å»åˆ†å‰²å­—è¯ï¼Œå¯¹äº†ï¼Œä¸è¦å¿˜è®°å¤„ç†ä½ æ•°æ®ä¸­çš„missing value.</p><p>å½“ä½ ç”¨æ­£åˆ™åˆ›å»ºå¥½CountVectorizeråï¼Œå°±å¯ä»¥æŠŠè¯­å¥ä¼ è¿›æ¥è®¡ç®—bag of words,ä¸€æ ·å®ƒä¹Ÿæ˜¯ä½¿ç”¨fitæ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># Import CountVectorizer</span><br><span class="line">from sklearn.feature_extraction.text import CountVectorizer</span><br><span class="line"></span><br><span class="line"># Create the token pattern: TOKENS_ALPHANUMERIC</span><br><span class="line">TOKENS_ALPHANUMERIC = &apos;[A-Za-z0-9]+(?=\\s+)&apos;</span><br><span class="line"></span><br><span class="line"># Fill missing values in df.Position_Extra</span><br><span class="line">df.Position_Extra.fillna(&apos;&apos;,inplace=True)</span><br><span class="line"></span><br><span class="line"># Instantiate the CountVectorizer: vec_alphanumeric</span><br><span class="line">vec_alphanumeric = CountVectorizer(token_pattern=&apos;[A-Za-z0-9]+(?=\s+)&apos;)</span><br><span class="line"></span><br><span class="line"># Fit to the data</span><br><span class="line">vec_alphanumeric.fit(df.Position_Extra)</span><br><span class="line"></span><br><span class="line"># Print the number of tokens and first 15 tokens</span><br><span class="line">msg = &quot;There are &#123;&#125; tokens in Position_Extra if we split on non-alpha numeric&quot;</span><br><span class="line">print(msg.format(len(vec_alphanumeric.get_feature_names())))</span><br><span class="line">print(vec_alphanumeric.get_feature_names()[:15])</span><br></pre></td></tr></table></figure><h1 id="æ”¹å–„æ‚¨çš„æ¨¡å‹"><a href="#æ”¹å–„æ‚¨çš„æ¨¡å‹" class="headerlink" title="æ”¹å–„æ‚¨çš„æ¨¡å‹"></a>æ”¹å–„æ‚¨çš„æ¨¡å‹</h1><h2 id="Pipelines-feature-amp-text-preprocessing"><a href="#Pipelines-feature-amp-text-preprocessing" class="headerlink" title="Pipelines, feature &amp; text preprocessing"></a>Pipelines, feature &amp; text preprocessing</h2><p>æˆ‘ä»¬å·²ç»æ¥è§¦è¿‡piplineäº†ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬å¤„ç†æ•°æ®çš„æ­¥éª¤å˜å¾—æ›´å®¹æ˜“ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># Import Pipeline</span><br><span class="line">from sklearn.pipeline import Pipeline</span><br><span class="line"># Import other necessary modules</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">from sklearn.multiclass import OneVsRestClassifier</span><br><span class="line"></span><br><span class="line"># Split and select numeric data only, no nans</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(sample_df[[&apos;numeric&apos;]],pd.get_dummies(sample_df[&apos;label&apos;]),random_state=22)</span><br><span class="line"></span><br><span class="line"># Instantiate Pipeline object: pl</span><br><span class="line">pl = Pipeline([</span><br><span class="line">    (&apos;clf&apos;, OneVsRestClassifier(LogisticRegression()))</span><br><span class="line">])</span><br><span class="line"># Fit the pipeline to the training data</span><br><span class="line">pl.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Compute and print accuracyaccuracy = pl.score(X_test, y_test)</span><br><span class="line">print(&quot;\nAccuracy on sample data - numeric, no nans: &quot;, accuracy)</span><br></pre></td></tr></table></figure><p>å¯¹äºpiplineï¼Œå®ƒæ˜¯æŒ‰ç…§é¡ºåºæ¥æ‰§è¡Œé‡Œé¢çš„æ­¥éª¤çš„ï¼Œæ‰€ä»¥æ‚¨éœ€è¦è§„åˆ’å¥½é¡ºåºï¼Œä¾‹å¦‚å¯¹äºä½ çš„æ•°æ®ï¼Œå¦‚æœæœ‰ç¼ºå¤±å€¼ï¼Œä½ å¿…é¡»åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰å°±å°†è¿™äº›naå€¼å¤„ç†å¥½:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pl = Pipeline([</span><br><span class="line">        (&apos;imp&apos;, Imputer()),</span><br><span class="line">        (&apos;clf&apos;, OneVsRestClassifier(LogisticRegression()))</span><br><span class="line">    ])</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨äº†inputeræ¥å¤„ç†ç¼ºå¤±å€¼ã€‚</p><p>piplineå¯¹è±¡çš„ä½¿ç”¨ä¸€æ ·ä¹Ÿæ˜¯è°ƒç”¨fitæ–¹æ³•ï¼Œå¹¶ä¸”piplineå¯¹è±¡è¿˜æä¾›äº†æ‰“åˆ†çš„åŠŸèƒ½(é»˜è®¤æ˜¯accuracy)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Fit the pipeline to the training data</span><br><span class="line">pl.fit(X_train,y_train)</span><br><span class="line"></span><br><span class="line"># Compute and print accuracy</span><br><span class="line">accuracy = pl.score(X_test,y_test)</span><br></pre></td></tr></table></figure><h2 id="Text-features-and-feature-unions"><a href="#Text-features-and-feature-unions" class="headerlink" title="Text features and feature unions"></a>Text features and feature unions</h2><p>å¯¹äºæˆ‘ä»¬çš„textå€¼ï¼Œä¸å¯ä»¥æŠŠå®ƒå’Œæ•°å€¼å‹çš„æ•°æ®ä¸€èµ·å¤„ç†ï¼Œå³ä¸å¯ä»¥æ”¾åœ¨åŒä¸€ä¸ªpiplineä¸­ã€‚</p><p>æ€ä¹ˆåŠå‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨Function Transformer()å’ŒFeatureUnion()</p><p>Function Transformer()åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯æ¥å—ä¸€ä¸ªpythonå‡½æ•°ï¼ŒæŠŠå®ƒè½¬åŒ–æˆsklearnå¯ä»¥ç†è§£çš„å¯¹è±¡ï¼Œç„¶åç”¨å®ƒå»å¤„ç†æ•°æ®ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å†™ä¸¤ä¸ªå‡½æ•°ï¼Œéƒ½æ¥å—æ‰€æœ‰çš„dataframeï¼Œä½†æ˜¯ä¸€ä¸ªè¾“å‡ºtextçš„å¤„ç†ç»“æœï¼Œå¦ä¸€ä¸ªè¾“å‡ºæ•°å€¼å‹æ•°æ®çš„ç»“æœã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¯¹æ•°å€¼å‹æ•°æ®ä¸textå‹æ•°æ®åˆ†åˆ«è®¾ç½®ä¸¤å¥—piplineã€‚</p><p>åœ¨ Function Transformer() å‚æ•°é‡ï¼Œæˆ‘ä»¬å°†å‚æ•° validateè®¾ç½®ä¸ºfalseï¼Œä»¥è®©å…¶ä¸æ£€æŸ¥ç©ºå€¼ã€‚</p><p>FeatureUnionæ˜¯å¦ä¸€ä¸ªæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„åŒ…ï¼Œå½“æˆ‘ä»¬ç”¨function transformerçš„æ—¶å€™ï¼Œä¸€ä¸ªæ˜¯æ•°å€¼å‹æ•°æ®ï¼Œå¦ä¸€ä¸ªæ˜¯æ–‡æœ¬å‹æ•°æ®ï¼ŒFeatureUnionå¯ä»¥æŠŠè¿™ä¸¤ä¸ªfeaturesè”åˆåˆ°ä¸€èµ·ä½œä¸ºåŒä¸€ä¸ªæ•°ç»„ï¼Œä½œä¸ºclassifierçš„è¾“å…¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"># Import FeatureUnion</span><br><span class="line">from sklearn.pipeline import FeatureUnion</span><br><span class="line"></span><br><span class="line"># Split using ALL data in sample_df</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(sample_df[[&apos;numeric&apos;, &apos;with_missing&apos;, &apos;text&apos;]],pd.get_dummies(sample_df[&apos;label&apos;]), random_state=22)</span><br><span class="line"></span><br><span class="line"># Create a FeatureUnion with nested pipeline: process_and_join_features</span><br><span class="line">process_and_join_features = FeatureUnion(</span><br><span class="line">            transformer_list = [</span><br><span class="line">                (&apos;numeric_features&apos;, Pipeline([</span><br><span class="line">                    (&apos;selector&apos;, get_numeric_data),</span><br><span class="line">                    (&apos;imputer&apos;, Imputer())</span><br><span class="line">                ])),</span><br><span class="line">                (&apos;text_features&apos;, Pipeline([</span><br><span class="line">                    (&apos;selector&apos;, get_text_data),</span><br><span class="line">                    (&apos;vectorizer&apos;, CountVectorizer())</span><br><span class="line">                ]))</span><br><span class="line">             ]</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"># Instantiate nested pipeline: pl</span><br><span class="line">pl = Pipeline([</span><br><span class="line">        (&apos;union&apos;, process_and_join_features),</span><br><span class="line">        (&apos;clf&apos;, OneVsRestClassifier(LogisticRegression()))</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Fit pl to the training data</span><br><span class="line">pl.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Compute and print accuracy</span><br><span class="line">accuracy = pl.score(X_test, y_test)</span><br><span class="line">print(&quot;\nAccuracy on sample data - all data: &quot;, accuracy)</span><br></pre></td></tr></table></figure><h2 id="å›å½’å­¦æ ¡æ•°æ®"><a href="#å›å½’å­¦æ ¡æ•°æ®" class="headerlink" title="å›å½’å­¦æ ¡æ•°æ®"></a>å›å½’å­¦æ ¡æ•°æ®</h2><p>å¯¹äºä¹‹å‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¸­åªæœ‰ä¸€åˆ—æ˜¯æ–‡æœ¬å‹æ•°æ®ï¼Œè€Œå­¦æ ¡æ•°æ®ä¸­ï¼Œåˆ™æœ‰14åˆ—ã€‚</p><p>æˆ‘ä»¬éœ€è¦å°†è¿™äº›åˆ—éƒ½ç»“åˆèµ·æ¥ï¼Œè¿™ä¸ªå‡½æ•°å·²ç»å†™å¥½äº†ï¼Œå«åš <code>combine_text_columns</code>, å®šä¹‰å¥½ä¹‹åï¼Œåªéœ€è¦åœ¨å®šä¹‰Function Transformer()çš„æ—¶å€™æ›´æ”¹ä¸€ä¸‹å‚æ•°å°±å¥½äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># Import FunctionTransformer</span><br><span class="line">from sklearn.preprocessing import FunctionTransformer</span><br><span class="line"></span><br><span class="line"># Get the dummy encoding of the labels</span><br><span class="line">dummy_labels = pd.get_dummies(df[LABELS])</span><br><span class="line"></span><br><span class="line"># Get the columns that are features in the original df</span><br><span class="line">NON_LABELS = [c for c in df.columns if c not in LABELS]</span><br><span class="line"></span><br><span class="line"># Split into training and test sets</span><br><span class="line">X_train, X_test, y_train, y_test = multilabel_train_test_split(df[NON_LABELS],dummy_labels,0.2, seed=123)</span><br><span class="line"></span><br><span class="line"># Preprocess the text data: get_text_data</span><br><span class="line">get_text_data = FunctionTransformer(combine_text_columns,validate=False)</span><br><span class="line"></span><br><span class="line"># Preprocess the numeric data: get_numeric_data</span><br><span class="line">get_numeric_data = FunctionTransformer(lambda x: x[NUMERIC_COLUMNS], validate=False)</span><br></pre></td></tr></table></figure><p>å®šä¹‰å¥½å¤„ç†æ–‡æœ¬å’Œæ•°å­—çš„å‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å»ºç«‹æ¨¡å‹äº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># Complete the pipeline: pl</span><br><span class="line">pl = Pipeline([</span><br><span class="line">        (&apos;union&apos;, FeatureUnion(</span><br><span class="line">            transformer_list = [</span><br><span class="line">                (&apos;numeric_features&apos;, Pipeline([</span><br><span class="line">                    (&apos;selector&apos;, get_numeric_data),</span><br><span class="line">                    (&apos;imputer&apos;, Imputer())</span><br><span class="line">                ])),</span><br><span class="line">                (&apos;text_features&apos;, Pipeline([</span><br><span class="line">                    (&apos;selector&apos;, get_text_data),</span><br><span class="line">                    (&apos;vectorizer&apos;, CountVectorizer())</span><br><span class="line">                ]))</span><br><span class="line">             ]</span><br><span class="line">        )),</span><br><span class="line">        (&apos;clf&apos;, OneVsRestClassifier(LogisticRegression()))</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line"># Fit to the training data</span><br><span class="line">pl.fit(X_train,y_train)</span><br><span class="line"></span><br><span class="line"># Compute and print accuracy</span><br><span class="line">accuracy = pl.score(X_test, y_test)</span><br><span class="line">print(&quot;\nAccuracy on budget dataset: &quot;, accuracy)</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°piplineè¾“å‡ºçš„åˆ†æ•°ã€‚è¿™ä¸ªå¤„ç†çš„æ­¥éª¤æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œè¿™ä¸ªæ­¥éª¤æ˜¯é€šç”¨çš„ï¼Œè€Œä¸”å¦‚æœä½ æƒ³è¦æ›´æ¢åˆ«çš„åˆ†ç±»å™¨ï¼Œåªéœ€è¦å°† <code>LogisticRegression</code> æ”¹æˆåˆ«çš„å°±å¥½äº†ï¼Œä¾‹å¦‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œä½ æŠŠæ¨¡å‹æ”¹æˆ<em>RandomForestClassifier</em>ï¼Œå°†ä¼šæœ‰0.2çš„æå‡ï¼Œå¦‚æœæŠŠ<em>RandomForestClassifier</em>çš„å‚æ•°<em>n_estimators</em>æ”¹æˆ15ï¼Œ<em>accuracy</em> è¿˜æœ‰æœ‰æ‰€å¢åŠ ã€‚</p><h1 id="ä¸“å®¶æŒ‡ç‚¹"><a href="#ä¸“å®¶æŒ‡ç‚¹" class="headerlink" title="ä¸“å®¶æŒ‡ç‚¹"></a>ä¸“å®¶æŒ‡ç‚¹</h1><ul><li>tokenize textï¼Œä¸ä»…ä»…åªæ˜¯æ ¹æ®ç©ºæ ¼ä¸æ ‡ç‚¹æ¥å¤„ç†æ–‡å­—</li><li>n-gram statisticsï¼Œæ–‡å­—çš„é€‰æ‹©æˆ‘ä»¬å®šä¹‰gramï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŒæ—¶å®šä¹‰å¤šä¸ªgramï¼Œå¦‚,<code>CountVectorizer(token_pattern=TOKENS_ALPHANUMERIC,ngram_range=(1,2)))</code></li><li>ä½¿ç”¨é¢„çŸ¥çš„alpha-numeric sequences,å¯¹äºtextï¼Œåªæ¥å—å­—æ¯æ•°å­—åºåˆ—</li></ul><h2 id="ç»Ÿè®¡æŠ€å·§-interaction-terms"><a href="#ç»Ÿè®¡æŠ€å·§-interaction-terms" class="headerlink" title="ç»Ÿè®¡æŠ€å·§,interaction terms"></a>ç»Ÿè®¡æŠ€å·§,interaction terms</h2><p>æ¥çœ‹ä¸€ç»„ä¾‹å­,è¿™ä¸¤ç»„æ•°æ®ä¸­ï¼ŒEnglish teacherå’Œ2nd grade éƒ½æœ‰å‡ºç°</p><ul><li><em>English teacher for 2nd grade</em></li><li><em>2nd grade - budget for English teacher</em></li></ul><p>$$\beta_1x_1+\beta_2x_2+\beta_3(x_1x_2)$$</p><table><thead><tr><th style="text-align:left">x_1</th><th style="text-align:left">x_2</th><th style="text-align:left">x3</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">1</td><td style="text-align:left">x1*x2=0*1=0</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">1</td><td style="text-align:left">x1*x2=1*1=1</td></tr></tbody></table><ul><li>x1,x2ä»£è¡¨æŸä¸ªç‰¹å®šçš„tokenæœ‰å‡ºç°</li><li>betaç¬¦å·åˆ™ä»£è¡¨å…¶é‡è¦ç¨‹åº¦æˆ–è€…è¯´ç›¸å…³ç³»æ•°</li><li>x3æ˜¯x1ã€x2ä¸¤è€…çš„ä¹˜ç§¯</li></ul><p>å½“ç„¶ï¼Œsklearnæä¾›äº†ä¸€ç§éå¸¸ç›´æ¥çš„æ–¹å¼ä½¿ç”¨interaction termsï¼Œå³ï¼š<em>PolynomialFeatures</em>,</p><p>å¦å¤–è¿˜æœ‰ä¸€ä¸ªå«åšSparseInteractionsçš„åŒ…ï¼Œä¹Ÿå¯ä»¥åšåŒæ ·çš„äº‹æƒ…ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬ä¸å¯èƒ½å› ä¸ºé€‰ä¸€ä¸ªä¸ä¸€æ ·çš„æ¨¡å‹å°±æ”¹å–„æ‰€æœ‰çš„æƒ…å†µï¼Œæ¨¡å‹çš„ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ¸è¿›çš„æ­¥éª¤ï¼Œå¯èƒ½æ˜¯ä½ å°†æ¨¡å‹çš„æŸä¸ªå‚æ•°è°ƒæ•´ä¸€ä¸‹ï¼Œå¯èƒ½æ˜¯ä½ åœ¨è¯­ä¹‰å¤„ç†æ–¹é¢æ›´æ¢äº†ä¸€ä¸ªæ›´å¥½çš„å·¥å…·ï¼Œè¿™äº›ä¸œè¥¿éƒ½éœ€è¦ä½ å»æ ¹æ®ä½ çš„å®é™…æƒ…å†µä½œå‡ºè°ƒæ•´ã€‚</p><p>è¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œä¸‹ä¸€ç¯‡å°†ä¼šæ˜¯éç›‘ç£å­¦ä¹ ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default&quot;&gt;&lt;/script&gt;

&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/18/SbPAWvxuiRELnO6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¬å­¦æ ¡æ¯”æ—è¾¹çš„å­¦æ ¡åœ¨æ•™ç§‘ä¹¦ä¸Šé¢èŠ±äº†æ›´å¤šçš„é’±å—ï¼Ÿè¿™æ˜¯å¦æœ‰ç”¨å‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="data science" scheme="http://wittyfans.com/tags/data-science/"/>
    
  </entry>
  
  <entry>
    <title>scikit-learnä¸ç›‘ç£å­¦ä¹ </title>
    <link href="http://wittyfans.com/coding/scikit-learn%E4%B8%8E%E7%9B%91%E7%9D%A3%E5%AD%A6%E4%B9%A0.html"/>
    <id>http://wittyfans.com/coding/scikit-learnä¸ç›‘ç£å­¦ä¹ .html</id>
    <published>2019-07-26T09:38:14.000Z</published>
    <updated>2019-11-15T14:18:26.118Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/15/AFHezumhwD5grWB.png" alt=""></p><blockquote><p>ç»™æœºå™¨å­¦ä¹ çš„èƒ½åŠ›ï¼Œè®©å®ƒå¯ä»¥æ ¹æ®<strong>æ•°æ®</strong>è‡ªå·±åšå†³å®šçš„ä¸€ç§æŠ€æœ¯ã€‚</p></blockquote><a id="more"></a><h1 id="æœºå™¨å­¦ä¹ "><a href="#æœºå™¨å­¦ä¹ " class="headerlink" title="æœºå™¨å­¦ä¹ "></a>æœºå™¨å­¦ä¹ </h1><h2 id="ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ "><a href="#ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ " class="headerlink" title="ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ "></a>ç›‘ç£å­¦ä¹ ä¸éç›‘ç£å­¦ä¹ </h2><p>ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿå®ƒæ˜¯ç»™æœºå™¨å­¦ä¹ çš„èƒ½åŠ›ï¼Œè®©å®ƒå¯ä»¥æ ¹æ®<strong>æ•°æ®</strong>è‡ªå·±åšå†³å®šçš„ä¸€ç§æŠ€æœ¯ã€‚</p><p>å¦‚ï¼Œç”µå­é‚®ä»¶æ˜¯å¦æ˜¯åƒåœ¾é‚®ä»¶ï¼Œæ ¹æ®æ•°æ®è‡ªåŠ¨åˆ†ç±»ã€‚</p><p>å¦‚æœæ‚¨ä½¿ç”¨çš„<strong>æ•°æ®</strong>ï¼Œæ˜¯labledçš„ï¼Œè¿™å°±å«ç›‘ç£å­¦ä¹ ï¼Œå¦‚æœæ˜¯ä¸unlabeledï¼Œåˆ™æ˜¯éç›‘ç£å­¦ä¹ ã€‚</p><p>éç›‘ç£å­¦ä¹ çš„ä¾‹å­ï¼Œå¦‚ä¼ä¸šæ ¹æ®ç”¨æˆ·çš„æ•°æ®ï¼Œå¯¹ç”¨æˆ·è¿›è¡Œåˆ†ç±»(clustering).</p><blockquote><p>clusteringï¼Œéç›‘ç£å­¦ä¹ çš„ä¸€ä¸ªåˆ†æ”¯ã€‚</p></blockquote><h2 id="Reinforcement-learning"><a href="#Reinforcement-learning" class="headerlink" title="Reinforcement learning"></a>Reinforcement learning</h2><p>è¿™æ˜¯ä¸€ç§å¯¹ç³»ç»Ÿè¿›è¡Œå¥–èµä¸æƒ©ç½šçš„è®­ç»ƒæŠ€æœ¯ï¼Œè®©æœºå™¨å¯ä»¥æ ¹æ®ç¯å¢ƒçš„å˜åŒ–ä½œå‡ºååº”,å…¸å‹çš„åº”ç”¨å¦‚é˜¿æ³•ç‹—ã€‚</p><p>æˆ‘ä»¬å°†é¦–å…ˆfocusåœ¨ç›‘ç£å­¦ä¹ è¿™éƒ¨åˆ†ã€‚</p><p>æˆ‘ä»¬å°†æ ¹æ®æ•°æ®æ¥è®­ç»ƒï¼Œè¿™äº›æ•°æ®å«åš <code>prodictor varibles</code> æˆ–è€… <code>features</code>,<code>indenpendent varibles</code>ï¼Œè®­ç»ƒçš„ç›®çš„æ˜¯è¦åšå‡ºé¢„æµ‹ï¼Œè¦é¢„æµ‹çš„å€¼å«åš <code>target varibles</code>,<code>denpendent varibles</code>æˆ–<code>response varible</code>, å¦‚æœé¢„æµ‹çš„å€¼æ˜¯ä¸€ç»„åˆ†ç±»ä¿¡æ¯ï¼Œå¦‚èŠ±çš„å“ç§ï¼Œäººçš„æ€§æ ¼ï¼Œè¿™ç§é¢„æµ‹å«åš<code>classfication</code>,å¦‚æœæ˜¯ä¸€äº›è¿ç»­çš„å€¼ï¼Œå¦‚è‚¡ç¥¨çš„ä»·æ ¼ï¼Œé‚£å°±å«åš<code>regression</code>.</p><p>ç°åœ¨æˆ‘ä»¬å…ˆå­¦ä¹  <code>classfication</code>.</p><p>å¯¹äºç›‘ç£å­¦ä¹ ï¼Œé¦–å…ˆéœ€è¦æ•°æ®ï¼Œé‚£ä¹ˆæ•°æ®ä»å“ªé‡Œæ¥ï¼Ÿ</p><ul><li>å†å²çš„æ•°æ®ï¼Œå·²ç»åšå¥½äº†åˆ†ç±»</li><li>é€šè¿‡è‡ªå·±çš„è¯•éªŒè·å–ï¼Œå¦‚A/B Test</li></ul><p>æœºå™¨å­¦ä¹ çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯ç”¨ <code>scikit-learn</code>æˆ–è€…è¯´<code>sklearn</code>.</p><p>å…¶ä»–çš„å·¥å…·åŒ…æ‹¬:</p><ul><li>TensorFlow</li><li>keras</li></ul><h1 id="æ¢ç´¢æ•°æ®"><a href="#æ¢ç´¢æ•°æ®" class="headerlink" title="æ¢ç´¢æ•°æ®"></a>æ¢ç´¢æ•°æ®</h1><h2 id="ç¤ºä¾‹æ•°æ®"><a href="#ç¤ºä¾‹æ•°æ®" class="headerlink" title="ç¤ºä¾‹æ•°æ®"></a>ç¤ºä¾‹æ•°æ®</h2><p>ä¸»è¦æ˜¯ç”¨èŠ±ç“£çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…æ‹¬:</p><ul><li>petal lengh, èŠ±ç“£é•¿åº¦</li><li>petal widthï¼ŒèŠ±ç“£å®½åº¦</li><li>sepal lengthï¼Œè¼ç‰‡ <code>Ã¨piÃ n</code> é•¿åº¦</li><li>sepal widthï¼Œè¼ç‰‡ <code>Ã¨piÃ n</code> å®½åº¦</li></ul><blockquote><p>è¼ç‰‡ï¼Œå³èŠ±ç“£ä¸‹é¢ï¼ŒåŒ…ä½èŠ±çš„é‚£éƒ¨åˆ†ã€‚</p></blockquote><p>å…³äºèŠ±ï¼Œæœ‰ä¸åŒçš„å“ç§ï¼Œåœ¨è‹±æ–‡ä¸­å«åš<code>species</code>ï¼Œæˆ‘ä»¬çš„æ•°æ®ä¸­æœ‰ä¸‰ç§ï¼ŒIris Setosaï¼ˆå±±é¸¢å°¾ï¼‰ã€Iris Versicolourï¼ˆæ‚è‰²é¸¢å°¾ï¼‰ï¼Œä»¥åŠIris Virginicaï¼ˆç»´å‰å°¼äºšé¸¢å°¾ï¼‰ã€‚</p><p>æ•°æ®æ€ä¹ˆå¯¼å…¥å‘¢ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from sklearn import datasets</span><br><span class="line">iris = datases.load_iris()</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯bunchç±»å‹çš„æ•°æ®ï¼Œè·Ÿpythonå†…ç½®çš„dictæ•°æ®å·®ä¸å¤šã€‚</p><blockquote><p>å¯¹äºæ•°æ®ï¼Œè®°ä½,sample in rows, features are columns.</p></blockquote><h2 id="å®ä¾‹æ•°æ®"><a href="#å®ä¾‹æ•°æ®" class="headerlink" title="å®ä¾‹æ•°æ®"></a>å®ä¾‹æ•°æ®</h2><p>ç¾å›½ä¼—è®®å‘˜è®®å‘˜æ•°æ®,US House of Representatives Congressmen.</p><p>æˆ‘ä»¬å»é¢„æµ‹å®ƒä»¬çš„æ”¿å…šéš¶å±å…³ç³»(party affiliation),å³ï¼š</p><ul><li>â€˜Democratâ€™,æ°‘ä¸»å…š</li><li>â€˜Republicanâ€™ï¼Œå…±å’Œå…š</li></ul><p>æ ¹æ®ä»€ä¹ˆæ¥é¢„æµ‹å‘¢ï¼Ÿæ ¹æ®å®ƒä»¬å¯¹ç‰¹å®šé—®é¢˜çš„æŠ•ç¥¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[&apos;party&apos;, &apos;infants&apos;, &apos;water&apos;, &apos;budget&apos;,</span><br><span class="line">&apos;physician&apos;, &apos;salvador&apos;,&apos;religious&apos;,</span><br><span class="line">&apos;satellite&apos;, &apos;aid&apos;, &apos;missile&apos;, &apos;immigration&apos;,</span><br><span class="line">&apos;synfuels&apos;,&apos;education&apos;, &apos;superfund&apos;,</span><br><span class="line">&apos;crime&apos;, &apos;duty_free_exports&apos;, &apos;eaa_rsa&apos;]</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯æ•°æ®é›†çš„åˆ—åï¼Œå³ä¸€äº›è®®é¢˜çš„æŠ•ç¥¨æƒ…å†µã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨countplotå›¾æ¥æ¢ç´¢è¿™äº›æ•°æ®ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plt.figure()</span><br><span class="line">sns.countplot(x=&apos;education&apos;, hue=&apos;party&apos;, data=df, palette=&apos;RdBu&apos;)</span><br><span class="line">plt.xticks([0,1], [&apos;No&apos;, &apos;Yes&apos;])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="Classification"><a href="#Classification" class="headerlink" title="Classification"></a>Classification</h1><p>æˆ‘ä»¬æ‰‹å¤´æœ‰labledçš„æ•°æ®ï¼Œä½†æˆ‘ä»¬è¿˜éœ€è¦å¯¹é‚£äº›æ²¡æœ‰æ ‡è®°çš„æ•°æ®è¿›è¡Œæ ‡è®°ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ ‡è®°è¿‡æ•°æ®å­¦ä¹ ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªæ ‡è®°å™¨ã€‚</p><p>æ ‡è®°è¿‡çš„æ•°æ®å«åštraning data.</p><h3 id="æ ‡è®°æ•°æ®-KNNç®—æ³•"><a href="#æ ‡è®°æ•°æ®-KNNç®—æ³•" class="headerlink" title="æ ‡è®°æ•°æ®-KNNç®—æ³•"></a>æ ‡è®°æ•°æ®-KNNç®—æ³•</h3><p>æˆ‘ä»¬ç”¨knnç®—æ³•æ¥å®ç°è¿™ä¸ªæ­¥éª¤ï¼Œknnæ˜¯æ ¹æ®æ•°æ®çš„é‚»å±…æ¥é¢„æµ‹çš„ä¸€ç§ç®—æ³•ï¼Œæ¯”å¦‚æ”¾çœ¼æœ›å…¨ä¸–ç•Œï¼Œå¦‚æœæ‚¨çš„ä½ç½®åœ¨ä¸­å›½ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥é¢„æµ‹æ‚¨æœ‰å¾ˆå¤§çš„å‡ ç‡æ˜¯ä¸­å›½äººï¼Œå› ä¸ºæ‚¨å’Œå¾ˆå¤šçš„ä¸­å›½äººåœ¨ä¸€èµ·ï¼Œå¯¹äºknnç®—æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ ¹æ®knnç®—æ³•å»ºç«‹æ¨¡å‹å¹¶è®­ç»ƒï¼Œè®­ç»ƒæ¨¡å‹æˆ‘ä»¬å«fiting modalï¼Œåœ¨sklearnä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>fit()</code>æ–¹æ³•ï¼Œè€Œ<code>predit()</code>ç”¨æ¥é¢„æµ‹ã€‚</p><p>å¦‚:<code>knn.fit(iris[&#39;data],iris[&#39;target&#39;])</code></p><p>ä½¿ç”¨knn fitæ–¹æ³•çš„æ¡ä»¶:</p><ol><li>npæˆ–è€…pdç±»å‹çš„æ•°æ®</li><li>featuresæ˜¯è¿ç»­å‹çš„æ•°æ®ï¼Œä¸æ˜¯åˆ†ç±»æ•°æ®</li><li>æ²¡æœ‰ç¼ºå¤±å€¼</li></ol><p>fitåï¼Œknnä¼šè¿”å›fitåçš„åˆ†ç±»å™¨ï¼ˆclassifierï¼‰æœ¬èº«ï¼Œç„¶åå°±å¯ä»¥æ‹¿æ¥ä½¿ç”¨äº†ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Import KNeighborsClassifier from sklearn.neighbors</span><br><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line"></span><br><span class="line"># Create arrays for the features and the response variable</span><br><span class="line">y = df[&apos;party&apos;].values</span><br><span class="line">X = df.drop(&apos;party&apos;, axis=1).values</span><br><span class="line"></span><br><span class="line"># Create a k-NN classifier with 6 neighbors</span><br><span class="line">knn = KNeighborsClassifier(n_neighbors=6)</span><br><span class="line"></span><br><span class="line"># Fit the classifier to the data</span><br><span class="line">knn.fit(X,y)</span><br></pre></td></tr></table></figure><p>neighborsè®¾ç½®ä¸º6ï¼Œè¿™æ˜¯è¿™ä¸ªç¤ºä¾‹é»˜è®¤çš„å€¼ï¼Œæ‚¨å¯ä»¥è®¾ç½®æˆå…¶ä»–çš„å€¼ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ6æ˜¯æœ€åˆé€‚çš„ã€‚</p><h2 id="æµ‹è¯•æ¨¡å‹æ€§èƒ½-Accuracy"><a href="#æµ‹è¯•æ¨¡å‹æ€§èƒ½-Accuracy" class="headerlink" title="æµ‹è¯•æ¨¡å‹æ€§èƒ½-Accuracy"></a>æµ‹è¯•æ¨¡å‹æ€§èƒ½-Accuracy</h2><p>accuracyæ˜¯æµ‹è¯•ä¸€ä¸ªæ¨¡å‹çš„æŒ‡æ ‡ï¼Œè®¡ç®—æ–¹æ³•æ˜¯æ¨¡å‹çš„<code>æ­£ç¡®é¢„æµ‹æ•°/æµ‹è¯•æ•°æ®æ€»æ•°</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç”¨ä»€ä¹ˆæ•°æ®æ¥ç®—accuracyå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬è‚¯å®šéœ€è¦ç”¨ä»æ¥æ²¡æœ‰ç»™æ¨¡å‹ç”¨è¿‡çš„æ•°æ®æ¥è®¡ç®—ï¼Œä¹Ÿä¸èƒ½ç”¨é‚£äº›è®­ç»ƒè¿‡æ¨¡å‹çš„æ•°æ®ã€‚</p><p>æ‰€ä»¥ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯ï¼Œå°†æ•°æ®åˆ†æˆä¸¤ç»„ï¼š</p><ol><li>traning set,ç”¨æ¥è®­ç»ƒæ¨¡å‹</li><li>test setï¼Œç”¨æ¥é¢„æµ‹ï¼Œæµ‹è¯•æ¨¡å‹æ€§èƒ½</li></ol><p>æˆ‘ä»¬ç”¨<code>train_test_split</code> æ–¹æ³•æ¥å®ç°ï¼Œè¿™ä¸ªæ–¹æ³•çš„å‚æ•°ä¸­ï¼Œ</p><ul><li>xï¼Œyå°±ä¸å¤šä»‹ç»</li><li>test_sizeä¸ºæ‚¨è¦åˆ†éš”çš„æ¯”ä¾‹ï¼Œä¸€èˆ¬æ¥è¯´traingå 0.7ï¼Œtestå 0.3</li><li><p>stratifyè®¾ç½®ä¸ºyï¼ˆyåŒ…å«lableï¼‰ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥è®©æ‚¨çš„lableï¼ˆåˆ†ç±»æ•°æ®ï¼‰æ¯”è¾ƒå‡åŒ€çš„åˆ†å¸ƒåœ¨åˆ†éš”åçš„æ•°æ®ä¸­ï¼Œä¸è‡³äºè¿‡äºé›†ä¸­</p><p>  è®­ç»ƒå®Œæˆä¹‹åï¼Œå¯ä»¥é¢„æµ‹ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨<code>knn.score(x_test,y_testx)</code>æŸ¥çœ‹æ¨¡å‹çš„åˆ†æ•°ã€‚</p></li></ul><p>å¦å¤–å¯¹äºn_neighborsï¼Œè®¾ç½®çš„å€¼è¶Šå¤§ï¼Œåˆ™æ•°æ®é›†ä¹‹é—´çš„åˆ†ç•Œçº¿ï¼ˆdecision boundaryï¼‰è¶Šä¸æ•æ„Ÿï¼Œæ›²çº¿å˜å¾—æ›´å¹³æ»‘ï¼Œæ›´å°‘çš„æ³¢åŠ¨ï¼Œä½†å¤ªå¤§ä¼šå¯¼è‡´overfitting,è€Œå¤ªå°ä¼šå¯¼è‡´underfitingã€‚</p><h1 id="Regression"><a href="#Regression" class="headerlink" title="Regression"></a>Regression</h1><p>regressioné—®é¢˜æ˜¯è¿ç»­å‹çš„å€¼çš„é¢„æµ‹ï¼Œå¦‚gdp, æˆ¿ä»·ã€‚</p><p>æˆ‘ä»¬å¯¹æ³¢å£«é¡¿æˆ¿ä»·çš„æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œxå€¼ä¸ºä¸€ä¸ªè¡—åŒºä¸­çš„æˆ¿å­æˆ¿é—´çš„å¹³å‡æ•°é‡ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œæˆ¿é—´æ•°è¶Šå¤šï¼Œä»·æ ¼è¶Šé«˜ã€‚</p><p>regressionçš„é¢„æµ‹ä½¿ç”¨çš„æ˜¯ <code>linear_model</code>æ¨¡å—ã€‚</p><h2 id="çº¿æ€§å›å½’åŸºç¡€"><a href="#çº¿æ€§å›å½’åŸºç¡€" class="headerlink" title="çº¿æ€§å›å½’åŸºç¡€"></a>çº¿æ€§å›å½’åŸºç¡€</h2><p>çº¿æ€§å›å½’çš„åŸºç¡€å°±æ˜¯<code>y=a*x+b</code>ç±»ä¼¼çš„ä¸€æ¬¡å‡½æ•°,yæ˜¯æˆ‘ä»¬éœ€è¦é¢„æµ‹çš„å€¼ï¼Œxæ˜¯æˆ‘ä»¬çš„featuresï¼Œæˆ‘ä»¬åšçš„å°±æ˜¯å»å¯»æ‰¾æœ€åˆé€‚çš„aä¸bï¼Œç¡®å®šæœ€åˆé€‚çš„é‚£ä¸ªå‡½æ•°ã€‚</p><p>è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å«åšlossæˆ–è€…costå‡½æ•°ï¼Œæˆ‘ä»¬ä¸ºè¿™ä¸ªå‡½æ•°æ‰¾åˆ°æœ€åˆé€‚çš„aä¸bå€¼ï¼Œè®©å®ƒç¡®å®šçš„è¿™ä¸ªçº¿ï¼Œè·Ÿæ‰€æœ‰å›¾ä¸­çš„ç‚¹çš„çš„ <strong>å‚ç›´</strong> è·ç¦»æœ€è¿‘ï¼Œè¿™é‡Œæ‰€è¯´çš„è·ç¦»å°±å«åš <code>residual</code>ã€‚</p><p><img src="https://i.loli.net/2019/11/15/9sEMrji8LR5AXUt.png" alt="Residual"></p><p>æˆ‘ä»¬å¯ä»¥å°è¯•å‡å°‘æ‰€æœ‰ <code>risidual</code> ç›¸åŠ çš„å’Œï¼Œä½†æ˜¯æ­£è´Ÿä¼šæŠµæ¶ˆï¼Œå› ä¸ºç‚¹è·ç¦»çº¿çš„è·ç¦»æœ‰æ­£è´Ÿï¼Œé‚£ä¹ˆæˆ‘ä»¬å‡å°‘è¿™ä¸ªè·ç¦»çš„å¹³æ–¹çš„å’Œä¼šæ¯”è¾ƒå¥½ï¼Œå³å°†æ‰€æœ‰çš„ç‚¹ä¸çº¿æ®µçš„è·ç¦»å¹³æ–¹åï¼Œå†ç›¸åŠ ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå°±å«åšæœ€å°äºŒä¹˜æ³•ï¼ˆordinary least squaresï¼‰æˆ–è€…è¯´OLS.</p><p>å½“æˆ‘ä»¬è®­ç»ƒçš„æ¨¡å‹åªæœ‰ä¸€ä¸ªfeatureçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>y=a*x+b</code>,å½“featureå¢åŠ åˆ°ä¸¤ä¸ªï¼Œåˆ™ä½¿ç”¨<code>y=a1*x1+a2*x2+b</code>,ä»¥æ­¤ç±»æ¨ã€‚</p><p>æ‰€ä»¥å¦‚æœæœ‰ä¸¤ä¸ªfeatureçš„æƒ…å†µï¼Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯ç¡®å®šå‡½æ•°ä¸­ä¸‰ä¸ªæ•°çš„å€¼ï¼Œ<code>a1,a2,b</code>.</p><h2 id="å®ä¾‹è®²è§£"><a href="#å®ä¾‹è®²è§£" class="headerlink" title="å®ä¾‹è®²è§£"></a>å®ä¾‹è®²è§£</h2><p>æˆ‘ä»¬ç°åœ¨æ ¹æ®äººçš„ç”Ÿè‚²ç‡æ¥é¢„æµ‹å¯¿å‘½ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„xå€¼å°±æ˜¯ç”Ÿè‚²ç‡ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒä½œä¸ºå‚æ•°ä¼ ç»™å›å½’å™¨ï¼Œæˆ‘ä»¬çš„ç”Ÿè‚²ç‡æ˜¯æœ‰ä¸€ä¸ªèŒƒå›´çš„ï¼Œä¸å¯èƒ½ä¸ºè´Ÿæ•°ï¼Œä¹Ÿä¸å¯èƒ½æ˜¯å¥½å‡ ç™¾ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»æ”¶é›†åˆ°çš„çœŸå®æ•°æ®ä¸­æ‰¾åˆ°æœ€å°çš„å’Œæœ€å¤§çš„ä½œä¸ºç”Ÿè‚²ç‡çš„èŒƒå›´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># å¯¼å…¥ç›¸å…³çš„åŒ…</span><br><span class="line">from sklearn.linear_model import LinearRegression</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºå›å½’å™¨</span><br><span class="line">reg = LinearRegression()</span><br><span class="line"></span><br><span class="line"># ç¡®å®šç”Ÿè‚²ç‡çš„èŒƒå›´ï¼Œå¹¶reshapeä¸ºå›å½’å™¨éœ€è¦çš„shapeï¼ˆè¿™é‡Œçš„æ•°æ®æ˜¯ç»™é¢„æµ‹å™¨é¢„æµ‹ç”¨çš„ï¼‰</span><br><span class="line">prediction_space = np.linspace(min(X_fertility), max(X_fertility)).reshape(-1,1)</span><br><span class="line"></span><br><span class="line"># æŠŠæ”¶é›†åˆ°çš„æ•°æ®xä¸yä¼ ç»™å›å½’å™¨ï¼Œè®©å®ƒå­¦ä¼šæ€ä¹ˆå›å½’</span><br><span class="line">reg.fit(X_fertility,y)</span><br><span class="line"></span><br><span class="line"># å­¦ä¼šå›å½’ä¹‹åï¼ŒæŠŠæˆ‘ä»¬ç¡®å®šå¥½çš„ç”Ÿè‚²ç‡èŒƒå›´æ•°æ®ä¼ ç»™é¢„æµ‹å™¨</span><br><span class="line">y_pred = reg.predict(prediction_space)</span><br><span class="line"></span><br><span class="line"># æ‰“å° R^2 ï¼Œè¯„åˆ†</span><br><span class="line">print(reg.score(X_fertility, y))</span><br><span class="line"></span><br><span class="line"># ç»˜å›¾</span><br><span class="line">plt.plot(prediction_space, y_pred, color=&apos;black&apos;, linewidth=3)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h2 id="åˆ†å‰²æ•°æ®"><a href="#åˆ†å‰²æ•°æ®" class="headerlink" title="åˆ†å‰²æ•°æ®"></a>åˆ†å‰²æ•°æ®</h2><p>æˆ‘ä»¬æåˆ°è¿‡åˆ†å‰²æ•°æ®çš„æ¦‚å¿µï¼Œä¸»è¦æ˜¯ä½¿ç”¨<code>train_test_split</code>åŒ…æ–¹æ³•ã€‚<br>åˆ†éš”å¥½æ•°æ®åæˆ‘ä»¬å³å¯è¿›è¡Œé¢„æµ‹ï¼Œé¢„æµ‹åçš„æ•°æ®ä½¿ç”¨å›å½’å™¨çš„scoreæ–¹æ³•æŸ¥çœ‹é¢„æµ‹æ•ˆæœï¼Œå¦å¤–è¿™é‡Œè¿˜ä»‹ç»ä¸€ä¸ªå¯¹é¢„æµ‹æ•ˆæœçš„æ‰“åˆ†å·¥å…·ï¼Œå³<code>mean_squared_error</code>.</p><p>æ‚¨å¯ä»¥é€šè¿‡ <code>from sklearn.metrics import mean_squared_error</code> å¼•å…¥å¹¶ä½¿ç”¨å®ƒã€‚</p><p>å®ƒåˆå«åš <em>Root Mean Squared Error (RMSE)</em>.</p><p>å®ƒä½¿ç”¨çš„å‚æ•°æ˜¯é¢„æµ‹çš„æ•°æ®ä¸çœŸå®çš„æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># y_testå·²cå¥½</span><br><span class="line"></span><br><span class="line">y_pred = reg.predict(X_test)</span><br><span class="line">rmse = np.sqrt(mean_squared_error(y_test,y_pred))</span><br></pre></td></tr></table></figure><h2 id="Cross-validation"><a href="#Cross-validation" class="headerlink" title="Cross-validation"></a>Cross-validation</h2><p>RMSEçš„åˆ†æ•°å’Œæ‚¨åˆ†å‰²æ•°æ®çš„æ–¹å¼æ˜¯æœ‰å…³ç³»çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§ç§‘å­¦çš„åˆ†å‰²æ–¹å¼ã€‚<br>åœ¨testçš„æ•°æ®ä¸­ï¼Œå¯èƒ½ä¼šå­˜åœ¨ä¸€ç§æ•°æ®å±‚é¢çš„ <em>peculiarities</em> å¯¼è‡´å®ƒä¸èƒ½ä»£è¡¨æ¨¡å‹å¯¹æ–°æ•°æ®çš„é¢„æµ‹èƒ½åŠ›ã€‚<br>è§£å†³è¿™ä¸ªé—®é¢˜çš„æŠ€æœ¯å°±å«åš <em>cross-validation</em>,å®ƒå°†æ‰€æœ‰æ•°æ®åˆ†ç»„ï¼Œå¹¶åˆ†åˆ«ä½œä¸ºæµ‹è¯•ä¸è®­ç»ƒç»„ï¼Œè¿™æ ·ä¾¿å¯ä»¥æœ€å¤§åŒ–è®­ç»ƒçš„æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿå°†æ‰€æœ‰çš„å¯¹æ‰€æœ‰çš„æ•°æ®è¿›è¡Œäº†é¢„æµ‹ã€‚</p><p>å…ˆç®€å•ä»‹ç»ä¸‹ <em>cross-validation</em> çš„æ­¥éª¤ï¼š</p><ol><li>å°†æ•°æ®åˆ†éš”æˆ5ï¼ˆæˆ–è€…åˆ«çš„ï¼‰ç»„ï¼Œè¿™é‡Œå¯ä»¥è¯´ç»„ group,ä¹Ÿæœ‰äººè¯´fold</li><li>å°†ç¬¬ä¸€ç»„ä½œä¸ºtestç»„ï¼Œå‰©ä¸‹çš„4ç»„ä½œä¸ºtrainingç»„ï¼Œtrainingå®Œæˆåï¼Œé¢„æµ‹testç»„çš„æ•°æ®ï¼Œè®¡ç®—å‡ºç»“æœä½œä¸ºæ ‡å‡†ï¼ˆMetric1ï¼‰</li><li>å°†ç¬¬äºŒç»„ä½œä¸ºtestï¼Œé‡å¤ç›´åˆ°æœ€åä¸€ç»„(metric1,2,3,4,5)</li><li>å¯¹5ç»„metricè¿›è¡Œç»Ÿè®¡åˆ†æï¼Œå¦‚meanï¼Œmedianï¼Œç½®ä¿¡åŒºé—´ç­‰ç­‰</li></ol><blockquote><p>åˆ†å‰²æˆ5ç»„ï¼Œå³5folds = 5-fold CV, 10 folds = 10 folds CV,ç»„æ•°è¶Šå¤šï¼Œæ‰€éœ€è¦çš„è®¡ç®—é‡å°±å¤§ã€‚</p></blockquote><h2 id="Regularized-regression"><a href="#Regularized-regression" class="headerlink" title="Regularized regression"></a>Regularized regression</h2><p>å›å¿†ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯¹äºçº¿æ€§å›å½’çš„å®šä¹‰ï¼Œæˆ‘ä»¬æ‰¾åˆ°ä¸æ‰€æœ‰ç‚¹çš„å‚ç›´è·ç¦»æœ€çŸ­çš„çº¿,å³ç¡®å®šè¿™ä¸ªä¸€æ¬¡å‡½æ•°çš„ç³»æ•°ï¼ˆcoefficientï¼‰ï¼Œä½†å¦‚æœæˆ‘ä»¬è®©è¿™äº›ç³»æ•°æˆ–è€…è¯´å‚æ•°å¾ˆå¤§ï¼Œæˆ‘ä»¬å°±ä¼šè¿‡åº¦æ‹Ÿåˆï¼ˆoverfittingï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ§åˆ¶è¿™ä¸ªç³»æ•°ï¼ˆcoefficientï¼‰ï¼Œå¦‚æœcoefficientå˜å¾—å¾ˆå¤§ï¼Œå®ƒå°±æ˜¯ä¸å¬è¯ï¼Œé‚£æˆ‘ä»¬å°±å¯¹å‡½æ•°åšå‡ºæƒ©ç½šï¼Œæˆ‘ä»¬çŸ¥é“regulationæ˜¯åˆè§„çš„æ„æ€ï¼Œè¿™é‡Œçš„ä¹Ÿå°±æ˜¯è¯´å¯¹regressionçš„å‚æ•°ä½œå‡ºè§„èŒƒã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šä»‹ç»ä¸€äº›å¸¸è§çš„regulationã€‚</p><h3 id="Ridge-regression-å²­å›å½’"><a href="#Ridge-regression-å²­å›å½’" class="headerlink" title="Ridge regression å²­å›å½’"></a>Ridge regression å²­å›å½’</h3><p>ridge regressionå°±æ˜¯ä¸€ä¸ªåŠ å¼ºç‰ˆçš„OLS loss functionï¼Œå®ƒå¤šäº†ä¸€ä¸ª<code>é˜¿å°”æ³•</code>å‚æ•°ï¼Œå½“é˜¿å°”æ³•ä¸º0çš„æ—¶å€™ï¼Œridge regressionå˜æˆäº†æ™®é€šçš„olså‡½æ•°ï¼Œå½“é˜¿å°”æ³•å˜å¾—å¾ˆå¤§ï¼Œå¯¹overfittingçš„æƒ©ç½šä¹Ÿå˜å¾—æ›´å¤§ï¼Œæ›´æ•æ„Ÿï¼Œè¿™ä¼šè®©æ¨¡å‹å˜å¾—è¿‡äºç®€å•(underfitting).</p><p>å¯¹äºridge regressionçš„ä½¿ç”¨ï¼Œå®ƒå¤šäº†ä¸ªalphaå‚æ•°ã€‚å¦å¤–å¯¹äºä¸åŒå‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒ <em>å½’ä¸€åŒ–</em>ï¼Œæ‰€ä»¥åœ¨åˆå§‹åŒ–ridgeå®ä¾‹çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®š <code>normalize=true</code>.</p><h3 id="Lasso-regression-å¥—ç´¢å›å½’"><a href="#Lasso-regression-å¥—ç´¢å›å½’" class="headerlink" title="Lasso regression å¥—ç´¢å›å½’"></a>Lasso regression å¥—ç´¢å›å½’</h3><p>Lassonå›å½’çš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒå¯ä»¥è‡ªå·±é€‰æ‹©featureï¼Œè¿™æ ·å°±ä¼šæŠŠé‚£äº›ä¸é‡è¦featuresçš„ç³»æ•°é™ä¸ºæˆ–è€…è¯´ï¼ˆshrinkï¼‰ä¸º0.</p><p>å½“æˆ‘ä»¬è®­ç»ƒå¥½æ¨¡å‹åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>.coef_</code> æ¥æŸ¥çœ‹æ¨¡å‹ä¸­å„ä¸ªfeaturesçš„æƒé‡ï¼Œæˆ–è€…è¯´åå¥½ã€‚</p><p>ä¸‹é¢æ˜¯å…³äº coef_ çš„è§£é‡Šã€‚ï¼š</p><blockquote><p><em>The coef_ contain the coefficients for the prediction of each of the targets. It is also the same as if you trained a model to predict each of the targets separately.</em></p></blockquote><p>æˆ‘ä»¬å¯ä»¥å°†columnsä¸conef_ç»˜å›¾ï¼Œè¿™å°±å¯ä»¥çœ‹åˆ°å“ªäº›featueså¯¹æ¨¡å‹çš„å½±å“æ˜¯æœ€å¤§çš„ï¼Œè¿™åœ¨è®¸å¤šçš„bussnissä¸ç§‘å­¦å®éªŒä¸­éƒ½æœ‰å¾ˆå¤šåº”ç”¨ã€‚</p><p><strong>é™„ï¼šå…³äºLassoçš„Pythonå®è·µ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Import Lasso</span><br><span class="line">from sklearn.linear_model import Lasso</span><br><span class="line"></span><br><span class="line"># Instantiate a lasso regressor: lasso</span><br><span class="line">lasso = Lasso(alpha=0.4,normalize=True)</span><br><span class="line"></span><br><span class="line"># Fit the regressor to the data</span><br><span class="line">lasso.fit(X,y)</span><br><span class="line"></span><br><span class="line"># Compute and print the coefficients</span><br><span class="line">lasso_coef = lasso.coef_</span><br><span class="line">print(lasso_coef)</span><br><span class="line"></span><br><span class="line"># Plot the coefficients</span><br><span class="line">plt.plot(range(len(df_columns)), lasso_coef)</span><br><span class="line">plt.xticks(range(len(df_columns)), df_columns.values, rotation=60)</span><br><span class="line">plt.margins(0.02)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>Lassoéå¸¸é€‚åˆé€‰æ‹©featuresï¼Œä½†æ˜¯åœ¨æ„å»ºå›å½’æ¨¡å‹æ—¶ï¼ŒRidgeå›å½’åº”è¯¥æ˜¯æ‚¨çš„é¦–é€‰ã€‚</p><p>å…³äºé˜¿å°”æ³•å‚æ•°å¯¹ridgeçš„å½±å“ï¼Œå¯ä»¥å¤šç ”ç©¶ç ”ç©¶<a href="https://campus.datacamp.com/courses/supervised-learning-with-scikit-learn/regression-2?ex=13" target="_blank" rel="noopener">è¿™ä¸ª</a>ç« èŠ‚ã€‚</p><h1 id="è°ƒæ•´æ¨¡å‹"><a href="#è°ƒæ•´æ¨¡å‹" class="headerlink" title="è°ƒæ•´æ¨¡å‹"></a>è°ƒæ•´æ¨¡å‹</h1><p>è®­ç»ƒå¥½æ¨¡å‹ä¹‹åï¼Œå¹¶ä¸èƒ½å®Œç¾çš„é¢„æµ‹æ•°æ®ï¼Œå°±å¦‚æ‰“ç£¨ä»»ä½•ä¸€ä»¶äº§å“ï¼Œç²—åŠ å·¥åè¿˜éœ€è¦ç»†è…»çš„æ‰“ç£¨ã€‚è¿™ä¸€èŠ‚å°†ä¼šå¼•å…¥ä¸€äº›å…¶ä»–çš„metricæ¥è¡¡é‡æ‚¨å»ºç«‹çš„æ¨¡å‹ï¼ŒåŒæ—¶ä¹Ÿä¼šä»‹ç»ä¼˜åŒ–æ¨¡å‹çš„æŠ€æœ¯ï¼Œå³hyperparameter tuning.</p><p>åœ¨åˆ†ç±»çš„é—®é¢˜ä¸­ï¼Œaccuracyæ˜¯æˆ‘ä»¬è¯„ä»·æ¨¡å‹çš„æ ‡å°ºï¼Œä½†accuracyä¸æ€»æ˜¯å”¯ä¸€è¡¡é‡æ¨¡å‹çš„æ ‡å‡†ã€‚</p><p>æ¯”å¦‚åœ¨åƒåœ¾é‚®ä»¶çš„æ£€æµ‹é—®é¢˜ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„é‚®ä»¶éƒ½ä½œä¸ºæ­£å¸¸é‚®ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰1%çš„åƒåœ¾é‚®ä»¶ã€‚æˆ‘ä»¬çš„æ¨¡å‹å‡†ç¡®åº¦é«˜è¾¾99%ï¼å¬èµ·æ¥è¿˜ä¸é”™ï¼Œä½†è¿™å®Œå…¨æ˜¯ä¸ªç³Ÿç³•çš„æ¨¡å‹</p><p>å…ˆè®°ä½ï¼Œè¿™ç§æ­£å¸¸çš„æ•°æ®è¿œè¿œå¤šäºå¼‚å¸¸æ•°æ®çš„æƒ…å†µï¼Œå«åš <code>class imbalance</code>.</p><h2 id="è¯„ä»·æ¨¡å‹çš„æ ‡å°º"><a href="#è¯„ä»·æ¨¡å‹çš„æ ‡å°º" class="headerlink" title="è¯„ä»·æ¨¡å‹çš„æ ‡å°º"></a>è¯„ä»·æ¨¡å‹çš„æ ‡å°º</h2><p>ç»™å®šä¸€ä¸ªä¸¤ä¸ªç»“æœçš„åˆ†ç±»å™¨ï¼Œå¦‚åƒåœ¾é‚®ä»¶é—®é¢˜ï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">é¢„æµ‹åˆ°çš„åƒåœ¾é‚®ä»¶</th><th style="text-align:left">é¢„æµ‹åˆ°çš„çœŸå®é‚®ä»¶</th></tr></thead><tbody><tr><td style="text-align:left">å®é™…ä¸ºåƒåœ¾é‚®ä»¶</td><td style="text-align:left"><strong>True Positive</strong></td><td style="text-align:left">False Negative</td></tr><tr><td style="text-align:left">å®é™…ä¸ºçœŸå®é‚®ä»¶</td><td style="text-align:left">False Positive</td><td style="text-align:left"><strong>True Negative</strong></td></tr></tbody></table><p>ä¸Šé¢çš„è¿™ä¸ªè¡¨ï¼Œå«åšconfusion matrix</p><ul><li>å·¦ä¸Šå’Œå³ä¸‹çš„ä¸ºé¢„æµ‹æ­£ç¡®çš„æƒ…å†µ</li><li>é€šå¸¸ï¼Œæ„Ÿå…´è¶£çš„ç»„ä¸ºpositiveï¼Œæƒ³è¦é¢„æµ‹åƒåœ¾é‚®ä»¶ï¼Œé‚£ä¹ˆåƒåœ¾é‚®ä»¶å³ä¸ºpositiveçš„</li></ul><p>ä¸ºä»€ä¹ˆéœ€è¦confusion matrix?</p><ol><li>è®¡ç®—Accuracy,å³ï¼šå¯¹è§’çº¿ï¼ˆdiagonalï¼‰æ ¼å­æ•°/æ ¼å­æ€»æ•°, <code>tp+tn/(tp+tn+fp+fn)</code></li><li>è®¡ç®—å…¶ä»–çš„æ¨¡å‹æŒ‡æ ‡ï¼Œå¦‚ï¼š<ol><li><strong>Precision</strong>ï¼Œåˆå«positive predictive,PPV: <code>tp/(tp+fp)</code>,åœ¨åƒåœ¾é‚®ä»¶æ¨¡å‹ä¸­ä¸ºï¼Œ<code>å®é™…åƒåœ¾é‚®ä»¶æ•°é‡/é¢„æµ‹åƒåœ¾é‚®ä»¶æ•°é‡</code>ï¼›è¿™ä¸ªæŒ‡æ ‡å€¼è¶Šé«˜ï¼Œæ„å‘³ç€æˆ‘ä»¬æ›´å°‘çš„çœŸå®é‚®ä»¶é¢„æµ‹ä¸ºåƒåœ¾é‚®ä»¶ï¼Œæé«˜precisionåˆ™æˆ‘ä»¬çš„é¢„æµ‹æ›´å‡†ç¡®ï¼Œå®ƒåˆå«åšå‡†ç¡®ç‡ï¼ŒæŸ¥å‡†ç‡</li><li><strong>Recall</strong>ï¼Œ<code>tp/(tp+fn)</code>,é¢„æµ‹æ­£ç¡®çš„åƒåœ¾é‚®ä»¶å æ‰€æœ‰å®é™…åƒåœ¾é‚®ä»¶ä¹‹æ¯”ï¼Œæé«˜recallå³æ„å‘³ç€å°½å¯èƒ½å¤šçš„é¢„æµ‹æ‰€æœ‰åƒåœ¾é‚®ä»¶ï¼Œæ‰€ä»¥å®ƒä¹Ÿå«åšæŸ¥å…¨ç‡æˆ–å«å¬å›ç‡</li><li><strong>F1score</strong>,<code>2*(precision*recall/precision+recall)</code>ï¼ŒPrecisionä¸recallåˆ†åˆ«å¯¹åº”æŸ¥å‡†é—®é¢˜ä¸æŸ¥å…¨é—®é¢˜ï¼Œç„¶è€Œå¸¸å¸¸äºŒè€…ä¸èƒ½åŒæ—¶æé«˜ï¼Œæ‰€ä»¥å¯¹äºå®é™…å¤æ‚é—®é¢˜å¤„ç†å¾ˆæœ‰åè§ï¼Œäºæ˜¯æˆ‘ä»¬å¼•å…¥F1-scoreæ¥è¿‘ä¼¼å¸®åŠ©æˆ‘ä»¬è§£å†³å®é™…é—®é¢˜ã€‚</li></ol></li></ol><p>å¯ä»¥ç›´æ¥ä½¿ç”¨confusion matrixå‡½æ•°æ¥è®¡ç®—ï¼Œå®ƒæ¥å—ä¸¤ä¸ªæ•°æ®ï¼Œä¸€ä¸ªæ˜¯y_test,å¦ä¸€ä¸ªæ˜¯y_predï¼Œå³é¢„æµ‹å‡ºæ¥çš„æ•°æ®ã€‚</p><p>å¯¹äº resulting matrix, ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåœ¨æ‰€æœ‰çš„sklearnçš„é¢„æµ‹å‡½æ•°ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯testæ•°æ®ï¼Œç¬¬äºŒä¸ªä¸€èˆ¬éƒ½æ˜¯é¢„æµ‹å‡ºæ¥çš„æ•°æ®,å¦å¤–è¿˜æœ‰ä¸€ä¸ªsupportå‚æ•°ï¼Œå®ƒå°±æ˜¯testæ•°æ®ä¸­å¯¹äºä¸åŒç»“æœçš„å“åº”æƒ…å†µï¼Œæ€»æ•°å°±æ˜¯testæ•°æ®çš„é•¿åº¦ã€‚</p><h2 id="Logistic-regression"><a href="#Logistic-regression" class="headerlink" title="Logistic regression"></a>Logistic regression</h2><p>ä¸è¦è¢«è¿™ä¸ªåå­—è¿·æƒ‘ï¼Œlogistic regressionå…¶å®æ˜¯ç”¨æ¥å¤„ç†åˆ†ç±»é—®é¢˜çš„ã€‚</p><p>å®ƒè¿”å›çš„æ˜¯æ¦‚ç‡ï¼Œå½“é¢„æµ‹çš„æ•°æ®æ¦‚ç‡å¤§äº0.5ï¼Œæˆ‘ä»¬æ ‡è®°ä¸º1ï¼Œå¦‚æœå°äº0.5ï¼Œåˆ™æ ‡è®°ä¸º0.</p><p>å®ƒæœ‰ç‚¹åƒçº¿æ€§å›å½’ï¼Œä¼šåœ¨å›¾åƒä¸ŠæŠŠä¸¤ç»„æ•°æ®åŒºåˆ†å¼€æ¥,è¿™ä¸ªè¾¹ç•Œå°±å«åšçº¿æ€§å†³ç­–è¾¹ç•Œï¼ˆlinear decision boundaryï¼‰</p><p>åœ¨ä½¿ç”¨logistic regressionçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰è¿™ä¸ªæ¦‚ç‡ï¼ˆé»˜è®¤æ˜¯0.5ï¼‰.</p><ul><li>å¦‚æœå®šä¸º0ï¼Œé‚£ä¹ˆæ‰€æœ‰è¿›æ¥çš„æ•°æ®å…¨éƒ¨é¢„æµ‹ä¸º1</li><li>å¦‚æœå®šä¸º1ï¼Œæ‰€æœ‰è¿›æ¥çš„æ•°æ®å…¨éƒ¨é¢„æµ‹ä¸º0</li></ul><h3 id="ROC-æ›²çº¿"><a href="#ROC-æ›²çº¿" class="headerlink" title="ROC æ›²çº¿"></a>ROC æ›²çº¿</h3><p>æ ¹æ®æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„æ··æ·†çŸ©é˜µï¼Œæˆ‘ä»¬å†æ¥äº†è§£ä¸¤ä¸ªæŒ‡æ ‡,æ–¹ä¾¿æˆ‘ä»¬å¼•å…¥ROCçš„æ¦‚å¿µï¼š</p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">é¢„æµ‹åˆ°çš„åƒåœ¾é‚®ä»¶</th><th style="text-align:left">é¢„æµ‹åˆ°çš„çœŸå®é‚®ä»¶</th></tr></thead><tbody><tr><td style="text-align:left">å®é™…ä¸ºåƒåœ¾é‚®ä»¶</td><td style="text-align:left"><strong>True Positive</strong></td><td style="text-align:left">False Negative</td></tr><tr><td style="text-align:left">å®é™…ä¸ºçœŸå®é‚®ä»¶</td><td style="text-align:left">False Positive</td><td style="text-align:left"><strong>True Negative</strong></td></tr></tbody></table><p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹çš„å›¾ï¼š</p><p><img src="https://i.loli.net/2019/11/14/a9OnfKcCSb4tw1r.png" alt="ROCæ›²çº¿"></p><ul><li><p>FPR, fpr = fp/(fp+tn),FPRè¡¨ç¤ºï¼Œåœ¨æ‰€æœ‰çš„åƒåœ¾é‚®ä»¶ä¸­ï¼Œè¢«é¢„æµ‹æˆæ­£å¸¸é‚®ä»¶çš„æ¯”ä¾‹ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œéšæœºæ‹¿ä¸€ä¸ªåƒåœ¾é‚®ä»¶ï¼Œæœ‰å¤šå¤§æ¦‚ç‡ä¼šå°†å…¶é¢„æµ‹æˆæ­£å¸¸é‚®ä»¶ã€‚æ˜¾ç„¶æˆ‘ä»¬ä¼šå¸Œæœ›FPRè¶Šå°è¶Šå¥½ã€‚</p></li><li><p>TPRï¼Œfpr=(tp/tp+fn), TPRè¡¨ç¤ºï¼Œåœ¨æ‰€æœ‰çš„æ­£å¸¸é‚®ä»¶ä¸­ï¼Œè¢«é¢„æµ‹ä¸ºæ­£å¸¸é‚®ä»¶çš„æ¯”ä¾‹ï¼Œå³éšæœºæ‹¿ä¸€ä¸ªæ­£å¸¸é‚®ä»¶ï¼Œæœ‰å¤šå¤§çš„æ¦‚ç‡ä¼šè¢«é¢„æµ‹ç§°æ­£å¸¸é‚®ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªå€¼è¶Šå¤§è¶Šå¥½ã€‚</p></li></ul><p>xè½´æ˜¯FPRï¼Œyè½´æ˜¯TPRï¼Œé‚£ä¹ˆç‚¹ï¼ˆ0ï¼Œ0ï¼‰ï¼Œï¼ˆ1ï¼Œ1ï¼‰æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>ï¼ˆ0ï¼Œ0ï¼‰å³FPR=0ï¼ŒTPR=0ï¼Œä¹Ÿå°±æ˜¯FP=0ï¼ŒTP=0ï¼Œæ„å‘³ç€ï¼Œæ‰€æœ‰çš„é‚®ä»¶ï¼Œæˆ‘éƒ½æŠŠå®ƒé¢„æµ‹ä¸ºåƒåœ¾é‚®ä»¶</li><li>ï¼ˆ1ï¼Œ1ï¼‰æ„å‘³ç€ï¼Œæ‰€æœ‰é‚®ä»¶ï¼Œæˆ‘éƒ½é¢„æµ‹ä¸ºæ­£å¸¸é‚®ä»¶</li><li>(1,0)ï¼Œå³FPR=1ï¼ŒTPR=0ï¼Œè¿™æ˜¯æœ€ç³Ÿç³•çš„æƒ…å†µã€‚æ‰€æœ‰çš„é¢„æµ‹éƒ½é¢„æµ‹é”™äº†</li><li>ç‚¹(0,1)ï¼ŒFPR=0è¯´æ˜FP=0ï¼Œä¹Ÿå°±æ˜¯è¯´æ²¡æœ‰ä¸€ä¸ªçœŸå®é‚®ä»¶è¢«çœ‹ä½œåƒåœ¾é‚®ä»¶ï¼ŒTPR=1ï¼Œå³æ‰€æœ‰æ­£å¸¸é‚®ä»¶éƒ½æ˜¯æ ‡è®°æˆæ­£å¸¸é‚®ä»¶ï¼Œè¿™æ˜¯æœ€å¥½çš„æƒ…å†µ</li></ul><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨äºŒåˆ†ç±»ï¼ˆ0ï¼Œ1ï¼‰çš„æ¨¡å‹ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬æœ€åçš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ¦‚ç‡å€¼ï¼Œè¡¨ç¤ºç»“æœæ˜¯1çš„æ¦‚ç‡ã€‚é‚£ä¹ˆæˆ‘ä»¬æœ€åæ€ä¹ˆå†³å®šè¾“å…¥çš„xæ˜¯å±äº0æˆ–1å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé˜ˆå€¼ï¼Œè¶…è¿‡è¿™ä¸ªé˜ˆå€¼åˆ™å½’ç±»ä¸º1ï¼Œä½äºè¿™ä¸ªé˜ˆå€¼å°±å½’ç±»ä¸º0ã€‚æ‰€ä»¥ï¼Œä¸åŒçš„é˜ˆå€¼ä¼šå¯¼è‡´åˆ†ç±»çš„ç»“æœä¸åŒï¼Œä¹Ÿå°±æ˜¯æ··æ·†çŸ©é˜µä¸ä¸€æ ·äº†ï¼ŒFPRå’ŒTPRä¹Ÿå°±ä¸ä¸€æ ·äº†ã€‚æ‰€ä»¥å½“é˜ˆå€¼ä»0å¼€å§‹æ…¢æ…¢ç§»åŠ¨åˆ°1çš„è¿‡ç¨‹ï¼Œå°±ä¼šå½¢æˆå¾ˆå¤šå¯¹(FPR, TPR)çš„å€¼ï¼Œå°†å®ƒä»¬ç”»åœ¨åæ ‡ç³»ä¸Šï¼Œå°±æ˜¯æ‰€è°“çš„ROCæ›²çº¿äº†ã€‚</p><blockquote><p>å¼•ç”¨è‡ªCSDNåšä¸»ã€ŒWebbleyã€çš„<a href="https://blog.csdn.net/liweibin1994/article/details/79462554" target="_blank" rel="noopener">åŸåˆ›æ–‡ç« </a>ã€‚</p></blockquote><h3 id="å»ºç«‹Logistic-modal"><a href="#å»ºç«‹Logistic-modal" class="headerlink" title="å»ºç«‹Logistic modal"></a>å»ºç«‹Logistic modal</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># Import the necessary modules</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">from sklearn.metrics import confusion_matrix,classification_report</span><br><span class="line"></span><br><span class="line"># Create training and test sets</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.4, random_state=42)</span><br><span class="line"></span><br><span class="line"># Create the classifier: logreg</span><br><span class="line">logreg = LogisticRegression()</span><br><span class="line"></span><br><span class="line"># Fit the classifier to the training data</span><br><span class="line">logreg.fit(X_train,y_train)</span><br><span class="line"></span><br><span class="line"># Predict the labels of the test set: y_pred</span><br><span class="line">y_pred = logreg.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Compute and print the confusion matrix and classification report</span><br><span class="line">print(confusion_matrix(y_test, y_pred))</span><br><span class="line">print(classification_report(y_test, y_pred))</span><br></pre></td></tr></table></figure><h3 id="ç»˜åˆ¶ROCæ›²çº¿"><a href="#ç»˜åˆ¶ROCæ›²çº¿" class="headerlink" title="ç»˜åˆ¶ROCæ›²çº¿"></a>ç»˜åˆ¶ROCæ›²çº¿</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># å¼•å…¥rocçš„åŒ…</span><br><span class="line">from sklearn.metrics import roc_curve</span><br><span class="line"></span><br><span class="line">y_pred_prob = logreg.predict_proba(X_test)[:,1]</span><br><span class="line">fpr, tpr, thresholds = roc_curve(y_test, y_pred_prob)</span><br><span class="line"></span><br><span class="line">plt.plot([0, 1], [0, 1], &apos;k--&apos;)</span><br><span class="line">plt.plot(fpr, tpr, label=&apos;Logistic Regression&apos;)</span><br><span class="line">plt.xlabel(&apos;False Positive Rateâ€™)</span><br><span class="line">plt.ylabel(&apos;True Positive Rate&apos;)</span><br><span class="line">plt.title(&apos;Logistic Regression ROC Curve&apos;)</span><br><span class="line">plt.show();</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/11/15/kQdZoCr5EAwiF8q.png" alt="ROCæ›²çº¿ä¸‹é¢çš„é¢ç§¯"></p><p>å½“æˆ‘ä»¬çš„FPRä¸TRPä½äºï¼ˆ0ï¼Œ1ï¼‰çš„æ—¶å€™ï¼Œé¢„æµ‹åˆ°çš„ç»“æœæ˜¯æœ€å¥½çš„ï¼Œè§‚å¯Ÿè¿™ä¸ªROCå›¾åƒï¼Œå³ROCæ›²çº¿ä¸‹é¢çš„é¢ç§¯æœ€å¤§çš„æ—¶å€™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡º:</p><blockquote><p>ROCæ›²çº¿ä¸‹é¢çš„é¢ç§¯è¶Šå¤§ï¼Œæ¨¡å‹è¶Šå¥½ï¼</p></blockquote><p>è¿™ä¸ªé¢ç§¯å°±å«åšAUCï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªä½¿ç”¨å¹¿æ³›çš„åˆ†ç±»é—®é¢˜è¯„ä»·æ ‡å°ºã€‚</p><h3 id="è®¡ç®—AUC"><a href="#è®¡ç®—AUC" class="headerlink" title="è®¡ç®—AUC"></a>è®¡ç®—AUC</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Import necessary modules</span><br><span class="line">from sklearn.metrics import roc_auc_score</span><br><span class="line">from sklearn.model_selection import cross_val_score</span><br><span class="line"></span><br><span class="line"># Compute predicted probabilities: y_pred_prob</span><br><span class="line">y_pred_prob = logreg.predict_proba(X_test)[:,1]</span><br><span class="line"></span><br><span class="line"># Compute and print AUC score</span><br><span class="line">print(&quot;AUC: &#123;&#125;&quot;.format(roc_auc_score(y_test, y_pred_prob)))</span><br><span class="line"></span><br><span class="line"># Compute cross-validated AUC scores: cv_auc</span><br><span class="line">cv_auc = cross_val_score(logreg,X,y,cv=5,scoring=&apos;roc_auc&apos;)</span><br><span class="line"></span><br><span class="line"># Print list of AUC scores</span><br><span class="line">print(&quot;AUC scores computed using 5-fold cross-validation: &#123;&#125;&quot;.format(cv_auc))</span><br></pre></td></tr></table></figure><h2 id="Hyperparameter-tuning"><a href="#Hyperparameter-tuning" class="headerlink" title="Hyperparameter tuning"></a>Hyperparameter tuning</h2><ul><li>çº¿æ€§å›å½’ï¼šé€‰æ‹©å‚æ•°</li><li>ridge/lasso: é€‰æ‹©alpha</li><li>KNNï¼šé€‰æ‹©neighbors</li></ul><p>ä¸Šé¢è¿™äº›é€‰æ‹©çš„å‚æ•°ï¼Œå°±å«åšHyperparameter tuningã€‚</p><p>æ‰€ä»¥ä¸€ä¸ªå¥½çš„æ¨¡å‹ï¼Œå°±åœ¨äºé€‰æ‹©ä¸€ä¸ªå¥½çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¦‚ä½•å†³å®šå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªgridè¡¨æ ¼ï¼Œå°†å‚æ•°å¡«è¿›å»ï¼Œä¸€ä¸ªä¸€ä¸ªçš„è¯•éªŒï¼Œç›´åˆ°æ‰¾åˆ°æœ€å¥½çš„é‚£ä¸ªã€‚</p><p><img src="https://i.loli.net/2019/11/15/5VwtUYGKu8gH6ey.png" alt="Grid search cross-validation"></p><h3 id="GridSearchCV"><a href="#GridSearchCV" class="headerlink" title="GridSearchCV"></a>GridSearchCV</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># Import necessary modules</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">from sklearn.model_selection import GridSearchCV</span><br><span class="line"></span><br><span class="line"># Setup the hyperparameter grid</span><br><span class="line">c_space = np.logspace(-5, 8, 15)</span><br><span class="line">param_grid = &#123;&apos;C&apos;: c_space&#125;</span><br><span class="line"></span><br><span class="line"># Instantiate a logistic regression classifier: logreg</span><br><span class="line">logreg = LogisticRegression()</span><br><span class="line"></span><br><span class="line"># Instantiate the GridSearchCV object: logreg_cv</span><br><span class="line">logreg_cv = GridSearchCV(logreg, param_grid, cv=5)</span><br><span class="line"></span><br><span class="line"># Fit it to the data</span><br><span class="line">logreg_cv.fit(X,y)</span><br><span class="line"></span><br><span class="line"># Print the tuned parameters and score</span><br><span class="line">print(&quot;Tuned Logistic Regression Parameters: &#123;&#125;&quot;.format(logreg_cv.best_params_))</span><br><span class="line">print(&quot;Best score is &#123;&#125;&quot;.format(logreg_cv.best_score_))</span><br></pre></td></tr></table></figure><h3 id="RandomizedSearchCV"><a href="#RandomizedSearchCV" class="headerlink" title="RandomizedSearchCV"></a>RandomizedSearchCV</h3><p>ä¸Šé¢çš„searchCVæ˜¯æŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ¥æµ‹è¯•å‚æ•°ï¼Œè€ŒrandomizedSearchCVåˆ™æ˜¯éšæœºé€‰æ‹©æ•°æ®ä½œä¸ºæµ‹è¯•çš„å‚æ•°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Import necessary modules</span><br><span class="line">from scipy.stats import randint</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier</span><br><span class="line">from sklearn.model_selection import RandomizedSearchCV</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Setup the parameters and distributions to sample from: param_dist</span><br><span class="line">param_dist = &#123;&quot;max_depth&quot;: [3, None],</span><br><span class="line">              &quot;max_features&quot;: randint(1, 9),</span><br><span class="line">              &quot;min_samples_leaf&quot;: randint(1, 9),</span><br><span class="line">              &quot;criterion&quot;: [&quot;gini&quot;, &quot;entropy&quot;]&#125;</span><br><span class="line"></span><br><span class="line"># Instantiate a Decision Tree classifier: tree</span><br><span class="line">tree = DecisionTreeClassifier()</span><br><span class="line"></span><br><span class="line"># Instantiate the RandomizedSearchCV object: tree_cv</span><br><span class="line">tree_cv = RandomizedSearchCV(tree, param_dist, cv=5)</span><br><span class="line"></span><br><span class="line"># Fit it to the data</span><br><span class="line">tree_cv.fit(X,y)</span><br><span class="line"></span><br><span class="line"># Print the tuned parameters and score</span><br><span class="line">print(&quot;Tuned Decision Tree Parameters: &#123;&#125;&quot;.format(tree_cv.best_params_))</span><br><span class="line">print(&quot;Best score is &#123;&#125;&quot;.format(tree_cv.best_score_))</span><br></pre></td></tr></table></figure><h1 id="æ•°æ®é¢„å¤„ç†ä¸ç®¡é“"><a href="#æ•°æ®é¢„å¤„ç†ä¸ç®¡é“" class="headerlink" title="æ•°æ®é¢„å¤„ç†ä¸ç®¡é“"></a>æ•°æ®é¢„å¤„ç†ä¸ç®¡é“</h1><p>ç°å®ä¸–ç•Œçš„æ•°æ®æ˜¯å¤æ‚çš„ï¼Œæˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„éƒ½æ˜¯æ ‡è®°è¿‡çš„æ•°æ®ï¼Œå¦‚æœæ˜¯æ²¡æœ‰æ ‡è®°è¿‡çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å…¶æ‰“ä¸Šæ ‡è®°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pandasçš„get_dummies()æ–¹æ³•æˆ–è€…æ˜¯sklearnçš„OneHotEncoder()ï¼Œå®ƒä¼šå®Œæˆæ•°æ®ä¹‹é—´çš„è½¬æ¢ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><p><em>åŸå§‹æ•°æ®ï¼š</em></p><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">origin</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">US</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Europe</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">Asia</td></tr></tbody></table><p><em>get_dummies()åï¼š</em></p><table><thead><tr><th style="text-align:left">origin_Asia</th><th style="text-align:left">origin_Europe</th><th style="text-align:left">origin_US</th></tr></thead><tbody><tr><td style="text-align:left">0</td><td style="text-align:left">0</td><td style="text-align:left">1</td></tr><tr><td style="text-align:left">0</td><td style="text-align:left">1</td><td style="text-align:left">0</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">0</td><td style="text-align:left">0</td></tr></tbody></table><p>å¯¹äºdummiesåçš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»æœ‰äº†å‰ä¸¤åˆ—ï¼ˆorigin_Asia,origin_Ruropeï¼‰çš„æ•°æ®ï¼Œå°±å¯ä»¥æ¨æµ‹å‰©ä¸‹çš„å°±æ˜¯USçš„æ•°æ®äº†ï¼Œæ‰€ä»¥å¯ä»¥æŠŠUSè¿™é‡Œåˆ—åˆ æ‰ã€‚</p><h2 id="å¤„ç†missing-data"><a href="#å¤„ç†missing-data" class="headerlink" title="å¤„ç†missing data"></a>å¤„ç†missing data</h2><p>æ‚¨æ”¶é›†åˆ°çš„æ•°æ®ï¼Œä¸ä¼šæ˜¯å®Œç¾çš„ï¼Œè‚¯å®šæœ‰äº›å€¼æ˜¯ç¼ºå¤±çš„ï¼Œå®ƒä»¬å¯èƒ½ä¸º0ï¼Œä¸ºnanï¼Œæˆ–è€…ä»¥å…¶ä»–å½¢å¼è®°å½•çš„ç©ºå€¼ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨np.dropnaæ¥æŠŠæ‰€æœ‰ä¸ºç©ºå€¼çš„è¡Œåˆ é™¤ï¼Œä½†è¿™æ ·å¾ˆå¯èƒ½ä¼šè®©ä½ çš„æ•°æ®æ€»é‡å˜å°‘ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥è‡ªåŠ¨å°†æ‰€æœ‰çš„ç©ºå€¼ï¼Œä»¥è¯¥åˆ—çš„å¹³å‡å€¼æ›¿ä»£ã€‚</p><p>å¯ä»¥åˆ©ç”¨imputerå¯¹è±¡æ¥å¤„ç†ï¼Œå¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">imp = impImputer(missing_values=&apos;NaN&apos;,strategy=&apos;mean&apos;,axix=0)</span><br><span class="line"></span><br><span class="line">imp.fit(X)</span><br><span class="line">imp.transform(X)</span><br></pre></td></tr></table></figure><p>ç”¨imp fit Xåï¼Œä¾¿å¯å¯¹æ•°æ®è¿›è¡Œtransformï¼Œå› æ­¤imputerå¯¹è±¡ä¹Ÿå«transformer.</p><h2 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h2><p>å°†ä½ çš„æ“ä½œæ‰“åŒ…æˆä¸€ä¸ªæ•°ç»„ï¼Œå°±å˜æˆäº†ä¸€ä¸ªpiplineï¼Œä½ å¯ä»¥æŠŠä½ çš„æ“ä½œï¼ˆå¦‚å¤„ç†missing valueï¼Œå¤§å°å†™è½¬æ¢ç­‰ç­‰ï¼‰éƒ½å†™è¿›ç®¡é“ï¼Œä¸€æ¬¡æ€§å¤„ç†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># Import necessary modules</span><br><span class="line">from sklearn.preprocessing import Imputer</span><br><span class="line">from sklearn.pipeline import Pipeline</span><br><span class="line">from sklearn.svm import SVC</span><br><span class="line"></span><br><span class="line"># Setup the pipeline steps: steps</span><br><span class="line">steps = [(&apos;imputation&apos;, Imputer(missing_values=&apos;NaN&apos;, strategy=&apos;most_frequent&apos;, axis=0)),</span><br><span class="line">        (&apos;SVM&apos;, SVC())]</span><br><span class="line"></span><br><span class="line"># Create the pipeline: pipeline</span><br><span class="line">pipeline = Pipeline(steps)</span><br><span class="line"></span><br><span class="line"># Create training and test sets</span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X,y,test_size=0.3,random_state=42)</span><br><span class="line"></span><br><span class="line"># Fit the pipeline to the train set</span><br><span class="line">pipeline.fit(X_train, y_train)</span><br><span class="line"></span><br><span class="line"># Predict the labels of the test set</span><br><span class="line">y_pred = pipeline.predict(X_test)</span><br><span class="line"></span><br><span class="line"># Compute metrics</span><br><span class="line">print(classification_report(y_test, y_pred))</span><br></pre></td></tr></table></figure><h2 id="Centering-and-scaling"><a href="#Centering-and-scaling" class="headerlink" title="Centering and scaling"></a>Centering and scaling</h2><p>æ¨¡å‹çš„featuersçš„æ•°æ®å€¼ï¼Œå®ƒçš„å–å€¼èŒƒå›´å¯èƒ½æ˜¯éå¸¸å¤§çš„ï¼Œæ¯”å¦‚å¹´é¾„çš„åŒºé—´æ˜¯0-100ï¼Œè€Œä½“é‡çš„åŒºé—´åˆ™ä¸ä¸€æ ·ã€‚å¯¹æ¨¡å‹æ¥è¯´ï¼Œæˆ‘ä»¬æœ€å¥½å°†è¿™äº›æ•°æ®è¿›è¡Œç¼©æ”¾ï¼ˆscalingï¼‰ï¼Œå…¨éƒ¨æ”¾åˆ°åŒä¸€ä¸ªåŒºé—´ä¸­ï¼Œè¿™æ ·å®ƒä»¬å¯¹äºæ¨¡å‹çš„é‡è¦ç¨‹åº¦æ‰æ¯”è¾ƒå¥½ä¼°è®¡ã€‚</p><p>ç¼©æ”¾çš„èŒƒå›´å¯ä»¥æ˜¯0-1ï¼Œä¹Ÿå¯ä»¥æ˜¯-1åˆ°1.</p><p>å¯ä»¥æŸ¥çœ‹sklearnçš„æ–‡æ¡£ï¼Œäº†è§£æ›´å¤šå…³äºscalingçš„ç»†èŠ‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/15/AFHezumhwD5grWB.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»™æœºå™¨å­¦ä¹ çš„èƒ½åŠ›ï¼Œè®©å®ƒå¯ä»¥æ ¹æ®&lt;strong&gt;æ•°æ®&lt;/strong&gt;è‡ªå·±åšå†³å®šçš„ä¸€ç§æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="machine learning" scheme="http://wittyfans.com/tags/machine-learning/"/>
    
      <category term="Python" scheme="http://wittyfans.com/tags/Python/"/>
    
      <category term="sklearn" scheme="http://wittyfans.com/tags/sklearn/"/>
    
  </entry>
  
  <entry>
    <title>Numpy ndarray åŸºæœ¬æ“ä½œ</title>
    <link href="http://wittyfans.com/coding/NumPy-ndarray-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html"/>
    <id>http://wittyfans.com/coding/NumPy-ndarray-åŸºæœ¬æ“ä½œ.html</id>
    <published>2019-07-01T02:45:05.000Z</published>
    <updated>2019-11-15T14:36:42.035Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://i.loli.net/2019/11/15/qUBCxdZk7VmIFe1.png" alt=""></p><blockquote><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Numpyï¼Ÿç»™ä½ ä¸¤ç»„æ•°æ®è¿ç®—ï¼Œç„¶åå¯¹æ¯”ä¸€ä¸‹æ€§èƒ½å°±çŸ¥é“äº†.</p></blockquote><a id="more"></a><h1 id="Why-Numpy"><a href="#Why-Numpy" class="headerlink" title="Why Numpy?"></a>Why Numpy?</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">my_arr = np.arange(1000000)</span><br><span class="line"></span><br><span class="line">my_list = list(range(1000000))</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯¹ä¸¤ç»„æ•°ä¹˜ä»¥2</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%time for _ in range(10): my_arr2 = my_arr * 2</span><br><span class="line"></span><br><span class="line">CPU times: user 20 ms, sys: 50 ms, total: 70 ms Wall time: 72.4 ms</span><br><span class="line"></span><br><span class="line">%time for _ in range(10): my_list2 = [x * 2 for x in my_list]</span><br><span class="line"></span><br><span class="line">CPU times: user 760 ms, sys: 290 ms, total: 1.05 s</span><br></pre></td></tr></table></figure><h2 id="Numpy"><a href="#Numpy" class="headerlink" title="Numpy"></a>Numpy</h2><h3 id="ç”Ÿæˆéšæœºæ•°"><a href="#ç”Ÿæˆéšæœºæ•°" class="headerlink" title="ç”Ÿæˆéšæœºæ•°"></a>ç”Ÿæˆéšæœºæ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">data = np.random.randn(2,3)</span><br></pre></td></tr></table></figure><p>æ•°æ®é•¿è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.05094946, -1.54555805, -1.19695135],</span><br><span class="line">       [-1.06169454,  1.13763682,  0.57538678]])</span><br></pre></td></tr></table></figure><p>å°†å®ƒä»¬ä¹˜10:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[  9.41882893,   3.20674452,  18.05866858],</span><br><span class="line">       [ -7.97835594,  -9.56449228,  -0.83342424]])</span><br></pre></td></tr></table></figure><p>ä¸¤ä»½æ•°æ®ç›¸åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-2.37617968,  3.45388874, -0.64218591],</span><br><span class="line">       [-2.99399147, -1.11118452, -1.11992404]])</span><br></pre></td></tr></table></figure><p>å¯¹äºNumpyçš„æ•°æ®ï¼š</p><blockquote><p>An ndarray is a generic multidimensional container for homogeneous data; that is, all of the elements must be the same type. Every array has a shape, a tuple indicating the size of each dimension, and a dtype, an object describing the data type of the array:</p></blockquote><ul><li>æ‰€æœ‰çš„æ•°æ®å¿…é¡»æ˜¯åŒæ ·çš„ç±»å‹</li><li>æ¯ä¸ªæ•°ç»„éƒ½æœ‰ä¸€ä¸ªå…ƒç»„ç±»å‹çš„shapeå±æ€§ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°ç»„çš„ç»´åº¦ä¿¡æ¯</li><li>æ¯ä¸ªæ•°ç»„éƒ½æœ‰ä¸€ä¸ªdtypeå±æ€§ç”¨æ¥æè¿°å®ƒå…¶ä¸­çš„æ•°æ®ç±»å‹</li></ul><p>å¦‚ä¸Šé¢çš„dataï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data.shape ---&gt; (2, 3)</span><br><span class="line">data.dtype --&gt; dtype(&apos;float64&apos;)</span><br></pre></td></tr></table></figure><blockquote><p>While itâ€™s not necessary to have a deep understanding of NumPy for many data analytical applications, becoming proficient in array-oriented programming and thinking is a key step along the way to becoming a scientific Python guru.</p></blockquote><h2 id="åˆ›å»º-NDarrays"><a href="#åˆ›å»º-NDarrays" class="headerlink" title="åˆ›å»º NDarrays"></a>åˆ›å»º NDarrays</h2><p>ç›´æ¥ä»æ•°ç»„åˆ›å»ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data1 = [6,7.5,8,0,1]</span><br><span class="line">arr1 = np.array(data1)</span><br><span class="line">arr1</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä»å¤šç»´æ•°ç»„åˆ›å»ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data2 = [[1, 2, 3, 4], [5, 6, 7, 8]]</span><br><span class="line">arr2 = np.array(data2)</span><br><span class="line"></span><br><span class="line">arr2.shape --&gt; (2,4)</span><br><span class="line">arr2.dim --&gt;2</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨ <em>ndim</em> å±æ€§æ¥çœ‹æ•°ç»„çš„ç»´åº¦ä¿¡æ¯ã€‚</p><p>Numpyè¿˜æœ‰ä¸€äº›æœ‰è¶£çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥åˆ›å»º0å’Œ1ï¼Œæˆ–è€…ç©ºå€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.zeros(10) --&gt; åˆ›å»º10ä¸ª0çš„æ•°ç»„</span><br><span class="line">np.zeros((3,6))</span><br><span class="line">np.empty((2,3,2)) --&gt; åˆ›å»ºä¸¤ä¸ªä¸¤åˆ—ä¸‰è¡Œçš„æ•°ç»„</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›åˆ›å»º<em>ndarrays</em>çš„æ–¹æ³•ï¼š</p><ul><li>array: Convert input data (list, tuple, array, or other sequence type) to an ndarray either by inferring a dtype</li><li>asarray: Convert input to ndarray, but do not copy if the input is already an ndarray</li><li>arange: Like the built-in range but returns an ndarray instead of a list</li></ul><p>æ›´å¤šçš„æ–¹æ³•å¯ä»¥å‚è€ƒï¼š<em>Python for data analyse, Table 4-1</em></p><h2 id="NDarraysçš„æ•°æ®ç±»å‹"><a href="#NDarraysçš„æ•°æ®ç±»å‹" class="headerlink" title="NDarraysçš„æ•°æ®ç±»å‹"></a>NDarraysçš„æ•°æ®ç±»å‹</h2><p>ndarrays çš„data typeæˆ–è€…æ˜¯dtypeåŒ…å«äº†ä¸€äº›åŸºæœ¬çš„ä¿¡æ¯(meta),arrayåœ¨å®šä¹‰çš„æ—¶å€™æ˜¯å¯ä»¥æŒ‡å®šæ•°æ®ç±»å‹çš„ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr1 = np.array([1,2,3],dtype=np.float64)</span><br><span class="line">arr2 = np.array([1,2,3],dtype=np.int32)</span><br></pre></td></tr></table></figure><p>æ•°æ®ç±»å‹å¯ä»¥ç›¸äº’è½¬åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arr = np.array([1,2,3,4])</span><br><span class="line">arr.dtype</span><br><span class="line"># è¾“å‡º dtype(&apos;int64&apos;)</span><br><span class="line"></span><br><span class="line">arr = np.array([1,2,3,4])</span><br><span class="line">floatarr = arr.astype(np.float64)</span><br><span class="line">floatarr.dtype</span><br><span class="line"># è¾“å‡º dtype(&apos;float64&apos;)</span><br></pre></td></tr></table></figure><p>ç›¸åçš„<em>float</em>ä¹Ÿå¯ä»¥è½¬åŒ–æˆ <em>int</em>,åè¿›åˆ¶å¤šå‡ºæ¥çš„éƒ¨åˆ†ä¼šè¢«å››èˆäº”å…¥ã€‚</p><h2 id="æ•°ç»„è¿ç®—"><a href="#æ•°ç»„è¿ç®—" class="headerlink" title="æ•°ç»„è¿ç®—"></a>æ•°ç»„è¿ç®—</h2><p>ä¸‹é¢æ˜¯åŸºæœ¬çš„è¿ç®—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr = np.array([[1., 2., 3.], [4., 5., 6.]])</span><br></pre></td></tr></table></figure><p>ä¹˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr*arr</span><br><span class="line"># out</span><br><span class="line">array([[  1.,   4.,   9.],</span><br><span class="line">       [ 16.,  25.,  36.]])</span><br></pre></td></tr></table></figure><p>å‡:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr-arr</span><br><span class="line"># out</span><br><span class="line">array([[ 0.,  0.,  0.],</span><br><span class="line">       [ 0.,  0.,  0.]])</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰çš„è¿ç®—éƒ½æ˜¯åŸºäºç›¸å¯¹å…³ç³»çš„ï¼Œè®°ä½è¿™ä¸€ç‚¹å³å¯ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œnpè¿˜æ”¯æŒæ¯”è¾ƒï¼Œå‡è®¾ä¸¤ä¸ªarrå¯¹æ¯”ï¼Œè¿”å›ç»“æœä¼šæ˜¯ä¸€ä¸ªåŒ…å«trueæˆ–falseçš„æ•°ç»„ã€‚</p><h2 id="åˆ‡ç‰‡å’Œç´¢å¼•"><a href="#åˆ‡ç‰‡å’Œç´¢å¼•" class="headerlink" title="åˆ‡ç‰‡å’Œç´¢å¼•"></a>åˆ‡ç‰‡å’Œç´¢å¼•</h2><p>Numpyçš„åˆ‡ç‰‡å’Œç´¢å¼•å’Œæ•°ç»„çš„å·®ä¸å¤šï¼Œåˆ‡ç‰‡å°±æ˜¯æŒ‰ç…§åæ ‡æˆ–è€…åæ ‡èŒƒå›´æ¥æ‰¾å‡ºå¯¹åº”ï¼Œæˆ–å¯¹åº”èŒƒå›´å†…çš„å€¼ï¼Œæ ¹æ®åæ ‡æ¥ç†è§£å°±å¾ˆç®€å•</p><p><img src="https://i.loli.net/2019/02/08/5c5d05c2d4a0f.jpeg" alt=""></p><p>ä½ å¯ä»¥å¯¹ä¸€ä¸ªåˆ‡ç‰‡èŒƒå›´å†…çš„å€¼é‡æ–°èµ‹å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(10)</span><br><span class="line">arr[5] --&gt; 5</span><br><span class="line">arr[5:8] --&gt; [5,6,7]</span><br><span class="line">arr[5:8] = 12</span><br><span class="line">arr --&gt; array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])</span><br></pre></td></tr></table></figure><p>npè®¾è®¡éœ€è¦å¤„ç†å¤§é‡çš„æ•°æ®ï¼Œæ‰€ä»¥å¯¹äºæ•°ç»„çš„æ“ä½œï¼Œéƒ½æ˜¯åœ¨åŸæ¥çš„æ•°æ®ä¸Šæ”¹åŠ¨ï¼Œä¸ä¼šcopyã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arr_slice = arr[5:8]</span><br><span class="line">arr_slice</span><br><span class="line"># out: array([5, 6, 7])</span><br><span class="line"></span><br><span class="line">arr_slice[:] = 9 # [:]æ˜¯åº”ç”¨åœ¨æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">arr</span><br><span class="line"># out: array([0, 1, 2, 3, 4, 9, 9, 9, 8, 9])</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¦copyï¼Œnpæä¾›äº†ä¸€ä¸ªcopyå‡½æ•°:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">arr3d = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])</span><br><span class="line">copyed = arr3d.copy()</span><br><span class="line">copyed</span><br><span class="line"># out:</span><br><span class="line">array([[[ 1,  2,  3],</span><br><span class="line">        [ 4,  5,  6]],</span><br><span class="line"></span><br><span class="line">       [[ 7,  8,  9],</span><br><span class="line">        [10, 11, 12]]])</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨ä¸¤ä¸ªç»´åº¦ä¸Šåˆ‡ç‰‡ï¼š</p><p><em>arr2d[:]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[1, 2, 3],</span><br><span class="line">       [4, 5, 6],</span><br><span class="line">       [7, 8, 9]])</span><br></pre></td></tr></table></figure><p><em>arr2d[:2]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[1, 2, 3],</span><br><span class="line">       [4, 5, 6]])</span><br></pre></td></tr></table></figure><p><em>arr2d[:2,1:]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[2, 3],</span><br><span class="line">       [5, 6]])</span><br></pre></td></tr></table></figure><p><em>arr2d[:,:0]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[1],</span><br><span class="line">       [4],</span><br><span class="line">       [7]])</span><br></pre></td></tr></table></figure><p>å‚ç…§ä¸‹å›¾ï¼ŒåŠ¨æ‰‹å®è·µå‡ æ¬¡ï¼Œå°±ä¼šæ‡‚å…¶ä¸­çš„å¥—è·¯äº†ã€‚</p><p><img src="https://i.loli.net/2019/02/08/5c5d054478e7b.jpeg" alt=""></p><h2 id="Boolean-Indexing"><a href="#Boolean-Indexing" class="headerlink" title="Boolean Indexing"></a>Boolean Indexing</h2><p>æˆ‘ä»¬æœ‰ä¸€æ‰¹åå­—:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">names = np.array([&apos;Bob&apos;, &apos;Joe&apos;, &apos;Will&apos;, &apos;Bob&apos;, &apos;Will&apos;, &apos;Joe&apos;, &apos;Joe&apos;])</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ <em>names == â€˜Bobâ€™</em> æ¥è¿”å›ä¸€ä¸ªæ£€æŸ¥ç»“æœï¼Œè¿™ä¸ªç»“æœåŒ…å«çš„æ˜¯ä¸€ä¸ª <em>bollean</em> çš„ <em>list</em>.</p><p><em>names == â€˜Bobâ€™</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([ True, False, False,  True, False, False, False], dtype=bool)</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä»½æ•°æ®ï¼Œä¹Ÿæ˜¯7è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å§è¿™ä¸ªåŒ…å« <em>True</em> å’Œ <em>False</em> çš„l <em>List</em> ä¼ è¿›å»ï¼Œè¿™æ · <em>Numpy</em> ä¼šé€‰å‡ºé‚£äº›å¯¹åº” <em>True</em> çš„è¡Œã€‚</p><p><em>data = np.random.randn(7,4)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.71030181, -0.14900916, -1.15238417, -0.49395683],</span><br><span class="line">       [-0.92601472,  0.88452947, -0.9206763 , -0.43338155],</span><br><span class="line">       [-0.68093622,  0.93612942,  0.03261537,  1.44615091],</span><br><span class="line">       [ 1.40919226, -0.07214425, -0.07973205, -1.01432059],</span><br><span class="line">       [-0.4042085 ,  0.66812768,  0.4715137 ,  0.34981598],</span><br><span class="line">       [ 0.89631112, -0.70534677,  0.44560626,  0.6133761 ],</span><br><span class="line">       [-0.28979691,  0.58481489, -0.06945283, -0.99545537]])</span><br></pre></td></tr></table></figure><p><em>data[names==â€™Bobâ€™]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.71030181, -0.14900916, -1.15238417, -0.49395683],</span><br><span class="line">       [ 1.40919226, -0.07214425, -0.07973205, -1.01432059]])</span><br></pre></td></tr></table></figure><blockquote><p> Boolean selection will not fail if the boolean array is not the correct length, so I recommend care when using this feature.</p></blockquote><p>ä¸Šé¢çš„é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥é…åˆåˆ‡ç‰‡ï¼š</p><p><em>data[names==â€™Bobâ€™,:1]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[-0.71030181],</span><br><span class="line">       [ 1.40919226]])</span><br></pre></td></tr></table></figure><p>é€‰æ‹©é™¤äº† <em>Bob</em> ä¹‹å¤–çš„åå­—ï¼š</p><ul><li><em>names != â€˜Bobâ€™</em></li><li><em>~(names == â€˜Bobâ€™)</em></li></ul><p>å¯¹äº <em>names</em> çš„è¿‡æ»¤ï¼Œå¯ä»¥ç”¨ç»„åˆæ¡ä»¶ï¼š</p><ul><li><em>cond = names == â€˜Bobâ€™</em></li><li><em>cond = (names==â€™Bobâ€™) | (names == â€˜willâ€™)</em></li></ul><p>å¯¹äº <em>data</em> ä¹Ÿä¸€æ ·ï¼š</p><p><em>data[data &lt; 0] = 0</em></p><p>è®¾ç½®æ•´è¡Œçš„å€¼ä¹Ÿéå¸¸ç®€å•ï¼š</p><p><em>data[names != â€˜Joeâ€™] = 7</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">array([[ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [-0.92601472,  0.88452947, -0.9206763 , -0.43338155],</span><br><span class="line">       [ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [ 7.        ,  7.        ,  7.        ,  7.        ],</span><br><span class="line">       [ 0.89631112, -0.70534677,  0.44560626,  0.6133761 ],</span><br><span class="line">       [-0.28979691,  0.58481489, -0.06945283, -0.99545537]])</span><br></pre></td></tr></table></figure><h2 id="Fancy-Indexing"><a href="#Fancy-Indexing" class="headerlink" title="Fancy Indexing"></a>Fancy Indexing</h2><p>Fancy indexing is a term adopted by NumPy to describe indexing using integer arrays. Suppose we had an 8 Ã— 4 array:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = np.empty((8,4),dtype=np.int)</span><br><span class="line">for i in range(8):</span><br><span class="line">    arr[i] = i</span><br><span class="line">arr</span><br></pre></td></tr></table></figure><p>é€‰æ‹©å•ä¸ªå€¼ï¼š</p><p><em>arr[3,0]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">out: 3</span><br></pre></td></tr></table></figure><p>é€‰æ‹©å¤šè¡Œï¼š</p><p><em>arr[[3,0]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[3, 3, 3, 3],</span><br><span class="line">       [0, 0, 0, 0]])</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªæŒ‰é¡ºåºæ’åˆ—çš„ <em>8x4</em> çš„æ•°ç»„ï¼š</p><p><em>arr = np.arange(32).reshape((8,4))</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0,  1,  2,  3],</span><br><span class="line">       [ 4,  5,  6,  7],</span><br><span class="line">       [ 8,  9, 10, 11],</span><br><span class="line">       [12, 13, 14, 15],</span><br><span class="line">       [16, 17, 18, 19],</span><br><span class="line">       [20, 21, 22, 23],</span><br><span class="line">       [24, 25, 26, 27],</span><br><span class="line">       [28, 29, 30, 31]])</span><br></pre></td></tr></table></figure><p>æŒ‰é€‰æ‹©å‰ä¸¤ä¸ªå­æ•°ç»„çš„ç¬¬ä¸€ä¸ªæ•°ï¼š</p><p><em>arr[[1,2],[0,0]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([4, 8])</span><br></pre></td></tr></table></figure><p>ä½ ä¹Ÿå¯ä»¥å¯¹é€‰æ‹©å‡ºæ¥çš„æ•°ç»„ï¼Œè¿›è¡Œæ’åºï¼š</p><p><em>arr[[1,2]][:]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[ 4,  5,  6,  7],</span><br><span class="line">       [ 8,  9, 10, 11]])</span><br></pre></td></tr></table></figure><p><em>arr[[1,2]][:,[0]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[4],</span><br><span class="line">       [8]])</span><br></pre></td></tr></table></figure><p><em>arr[[1,2]][:,[0,3,2,1]]</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">array([[ 4,  7,  6,  5],</span><br><span class="line">       [ 8, 11, 10,  9]])</span><br></pre></td></tr></table></figure><blockquote><p>Fancy indexing always copies the data into a new array.</p></blockquote><h2 id="Transposing-Arrays-and-Swapping-Axes"><a href="#Transposing-Arrays-and-Swapping-Axes" class="headerlink" title="Transposing Arrays and Swapping Axes"></a>Transposing Arrays and Swapping Axes</h2><h3 id="Shape"><a href="#Shape" class="headerlink" title="Shape"></a>Shape</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">value = 18</span><br><span class="line">x = 2</span><br><span class="line">y = 9</span><br><span class="line">arr = np.arange(value).reshape((x,y))</span><br><span class="line">arr</span><br><span class="line"># è¾“å‡º</span><br><span class="line">array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8],</span><br><span class="line">       [ 9, 10, 11, 12, 13, 14, 15, 16, 17]])</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">value = 18</span><br><span class="line">x = 3</span><br><span class="line">y = 6</span><br><span class="line">arr = np.arange(value).reshape((x,y))</span><br><span class="line"># è¾“å‡º</span><br><span class="line">array([[ 0,  1,  2,  3,  4,  5],</span><br><span class="line">       [ 6,  7,  8,  9, 10, 11],</span><br><span class="line">       [12, 13, 14, 15, 16, 17]])</span><br></pre></td></tr></table></figure><p>åªéœ€è¦ç¡®ä¿ Value = X <em> Y å°±å¯ä»¥ä»»æ„ </em>shape* äº†ã€‚</p><h3 id="Transposing"><a href="#Transposing" class="headerlink" title="Transposing"></a>Transposing</h3><p>çœ‹ä¾‹å­ï¼š</p><p><em>arr = np.arange(18).reshape((3,6))</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0,  1,  2,  3,  4,  5],</span><br><span class="line">       [ 6,  7,  8,  9, 10, 11],</span><br><span class="line">       [12, 13, 14, 15, 16, 17]])</span><br></pre></td></tr></table></figure><p><em>arr.T</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array([[ 0,  6, 12],</span><br><span class="line">       [ 1,  7, 13],</span><br><span class="line">       [ 2,  8, 14],</span><br><span class="line">       [ 3,  9, 15],</span><br><span class="line">       [ 4, 10, 16],</span><br><span class="line">       [ 5, 11, 17]])</span><br></pre></td></tr></table></figure><p><em>Transposing</em> åœ¨çŸ©é˜µè®¡ç®—ä¸­ç”¨çš„éå¸¸å¤šï¼Œæ¯”å¦‚ç”¨ <em>np.dot</em> æ–¹æ³•è®¡ç®—çŸ©é˜µçš„å†…ç§¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arra = np.array([2,3,0])</span><br><span class="line">arrb = np.array([2,-1,1])</span><br><span class="line">np.dot(arra,arrb)</span><br><span class="line"># è¾“å‡º 1</span><br></pre></td></tr></table></figure><blockquote><p>æ€ä¹ˆè®¡ç®—å†…ç§¯ï¼Ÿçœ‹ä¸‹å›¾å°±æ˜ç™½äº†</p></blockquote><p><img src="https://i.loli.net/2019/02/08/5c5d41ff41077.png" alt=""></p><p><img src="https://i.loli.net/2019/02/08/5c5d4246ea899.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://i.loli.net/2019/11/15/qUBCxdZk7VmIFe1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Numpyï¼Ÿç»™ä½ ä¸¤ç»„æ•°æ®è¿ç®—ï¼Œç„¶åå¯¹æ¯”ä¸€ä¸‹æ€§èƒ½å°±çŸ¥é“äº†.&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="data analysis" scheme="http://wittyfans.com/tags/data-analysis/"/>
    
      <category term="NumPy" scheme="http://wittyfans.com/tags/NumPy/"/>
    
  </entry>
  
  <entry>
    <title>Linux å¸¸ç”¨å‘½ä»¤æ•´ç†(eng)</title>
    <link href="http://wittyfans.com/writing/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%95%B4%E7%90%86-eng.html"/>
    <id>http://wittyfans.com/writing/Linux-å¸¸ç”¨å‘½ä»¤æ•´ç†-eng.html</id>
    <published>2019-06-07T13:56:19.000Z</published>
    <updated>2019-06-07T13:59:34.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¸¸ç”¨å‘½ä»¤çš„cheatsheetï¼Œå¦‚æœæƒ³äº†è§£æ›´å¤šç†è®ºéƒ¨åˆ†ï¼Œè¯·å‚è€ƒä¹‹å‰çš„æ–‡ç« <a href="http://wittyfans.com/coding/Linuxé˜…è¯»ç¬”è®°.html">Linuxé˜…è¯»ç¬”è®°</a>ã€‚</p></blockquote><a id="more"></a><h1 id="Linux-Mac-Commands"><a href="#Linux-Mac-Commands" class="headerlink" title="Linux / Mac Commands"></a>Linux / Mac Commands</h1><h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><ul><li>cd</li><li>pwd</li><li>ls</li><li>ls -a</li><li>ls -l </li><li>ls -la</li><li>cd .. </li><li>ls sub_dir/</li><li>cd ~</li></ul><h1 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h1><ul><li>mkdir</li><li>touch</li><li>cp, copy a file</li><li>cp -r, copy a directory</li><li>mv, rename or moving a file</li><li>open</li><li>rm</li><li>rm -rf, force removing a directory</li><li>man(-r), show some info</li><li>about, info</li></ul><h1 id="Find"><a href="#Find" class="headerlink" title="Find"></a>Find</h1><h2 id="help"><a href="#help" class="headerlink" title="help"></a>help</h2><ul><li>man find</li></ul><h2 id="by-name"><a href="#by-name" class="headerlink" title="by name"></a>by name</h2><ul><li>find ., list all file and folder below current</li><li>find folder</li><li>find . -type d, find all foldre, no file</li><li>find . -type f, find all file , no foldre</li><li>find . -type f -name â€œtest.txtâ€, name as text txt file</li><li>find . -type f -name â€œtext*â€, name as txt all file</li><li>find . -type f -iname â€œtext*â€, ä¸åŒºåˆ†å¤§å°å†™</li><li>find . -type f -name â€œ*.pyâ€</li></ul><h2 id="by-time"><a href="#by-time" class="headerlink" title="by time"></a>by time</h2><ul><li>find . -type f -mmin -10,è¿‡å»ååˆ†é’Ÿä¿®æ”¹è¿‡çš„æ–‡ä»¶</li><li>find . -type f -mmin +10</li><li>find . -type f -mmin +1 -mmin -5</li><li>find . -type f -mtime -20</li></ul><blockquote><p>amin,atime: access min and access day; cmin,ctime: change min and change day; mmin,mtime: modify;</p></blockquote><h2 id="by-size"><a href="#by-size" class="headerlink" title="by size"></a>by size</h2><ul><li><p>find . -size +5m</p><blockquote><p>k,g is work too</p></blockquote></li><li><p>ls -lah ./folders, info about sub folder and files,including size</p></li><li>find . -empty</li></ul><h2 id="permission"><a href="#permission" class="headerlink" title="permission"></a>permission</h2><ul><li>find. -perm 777, read, write, and excute</li><li>find folder -exec chown coreschafer:www-data {} +</li></ul><blockquote><p>find folder, will return all folder, -exec will run the command in that results, {} palceholder, + end of the command.</p></blockquote><ul><li>find folder -type f -exec chmod 664 {} +</li><li>find folder -perm 664</li><li>find . -type f -name â€œ*.jpgâ€</li><li>find . -type f -name â€œ*.jpgâ€ -maxdepth 1, searched 1 level down</li><li>find . -type f -name â€œ*.jpgâ€ -maxdepth 1 -exec rm {} +, delete serched files</li></ul><h1 id="Grep"><a href="#Grep" class="headerlink" title="Grep"></a>Grep</h1><h2 id="Grep-single-file"><a href="#Grep-single-file" class="headerlink" title="Grep single file"></a>Grep single file</h2><blockquote><p>searched text</p></blockquote><ul><li>grep â€œtext_you_want_searchâ€ filename.txt</li><li>grep -w â€œtext_you_want_searchâ€ filename.txt, have to match all words</li><li>grep -wi â€œtext_you_want_searchâ€ filename.txt, igore the lowcase and uppearcse.</li><li>grep -win â€œtext_you_want_searchâ€ filename.txt, get info about the line number</li><li>grep -win -B 4 â€œtext_you_want_searchâ€ filename.txt, return the context about the searched words, 4 line, behind</li><li>grep -win -A 4 â€œtext_you_want_searchâ€ filename.txt, return the context about the searched words, 4 line, ahead</li><li>grep -win -C 4 â€œtext_you_want_searchâ€ filename.txt, return the context about the searched words, 4 line, two line before and two behind.</li></ul><h2 id="Grep-multi-file"><a href="#Grep-multi-file" class="headerlink" title="Grep multi file"></a>Grep multi file</h2><ul><li>grep -win â€œtext_â€ ./*, all file</li><li>grep -win â€œtext_â€ ./*.txt, txt file</li><li>grep -winr â€œtextâ€ ./ , search all subdir</li><li>grep -wirl â€œtextâ€ ./ , no need match info, just file list</li><li>grep -wirc â€œtextâ€ ./ , show matched number in eatch file</li></ul><h2 id="Grep-command-history"><a href="#Grep-command-history" class="headerlink" title="Grep command history"></a>Grep command history</h2><ul><li>history | grep â€œgit commitâ€</li><li>history | grep â€œgit commitâ€ | grep â€œdotfileâ€</li></ul><h2 id="Grep-rgx"><a href="#Grep-rgx" class="headerlink" title="Grep rgx"></a>Grep rgx</h2><ul><li>grep -P â€œ\d{3}-\d{3}-\d{4}â€ file.txt, work well in linux, mac need to config, I configed</li></ul><h1 id="cURL"><a href="#cURL" class="headerlink" title="cURL"></a>cURL</h1><h2 id="Requests"><a href="#Requests" class="headerlink" title="Requests"></a>Requests</h2><ul><li>curl url</li><li>curl <a href="http://localhost:5000" target="_blank" rel="noopener">http://localhost:5000</a></li><li>curl http:***/json_file<ul><li>curl -i http:***/json_file, details info about the get</li></ul></li><li>curl http:***/method<ul><li>curl -d â€œfirst=name&amp;last=lastnameâ€ http:***/method, d for data, Post request</li><li>curl -X PUT -d â€œfirst=name&amp;last=lastnameâ€ http:***/method, d for data, Pust request</li><li>curl -X DELETE http:***/method, delete request</li></ul></li></ul><h2 id="Verify"><a href="#Verify" class="headerlink" title="Verify"></a>Verify</h2><blockquote><p>could not verify your access ?</p></blockquote><ul><li>curl -u username:password http://***, Auth</li></ul><h2 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h2><blockquote><p>Download file</p></blockquote><ul><li>curl http://***/folder, return binary file , error</li><li>curl -o filename.jpg http://***/folder, sucess</li></ul><blockquote><p>Saving large json file</p></blockquote><ul><li>curl -o file_name.json http:/.api.the_url*</li></ul><h1 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h1><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><blockquote><p>aviable in Mac, debian-based linux need to install</p></blockquote><ul><li>apt-get install rsync</li><li>yum install rsync</li></ul><h2 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h2><ul><li>rsync folder1/* backup/ , sync fils to backup folder,will skping the subfolderâ€™s file, but affected subfolder</li><li>rsync -r folder1/* backup/ , including subfolderâ€™s file</li><li>rsync -r folder1 backup/, sync folder, not content in it</li></ul><h2 id="Check-chage-before-run"><a href="#Check-chage-before-run" class="headerlink" title="Check chage before run"></a>Check chage before run</h2><ul><li>rsync -a â€“dry-run folder1/* backup/, check before the command run, now view showed<ul><li>rsync -av â€“dry-run folder1/* backup/, auto view</li></ul></li></ul><h2 id="Source-folder-has-new-file"><a href="#Source-folder-has-new-file" class="headerlink" title="Source_folder has new file"></a>Source_folder has new file</h2><ul><li>rsync -av â€“delete â€“dry-run original/ backup/, check, be careful !</li></ul><h2 id="Do-it-in-local-and-host"><a href="#Do-it-in-local-and-host" class="headerlink" title="Do it in local and host"></a>Do it in local and host</h2><ul><li>rsync -zaP -p local_folder username@ip:~/public/, z for compress, a for all, P for tarnsfer in internet</li><li>rsync 0zaP username@ip:~/public/file ~/Downloads/, revers</li></ul><h1 id="Cron"><a href="#Cron" class="headerlink" title="Cron"></a>Cron</h1><ul><li>crontab -l, list the crons</li></ul><blockquote><p>set your editor to nano, default vim</p></blockquote><ul><li><p>export EDITOR=/user/bin/nano</p></li><li><p>crontab -e, open editor</p><ul><li>press i to input</li></ul></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Algorhythm for schuel you task with time</span><br><span class="line"></span><br><span class="line"># â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ minute (0 - 59)</span><br><span class="line"># â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ hour (0 - 23)</span><br><span class="line"># â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of month (1 - 31)</span><br><span class="line"># â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ month (1 - 12)</span><br><span class="line"># â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ day of week (0 - 6) (Sunday to Saturday;</span><br><span class="line"># â”‚ â”‚ â”‚ â”‚ â”‚                                       7 is also Sunday on some systems)</span><br><span class="line"># â”‚ â”‚ â”‚ â”‚ â”‚</span><br><span class="line"># â”‚ â”‚ â”‚ â”‚ â”‚</span><br><span class="line"># * * * * *  command_to_execute</span><br></pre></td></tr></table></figure><ul><li><a href="https://youtu.be/QZJ1drMQz1A" target="_blank" rel="noopener">More in</a></li><li><a href="https://github.com/CoreyMSchafer/code_snippets/blob/master/Cron-Tasks/snippets.txt" target="_blank" rel="noopener">snippets</a></li><li><a href="https://crontab.guru/" target="_blank" rel="noopener">tools to make a cron job</a></li></ul><h1 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a>Profile</h1><ul><li>PS1=â€customer_namaeâ€; , change the name, temporary</li><li>ls -la, show dot file, find .bash_profile</li></ul><h2 id="backup"><a href="#backup" class="headerlink" title="backup"></a>backup</h2><ol><li>mv .bash_profile backup_folder</li><li>mv .bashrc back_folder</li></ol><h2 id="created"><a href="#created" class="headerlink" title="created"></a>created</h2><ol><li>cd !</li><li>touch .bash_profile</li><li>touch .bashrc</li><li>subl .bash_profile -&gt; echo â€œHello from bash_profileâ€, subl for sublime</li><li>subl .bashrc -&gt; echo â€œHello from bashrcâ€</li></ol><blockquote><p>bash_profile, run every time you open terminal, or ssh login to some machine. when you input bash, you will get the print from bashrc.</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if [-f ~/.bashrc]; then</span><br><span class="line">source ~/.bashrc</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><h2 id="config-terminal-view"><a href="#config-terminal-view" class="headerlink" title="config terminal view"></a>config terminal view</h2><p>You can add the keywords in below list to the ps1, to show some extra info.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># config display name</span><br><span class="line">ps1 = &quot;-&gt;&quot;; export PS1</span><br><span class="line"></span><br><span class="line"># if you config command is too long, you can += it</span><br><span class="line">ps1 += &quot;some_other_config&quot;</span><br><span class="line"></span><br><span class="line"># add the infomation of you computer, or time</span><br><span class="line"></span><br><span class="line">\u: usernmae</span><br><span class="line">\h: hostname</span><br><span class="line">\n: new line</span><br><span class="line">\t: the current time</span><br><span class="line">\w: current working directory</span><br><span class="line">\W: base name of current working directory</span><br></pre></td></tr></table></figure><p>In shell, you can print with {}, like :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># This will print the pwd&apos;s output in shell.</span><br><span class="line">You current diretory is $(pwd)</span><br><span class="line"></span><br><span class="line"># change color, no stop, all font will set to orange</span><br><span class="line">echo &quot;$(tput setaf 166) This is orange&quot;</span><br><span class="line"></span><br><span class="line"># set a stop of the change color command</span><br><span class="line">echo &quot;$(tput setaf 166) This is orange $(tput sgr0)&quot;</span><br></pre></td></tr></table></figure><h1 id="Mac-OS-Keyboard-Shortcuts"><a href="#Mac-OS-Keyboard-Shortcuts" class="headerlink" title="Mac OS Keyboard Shortcuts"></a>Mac OS Keyboard Shortcuts</h1><ul><li>using arrow key to view the history command</li><li>ctrl + a, jump to the begining of line</li><li>ctrl + e, jump to the end</li><li>option + left/rithg, jump by words</li><li>holding option key, move mourse to the point you want to go</li><li>ctrl + u, delete code before the point</li><li>ctrl + k, delete everything after the cursor</li><li>!fi, re run the command in history that begins with fi</li><li>ctrl+ r, search the history command that you inputed</li><li>ctrl + l, clean the screen, without clean the history output</li><li>ctrl + k, clearn the screen ,including the history output</li></ul><h1 id="Aliases"><a href="#Aliases" class="headerlink" title="Aliases"></a>Aliases</h1><ol><li>sudo vim .bash_profile</li><li>alias dt = â€˜cd !/Desktop/â€˜</li><li>killall Finder</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bash_profile</span><br><span class="line">alias testhost=&apos;ssh root@8.8.8.8 -p 22&apos;</span><br></pre></td></tr></table></figure><h1 id="generate-key"><a href="#generate-key" class="headerlink" title="generate key"></a>generate key</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆæœ¬åœ°ç§˜é’¥ï¼Œä¸€è·¯å›è½¦å³å¯</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line"># ä¸Šä¼ ç”Ÿæˆçš„ç§˜é’¥åˆ°æœåŠ¡å™¨</span><br><span class="line">scp ~/.ssh/id_rsa.pub testhost:~/.ssh/</span><br><span class="line"># ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† id_rsa.pub æ›´åä¸º authorized_keys</span><br><span class="line">mv id_rsa.pub authorized_keys</span><br><span class="line"># ä¿®æ”¹æƒé™</span><br><span class="line">chmod 700 ~/.ssh/</span><br><span class="line">chmod 600 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¸¸ç”¨å‘½ä»¤çš„cheatsheetï¼Œå¦‚æœæƒ³äº†è§£æ›´å¤šç†è®ºéƒ¨åˆ†ï¼Œè¯·å‚è€ƒä¹‹å‰çš„æ–‡ç« &lt;a href=&quot;http://wittyfans.com/coding/Linuxé˜…è¯»ç¬”è®°.html&quot;&gt;Linuxé˜…è¯»ç¬”è®°&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Excelç¬”è®°P1</title>
    <link href="http://wittyfans.com/coding/Excel%E7%AC%94%E8%AE%B0P1.html"/>
    <id>http://wittyfans.com/coding/Excelç¬”è®°P1.html</id>
    <published>2019-06-07T13:25:55.000Z</published>
    <updated>2019-06-07T13:31:53.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¸»è¦è®°å½•æˆ‘åœ¨YouTubeä¸Šå­¦ä¹ åˆ°çš„ExcelçŸ¥è¯†ï¼Œæ²¡æœ‰æ•´ç†æ‰€ä»¥é¡ºåºæ¯”è¾ƒä¹±ã€‚</p></blockquote><a id="more"></a><h1 id="1-çœæ—¶çš„å¿«æ·é”®"><a href="#1-çœæ—¶çš„å¿«æ·é”®" class="headerlink" title="1. çœæ—¶çš„å¿«æ·é”®"></a>1. çœæ—¶çš„å¿«æ·é”®</h1><ul><li>alt + pageup/pagedown, å·¦å³ç§»åŠ¨å…‰æ ‡</li><li>ctrl + å³/å·¦, å°†å…‰æ ‡ç§»åŠ¨åˆ°åˆ—å°¾/åˆ—é¦–</li><li>ctrl + ä¸Š/ä¸‹ï¼Œå°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–/è¡Œå°¾</li><li>å¦‚ä½•æ ¹æ®åˆ—åå¿«é€Ÿæ‰¾åˆ°åˆ—ï¼Ÿ<ol><li>é€‰æ‹©cell</li><li>shift + space é€‰æ‹©æ•´è¡Œ</li><li>ctrl + f </li><li>è¾“å…¥åå­—æœç´¢</li></ol></li></ul><blockquote><p>æˆ‘ç”µè„‘æŒ‰shift + space æ²¡ååº”ï¼Œæœ‰å†²çªï¼Ÿ </p></blockquote><ul><li>F2ï¼Œå¿«é€Ÿç¼–è¾‘ï¼Œåœ¨excelä¸­ï¼Œç‚¹å‡»cellä¸ä¼šè‡ªåŠ¨ç¼–è¾‘ï¼Œéœ€è¦åŒå‡»ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡æŒ‰f2å¼€å§‹å¿«é€Ÿç¼–è¾‘<ul><li>å¼€å§‹å¿«é€Ÿç¼–è¾‘åï¼Œåœ¨å³ä¸‹è§’ä¼šæ˜¾ç¤ºeditæ¨¡å¼ï¼Œè¿™æ—¶å€™å¦‚æœä½ ç¼–è¾‘å…¬å¼ï¼Œå·¦å³å…‰æ ‡ä¼šåœ¨å…¬å¼ä¹‹é—´ç§»åŠ¨ï¼Œå¦‚æœä½ æƒ³è¦é€‰æ‹©cellä½œä¸ºå…¬å¼çš„å‚æ•°å‘¢ï¼Ÿå†æŒ‰ä¸€æ¬¡å°†editæ¨¡å¼å˜æˆenteræ¨¡å¼å³å¯</li></ul></li></ul><h1 id="2-é«˜çº§å¤åˆ¶ç²˜è´´"><a href="#2-é«˜çº§å¤åˆ¶ç²˜è´´" class="headerlink" title="2. é«˜çº§å¤åˆ¶ç²˜è´´"></a>2. é«˜çº§å¤åˆ¶ç²˜è´´</h1><h2 id="æ‹–åŠ¨ç²˜è´´"><a href="#æ‹–åŠ¨ç²˜è´´" class="headerlink" title="æ‹–åŠ¨ç²˜è´´"></a>æ‹–åŠ¨ç²˜è´´</h2><ol><li>é€‰ä¸­å€¼</li><li>ç§»åŠ¨å…‰æ ‡è‡³æ¡†è¾¹ç¼˜å‡ºç°å››å‘ç®­å¤´</li><li>å³é”®é¼ æ ‡æŒ‰ä½ä¸æ”¾</li><li>æ‹–åŠ¨åˆ°å…¶å®ƒä½ç½®</li><li>æ¾å¼€é€‰æ‹©ç²˜è´´ç±»å‹</li></ol><h2 id="ç²˜è´´é€‰æ‹©å¤šæ ¼å¼"><a href="#ç²˜è´´é€‰æ‹©å¤šæ ¼å¼" class="headerlink" title="ç²˜è´´é€‰æ‹©å¤šæ ¼å¼"></a>ç²˜è´´é€‰æ‹©å¤šæ ¼å¼</h2><ol><li>æ­£å¸¸å¤åˆ¶</li><li>æŒ‰ ALT+E+S,æ‰“å¼€ç²˜è´´æ ¼å¼é¢æ¿ï¼ˆMacä½¿ç”¨contrl+command+vï¼‰<ol><li>è‡ªå®šä¹‰ç²˜è´´</li><li>æ¯”å¦‚æŒ‰v -&gt; å›è½¦ï¼Œåªç²˜è´´å€¼</li></ol></li></ol><p>å¦‚æœä½ çš„é”®ç›˜æœ‰menué”®ï¼Œå¯ä»¥ä¹‹é—´ä½¿ç”¨memu+vç²˜è´´å€¼ã€‚</p><h1 id="3-åœ¨ä¸¤ä¸ªè¡¨ä¸­ä½¿ç”¨VLookup-Hlookupå‡½æ•°"><a href="#3-åœ¨ä¸¤ä¸ªè¡¨ä¸­ä½¿ç”¨VLookup-Hlookupå‡½æ•°" class="headerlink" title="3. åœ¨ä¸¤ä¸ªè¡¨ä¸­ä½¿ç”¨VLookup/Hlookupå‡½æ•°"></a>3. åœ¨ä¸¤ä¸ªè¡¨ä¸­ä½¿ç”¨VLookup/Hlookupå‡½æ•°</h1><p>å¦‚æœä½ è¡¨çš„headeråœ¨ä¸Šé¢ï¼Œä½¿ç”¨vlookupå‡½æ•°ï¼Œå¦‚æœä½ çš„headeråœ¨å·¦è¾¹ï¼Œé‚£ä¹ˆhlookupä¹Ÿè®¸æ›´é€‚åˆä½ ã€‚</p><h2 id="Vertical-Look-UP"><a href="#Vertical-Look-UP" class="headerlink" title="Vertical Look UP"></a>Vertical Look UP</h2><blockquote><p>V stands for Vertical look up, not value, as there is a Hlookup = horzizontalï¼›å¤§å®¶å¯èƒ½æŠŠvlookupå‡½æ•°ç†è§£ä¸ºvalue look upï¼Œå…¶å®å®ƒæ˜¯ vertical lookup</p></blockquote><p>ä½ åªèƒ½æ ¹æ®å·¦è¾¹çš„åˆ—æ‰¾å‡ºå³è¾¹åˆ—çš„å€¼ï¼Œè€Œä¸å¯ä»¥é€šè¿‡æ ¹æ®å³è¾¹çš„åˆ—æ¥æ‰¾å‡ºå·¦è¾¹åˆ—çš„å€¼ã€‚</p><p>å…ˆå°†ä¸¤ä¸ªè¡¨æ‘Šå¼€æ”¾åˆ°ä¸€èµ·çœ‹ï¼Œé€‰æ‹©review -&gt; Arrange all -&gt; vertical</p><p>ä½¿ç”¨vlookupå‡½æ•°ï¼Œå®ƒéœ€è¦å››ä¸ªå‚æ•°ï¼š</p><ol><li>æŸ¥ä»€ä¹ˆï¼Ÿé€‰ä¸­é‚£ä¸ªcell</li><li>å»å“ªé‡ŒæŸ¥ï¼Œé€‰ä¸­æ•´ä¸ªèŒƒå›´</li><li>æŸ¥æ‰€é€‰æ•°æ®ä¸­çš„ç¬¬å‡ åˆ—ï¼Œéœ€è¦æ³¨æ„ï¼Œexcelä»1å¼€å§‹ç¼–å·</li><li>ç²¾ç¡®åŒ¹é…è¿˜æ˜¯è¿‘ä¼¼åŒ¹é…ï¼ˆè¿‘ä¼¼åŒ¹é…ï¼šæŸ¥aï¼Œé‚£ä¹ˆabcä¹Ÿä¼šè¢«è¿”å›ï¼‰</li></ol><p>æŒ‰å›è½¦ï¼Œå°±å¯ä»¥æˆåŠŸçš„æ‰¾å‡ºä½ éœ€è¦çš„å€¼ã€‚</p><h2 id="Horzizontal-Look-UP"><a href="#Horzizontal-Look-UP" class="headerlink" title="Horzizontal Look UP"></a>Horzizontal Look UP</h2><p>ä½¿ç”¨hlookupå‡½æ•°ï¼Œå®ƒéœ€è¦å››ä¸ªå‚æ•°ï¼š</p><ol><li>æŸ¥ä»€ä¹ˆï¼Ÿé€‰ä¸­é‚£ä¸ªcell</li><li>å»å“ªé‡ŒæŸ¥ï¼Œé€‰ä¸­æ•´ä¸ªèŒƒå›´</li><li>æŸ¥æ‰€é€‰æ•°æ®ä¸­çš„ç¬¬å‡ è¡Œï¼Œéœ€è¦æ³¨æ„ï¼Œexcelä»1å¼€å§‹ç¼–å·</li><li>ç²¾ç¡®åŒ¹é…è¿˜æ˜¯è¿‘ä¼¼åŒ¹é…ï¼ˆè¿‘ä¼¼åŒ¹é…ï¼šæŸ¥aï¼Œé‚£ä¹ˆabcä¹Ÿä¼šè¢«è¿”å›ï¼‰</li></ol><h1 id="4-å¦‚ä½•æŠŠä¸¤åˆ—å€¼ç›¸åŠ "><a href="#4-å¦‚ä½•æŠŠä¸¤åˆ—å€¼ç›¸åŠ " class="headerlink" title="4. å¦‚ä½•æŠŠä¸¤åˆ—å€¼ç›¸åŠ "></a>4. å¦‚ä½•æŠŠä¸¤åˆ—å€¼ç›¸åŠ </h1><p>å‡è®¾ä¸¤ä¸ªcellçš„å€¼ç±»å‹ä¸ºæ–‡æœ¬(Text)ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç›´æ¥å°†ä¸¤ä¸ªå€¼ä½¿ç”¨ &amp; ç»“åˆï¼Œå¦‚æœä¸æ˜¯æ–‡æœ¬ï¼Œä½ å¯ä»¥ä½¿ç”¨Textå‡½æ•°å®Œæˆï¼Œå³:Text(å€¼çš„åæ ‡,0).</p><h1 id="5-é€è§†è¡¨"><a href="#5-é€è§†è¡¨" class="headerlink" title="5. é€è§†è¡¨"></a>5. é€è§†è¡¨</h1><p>æˆ‘æ˜¯åœ¨Pythonä¸­ä½¿ç”¨è¿‡ pivot_table æ‰çŸ¥é“ pivot æ“ä½œçš„æ„æ€ï¼Œæ¥è§¦ excel åæ‰çŸ¥é“è¿™å«é€è§†è¡¨ï¼Œæœ‰äº›äººä¹Ÿå«è¿™ä¸ªæ•°æ®å‰–æ.</p><p>anyway, ä»Šå¤©æ¥è®°å½•ä¸€ä¸‹é€è§†è¡¨çš„ä½¿ç”¨ã€‚</p><p>æˆ‘ä½¿ç”¨çš„æ˜¯ excel 2016 è‹±æ–‡ç‰ˆï¼Œå¾®è½¯çš„ excel ç•Œé¢ä¸ä¼šå·®å¤ªå¤šï¼Œæ‰“å¼€excelä½ çš„ç•Œé¢åº”è¯¥å’Œæˆ‘å·®ä¸å¤šã€‚</p><p>é¦–å…ˆä½ éœ€è¦æ‰“å¼€ä½ çš„è¡¨ï¼Œç„¶åé€‰æ‹©ä½ éœ€è¦é€è§†çš„æ•°æ®ï¼š</p><p><img src="https://i.loli.net/2019/06/04/5cf65f311a5c943124.png" alt="pivot_table0.png"></p><h1 id="6-æˆ‘åªè¦é€è§†åçš„æ’åå‰åçš„æ•°æ®"><a href="#6-æˆ‘åªè¦é€è§†åçš„æ’åå‰åçš„æ•°æ®" class="headerlink" title="6. æˆ‘åªè¦é€è§†åçš„æ’åå‰åçš„æ•°æ®"></a>6. æˆ‘åªè¦é€è§†åçš„æ’åå‰åçš„æ•°æ®</h1><p>ç‚¹å‡» cell æ—è¾¹çš„ sort æŒ‰é’®ï¼Œç‚¹å‡» value filter, é€‰æ‹©æœ€ä¸‹é¢çš„ top 10ï¼Œ å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œåšå…¶ä»–çš„filteræ“ä½œã€‚</p><h1 id="7-å®‰è£…-excel-æ’ä»¶"><a href="#7-å®‰è£…-excel-æ’ä»¶" class="headerlink" title="7 å®‰è£… excel æ’ä»¶"></a>7 å®‰è£… excel æ’ä»¶</h1><p> excelçš„æ’ä»¶æ˜¯ xlam æ ¼å¼çš„æ–‡ä»¶ï¼Œä½ ä¸å¯ä»¥ç›´æ¥åŒå‡»æ‰“å¼€ï¼Œéœ€è¦æ‰“å¼€excel.</p><p> file -&gt; add-ins -&gt; manage -&gt; go</p><p> è¿™æ—¶å€™å¯ä»¥çœ‹åˆ°ä½ å®‰è£…å¥½äº†çš„å’Œæ²¡å®‰è£…çš„æ’ä»¶ï¼Œç„¶åç‚¹å‡» browserï¼Œæ‰¾åˆ°ä½ çš„æ’ä»¶ï¼Œç‚¹å‡» ok å³å¯ã€‚</p><p> æ’ä»¶ä¼šæ¯æ¬¡éƒ½éšç€excelçš„æ‰“å¼€è€Œå¯åŠ¨ï¼Œä¹Ÿè®¸æœ‰æ—¶å€™ä½ å¹¶ä¸éœ€è¦è¿™æ ·ï¼Œä½ å¯ä»¥åœ¨ Developer, add-ins é‡Œé¢ æŠŠè¿™ä¸ªæ’ä»¶çš„é€‰é¡¹ unchecã€‚</p><h1 id="8-å®Œå…¨å¸è½½excelæ’ä»¶"><a href="#8-å®Œå…¨å¸è½½excelæ’ä»¶" class="headerlink" title="8. å®Œå…¨å¸è½½excelæ’ä»¶"></a>8. å®Œå…¨å¸è½½excelæ’ä»¶</h1><ol><li>å–æ¶ˆé€‰æ‹©æ’ä»¶ã€‚</li><li>file -&gt; options -&gt; add-ins</li><li>é€‰æ‹©éœ€è¦å¸è½½çš„æ’ä»¶ï¼Œæ‰¾åˆ°è·¯å¾„</li><li>æ‰“å¼€è¯¥è·¯å¾„ï¼Œåˆ é™¤è¯¥æ’ä»¶</li><li>æ‰“å¼€é€‰æ‹©æ’ä»¶æŒ‰é’®ï¼Œé‡æ–°é€‰æ‹©ï¼Œexcelä¼šæç¤ºæ— æ³•æ‰¾åˆ°ï¼Œæ˜¯å¦åˆ é™¤ï¼Œç‚¹å‡»ç¡®å®š</li></ol><h1 id="9-æ’ä»¶ä¸è§äº†ï¼Ÿé‡æ–°åŠ è½½æ’ä»¶"><a href="#9-æ’ä»¶ä¸è§äº†ï¼Ÿé‡æ–°åŠ è½½æ’ä»¶" class="headerlink" title="9. æ’ä»¶ä¸è§äº†ï¼Ÿé‡æ–°åŠ è½½æ’ä»¶"></a>9. æ’ä»¶ä¸è§äº†ï¼Ÿé‡æ–°åŠ è½½æ’ä»¶</h1><ol><li>file - options - add-ins</li><li>manage -&gt; disabled items -&gt; go</li></ol><h1 id="10-åšä¸€ä¸ªdrop-down-memuï¼ˆä¸‹æ‹‰èœå•ï¼‰"><a href="#10-åšä¸€ä¸ªdrop-down-memuï¼ˆä¸‹æ‹‰èœå•ï¼‰" class="headerlink" title="10. åšä¸€ä¸ªdrop down memuï¼ˆä¸‹æ‹‰èœå•ï¼‰"></a>10. åšä¸€ä¸ªdrop down memuï¼ˆä¸‹æ‹‰èœå•ï¼‰</h1><p>ä¸‹æ‹‰èœå•å¯ä»¥è®©ä½ åœ¨å¡«å†™cellä¸­çš„å€¼çš„æ—¶å€™ï¼Œæœ‰ä¸€äº›é€‰æ‹©ï¼Œä¸ç”¨æ‰‹åŠ¨å¡«å†™ä¹Ÿé¿å…äº†é”™è¯¯çš„è¾“å…¥ï¼Œå‘ç°ä¸€ä¸ªæ’ä»¶ List Searchï¼ˆå…è´¹ï¼‰ï¼Œå¯ä»¥å¾ˆç®€å•çš„åˆ›å»ºä¸‹æ‹‰èœå•ã€‚</p><h1 id="11-åšä¸€ä¸ª-Table-of-contents-Gallery"><a href="#11-åšä¸€ä¸ª-Table-of-contents-Gallery" class="headerlink" title="11. åšä¸€ä¸ª Table of contents Gallery"></a>11. åšä¸€ä¸ª Table of contents Gallery</h1><p>æˆ‘ä¹Ÿä¸çŸ¥é“å¦‚ä½•ç¿»è¯‘è¿™ä¸ªè¯ï¼Œåæ­£å°±æ˜¯æŠŠä½ æ‰€æœ‰åšå¥½çš„å›¾ï¼Œæ•´é½çš„æ”¾åœ¨ç¬¬ä¸€é¡µåšä¸€ä¸ªé¢„è§ˆå›¾ï¼Œç‚¹å‡»åå°±å¯ä»¥è·³è½¬åˆ°å­é¡µé¢ï¼Œç±»ä¼¼è¿™æ ·ï¼š</p><p><img src="https://i.loli.net/2019/06/04/5cf6780d097a640476.jpeg" alt="56D77E73-AE1E-4F47-853D-55DEFD291D38.jpeg"></p><p>Tab Hound, éœ€è¦æ”¶è´¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æ‰¾åˆ°è¿™ä¸ªæ–‡ç« ç ”ç©¶ä¸€ä¸‹å®çš„ç”¨æ³•ã€‚</p><h1 id="12-è¿‡æ»¤å™¨"><a href="#12-è¿‡æ»¤å™¨" class="headerlink" title="12. è¿‡æ»¤å™¨"></a>12. è¿‡æ»¤å™¨</h1><p>ç‚¹å‡»ä»»æ„çš„cellï¼Œctrl+shift+L, å¯åŠ¨/å…³é—­è¿‡æ»¤å™¨ã€‚</p><p>åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œä½ å¯ä»¥æŒ‰ç…§ä¸€åˆ—ä¸­çš„å€¼å»è¿‡æ»¤æ•´ä¸ªè¡¨ï¼ˆä¸æ˜¯åˆ é™¤ï¼Œåªæ˜¯éšè—ï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨é‡Œé¢æ’åºã€‚</p><p>æ¨èæ•°æ®è½¬æ¢æˆ Table åˆ†æï¼Œè¿™æ ·é…åˆè¿‡æ»¤å™¨ä½¿ç”¨ï¼Œåœ¨ä½ æ’å…¥è¡Œå’Œåˆ—çš„æ—¶å€™ï¼Œexelä¼šè‡ªåŠ¨å°†ä½ çš„æ“ä½œä¸filterå…³è”èµ·æ¥ï¼Œåˆ©ç”¨å…¬å¼æ±‚å€¼çš„æ—¶å€™ï¼Œtableä¼šè‡ªåŠ¨å¡«å……è¡¨ä¸­å…¶ä»–rowçš„å€¼ã€‚</p><p>åœ¨tableä¸­ï¼Œä½ ä¹Ÿå¯ä»¥è½»æ¾çš„æ·»åŠ  total çš„è¡Œï¼Œexcelä¼šè‡ªåŠ¨å¸®ä½ è®¡ç®—ï¼ˆä¸åŒ…æ‹¬éšè—çš„å€¼ï¼‰ï¼Œå¯ä»¥é€‰æ‹©æ±‚å’Œï¼Œæ±‚å¹³å‡ç­‰æ“ä½œã€‚</p><p>tableè¿˜å¯ä»¥å¯¹åŒä¸€ä¸ªsheetä¸­çš„ä¸¤ä¸ªtableä¸€èµ·è¿‡æ»¤ã€‚</p><p>ä¸€äº›å¸¸ç”¨çš„filterå¿«æ·é”®ï¼š</p><ul><li>alt + ä¸‹ç®­å¤´ï¼Œå°±å¯ä»¥å¿«é€Ÿè°ƒå‡ºfilterçš„èœå•</li><li>alt + ä¸‹ + e, è°ƒå‡ºfilterèœå•ç„¶åå¼€å§‹è¾“å…¥æ–‡å­—æœç´¢</li><li>alt + ä¸‹ + c, æ¸…é™¤å½“å‰åˆ—çš„ filteræ¡ä»¶</li><li>shfit + alt + ä¸‹ï¼Œåœ¨ä»»æ„cellè°ƒå‡ºfilterèœå•</li><li>alt + ä¸‹ + f + e + enter, å¿«é€Ÿæ‰¾å‡ºä¸ºç©ºçš„è¡Œ</li></ul><p>æœ€èˆ’æœçš„æ˜¯æ ¹æ®å½“å‰é€‰æ‹©çš„å€¼è¿›è¡Œç­›é€‰:</p><ul><li>å³é”®-&gt; filter -&gt; filter by selected cellâ€™s value</li><li>å¿«æ·é”®ï¼šmenu key + E + V (Windows)</li></ul><h2 id="å¤šåˆ—è¿‡æ»¤"><a href="#å¤šåˆ—è¿‡æ»¤" class="headerlink" title="å¤šåˆ—è¿‡æ»¤"></a>å¤šåˆ—è¿‡æ»¤</h2><p>è¿‡æ»¤å™¨é»˜è®¤æ˜¯åªé’ˆå¯¹è¿™äº›çœ‹å¾—è§çš„æ•°æ®çš„ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆç®€å•çš„è¿›è¡Œå¤šåˆ—è¿‡æ»¤ã€‚ä½ å¯æƒ³è±¡ï¼Œæ¯æ¬¡è¿›è¡Œä¸€ä¸ªè¿‡æ»¤å™¨çš„åº”ç”¨ï¼Œéƒ½æ˜¯ç»™ä½ çœ‹å¾—è§çš„ç»“æœåŠ äº†ä¸€ä¸ªæ¡ä»¶ï¼Œåœ¨ç¼–ç¨‹çš„ä¸–ç•Œé‡Œï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œäº†andæ“ä½œã€‚</p><p>ä½†å¦‚æœä½ æƒ³è¦oræ“ä½œå‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥å€ŸåŠ©orå…¬å¼æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼š</p><p><img src="https://i.loli.net/2019/06/04/5cf68eafbf80710954.jpeg" alt="or"></p><p>ä½ å¯ä»¥ç›´æ¥å°†é¼ æ ‡ç§»åŠ¨åˆ°filter buttonä¸Šï¼ŒæŸ¥çœ‹å½“å‰çš„æ¡ä»¶ï¼Œè€Œä¸éœ€è¦è¿›å»èœå•ã€‚</p><h2 id="é‡å¤å€¼è¿‡æ»¤"><a href="#é‡å¤å€¼è¿‡æ»¤" class="headerlink" title="é‡å¤å€¼è¿‡æ»¤"></a>é‡å¤å€¼è¿‡æ»¤</h2><p>ä½ æƒ³è¦æ‰¾æŸä¸€åˆ—ä¸­é‡å¤çš„å€¼ï¼Œç„¶åæŠŠä»–ä»¬æ”¾åœ¨ä¸€èµ·å¯¹æ¯”ã€‚</p><ol><li>é€‰æ‹©åˆ—</li><li>conditional formating, highlight cell</li><li>ç­›é€‰ï¼Œsort</li></ol><h2 id="æ ¹æ®å·²æœ‰çš„listè¿‡æ»¤"><a href="#æ ¹æ®å·²æœ‰çš„listè¿‡æ»¤" class="headerlink" title="æ ¹æ®å·²æœ‰çš„listè¿‡æ»¤"></a>æ ¹æ®å·²æœ‰çš„listè¿‡æ»¤</h2><ol><li>é€‰æ‹©åˆ—</li><li>æ‰“å¼€filterèœå•</li><li>æœç´¢åˆ°ä½ éœ€è¦çš„å…³é”®å­—</li><li>é€‰æ‹©ç¬¬äºŒä¸ªï¼ŒåŒæ—¶åŠ ä¸Šâ€œæ·»åŠ â€é€‰é¡¹</li></ol><h1 id="13-Power-Query"><a href="#13-Power-Query" class="headerlink" title="13. Power Query"></a>13. Power Query</h1><h2 id="Tidy-Data"><a href="#Tidy-Data" class="headerlink" title="Tidy Data"></a>Tidy Data</h2><p>åœ¨åˆ©ç”¨Python Pandasåˆ†ææ•°æ®çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ€å¼€å§‹ä¸€èˆ¬éƒ½éœ€è¦å°†æ•°æ®è½¬åŒ–æˆå®¹æ˜“åˆ†æçš„æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯å¤§å®¶æ‰€è¯´çš„Tiday Data, å¦‚æœä½ ä¸çŸ¥tidy dataçš„å®šä¹‰ï¼Œé‚£ä¹ˆå¯ä»¥å‚è€ƒ<a href="https://vita.had.co.nz/papers/tidy-data.pdf" target="_blank" rel="noopener">è¿™ç¯‡</a>æ–‡ç« ã€‚</p><p>é‚£ä¹ˆåœ¨Exceä¸­å¦‚ä½•è¿›è¡Œè¿™æ ·çš„æ“ä½œå‘¢ï¼Ÿä»Šå¤©å‘ç°å¯ä»¥åˆ©ç”¨ Power Query å®ç°è¿™ä¸ªéœ€æ±‚ã€‚</p><p>å¦‚æœä½ çš„Excelç‰ˆæœ¬æ˜¯2016ï¼Œé‚£ä¹ˆPower Queryå°±å·²ç»å†…ç½®åœ¨å…¶ä¸­äº†ï¼Œå¦‚æœæ˜¯æ¯”è¾ƒæ—©çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨<a href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=39379" target="_blank" rel="noopener">è¿™ä¸ª</a>é¡µé¢ä¸‹è½½åˆ°Power Queryã€‚</p><p>åŒæ—¶å¾®è½¯ä¹Ÿæä¾›äº† Power Query çš„<a href="https://support.office.com/en-us/article/power-query-overview-and-learning-ed614c81-4b00-4291-bd3a-55d80767f81d" target="_blank" rel="noopener">æ•™ç¨‹</a>.</p><p>è¦ unpivolt ä½ çš„æ•°æ®ï¼Œ</p><ol><li>é€‰æ‹©ä½ çš„æ•°æ®</li><li>Insert -&gt; Table, å°†ä½ çš„æ•°æ®è½¬åŒ–æˆTable</li><li>å†ç‚¹å‡»Data -&gt; From Tableï¼Œè¿›å…¥ Power Query çš„ç¼–è¾‘ç•Œé¢</li><li>é€‰æ‹©ä½ éœ€è¦æ“ä½œçš„åˆ—</li><li>ç‚¹å‡» Transform -&gt; Unpivot Columns (å¦‚æœä½ æ²¡çœ‹åˆ°è¿™ä¸ªé€‰é¡¹ï¼Œå°†excelæ‹–å®½ä¸€ç‚¹)</li></ol><p>è¿™æ ·å°±å®Œæˆäº†ä½ æ•°æ®çš„è½¬åŒ–ï¼Œä½ è¿˜å¯ä»¥å¯¹ unpivot åçš„æ•°æ®è¿›è¡Œè¿‡æ»¤æ“ä½œã€‚</p><h2 id="Unpivot-Columns"><a href="#Unpivot-Columns" class="headerlink" title="Unpivot Columns"></a>Unpivot Columns</h2><p>å‡è®¾ä½ çš„æ•°æ®æ˜¯è¿™æ ·çš„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 a,b</span><br><span class="line">2 b,c</span><br></pre></td></tr></table></figure><p>ç„¶åä½ æƒ³è¦æŠŠå®ƒä»¬åˆ†å¼€ï¼Œå°±åƒè¿™æ ·:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 a</span><br><span class="line">1 b</span><br><span class="line">2 b</span><br><span class="line">2 c</span><br></pre></td></tr></table></figure></p><p>åŸºæœ¬æ“ä½œå’Œä¸Šé¢çš„æ˜¯ä¸€æ ·çš„ï¼Œ</p><ol><li>é€‰æ‹©data -&gt; from table</li><li>home-&gt; spilt columns -&gt; by delimiter -&gt; ok</li><li>åˆ é™¤å¤šä½™çš„åˆ—</li><li>transform -&gt; unpivot columns</li></ol><h2 id="æ ¹æ®å·²æœ‰çš„æ•°æ®è®¡ç®—ç™¾åˆ†æ¯”"><a href="#æ ¹æ®å·²æœ‰çš„æ•°æ®è®¡ç®—ç™¾åˆ†æ¯”" class="headerlink" title="æ ¹æ®å·²æœ‰çš„æ•°æ®è®¡ç®—ç™¾åˆ†æ¯”"></a>æ ¹æ®å·²æœ‰çš„æ•°æ®è®¡ç®—ç™¾åˆ†æ¯”</h2><ol><li>è¾“å…¥æ€»æ•°</li><li>è¾“å…¥å‡½æ•°å¼€å§‹è®¡ç®—ï¼Œåœ¨è¿™ä¸€æ­¥éœ€è¦æ³¨æ„å…³é—­ Generate GetPirovtDataé€‰é¡¹ï¼Œæ–¹æ³•æ˜¯:<ol><li>ç‚¹å‡»éœ€è¦è®¡ç®—çš„å€¼</li><li>analyse-&gt; options å»æ‰Generate GetPirovtDataçš„é’©</li><li>è¾“å…¥å‡½æ•°è®¡ç®—å€¼</li><li><strong>control + shift 5</strong> å¿«é€Ÿè½¬æ¢æˆç™¾åˆ†æ¯”</li></ol></li></ol><h1 id="14-å¦‚ä½•æ ¹æ®ç°æœ‰æ•°æ®ç»˜å›¾"><a href="#14-å¦‚ä½•æ ¹æ®ç°æœ‰æ•°æ®ç»˜å›¾" class="headerlink" title="14. å¦‚ä½•æ ¹æ®ç°æœ‰æ•°æ®ç»˜å›¾"></a>14. å¦‚ä½•æ ¹æ®ç°æœ‰æ•°æ®ç»˜å›¾</h1><ol><li>é€‰æ‹©ä½ è¦ç»˜åˆ¶å›¾çš„æ•°æ®</li><li>insert tableï¼Œé€‰æ‹©å›¾ç±»å‹</li><li>é€‰æ‹©labels<ol><li>select data</li><li>edite labels</li><li>é€‰æ‹©labelçš„åŒºé—´</li></ol></li></ol><h1 id="15-å¦‚ä½•åˆ¶ä½œexcelé€‰æ‹©å™¨"><a href="#15-å¦‚ä½•åˆ¶ä½œexcelé€‰æ‹©å™¨" class="headerlink" title="15. å¦‚ä½•åˆ¶ä½œexcelé€‰æ‹©å™¨"></a>15. å¦‚ä½•åˆ¶ä½œexcelé€‰æ‹©å™¨</h1><p>æˆ‘ä»¬åœ¨é¢„è§ˆæ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¿‡æ»¤å™¨(Filter)æ¥è¿‡æ»¤æˆ‘ä»¬çœ‹åˆ°çš„æ•°æ®ï¼Œè¿™æ—¶å€™å¯ä»¥åœ¨è¿‡æ»¤å™¨æ ‡ç­¾ä¸Šçœ‹åˆ°å®ƒæ˜¾ç¤ºä¸º Multiple Items, ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½å¾ˆç›´è§‚çš„çœ‹åˆ°å®ƒåˆ°åº•é€‰æ‹©äº†ä»€ä¹ˆæ•°æ®é¡¹ã€‚</p><p>ä¸ºäº†è®©ä½ æ‰€é€‰çš„é¡¹ç›®ä¸€ç›®äº†ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¶ä½œä¸€ä¸ªå¤šé€‰èœå•ï¼š</p><ol><li>Add a Slicer</li></ol><p>é¦–å…ˆï¼Œå…ˆå°†ä½ çš„æ•°æ®é€è§†å¥½ï¼Œç„¶ååœ¨ä½ é€è§†æ“ä½œçš„åŸºåˆ—ä¸Šé¢ç‚¹å‡»ï¼Œå†æ‰“å¼€analyseé€‰é¡¹å¡ï¼Œæ’å…¥ Slicer, é€‰æ‹©ä½ éœ€è¦é€‰æ‹©çš„åˆ—ï¼Œç„¶åä½ å°±å¯ä»¥çœ‹åˆ° slicer å‡ºç°ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œé€‰æ‹©è¿‡æ»¤é¡¹ç›®ã€‚</p><p>ä½†æ˜¯å¦‚ä½•çŸ¥é“ä½ é€‰æ‹©äº†å“ªäº›é¡¹ç›®å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ éœ€è¦åœ¨å¦ä¸€ä¸ªè¡¨ä¸­ä½¿ç”¨ä½ é€‰è¿‡å“ªäº›é€‰é¡¹è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p><p>ä½ å¯ä»¥copyä¸€ä»½ä½ å·²ç»é€è§†è¿‡çš„è¡¨ï¼ˆéœ€è¦æ³¨æ„ä¿ç•™filterï¼‰ï¼Œç„¶ååœ¨ pivot é€‰é¡¹ä¸­ï¼Œå°†é™¤äº†filteçš„å…¶ä»–å€¼å…¨éƒ¨åˆ æ‰ï¼Œè¿™æ ·ä½ åœ¨ slicerä¸­é€‰æ‹©çš„æ—¶å€™ï¼Œè¿™ä¸ªlistä¹Ÿä¼šå®æ—¶æ›´æ–°ã€‚</p><h1 id="16-excelç¼–ç¨‹"><a href="#16-excelç¼–ç¨‹" class="headerlink" title="16. excelç¼–ç¨‹"></a>16. excelç¼–ç¨‹</h1><h2 id="å‡½æ•°å®šä¹‰"><a href="#å‡½æ•°å®šä¹‰" class="headerlink" title="å‡½æ•°å®šä¹‰"></a>å‡½æ•°å®šä¹‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function func_name(arg as arg_type) as returned_type</span><br><span class="line">    func_name = caculated_value</span><br><span class="line">end function</span><br><span class="line"></span><br><span class="line">ç”¨ä¸­æ–‡è§£é‡Šä¸€éï¼š</span><br><span class="line"></span><br><span class="line">function å‡½æ•°å(å‚æ•° as å‚æ•°æ•°æ®ç±»å‹) as è¿”å›å€¼ç±»å‹</span><br><span class="line">    å‡½æ•°å= è®¡ç®—çš„ç»“æœ</span><br><span class="line">function</span><br></pre></td></tr></table></figure><ul><li>function æ˜¯å…³é”®å­—ï¼Œç”¨æ¥å®šä¹‰å‡½æ•°</li><li>end function ç”¨æ¥æ ‡è®°å‡½æ•°çš„ç»“æŸ</li><li>excel çš„å‡½æ•°æ²¡æœ‰ç±»ä¼¼ç¼–ç¨‹è¯­è¨€ä¸­çš„returnå…³é”®å­—ï¼Œåªéœ€è¦æŠŠè®¡ç®—ç»“æœèµ‹å€¼ç»™å‡½æ•°åå³å¯å®Œæˆç»“æœçš„è¿”å›</li></ul><h2 id="å‚è€ƒpythonè¯­æ³•å¯¹æ¯”"><a href="#å‚è€ƒpythonè¯­æ³•å¯¹æ¯”" class="headerlink" title="å‚è€ƒpythonè¯­æ³•å¯¹æ¯”"></a>å‚è€ƒpythonè¯­æ³•å¯¹æ¯”</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># python</span><br><span class="line">a = 10</span><br><span class="line"></span><br><span class="line"># excel</span><br><span class="line">dim a as 10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># if è¯­å¥</span><br><span class="line"># python</span><br><span class="line">if a == b:</span><br><span class="line">    ...</span><br><span class="line">else:</span><br><span class="line">   ...</span><br><span class="line"></span><br><span class="line"># excel</span><br><span class="line"></span><br><span class="line">if a==b then</span><br><span class="line">    ...</span><br><span class="line">else</span><br><span class="line">    ....</span><br><span class="line">end if</span><br></pre></td></tr></table></figure><h1 id="17-é”å®šæŸä¸ªCell"><a href="#17-é”å®šæŸä¸ªCell" class="headerlink" title="17. é”å®šæŸä¸ªCell"></a>17. é”å®šæŸä¸ªCell</h1><ol><li>é€‰ä¸­æ‰€æœ‰å…¶ä»–çš„cellï¼Œformate -&gt; proctet -&gt; å–æ¶ˆé€‰ä¸­</li><li>åœ¨sheet nameå³é”®ï¼Œä¿æŠ¤è¯¥è¡¨</li><li>è®¾ç½®å¯†ç </li></ol><p>é”å®šæŸä¸ªcellçš„å¥½å¤„ï¼š</p><p>å‡è®¾ä½ æŒ‰ç…§è¡Œç»Ÿè®¡ï¼Œç”¨æ‰«ç æªå»æ‰«æè‡ªåŠ¨è¾“å…¥ï¼Œæœexcelä¼šè‡ªåŠ¨æ¢è¡Œï¼ŒæŸä¸€è¡Œä½ æƒ³è¦ç›´æ¥è·³è¿‡ï¼Œå°±å¯ä»¥è®¾ç½®é”å®šä¸å…è®¸é€‰æ‹©ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¸»è¦è®°å½•æˆ‘åœ¨YouTubeä¸Šå­¦ä¹ åˆ°çš„ExcelçŸ¥è¯†ï¼Œæ²¡æœ‰æ•´ç†æ‰€ä»¥é¡ºåºæ¯”è¾ƒä¹±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="data analyse" scheme="http://wittyfans.com/tags/data-analyse/"/>
    
      <category term="æ•°æ®åˆ†æ" scheme="http://wittyfans.com/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>PowerShellé€šè¿‡http, https, å’Œftpä¸‹è½½æ–‡ä»¶</title>
    <link href="http://wittyfans.com/coding/PowerShell%E9%80%9A%E8%BF%87Http-HTTPS-%E5%92%8CFTp%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6.html"/>
    <id>http://wittyfans.com/coding/PowerShellé€šè¿‡Http-HTTPS-å’ŒFTpä¸‹è½½æ–‡ä»¶.html</id>
    <published>2019-04-08T14:13:44.000Z</published>
    <updated>2019-04-08T14:29:56.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åˆ©ç”¨ <em>PowerShell</em> å‘èµ·è¯·æ±‚ï¼Œä¸ä»…å¯ä»¥ä¸‹è½½æ–‡ä»¶ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ç®¡é“å¯¹æ–‡ä»¶è¿›è¡Œè§£æï¼Œè¿™ä¸€ç‚¹æ¯” <em>CMD</em> å‘½ä»¤è¡Œå’Œ <em>Linux</em> ä¸‹çš„ <em>wget</em> è¿˜è¦å¥½ç”¨ã€‚</p></blockquote><a id="more"></a><h1 id="å†…ç½‘ç¯å¢ƒä¸‹"><a href="#å†…ç½‘ç¯å¢ƒä¸‹" class="headerlink" title="å†…ç½‘ç¯å¢ƒä¸‹"></a>å†…ç½‘ç¯å¢ƒä¸‹</h1><p>å¦‚æœä½ å·¥ä½œçš„ç¯å¢ƒä¸»è¦æ˜¯é€šè¿‡ <em>Server Message Block (SMB)</em> åè®®æ¥ä¼ è¾“æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨ <em>powershell</em> ä¸­ä½¿ç”¨ <em>copy-item</em> å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copy-Item -Source \\server\share\file -Destination C:\path\</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ åœ¨å…¬å¸çš„å†…ç½‘ï¼ˆåŸŸç¯å¢ƒï¼‰ä¸‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå‘½ä»¤æŒºé€‚åˆä½ ï¼Œå¦‚æœä½ æ˜¯è¦ä¸‹è½½å¤–ç½‘æˆ–è€… <em>Internet</em> ä¸Šé¢çš„æ•°æ®ï¼Œäº‹æƒ…å°±å˜å¾—å¤æ‚ä¸€ç‚¹äº†ã€‚</p><h1 id="Internet"><a href="#Internet" class="headerlink" title="Internet"></a>Internet</h1><h2 id="ä»»æ„ç‰ˆæœ¬-powershell"><a href="#ä»»æ„ç‰ˆæœ¬-powershell" class="headerlink" title="ä»»æ„ç‰ˆæœ¬ powershell"></a>ä»»æ„ç‰ˆæœ¬ <em>powershell</em></h2><p>å¦‚æœä½ ç”¨çš„power shell 2.x çš„ç‰ˆæœ¬ï¼Œä½ éœ€è¦ä½¿ç”¨ <em>new-object</em> é…åˆ <em>System.Net.WebClient</em> æ¥å®ç°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$WebClient = New-Object System.Net.WebClient</span><br><span class="line">$WebClient.DownloadFile(&quot;https://www.wittyfans.com/file&quot;,&quot;C:\path\file&quot;)</span><br></pre></td></tr></table></figure><h2 id="powershell-ç‰ˆæœ¬3-x-ä»¥ä¸Š"><a href="#powershell-ç‰ˆæœ¬3-x-ä»¥ä¸Š" class="headerlink" title="powershell ç‰ˆæœ¬3.x ä»¥ä¸Š"></a><em>powershell</em> ç‰ˆæœ¬3.x ä»¥ä¸Š</h2><p>å¦‚æœæ˜¯ <em>powershell 3.x</em>, å¯ä»¥ç”¨ <em>Invoke-WebRequest</em>å‘½ä»¤ã€‚Invoke-WebRequest å’ŒLinuxå…¶å®è¿˜æœ‰ä¸€äº›å…³ç³»ã€‚å®ƒæ¯” <em>wget</em> è¿˜è¦å¥½ç”¨ä¸€äº›ï¼Œå› ä¸ºå®ƒä¸ä»…å¯ä»¥ä¸‹è½½ï¼Œè€Œä¸”å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œè§£æã€‚</p><p>ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invoke-WebRequest -Uri &quot;http://www.wittyfans.com&quot; -OutFile &quot;C:\path\file&quot;</span><br></pre></td></tr></table></figure><ul><li>é»˜è®¤ä¼šä¸‹è½½è¿™ä¸ªç½‘é¡µï¼Œæ‰€ä»¥å¦‚æœä½ æŒ‡å®šçš„ä¸‹è½½è·¯å¾„åªæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œ<em>powershell</em>ä¼šæç¤ºæ‰¾ä¸åˆ°è·¯å¾„ï¼Œè¿™æ—¶å€™ä½ éœ€è¦æŒ‡å®šè·¯å¾„åŠ æ–‡ä»¶å.</li><li>å¦‚æœä½ çœç•¥æœ¬åœ°è·¯å¾„ï¼Œåˆ™<em>powershell</em>ä¼šé»˜è®¤ä½¿ç”¨è„šæœ¬æ‰€åœ¨ç›®å½•çš„è·¯å¾„</li></ul><p>ä¸¾ä¾‹ï¼š</p><p>ä¸‹è½½<em>sublime</em>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invoke-WebRequest -uri &quot;https://download.sublimetext.com/Sublime%20Text%20Build%203207%20x64%20Setup.exe&quot; -OutFile &quot;C:\Users\wittyfans\Desktop\sublime.exe&quot;</span><br></pre></td></tr></table></figure><p><em>Invoke-WebRequest</em> é»˜è®¤æŠŠä¸‹è½½çš„ä¸œè¥¿ä¼ è¾“ç»™ç®¡é“ï¼Œå¦‚æœä½ éœ€è¦ä¿å­˜æ–‡ä»¶ï¼Œå¿…é¡»è¦æŒ‡å®š <em>outfile</em> å‚æ•°ã€‚è€Œä¸”ä½ è¿˜å¯ä»¥åœ¨ç®¡é“ä¸­åé¢å»åˆ†æè¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœä½ ä¼ è¾“çš„æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ<em>power shell</em>ä¼šé»˜è®¤ä»¥æ–‡æœ¬çš„æ–¹å¼å¤„ç†ï¼Œè¿™æ—¶å€™ä½ å°±æ²¡åŠæ³•åˆ†æäº†ï¼Œä¸è¿‡ä½ å¯ä»¥å¢åŠ ä¸€ä¸ªå‚æ•°ï¼Œåªåˆ†ææ–‡æœ¬å†…å®¹ï¼Œä½ éœ€è¦è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invoke-WebRequest &quot;http://www.wittyfans.com&quot; | Select-Object -ExpandProperty Content | Out-File &quot;file&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦ä¿å­˜æ‰€æœ‰ç®¡é“ä¸­çš„æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Invoke-WebRequest &quot;http://www.wittyfans.com&quot; -OutFile &quot;file&quot; -PassThru | Select-Object -ExpandProperty Content</span><br></pre></td></tr></table></figure><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>å¦‚æœä½ çš„ä¸‹è½½éœ€è¦éªŒè¯èº«ä»½ï¼Œ<em>powershell</em>ä¸ä¼šæç¤ºä½ ï¼Œé™¤éä½ æŒ‡å®šäº†ç”¨æˆ·åï¼Œæ­¤æ—¶<em>powershell</em>ä¼šæç¤ºä½ è¾“å…¥å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 1</span><br><span class="line">Invoke-WebRequest -Uri https://www.wittyfans.com/ -OutFile C:&quot;\path\file&quot; -Credential &quot;yourUserName&quot;</span><br><span class="line"></span><br><span class="line"># 2</span><br><span class="line">$Credentials = Get-Credential</span><br><span class="line">Invoke-WebRequest -Uri &quot;https://www.wittyfans.com&quot; -OutFile &quot;C:\path\file&quot; -Credential $Credentials</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨<em>-UseDefaultCredentials</em> å‚æ•°æ¥ä½¿ç”¨å½“å‰ç”¨æˆ·çš„å‡­æ®ï¼Œè¿™æ ·å°±å¯ä»¥çœç•¥ <em>Credential</em> å‚æ•°ã€‚</p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨å¼¹çª—æ¥è¦æ±‚è¾“å…¥å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$client = new-object System.Net.WebClient</span><br><span class="line">$client.Credentials = Get-Credential</span><br><span class="line">$client.DownloadFile(&quot;http://i.imgur.com/JnphmRt.jpg&quot;,&quot;C:\Users\Fatima Wahab\Desktop\cat.jpg&quot;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„æ£€æŸ¥èµ„æºçš„è·¯å¾„æ˜¯å¯¹çš„ï¼Œå¦‚æœä½ çš„è·¯å¾„æ˜¯è¯¥ç½‘ç«™çš„é¦–é¡µï¼Œé‚£ä¹ˆå°±ä¼šå‡ºé”™ã€‚</p><p>ä¸ºäº†ç¡®ä¿å®‰å…¨ï¼Œå»ºè®®ä½ ä½¿ç”¨ <em>https</em> éªŒè¯ï¼Œå¦‚æœåªæ˜¯åŸºæœ¬çš„éªŒè¯æ–¹å¼ï¼Œä½ çš„å¯†ç å¯èƒ½ä¼šè¢«æŠ“åŒ…åˆ†æå‡ºæ¥ã€‚</p><p>è¿™ç§ä¸‹è½½çš„éªŒè¯æ–¹å¼ä¹‹é€‚ç”¨äºé‚£äº›æœåŠ¡å™¨è‡ªå·±ç®¡ç†å‡­æ®çš„æƒ…å†µï¼Œç°ä»Šå¾ˆå¤šçš„å…¬å¸éƒ½æ˜¯ç”¨ <em>content management system (CMS)</em> æ¥éªŒè¯ç”¨æˆ·ï¼Œè¿™æ—¶å€™ä½ å°±éœ€è¦ä½¿ç”¨<em>powershell</em>å¡«å†™ä¸€äº›è¡¨å•å†æäº¤,ç”¨æˆ‘å†™çš„ä¸€ä¸ªå‡½æ•°æ¥ä¸¾ä¸ªä¾‹å­,è¿™ä¸ªå‡½æ•°åªæ˜¯éªŒè¯èº«ä»½ï¼Œæ²¡æœ‰ä¸‹è½½çš„åŠ¨ä½œ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Function login-in($userName,$userPassWord)&#123;</span><br><span class="line">    # è¯·æ±‚å¹¶ä¿å­˜session</span><br><span class="line">    $R=Invoke-WebRequest &quot;the_url&quot; -SessionVariable fb</span><br><span class="line"></span><br><span class="line">    # å¡«å†™è¡¨å•ä¿¡æ¯</span><br><span class="line">    $Form = $R.Forms[0]</span><br><span class="line">    $Form.Fields[&quot;account&quot;]=$userName</span><br><span class="line">    $Form.Fields[&quot;password&quot;] = $userPassWord</span><br><span class="line">    $Form.Fields[&quot;signIn&quot;] = &quot;Sign+in&quot;</span><br><span class="line"></span><br><span class="line">    # æäº¤ </span><br><span class="line">    $R=Invoke-WebRequest -Uri (&quot;the_url&quot; + $Form.Action) -WebSession $FB -Method POST -Body $Form.Fields</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦å®‰å…¨ä¸€äº›ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨<em>FTP</em>çš„æ–¹å¼ï¼Œå»ºè®®ç”¨<em>SFTP</em> æˆ–è€… <em>SCP</em>ï¼Œä½† <em>Invoke-WebRequest</em> ä¸æ”¯æŒè¿™äº›åè®®ï¼Œä½ å¯ä»¥å®‰è£…ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“æ¥å®ç°ï¼Œç°åœ¨å·²ç»æœ‰ç›¸å…³çš„åº“å®ç°äº†ã€‚</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><a href="https://www.addictivetips.com/windows-tips/how-to-download-a-file-with-a-powershell-command-in-windows-10/" target="_blank" rel="noopener">How To Download A File With A PowerShell Command In Windows 10</a></li><li><a href="https://stackoverflow.com/questions/51225598/downloading-a-file-with-powershell" target="_blank" rel="noopener">StackOverFlowä¸Šå…³äº Downloading a file with powershell çš„å›ç­”</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ©ç”¨ &lt;em&gt;PowerShell&lt;/em&gt; å‘èµ·è¯·æ±‚ï¼Œä¸ä»…å¯ä»¥ä¸‹è½½æ–‡ä»¶ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ç®¡é“å¯¹æ–‡ä»¶è¿›è¡Œè§£æï¼Œè¿™ä¸€ç‚¹æ¯” &lt;em&gt;CMD&lt;/em&gt; å‘½ä»¤è¡Œå’Œ &lt;em&gt;Linux&lt;/em&gt; ä¸‹çš„ &lt;em&gt;wget&lt;/em&gt; è¿˜è¦å¥½ç”¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="helpdesk" scheme="http://wittyfans.com/tags/helpdesk/"/>
    
      <category term="powershell" scheme="http://wittyfans.com/tags/powershell/"/>
    
      <category term="windows" scheme="http://wittyfans.com/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>Pandas ç»Ÿè®¡å·¥ä½œæ•°æ®</title>
    <link href="http://wittyfans.com/coding/Pandas-%E7%BB%9F%E8%AE%A1%E5%B7%A5%E4%BD%9C%E6%95%B0%E6%8D%AE.html"/>
    <id>http://wittyfans.com/coding/Pandas-ç»Ÿè®¡å·¥ä½œæ•°æ®.html</id>
    <published>2019-03-28T12:19:18.000Z</published>
    <updated>2019-03-28T12:20:58.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åˆ©ç”¨Pandasç»Ÿè®¡å·¥ä½œä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®å¯¼å…¥ã€æ—¶é—´åºåˆ—å¤„ç†ã€locæ–¹æ³•ï¼Œç»˜å›¾ç­‰ç­‰ã€‚</p></blockquote><a id="more"></a><h1 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ®"></a>å¯¼å…¥æ•°æ®</h1><p><img src="https://i.loli.net/2019/03/28/5c9cb955919aa.png" alt="import_data.png"></p><ul><li>å› ä¸ºä»txtå¯¼å…¥æ•°æ®ï¼Œæ‰€ä»¥å›ºå®šsepä¸ºï¼Œ</li><li>headerå³æ²¡æœ‰å¤´éƒ¨</li><li>çˆ¬å–æ—¥æœŸæ•°æ®åˆ™ä¼šå°†stringç±»å‹çš„dateè‡ªåŠ¨è½¬åŒ–ä¸ºdateç±»å‹ï¼Œæ–¹ä¾¿æ•´ç†</li></ul><h1 id="è®¾ç½®index"><a href="#è®¾ç½®index" class="headerlink" title="è®¾ç½®index"></a>è®¾ç½®index</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwdlog = pwdlog.set_index(&apos;date&apos;)</span><br></pre></td></tr></table></figure><p>è®¾ç½®indexæ–¹ä¾¿ç´¢å¼•ï¼Œå¯¹æ—¶é—´è¿›è¡Œåˆ‡ç‰‡ã€‚</p><h1 id="æ¢ç´¢æ•°æ®"><a href="#æ¢ç´¢æ•°æ®" class="headerlink" title="æ¢ç´¢æ•°æ®"></a>æ¢ç´¢æ•°æ®</h1><h2 id="æ•°æ®æè¿°"><a href="#æ•°æ®æè¿°" class="headerlink" title="æ•°æ®æè¿°"></a>æ•°æ®æè¿°</h2><p><img src="https://i.loli.net/2019/03/28/5c9cb919e4393.png" alt="describe.png"></p><h2 id="æŒ‰å¤©æ•°è®¡ç®—æ•°æ®"><a href="#æŒ‰å¤©æ•°è®¡ç®—æ•°æ®" class="headerlink" title="æŒ‰å¤©æ•°è®¡ç®—æ•°æ®"></a>æŒ‰å¤©æ•°è®¡ç®—æ•°æ®</h2><p><img src="https://i.loli.net/2019/03/28/5c9cb9561af75.png" alt="resample_d.png"></p><p>resampleæ–¹æ³•å°†æŒ‰ç…§æ—¶é—´åŒºé—´ç»Ÿè®¡æ•°é‡ï¼Œcountæ–¹æ³•ä¸ºç»Ÿè®¡ï¼Œå¦‚æœæ˜¯sumåˆ™ä¸ºç›¸åŠ ï¼Œå¦ä¹Ÿæœ‰æœºé…¸å¹³å‡å€¼ç­‰æ–¹æ³•å¯é€‰ï¼Œresampleå¯ä»¥å°†å¤©æ•°ç¼©å°ä¸ºæ—¶é—´ï¼Œå¯¹äºçš„å€¼å°†ä¼šè¢«å¡«å……ä¸ºä½ æƒ³è¦è®¾ç½®çš„å€¼ï¼Œä¹Ÿå¯ä»¥å°†åˆ†é’Ÿï¼Œå°æ—¶ç­‰ç»Ÿè®¡æˆå¤©æ•°ï¼Œå‘¨æ•°ï¼Œå·¥ä½œæ—¥ç­‰ç­‰ã€‚</p><h2 id="è°çš„æ•°æ®æœ€å¤šï¼Ÿ"><a href="#è°çš„æ•°æ®æœ€å¤šï¼Ÿ" class="headerlink" title="è°çš„æ•°æ®æœ€å¤šï¼Ÿ"></a>è°çš„æ•°æ®æœ€å¤šï¼Ÿ</h2><p><img src="https://i.loli.net/2019/03/28/5c9cb956112b1.png" alt="reset_numbers.png"></p><p>to_frameæ–¹æ³•ä¸»è¦å°†è¿™äº›æ•°æ®è½¬åŒ–ä¸ºframeã€‚</p><h2 id="å“ªä¸€å¤©çš„æ•°æ®æœ€å¤šï¼Ÿ"><a href="#å“ªä¸€å¤©çš„æ•°æ®æœ€å¤šï¼Ÿ" class="headerlink" title="å“ªä¸€å¤©çš„æ•°æ®æœ€å¤šï¼Ÿ"></a>å“ªä¸€å¤©çš„æ•°æ®æœ€å¤šï¼Ÿ</h2><p><img src="https://i.loli.net/2019/03/28/5c9cb9561cd6c.png" alt="reset_order_by_day.png"></p><h2 id="æ¢ç´¢2-13è¿™ä¸€å¤©çš„æ•°æ®"><a href="#æ¢ç´¢2-13è¿™ä¸€å¤©çš„æ•°æ®" class="headerlink" title="æ¢ç´¢2/13è¿™ä¸€å¤©çš„æ•°æ®"></a>æ¢ç´¢2/13è¿™ä¸€å¤©çš„æ•°æ®</h2><p><img src="https://i.loli.net/2019/03/28/5c9cb9553474b.png" alt="2_13_loc .png"></p><p>å¯ä»¥çœ‹åˆ°ä¸€å…±æ”¶åˆ°133ä¸ªç”¨æˆ·æ”¹å¯†ç è¯·æ±‚ã€‚</p><h2 id="2-13è°å¤„ç†çš„è¯·æ±‚æœ€å¤š"><a href="#2-13è°å¤„ç†çš„è¯·æ±‚æœ€å¤š" class="headerlink" title="2/13è°å¤„ç†çš„è¯·æ±‚æœ€å¤š"></a>2/13è°å¤„ç†çš„è¯·æ±‚æœ€å¤š</h2><p><img src="https://i.loli.net/2019/03/28/5c9cb95556338.png" alt="2_13_loc_it.png"></p><h1 id="ç»˜å›¾"><a href="#ç»˜å›¾" class="headerlink" title="ç»˜å›¾"></a>ç»˜å›¾</h1><h1 id="æŒ‰å¤©"><a href="#æŒ‰å¤©" class="headerlink" title="æŒ‰å¤©"></a>æŒ‰å¤©</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pwdlog.resample(&apos;d&apos;).count()[&apos;name&apos;].plot()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/03/28/5c9cb955da58b.png" alt="plot_by_day.png"></p><h1 id="æŒ‰å°æ—¶"><a href="#æŒ‰å°æ—¶" class="headerlink" title="æŒ‰å°æ—¶"></a>æŒ‰å°æ—¶</h1><p><img src="https://i.loli.net/2019/03/28/5c9cb955dd364.png" alt="plot_h.png"></p><h1 id="æŒ‰åˆ†é’Ÿ"><a href="#æŒ‰åˆ†é’Ÿ" class="headerlink" title="æŒ‰åˆ†é’Ÿ"></a>æŒ‰åˆ†é’Ÿ</h1><p><img src="https://i.loli.net/2019/03/28/5c9cb955e96ec.png" alt="plot_m.png"></p><h1 id="æŒ‰åå­—"><a href="#æŒ‰åå­—" class="headerlink" title="æŒ‰åå­—"></a>æŒ‰åå­—</h1><p><img src="https://i.loli.net/2019/03/28/5c9cb95565cb9.png" alt="fz.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;åˆ©ç”¨Pandasç»Ÿè®¡å·¥ä½œä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®å¯¼å…¥ã€æ—¶é—´åºåˆ—å¤„ç†ã€locæ–¹æ³•ï¼Œç»˜å›¾ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="bigdata" scheme="http://wittyfans.com/tags/bigdata/"/>
    
      <category term="pandas" scheme="http://wittyfans.com/tags/pandas/"/>
    
  </entry>
  
  <entry>
    <title>NumPyæ“ä½œæ•°ç»„</title>
    <link href="http://wittyfans.com/coding/NumPy%E6%93%8D%E4%BD%9C%E6%95%B0%E7%BB%84.html"/>
    <id>http://wittyfans.com/coding/NumPyæ“ä½œæ•°ç»„.html</id>
    <published>2019-02-09T15:00:40.000Z</published>
    <updated>2019-02-09T16:24:25.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¯¹æ•°ç»„çš„æ“ä½œæ˜¯ <em>NumPy</em> ä¸­å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œäº†è§£è¿™äº›å†…ç½®çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ çš„æ•ˆç‡äº‹åŠåŠŸå€ã€‚</p></blockquote><a id="more"></a><h1 id="æ“ä½œæ•°ç»„"><a href="#æ“ä½œæ•°ç»„" class="headerlink" title="æ“ä½œæ•°ç»„"></a>æ“ä½œæ•°ç»„</h1><h2 id="np-meshgridæ–¹æ³•"><a href="#np-meshgridæ–¹æ³•" class="headerlink" title="np.meshgridæ–¹æ³•"></a>np.meshgridæ–¹æ³•</h2><p>å¦‚æœä½ ç»™meshgridä¸¤ä¸ªä¸€ä½æ•°ç»„ï¼ŒAåƒè¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ğ‘1,ğ‘2,ğ‘3]</span><br></pre></td></tr></table></figure><p>Båƒè¿™æ ·:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ğ‘1,ğ‘2,ğ‘3]</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ è¿è¡Œ <em>np.meshgrid(A,B)</em>,é‚£ä¹ˆä½ ä¼šå¾—åˆ°ä¸€ä¸ªåµŒå¥—æ•°ç»„ï¼Œé‡Œé¢åˆ†åˆ«æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ğ‘1,ğ‘1,ğ‘1],[ğ‘2,ğ‘2,ğ‘2],[ğ‘3,ğ‘3,ğ‘3]]</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[ğ‘1,ğ‘1,ğ‘1],[ğ‘2,ğ‘2,ğ‘2],[ğ‘3,ğ‘3,ğ‘3]]</span><br></pre></td></tr></table></figure><p>By adding these two arrays together, we can create the 2D array containing, as its elements, every combination of sums between the numbers in the original elements. Arrays such as linspace and arange are typically used to constuct N-D arrays used to plot in 3 dimensions.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import plotly.plotly as py</span><br><span class="line">import plotly.graph_objs as go</span><br><span class="line"></span><br><span class="line">x = np.arange(-10, 10, 0.4)</span><br><span class="line">y = np.arange(-10, 10, 0.4)</span><br><span class="line">XX, YY = np.meshgrid(x, y)</span><br><span class="line">ZZ = np.sin(XX**2 + YY**2) / (XX**2 + YY**2)</span><br><span class="line"></span><br><span class="line">lines = []</span><br><span class="line">line_marker = dict(color=&apos;#0066FF&apos;, width=2)</span><br><span class="line">for i, j, k in zip(XX, YY, ZZ):</span><br><span class="line">    lines.append(go.Scatter3d(x=i, y=j, z=k, mode=&apos;lines&apos;, line=line_marker))</span><br><span class="line"></span><br><span class="line">layout = go.Layout(</span><br><span class="line">    title=&apos;Wireframe with Meshgrid&apos;,</span><br><span class="line">    showlegend=False</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=lines, layout=layout)</span><br><span class="line">py.iplot(fig, filename=&apos;numpy-arange-to-meshgrid&apos;)</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2019/02/08/5c5d6f5855efe.png" alt="ç»˜å›¾è¯·é…åˆplotly"></p><h2 id="np-whereæ–¹æ³•"><a href="#np-whereæ–¹æ³•" class="headerlink" title="np.whereæ–¹æ³•"></a>np.whereæ–¹æ³•</h2><p>å‡è®¾ä½ æœ‰ä¸‰ä¸ªæ•°ç»„ï¼Œç¬¬ä¸‰ä¸ªæ•°ç»„å­˜çš„æ˜¯å¸ƒå°”å€¼ï¼Œä½ æƒ³è¦æŒ‰ç…§æ¡ä»¶å»å‰ä¸¤ä¸ªæ•°ç»„ä¸­é€‰å€¼ï¼Œå¦‚æœç¬¬ä¸‰ä¸ªæ•°ç»„ä¸­çš„å€¼æ˜¯çœŸï¼Œé‚£ä¹ˆå°±å»ç¬¬ä¸€ä¸ªæ•°ç»„ä¸­æ‹¿å¯¹åº”çš„å€¼ï¼Œå¦åˆ™å°±æ‹¿ç¬¬äºŒä¸ªæ•°ç»„ä¸­çš„å€¼ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<em>zip</em> å‡½æ•°å®ç°è¿™ä¸€éœ€æ±‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">xarr = np.array([1.1, 1.2, 1.3, 1.4, 1.5])</span><br><span class="line"></span><br><span class="line">yarr = np.array([2.1, 2.2, 2.3, 2.4, 2.5])</span><br><span class="line"></span><br><span class="line">cond = np.array([True, False, True, True, False])</span><br><span class="line"></span><br><span class="line">result = [(x if contidion else y) for x,y,contidion in zip(xarr,yarr,cond)]</span><br><span class="line">result</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¿™æ ·å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼š</p><ol><li>å¦‚æœæ•°ç»„å¾ˆå¤§å°±ä¼šæœ‰æ€§èƒ½é—®é¢˜</li><li>å¤šé‡æ•°ç»„æ— æ³•è¿™æ ·æ“ä½œ</li></ol><p>åˆ©ç”¨ <em>np.where</em> æ–¹æ³•ï¼Œå°±å¯ä»¥ç®€å•çš„å®ç°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result = np.where(cond,xarr,yarr)</span><br></pre></td></tr></table></figure><p><em>np.where</em> ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«äº†ä½ éœ€è¦çš„å€¼ã€‚</p><p>å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå°†ä¸€å †æ•°ä¸­çš„å€¼è¿›è¡Œæ›¿æ¢ï¼Œæ­£æ•°å˜æˆ2ï¼Œè´Ÿæ•°å˜æˆ-2:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randn(2, 10)</span><br><span class="line">arr</span><br><span class="line"></span><br><span class="line"># out</span><br><span class="line">array([[-0.81110748,  0.68433723,  0.52473733, -0.41852741, -2.84401244,</span><br><span class="line">        -1.68747418, -0.11169401, -1.10101844, -0.8750002 ,  1.18884515],</span><br><span class="line">       [-0.30515971,  0.60605408,  0.16320091, -0.99053775, -0.76669183,</span><br><span class="line">        -0.29594746,  0.33500369,  0.28612921, -0.93350166, -0.67301814]])</span><br><span class="line"></span><br><span class="line">np.where(arr&lt;0,-2,2)</span><br><span class="line"># out</span><br><span class="line">array([[-2,  2,  2, -2, -2, -2, -2, -2, -2,  2],</span><br><span class="line">       [-2,  2,  2, -2, -2, -2,  2,  2, -2, -2]])</span><br></pre></td></tr></table></figure><p>é€šè¿‡å°†arræœ¬èº«ä¼ è¿›å»ï¼Œå¯ä»¥æŒ‡ä¿®æ”¹æŸä¸€éƒ¨åˆ†çš„å€¼ï¼Œæ¯”å¦‚ä¸‹é¢æ˜¯æŒ‡å°†è´Ÿæ•°ä¿®æ”¹ä¸º-2ï¼Œæ­£æ•°ä¸å˜:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">np.where(arr&lt;0,-2,arr)</span><br><span class="line"># out</span><br><span class="line"></span><br><span class="line">array([[-2.        ,  0.68433723,  0.52473733, -2.        , -2.        ,</span><br><span class="line">        -2.        , -2.        , -2.        , -2.        ,  1.18884515],</span><br><span class="line">       [-2.        ,  0.60605408,  0.16320091, -2.        , -2.        ,</span><br><span class="line">        -2.        ,  0.33500369,  0.28612921, -2.        , -2.        ]])</span><br></pre></td></tr></table></figure><h2 id="æ•°å­¦æ–¹æ³•"><a href="#æ•°å­¦æ–¹æ³•" class="headerlink" title="æ•°å­¦æ–¹æ³•"></a>æ•°å­¦æ–¹æ³•</h2><p><em>Numpy</em> æ”¯æŒå¾ˆå¤šå¸¸ç”¨çš„æ•°å­¦æ–¹æ³•ï¼Œæ¯”å¦‚å¯¹æ•°ç»„æ±‚å’Œï¼Œç®—å¹³å‡å€¼ï¼Œç­‰ç­‰ï¼Œå¯ä»¥ç›´æ¥å¯¹æ•°ç»„å¯¹è±¡è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <em>np.method</em> çš„æ–¹å¼è°ƒç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.rand(2,2)*10</span><br><span class="line">arr</span><br><span class="line">out:</span><br><span class="line">array([[ 0.89779239,  8.62581317],</span><br><span class="line">       [ 3.48522587,  5.17990087]])</span><br></pre></td></tr></table></figure><h2 id="å¹³å‡å€¼"><a href="#å¹³å‡å€¼" class="headerlink" title="å¹³å‡å€¼"></a>å¹³å‡å€¼</h2><p><em>arr.mean()</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4.5471830734485419</span><br></pre></td></tr></table></figure><p>å¯¹æ¨ªå‘æ•°å€¼æ±‚å¹³å‡ï¼š</p><p><em>arr.mean(axis=1)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([ 4.76180278,  4.33256337])</span><br></pre></td></tr></table></figure><p>çºµå‘æ•°æ±‚å¹³å‡ï¼š</p><p><em>arr.mean(axis=0)</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([ 2.19150913,  6.90285702])</span><br></pre></td></tr></table></figure><h2 id="æ±‚å’Œ"><a href="#æ±‚å’Œ" class="headerlink" title="æ±‚å’Œ"></a>æ±‚å’Œ</h2><p><em>arr.sum()</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">18.188732293794168</span><br></pre></td></tr></table></figure><p>æ±‚å’Œå‡½æ•°ä¹Ÿå¯ä»¥ç”¨ <em>axis</em> æ¥æŒ‡å®šè¡Œæˆ–åˆ—æ±‚å’Œã€‚</p><blockquote><p>æ›´å¤šæ–¹æ³•è¯·å‚è€ƒé™„å½•ã€‚</p></blockquote><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p><img src="https://i.loli.net/2019/02/09/5c5e8e1bb9f55.jpg" alt="math_funcs.jpg"></p><h2 id="å¸ƒå°”æ•°ç»„æ–¹æ³•"><a href="#å¸ƒå°”æ•°ç»„æ–¹æ³•" class="headerlink" title="å¸ƒå°”æ•°ç»„æ–¹æ³•"></a>å¸ƒå°”æ•°ç»„æ–¹æ³•</h2><p>å¯ä»¥å¯¹ä¸€ä¸ªåŒ…å«Trueå’ŒFalseçš„å¸ƒå°”æ•°ç»„æ‰§è¡Œ <em>sum</em> è¿ç®—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randn(100)</span><br><span class="line">(arr &gt; 0).sum()</span><br><span class="line"></span><br><span class="line">49</span><br></pre></td></tr></table></figure><p><em>bools.any()</em> æµ‹è¯•æ•°ç»„ä¸­æ˜¯å¦æœ‰ <em>True</em> çš„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bools = np.array([False])</span><br><span class="line">bools.any()</span><br><span class="line"></span><br><span class="line"># è¾“å‡º</span><br><span class="line">False</span><br></pre></td></tr></table></figure><p><em>bools.all()</em> æµ‹è¯•æ‰€æœ‰å€¼æ˜¯å¦éƒ½æ˜¯ <em>True</em>.</p><h2 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h2><p>NumPy çš„æ•°ç»„æ’åºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randn(6)</span><br><span class="line">arr.sort()</span><br></pre></td></tr></table></figure><p><em>sort</em> æ˜¯ <em>in-place</em> çš„ï¼Œ ä¹Ÿå°±æ˜¯ä¼šä¿®æ”¹åŸæ¥æ•°ç»„çš„æ•°æ®ã€‚</p><h2 id="Uniqueå‡½æ•°"><a href="#Uniqueå‡½æ•°" class="headerlink" title="Uniqueå‡½æ•°"></a>Uniqueå‡½æ•°</h2><p>uniqueå‡½æ•°è¿”å›æ’åºåçš„ã€æ•°ç»„ä¸­å”¯ä¸€çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">names = np.array([&apos;Bob&apos;, &apos;Joe&apos;, &apos;Will&apos;, &apos;Bob&apos;, &apos;Will&apos;, &apos;Joe&apos;, &apos;Joe&apos;])</span><br><span class="line">np.unique(names)</span><br></pre></td></tr></table></figure><p>å®ƒçš„ä½œç”¨å’Œä¸‹é¢çš„ä»£ç å·®ä¸å¤š:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sorted(set(names))</span><br></pre></td></tr></table></figure><h2 id="in1då‡½æ•°"><a href="#in1då‡½æ•°" class="headerlink" title="in1då‡½æ•°"></a>in1då‡½æ•°</h2><p>in1då‡½æ•°æµ‹è¯•ä¸€ä¸ªæ•°ç»„ä¸­çš„å€¼ï¼Œæ˜¯å¦éƒ½åœ¨å¦ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¦‚æœåœ¨å°±è¿”å›Trueï¼Œä¸å†è¿”å›False:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">values = np.array([1,2,3])</span><br><span class="line">np.in1d(values,[1])</span><br><span class="line"># </span><br><span class="line">arrray([True,False,False])</span><br></pre></td></tr></table></figure><p>æ›´å¤šå‡½æ•°è¯·å‚è€ƒä¸‹å›¾ï¼š</p><p><img src="https://i.loli.net/2019/02/09/5c5eea638e62f.jpeg" alt="array_set_operations.jpeg"></p><h1 id="NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ"><a href="#NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ" class="headerlink" title="NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ"></a>NumPyæ•°æ®æŒä¹…åŒ–ã€éšæœºæ•°ç”Ÿæˆ</h1><p>NumPyå¯ä»¥ä»ç£ç›˜è¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥å°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ã€‚è¿™ä¸ªéƒ¨åˆ†åªè®²ä¸€äº›åŸºæœ¬çš„å†…å®¹ï¼Œå› ä¸ºå¤§å®¶å¯èƒ½æ›´å–œæ¬¢ç”¨ <em>Pandas</em> æ¥å¯¼å…¥æ•°æ®ã€‚</p><p>åˆ†åˆ«ä»‹ç»ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ul><li><em>np.save</em></li><li><em>np.load</em></li></ul><h2 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arrange(10)</span><br><span class="line">np.save(&apos;/Users/wittyfans/Desktop/data&apos;,arr)</span><br></pre></td></tr></table></figure><h2 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">saved = np.load(&apos;/Users/wittyfans/Desktop/data.npy&apos;)</span><br><span class="line">saved</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</span><br></pre></td></tr></table></figure><h2 id="æ‰“åŒ…å‚¨å­˜"><a href="#æ‰“åŒ…å‚¨å­˜" class="headerlink" title="æ‰“åŒ…å‚¨å­˜"></a>æ‰“åŒ…å‚¨å­˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.savez(&apos;path&apos;,a=arr,b=arr)</span><br></pre></td></tr></table></figure><h2 id="è¯»å–æ‰“åŒ…æ–‡ä»¶"><a href="#è¯»å–æ‰“åŒ…æ–‡ä»¶" class="headerlink" title="è¯»å–æ‰“åŒ…æ–‡ä»¶"></a>è¯»å–æ‰“åŒ…æ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arch = np.load(&apos;path.npz&apos;)</span><br><span class="line">arch[&apos;a&apos;] # é€šè¿‡ç±»ä¼¼dictçš„æ–¹å¼æ¥è¯»å–æ•°æ®</span><br><span class="line">arch[&apos;b&apos;]</span><br></pre></td></tr></table></figure><h2 id="éšæœºç”Ÿæˆ"><a href="#éšæœºç”Ÿæˆ" class="headerlink" title="éšæœºç”Ÿæˆ"></a>éšæœºç”Ÿæˆ</h2><p>ç”Ÿæˆç¬¦åˆæ­£æ€åˆ†å¸ƒçš„4x4æ•°ç»„:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">samples = np.random.normal(size=(4, 4))</span><br><span class="line">samples</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([[ 0.5732,</span><br><span class="line"></span><br><span class="line">0.1933, 0.4429, 1.2796],</span><br><span class="line"></span><br><span class="line">[ 0.575 , [-0.5367, [ 0.1525,</span><br><span class="line"></span><br><span class="line">0.4339, -0.7658, -1.237 ],</span><br><span class="line"></span><br><span class="line">1.8545, -0.92 , -0.1082],</span><br><span class="line"></span><br><span class="line">0.9435, -1.0953, -0.144 ]])</span><br></pre></td></tr></table></figure><p>Pythonå†…ç½®çš„ <em>random</em> æ¨¡å—ï¼Œç›¸æ¯”äºNumPyè¦æ…¢ä¸€ä¸ªæ•°é‡çº§ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from random import normalvariate</span><br><span class="line"></span><br><span class="line">N = 1000000</span><br><span class="line"></span><br><span class="line">%timeit samples = [normalvariate(0, 1) for _ in range(N)] 1.77 s +- 126 ms per loop (mean +- std. dev. of 7 runs, 1 loop each)</span><br><span class="line"></span><br><span class="line">%timeit np.random.normal(size=N) 61.7 ms +- 1.32 ms per loop (mean +- std. dev. of 7 runs, 10 loops each)</span><br></pre></td></tr></table></figure><p>è¿™äº›éšæœºæ•°éƒ½æ˜¯æ ¹æ®ç§å­å³ <em>seed</em> ç”Ÿæˆçš„,å¦‚æœæ¯æ¬¡ç”Ÿæˆéšæœºæ•°çš„æ—¶å€™seedéƒ½ä¸å˜ï¼Œé‚£ä¹ˆæ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°éƒ½ä¼šæ˜¯ä¸€æ ·çš„ã€‚é»˜è®¤NumPyä¼šæ ¹æ®æ—¶é—´æ¥æ›´æ”¹seedï¼Œè¿™æ ·æ¯æ¬¡æˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°ä¸ä¸€æ ·çš„éšæœºæ•°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># éšæœºäº§ç”Ÿä¸€ä¸ªæ•°æ®ï¼Œæ­¤éšæœºæ•°æ˜¯å˜åŠ¨çš„</span><br><span class="line">print(np.random.random())</span><br><span class="line">print(&apos;--åˆ†å‰²çº¿0--&apos;)</span><br><span class="line"># è®¾ç½®éšæœºæ•°ç§å­</span><br><span class="line">np.random.seed(1)</span><br><span class="line"># äº§ç”Ÿä¸€ç»„é¡ºåºçš„å›ºå®šçš„æ•°æ•°æ®</span><br><span class="line">for _ in range(5):</span><br><span class="line">    print(np.random.random())</span><br><span class="line"># æ­¤æ—¶ï¼Œå¦‚æœå†ç”Ÿæˆä¸€ä¸ªæ•°æ®ï¼Œè¯¥æ•°æ®ä¹Ÿæ˜¯å›ºå®šçš„</span><br><span class="line">print(&apos;--åˆ†å‰²çº¿1--&apos;)</span><br><span class="line">print(np.random.random())</span><br><span class="line"># è¯´æ˜æˆ‘ä»¬è®¾ç½®çš„ç§å­ä¼šä¸€ç›´æœ‰æ•ˆï¼Œé™¤éæˆ‘ä»¬å†æ¬¡è®¾ç½®</span><br><span class="line">np.random.seed()</span><br><span class="line">print(&apos;--åˆ†å‰²çº¿2--&apos;)</span><br><span class="line"># æ­¤éšæœºæ•°æ˜¯å˜åŠ¨çš„</span><br><span class="line">print(np.random.random())</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul><li><a href="https://www.jianshu.com/p/7f4f2303a125" target="_blank" rel="noopener">æ•°æ®åˆ†æå­¦ä¹ ç¬”è®°</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¯¹æ•°ç»„çš„æ“ä½œæ˜¯ &lt;em&gt;NumPy&lt;/em&gt; ä¸­å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œäº†è§£è¿™äº›å†…ç½®çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ çš„æ•ˆç‡äº‹åŠåŠŸå€ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="numpy" scheme="http://wittyfans.com/tags/numpy/"/>
    
  </entry>
  
  <entry>
    <title>Numpy Universal Functions</title>
    <link href="http://wittyfans.com/coding/Numpy-Universal-Functions.html"/>
    <id>http://wittyfans.com/coding/Numpy-Universal-Functions.html</id>
    <published>2019-02-09T08:01:12.000Z</published>
    <updated>2019-02-09T08:05:49.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Numpyä¸­ä¸€äº›åŸºæœ¬å‡½æ•°å‚è€ƒã€‚</p></blockquote><a id="more"></a><h1 id="Universal-Functions"><a href="#Universal-Functions" class="headerlink" title="Universal Functions"></a>Universal Functions</h1><p><em>Universal Functions</em> ä¹Ÿå« <em>ufunc</em>ï¼Œæ¯”å¦‚å¼€æ ¹ <em>sqrt</em>ï¼Œ<em>exp</em>:</p><p><em>Sqrt:</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(10)</span><br><span class="line">np.sqrt(arr)</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">array([ 0.        ,  1.        ,  1.41421356,  1.73205081,  2.        ,</span><br><span class="line">        2.23606798,  2.44948974,  2.64575131,  2.82842712,  3.        ])</span><br></pre></td></tr></table></figure><p><em>exp:</em></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">np.exp(arr)</span><br><span class="line">è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">array([  1.00000000e+00,   2.71828183e+00,   7.38905610e+00,</span><br><span class="line">         2.00855369e+01,   5.45981500e+01,   1.48413159e+02,</span><br><span class="line">         4.03428793e+02,   1.09663316e+03,   2.98095799e+03,</span><br><span class="line">         8.10308393e+03])</span><br></pre></td></tr></table></figure><p>ä½ æœ‰ä¸¤ä¸ªæ•°ç»„ï¼Œå®ƒä»¬çš„é•¿åº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½ éœ€è¦å¯¹æ¯”ä¸¤ä¸ªæ•°ç»„ä¸­å¯¹åº”çš„å€¼ï¼Œè¿”å›å¤§çš„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a = np.random.randn(1,10)*10</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([[  7.45106569,   2.47039999,  13.3143474 ,  11.73359137,</span><br><span class="line">         -5.16471496,   3.37688733,  -3.03783497,  13.94821303,</span><br><span class="line">        -13.79166595,   4.35553629]])</span><br><span class="line"></span><br><span class="line">b = np.random.randn(1,10)*10</span><br><span class="line"># è¾“å‡º</span><br><span class="line"></span><br><span class="line">array([[  0.73315303,   5.87494888,   4.01168595,   3.78652398,</span><br><span class="line">         -0.35151181,  -5.61564742,   3.0190971 ,  -2.28944227,</span><br><span class="line">          6.45900038,  14.22907421]])</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ <em>np</em> çš„ <em>maximun</em> å‡½æ•°å°±å¯ä»¥åšåˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.maximum(a,b)</span><br><span class="line"># è¾“å‡ºï¼š</span><br><span class="line"></span><br><span class="line">array([[  7.45106569,   5.87494888,  13.3143474 ,  11.73359137,</span><br><span class="line">         -0.35151181,   3.37688733,   3.0190971 ,  13.94821303,</span><br><span class="line">          6.45900038,  14.22907421]])</span><br></pre></td></tr></table></figure><h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><p><img src="https://i.loli.net/2019/02/09/5c5e89c06da7b.jpg" alt="ufuncs"></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Numpyä¸­ä¸€äº›åŸºæœ¬å‡½æ•°å‚è€ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="coding" scheme="http://wittyfans.com/categories/coding/"/>
    
    
      <category term="python" scheme="http://wittyfans.com/tags/python/"/>
    
      <category term="numpy" scheme="http://wittyfans.com/tags/numpy/"/>
    
  </entry>
  
</feed>
